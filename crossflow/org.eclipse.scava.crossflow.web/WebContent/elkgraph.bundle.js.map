{"version":3,"sources":["webpack:///webpack/bootstrap 24a07b66a7b2f2e95504","webpack:///./~/inversify/lib/inversify.js","webpack:///./~/sprotty/lib/base/types.js","webpack:///./~/sprotty/lib/base/model/smodel.js","webpack:///./~/sprotty/lib/utils/geometry.js","webpack:///./~/inversify/lib/constants/metadata_keys.js","webpack:///./~/sprotty/lib/base/commands/command.js","webpack:///./~/sprotty/lib/base/model/smodel-utils.js","webpack:///./~/sprotty/lib/features/bounds/model.js","webpack:///./~/inversify/lib/constants/error_msgs.js","webpack:///./~/inversify/lib/planning/metadata.js","webpack:///./~/sprotty/lib/base/model/smodel-factory.js","webpack:///./~/sprotty/lib/base/views/vnode-utils.js","webpack:///./~/sprotty/lib/features/select/model.js","webpack:///./~/inversify/lib/annotation/decorator_utils.js","webpack:///./~/inversify/lib/constants/literal_types.js","webpack:///./~/sprotty/lib/base/views/mouse-tool.js","webpack:///./~/sprotty/lib/features/viewport/model.js","webpack:///./~/inversify/lib/utils/guid.js","webpack:///./~/snabbdom-jsx/snabbdom-jsx.js","webpack:///./~/sprotty/lib/base/animations/animation.js","webpack:///./~/sprotty/lib/base/views/key-tool.js","webpack:///./~/sprotty/lib/features/edit/model.js","webpack:///./~/sprotty/lib/features/move/model.js","webpack:///./~/sprotty/lib/base/actions/action-handler.js","webpack:///./~/sprotty/lib/features/export/svg-exporter.js","webpack:///./~/sprotty/lib/features/viewport/viewport.js","webpack:///./~/sprotty/lib/utils/registry.js","webpack:///(webpack)/buildin/global.js","webpack:///./~/process/browser.js","webpack:///./~/inversify/lib/utils/serialization.js","webpack:///./~/sprotty/lib/base/animations/animation-frame-syncer.js","webpack:///./~/sprotty/lib/base/features/set-model.js","webpack:///./~/sprotty/lib/features/bounds/bounds-manipulation.js","webpack:///./~/sprotty/lib/features/fade/model.js","webpack:///./~/sprotty/lib/features/hover/hover.js","webpack:///./~/sprotty/lib/features/hover/model.js","webpack:///./~/sprotty/lib/utils/keyboard.js","webpack:///./~/sprotty/lib/index.js","webpack:///./~/buffer/index.js","webpack:///./~/inherits/inherits_browser.js","webpack:///./~/readable-stream/lib/_stream_duplex.js","webpack:///./~/sprotty/lib/base/features/initialize-canvas.js","webpack:///./~/sprotty/lib/features/edit/edit-routing.js","webpack:///./~/sprotty/lib/features/expand/expand.js","webpack:///./~/sprotty/lib/features/export/model.js","webpack:///./~/sprotty/lib/features/move/move.js","webpack:///./~/sprotty/lib/graph/sgraph.js","webpack:///./~/core-util-is/lib/util.js","webpack:///./~/inversify/lib/syntax/binding_on_syntax.js","webpack:///./~/inversify/lib/syntax/binding_when_syntax.js","webpack:///./~/snabbdom/h.js","webpack:///./~/snabbdom/vnode.js","webpack:///./~/sprotty/lib/base/actions/action-dispatcher.js","webpack:///./~/sprotty/lib/base/actions/action.js","webpack:///./~/sprotty/lib/base/model/smodel-storage.js","webpack:///./~/sprotty/lib/base/views/dom-helper.js","webpack:///./~/sprotty/lib/features/bounds/abstract-layout.js","webpack:///./~/sprotty/lib/features/bounds/layout.js","webpack:///./~/sprotty/lib/features/button/button-handler.js","webpack:///./~/sprotty/lib/features/button/model.js","webpack:///./~/sprotty/lib/features/expand/model.js","webpack:///./~/sprotty/lib/features/fade/fade.js","webpack:///./~/sprotty/lib/features/open/open.js","webpack:///./~/sprotty/lib/features/undo-redo/undo-redo.js","webpack:///./~/sprotty/lib/features/update/model-matching.js","webpack:///./~/sprotty/lib/features/update/update-model.js","webpack:///./~/sprotty/lib/features/viewport/center-fit.js","webpack:///./~/sprotty/lib/features/viewport/viewport-root.js","webpack:///./~/sprotty/lib/model-source/model-source.js","webpack:///./~/sprotty/lib/utils/browser.js","webpack:///./~/sprotty/lib/utils/iterable.js","webpack:///./~/sprotty/lib/utils/logging.js","webpack:///./~/process-nextick-args/index.js","webpack:///./~/file-saver/FileSaver.js","webpack:///./~/inversify/lib/planning/metadata_reader.js","webpack:///./~/inversify/lib/planning/target.js","webpack:///./~/inversify/lib/syntax/binding_when_on_syntax.js","webpack:///./~/inversify/lib/syntax/constraint_helpers.js","webpack:///./~/snabbdom/is.js","webpack:///./~/snabbdom/snabbdom.js","webpack:///./~/sprotty/lib/base/animations/easing.js","webpack:///./~/sprotty/lib/base/commands/command-stack.js","webpack:///./~/sprotty/lib/base/views/thunk-view.js","webpack:///./~/sprotty/lib/base/views/view.js","webpack:///./~/sprotty/lib/base/views/viewer-cache.js","webpack:///./~/sprotty/lib/base/views/viewer-options.js","webpack:///./~/sprotty/lib/base/views/viewer.js","webpack:///./~/sprotty/lib/base/views/vnode-decorators.js","webpack:///./~/sprotty/lib/features/bounds/hbox-layout.js","webpack:///./~/sprotty/lib/features/bounds/stack-layout.js","webpack:///./~/sprotty/lib/features/bounds/vbox-layout.js","webpack:///./~/sprotty/lib/features/export/export.js","webpack:///./~/sprotty/lib/features/open/model.js","webpack:///./~/sprotty/lib/features/select/select.js","webpack:///./~/sprotty/lib/features/viewport/scroll.js","webpack:///./~/sprotty/lib/features/viewport/zoom.js","webpack:///./~/sprotty/lib/model-source/diagram-server.js","webpack:///./~/sprotty/lib/model-source/diagram-state.js","webpack:///./~/sprotty/lib/utils/anchors.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./~/safe-buffer/index.js","webpack:///./~/events/events.js","webpack:///./~/readable-stream/lib/_stream_writable.js","webpack:///./~/readable-stream/readable-browser.js","webpack:///./lib/sprotty-config.js","webpack:///./lib/url-parameters.js","webpack:///./~/reflect-metadata/Reflect.js","webpack:///./lib/sprotty-model.js","webpack:///./lib/views.js","webpack:///./~/html-parse-stringify2/lib/parse-tag.js","webpack:///./~/html-parse-stringify2/lib/parse.js","webpack:///./~/inversify/lib/annotation/inject.js","webpack:///./~/inversify/lib/annotation/injectable.js","webpack:///./~/inversify/lib/annotation/multi_inject.js","webpack:///./~/inversify/lib/annotation/named.js","webpack:///./~/inversify/lib/annotation/optional.js","webpack:///./~/inversify/lib/annotation/post_construct.js","webpack:///./~/inversify/lib/annotation/tagged.js","webpack:///./~/inversify/lib/annotation/target_name.js","webpack:///./~/inversify/lib/annotation/unmanaged.js","webpack:///./~/inversify/lib/bindings/binding.js","webpack:///./~/inversify/lib/bindings/binding_count.js","webpack:///./~/inversify/lib/container/container.js","webpack:///./~/inversify/lib/container/container_module.js","webpack:///./~/inversify/lib/container/container_snapshot.js","webpack:///./~/inversify/lib/container/lookup.js","webpack:///./~/inversify/lib/planning/context.js","webpack:///./~/inversify/lib/planning/plan.js","webpack:///./~/inversify/lib/planning/planner.js","webpack:///./~/inversify/lib/planning/queryable_string.js","webpack:///./~/inversify/lib/planning/reflection_utils.js","webpack:///./~/inversify/lib/planning/request.js","webpack:///./~/inversify/lib/resolution/instantiation.js","webpack:///./~/inversify/lib/resolution/resolver.js","webpack:///./~/inversify/lib/syntax/binding_in_syntax.js","webpack:///./~/inversify/lib/syntax/binding_in_when_on_syntax.js","webpack:///./~/inversify/lib/syntax/binding_to_syntax.js","webpack:///./~/inversify/lib/utils/template.js","webpack:///./~/isarray/index.js","webpack:///./~/readable-stream/lib/_stream_readable.js","webpack:///./~/readable-stream/lib/_stream_transform.js","webpack:///./~/readable-stream/lib/internal/streams/destroy.js","webpack:///./~/readable-stream/lib/internal/streams/stream-browser.js","webpack:///./~/snabbdom-virtualize/lib/strings.js","webpack:///./~/snabbdom-virtualize/lib/utils.js","webpack:///./~/snabbdom-virtualize/strings.js","webpack:///./~/snabbdom/htmldomapi.js","webpack:///./~/snabbdom/modules/attributes.js","webpack:///./~/snabbdom/modules/class.js","webpack:///./~/snabbdom/modules/eventlisteners.js","webpack:///./~/snabbdom/modules/props.js","webpack:///./~/snabbdom/modules/style.js","webpack:///./~/snabbdom/thunk.js","webpack:///./~/sprotty/lib/base/commands/command-stack-options.js","webpack:///./~/sprotty/lib/base/di.config.js","webpack:///./~/sprotty/lib/base/views/id-decorator.js","webpack:///./~/sprotty/lib/features/bounds/di.config.js","webpack:///./~/sprotty/lib/features/bounds/hidden-bounds-updater.js","webpack:///./~/sprotty/lib/features/bounds/resize.js","webpack:///./~/sprotty/lib/features/button/di.config.js","webpack:///./~/sprotty/lib/features/edit/di.config.js","webpack:///./~/sprotty/lib/features/expand/di.config.js","webpack:///./~/sprotty/lib/features/expand/views.js","webpack:///./~/sprotty/lib/features/export/di.config.js","webpack:///./~/sprotty/lib/features/fade/di.config.js","webpack:///./~/sprotty/lib/features/hover/di.config.js","webpack:///./~/sprotty/lib/features/hover/initializer.js","webpack:///./~/sprotty/lib/features/hover/popup-position-updater.js","webpack:///./~/sprotty/lib/features/move/di.config.js","webpack:///./~/sprotty/lib/features/open/di.config.js","webpack:///./~/sprotty/lib/features/select/di.config.js","webpack:///./~/sprotty/lib/features/undo-redo/di.config.js","webpack:///./~/sprotty/lib/features/viewport/di.config.js","webpack:///./~/sprotty/lib/graph/routing.js","webpack:///./~/sprotty/lib/graph/sgraph-factory.js","webpack:///./~/sprotty/lib/graph/views.js","webpack:///./~/sprotty/lib/lib/generic-views.js","webpack:///./~/sprotty/lib/lib/html-views.js","webpack:///./~/sprotty/lib/lib/model.js","webpack:///./~/sprotty/lib/lib/svg-views.js","webpack:///./~/sprotty/lib/model-source/di.config.js","webpack:///./~/sprotty/lib/model-source/local-model-source.js","webpack:///./~/sprotty/lib/model-source/logging.js","webpack:///./~/sprotty/lib/model-source/websocket.js","webpack:///./~/sprotty/lib/utils/async.js","webpack:///./~/sprotty/lib/utils/color.js","webpack:///./~/string_decoder/index.js","webpack:///./~/void-elements/index.js","webpack:///./~/vscode-jsonrpc/lib/events.js","webpack:///./~/vscode-jsonrpc/lib/is.js","webpack:///./~/vscode-jsonrpc/lib/main.js","webpack:///./~/vscode-base-languageclient/lib/protocol.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///./~/timers-browserify/main.js","webpack:///./~/vscode-base-languageclient/lib/utils/is.js","webpack:///./~/base64-js/index.js","webpack:///./~/ieee754/index.js","webpack:///./~/lz-string/libs/lz-string.js","webpack:///./~/monaco-languageclient/lib/disposable.js","webpack:///./~/readable-stream/lib/_stream_passthrough.js","webpack:///./~/readable-stream/lib/internal/streams/BufferList.js","webpack:///./~/setimmediate/setImmediate.js","webpack:///./~/util-deprecate/browser.js","webpack:///./~/vscode-jsonrpc/lib/messageReader.js","webpack:///./~/vscode-jsonrpc/lib/messageWriter.js","webpack:///./~/vscode-ws-jsonrpc/lib/stream/index.js","webpack:///./~/vscode-ws-jsonrpc/lib/stream/stream.js","webpack:///./~/vscode-base-languageclient/lib/services.js","webpack:///util (ignored)","webpack:///./~/monaco-languageclient/lib/commands.js","webpack:///./~/monaco-languageclient/lib/console-window.js","webpack:///./~/monaco-languageclient/lib/converter.js","webpack:///./~/monaco-languageclient/lib/languages.js","webpack:///./~/monaco-languageclient/lib/workspace.js","webpack:///./~/vscode-jsonrpc/lib/messages.js","webpack:///./~/vscode-languageserver-types/lib/main.js","webpack:///./~/vscode-ws-jsonrpc/lib/logger.js","webpack:///./~/vscode-ws-jsonrpc/lib/socket/index.js","webpack:///./~/vscode-ws-jsonrpc/lib/socket/reader.js","webpack:///./~/vscode-ws-jsonrpc/lib/socket/writer.js","webpack:///./~/vscode-base-languageclient/lib/base.js","webpack:///./lib/elkgraph/editor.js","webpack:///./lib/elkgraph/elkt-language.js","webpack:///./lib/elkgraph/language-diagram-server.js","webpack:///./lib/elkgraph/main.js","webpack:///./~/glob-to-regexp/index.js","webpack:///./~/monaco-languageclient/lib/diagnostic-collection.js","webpack:///./~/monaco-languageclient/lib/index.js","webpack:///./~/monaco-languageclient/lib/services.js","webpack:///./~/os-browserify/browser.js","webpack:///./~/path-browserify/index.js","webpack:///./~/readable-stream/duplex-browser.js","webpack:///./~/readable-stream/passthrough.js","webpack:///./~/readable-stream/transform.js","webpack:///./~/readable-stream/writable-browser.js","webpack:///./~/reconnecting-websocket/dist/index.js","webpack:///./~/stream-browserify/index.js","webpack:///./~/vscode-jsonrpc/lib/cancellation.js","webpack:///./~/vscode-jsonrpc/lib/linkedMap.js","webpack:///./~/vscode-jsonrpc/lib/pipeSupport.js","webpack:///./~/vscode-ws-jsonrpc/lib/connection.js","webpack:///./~/vscode-ws-jsonrpc/lib/disposable.js","webpack:///./~/vscode-ws-jsonrpc/lib/index.js","webpack:///./~/vscode-ws-jsonrpc/lib/socket/connection.js","webpack:///./~/vscode-ws-jsonrpc/lib/stream/reader.js","webpack:///./~/vscode-ws-jsonrpc/lib/stream/writer.js","webpack:///./~/vscode-base-languageclient/lib/connection.js","webpack:///./~/vscode-base-languageclient/lib/utils/async.js","webpack:///./~/vscode-base-languageclient/lib/utils/uuid.js"],"names":["Object","defineProperty","exports","value","container_1","require","Container","container_module_1","ContainerModule","injectable_1","injectable","tagged_1","tagged","named_1","named","inject_1","inject","optional_1","optional","unmanaged_1","unmanaged","multi_inject_1","multiInject","target_name_1","targetName","post_construct_1","postConstruct","metadata_reader_1","MetadataReader","guid_1","guid","decorator_utils_1","decorate","constraint_helpers_1","traverseAncerstors","taggedConstraint","namedConstraint","typeConstraint","serialization_1","getServiceIdentifierAsString","TYPES","IActionDispatcher","Symbol","IActionDispatcherProvider","IActionHandlerInitializer","ActionHandlerRegistry","AnimationFrameSyncer","CommandStackOptions","IButtonHandler","ICommand","ICommandStack","ICommandStackProvider","DOMHelper","HiddenVNodeDecorator","HoverState","KeyListener","Layouter","LayoutRegistry","ILogger","LogLevel","IModelFactory","IModelLayoutEngine","ModelRendererFactory","ModelSource","ModelSourceProvider","MouseListener","PopupModelFactory","IPopupModelProvider","PopupMouseListener","PopupVNodeDecorator","SModelElementRegistration","SModelRegistry","SModelStorage","StateAwareModelProvider","SvgExporter","IViewer","ViewerOptions","IViewerProvider","ViewRegistration","ViewRegistry","IVNodeDecorator","isParent","element","children","undefined","constructor","Array","createRandomId","length","id","i","ID_CHARS","charAt","Math","floor","random","__extends","this","extendStatics","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","prototype","create","geometry_1","iterable_1","SModelElement","get","current","SModelRoot","SChildElement","parent","Error","enumerable","configurable","root","index","hasFeature","feature","SParentElement","_super","_this","apply","arguments","add","child","push","splice","remove","indexOf","removeAll","filter","forEach","move","newIndex","localToParent","point","isBounds","x","y","width","height","parentToLocal","SModelIndex","call","canvasBounds","EMPTY_BOUNDS","writable","id2element","Map","contains","set","_i","_a","delete","has","getById","getAttachedElements","all","mapIterable","p1","p2","subtract","isValidDimension","combine","b0","b1","minX","min","minY","max","translate","center","centerOfLine","s","e","abs","includes","euclideanDistance","a","dx","dy","sqrt","manhattanDistance","maxDistance","angleOfPoint","atan2","angleBetweenPoints","lengthProduct","isNaN","NaN","dotProduct","acos","toDegrees","PI","toRadians","almostEquals","ORIGIN_POINT","freeze","EMPTY_DIMENSION","Direction","NAMED_TAG","NAME_TAG","UNMANAGED_TAG","OPTIONAL_TAG","INJECT_TAG","MULTI_INJECT_TAG","TAGGED","TAGGED_PROP","PARAM_TYPES","DESIGN_PARAM_TYPES","POST_CONSTRUCT","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","__metadata","k","v","metadata","__param","paramIndex","decorator","inversify_1","types_1","Command","MergeableCommand","merge","command","context","HiddenCommand","undo","logger","error","redo","PopupCommand","SystemCommand","CommandActionHandler","commandType","handle","action","CommandActionHandlerInitializer","commandCtrs","initialize","registry","commandCtr","registerCommand","getBasicType","schema","type","colonIndex","substring","getSubType","findElement","elementId","result","findParent","predicate","smodel_1","findParentByFeature","translatePoint","source","targetTrace","isBoundsAware","isLayoutContainer","layoutContainerFeature","isLayoutableChild","layoutableChildFeature","isSizeable","boundsFeature","isAlignable","alignFeature","getAbsoluteBounds","boundsAware","smodel_utils_1","bounds","parent_1","SShapeElement","position","size","newBounds","template_1","DUPLICATED_INJECTABLE_DECORATOR","DUPLICATED_METADATA","NULL_ARGUMENT","KEY_NOT_FOUND","AMBIGUOUS_MATCH","CANNOT_UNBIND","NOT_REGISTERED","MISSING_INJECTABLE_ANNOTATION","MISSING_INJECT_ANNOTATION","CIRCULAR_DEPENDENCY","NOT_IMPLEMENTED","INVALID_BINDING_TYPE","NO_MORE_SNAPSHOTS_AVAILABLE","INVALID_MIDDLEWARE_RETURN","INVALID_FUNCTION_BINDING","INVALID_TO_SELF_VALUE","INVALID_DECORATOR_OPERATION","ARGUMENTS_LENGTH_MISMATCH_1","ARGUMENTS_LENGTH_MISMATCH_2","CONTAINER_OPTIONS_MUST_BE_AN_OBJECT","CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE","MULTIPLE_POST_CONSTRUCT_METHODS","POST_CONSTRUCT_ERROR","raw","template","METADATA_KEY","Metadata","toString","registry_1","SModelFactory","createElement","hasKey","regElement","initializeChild","createRoot","initializeRoot","createSchema","isReserved","map","initializeElement","propertyName","obj","descriptor","getPrototypeOf","initializeParent","childSchema","EMPTY_ROOT","registrations","registration","register","constr","ProviderRegistry","setAttr","vnode","name","getAttrs","setClass","getClass","copyClassesFromVNode","classList","copyClassesFromElement","item","mergeStyle","style","getData","__assign","on","event","listener","val","getOn","data","attrs","class","assign","t","n","isSelectable","selectFeature","tagParameter","annotationTarget","parameterIndex","_tagParameterOrProperty","tagProperty","metadataKey","paramsOrPropertiesMetadata","isParameterDecorator","ERROR_MSGS","hasOwnMetadata","getMetadata","paramOrPropertyMetadata","isArray","m","defineMetadata","_decorate","_param","BindingScopeEnum","Singleton","Transient","BindingTypeEnum","ConstantValue","Constructor","DynamicValue","Factory","Function","Instance","Invalid","Provider","TargetTypeEnum","ClassProperty","ConstructorArgument","Variable","action_1","vnode_utils_1","dom_helper_1","MouseTool","actionDispatcher","domHelper","mouseListeners","mouseListener","deregister","getTargetElement","model","findSModelIdByDOMElement","parentNode","handleEvent","methodName","focusOnMouseEvent","actions","reduce","concat","preventDefault","actions_1","actionOrPromise","isAction","dispatch","then","document","domElement","getElementById","createUniqueDOMElementId","focus","mouseOver","mouseOut","mouseEnter","mouseLeave","mouseDown","mouseMove","mouseUp","wheel","doubleClick","bind","postUpdate","PopupMouseTool","isViewport","viewportFeature","s4","isPrimitive","normalizeAttrs","nsURI","defNS","modules","addAttr","namespace","ns","len","mod","idx","slice","buildFromStringTag","tag","selector","classNames","cns","join","replace","sel","text","buildFromComponent","res","view","render","flatten","nested","start","flat","maybeFlatten","array","buildVnode","JSX","modulesNS","SVGNS","module","html","svg","easing_1","Animation","ease","easeInOut","Promise","resolve","reject","frames","lambda","time","dtime","duration","tween","modelChanged","update","log","syncer","onNextFrame","isAvailable","finalModel","CompoundAnimation","components","include","animation","KeyTool","keyListeners","keyListener","dispatchAll","keyDown","isRoutable","routingPoints","canEditRouting","editFeature","filterEditModeHandles","route","curr","pointIndex","find","SRoutingHandle","kind","editMode","prev","next","prevDiff","nextDiff","angle","HANDLE_REMOVE_THRESHOLD","model_1","model_2","model_3","hoverFeedback","selected","moveFeature","hoverFeedbackFeature","isLocateable","isMoveable","command_1","initializers","initializer","initializeActionHandler","KIND","MultiInstanceRegistry","action_dispatcher_1","ExportSvgAction","options","export","div","hiddenDiv","firstElementChild","tagName","svgElement","createSvg","svgElementOrig","serializer","XMLSerializer","svgCopy","serializeToString","iframe","body","appendChild","contentWindow","docCopy","open","write","close","svgElementNew","removeAttribute","copyStyles","setAttribute","getBounds","svgCode","removeChild","skipedProperties","sourceStyle","getComputedStyle","targetStyle","diffStyle","getPropertyValue","childNodes","sourceChild","targetChild","Element","allBounds","one","two","ActionDispatcher","animation_1","ViewportAction","newViewport","animate","ViewportCommand","execute","oldViewport","scroll","zoom","ViewportAnimation","zoomFactor","exp","elements","cstr","arg","existingCstr","missing","InstanceRegistry","instance","existingInstance","instances","deregisterAll","existingInstances","g","eval","window","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","run","Item","noop","process","nextTick","args","title","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","serviceIdentifier","_serviceIdentifier","listRegisteredBindingsForServiceIdentifier","container","getBindings","registeredBindingsList","registeredBindings","implementationType","getFunctionName","constraint","metaData","circularDependencyToException","request","previousServiceIdentifiers","parentServiceIdentifier","childRequests","childRequest","childServiceIdentifier","services","listMetadataForTarget","serviceIdentifierString","isTagged","isNamed","m_1","namedTag","getNamedTag","otherTags","getCustomTags","name_1","match","tasks","endTasks","triggered","requestAnimationFrame","task","trigger","onEndOfNextFrame","initialize_canvas_1","RequestModelAction","SetModelAction","newRoot","SetModelCommand","oldRoot","modelFactory","InitializeCanvasBoundsCommand","SetBoundsAction","SetBoundsCommand","RequestBoundsAction","RequestBoundsCommand","ComputedBoundsAction","revision","alignments","oldBounds","isFadeable","fadeFeature","keyboard_1","mouse_tool_1","smodel_factory_1","key_tool_1","HoverFeedbackAction","mouseoverElement","mouseIsOver","HoverFeedbackCommand","modelElement","isHoverable","RequestPopupModelAction","SetPopupModelAction","SetPopupModelCommand","AbstractHoverMouseListener","state","stopMouseOutTimer","mouseOutTimer","startMouseOutTimer","popupOpen","previousPopupElement","popupCloseDelay","stopMouseOverTimer","mouseOverTimer","HoverMouseListener","computePopupBounds","mousePosition","offset","targetBounds","boundsInWindow","distRight","distBottom","allowSidePosition","round","leftPopupPosition","canvasRightBorderPosition","topPopupPosition","canvasBottomBorderPosition","side","distance","startMouseOverTimer","popupBounds","pageX","pageY","popupOpenDelay","popupTarget","hasPopupFeature","hoverTarget","closeOnMouseMove","PopupHoverMouseListener","HoverKeyListener","matchesKeystroke","popupFeature","code","modifiers","getActualCode","browser_1","isMac","ctrlKey","findIndex","metaKey","altKey","shiftKey","keyCode","STRING_CODE","addKeyCode","stringCode","numericCode","__export","di_config_1","defaultModule","default","di_config_2","moveModule","di_config_3","boundsModule","di_config_4","fadeModule","di_config_5","selectModule","di_config_6","undoRedoModule","di_config_7","viewportModule","di_config_8","hoverModule","di_config_9","edgeEditModule","di_config_10","exportModule","di_config_11","expandModule","di_config_12","openModule","di_config_13","buttonModule","di_config_14","modelSourceModule","typedArraySupport","arr","Uint8Array","foo","subarray","byteLength","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","encodingOrOffset","allocUnsafe","from","TypeError","ArrayBuffer","fromArrayBuffer","fromString","fromObject","assertSize","alloc","fill","encoding","checked","string","isEncoding","actual","fromArrayLike","byteOffset","isBuffer","copy","buffer","isnan","SlowBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","read","buf","indexSize","readUInt16BE","arrLength","valLength","String","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","str","stringtrim","INVALID_BASE64_RE","trim","units","Infinity","leadSurrogate","charCodeAt","byteArray","hi","lo","toByteArray","src","dst","INSPECT_MAX_BYTES","global","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","ctor","superCtor","super_","TempCtor","Duplex","Readable","Writable","readable","allowHalfOpen","onend","_writableState","ended","processNextTick","onEndNT","self","xs","f","l","objectKeys","keys","util","inherits","method","_readableState","destroyed","_destroy","err","cb","CanvasBoundsInitializer","rootAndVnode","elm","getBoundsInPage","InitializeCanvasBoundsAction","getBoundingClientRect","scrollX","scrollY","left","top","newCanvasBounds","createRoutingHandle","parentId","createRoutingHandles","editTarget","rpCount","targetId","SwitchEditModeAction","elementsToActivate","elementsToDeactivate","SwitchEditModeCommand","handlesToRemove","shouldRemoveHandle","doExecute","entry","rp","MoveRoutingHandleAction","moves","MoveRoutingHandleCommand","resolvedMoves","originalRoutingPoints","resolvedMove","parent_2","MoveHandlesAnimation","doMove","fromPosition","toPosition","points","index_1","handleMoves","reverse","handleMove","revPoints","CollapseExpandAction","expandIds","collapseIds","CollapseExpandAllAction","expand","ExpandButtonHandler","buttonPressed","button","expandable","isExpandable","expanded","TYPE","isExportable","exportFeature","smodel_2","model_4","edit_routing_1","model_5","MoveAction","MoveCommand","resolvedRoutes","attachedElements","Set","handleAttachedElement","MoveAnimation","sourceMove","targetMove","deltaX_1","deltaY_1","fromRoute","toRoute","otherMove","existingMove","elementMoves","elementRoutes","elementMove","elementRoute","fp","tp","MoveMouseListener","hasDragged","moveable","isRoutingHandle","lastDragPosition","buttons","viewport","dx_1","dy_1","nodeMoves_1","handleMoves_1","getHandlePosition","getIndex","rp1","rp2","route_1","LocationDecorator","alignment","viewport_root_1","model_6","model_7","routing_1","SGraph","SGraphIndex","ViewportRootElement","SConnectableElement","getIncomingEdges","getOutgoingEdges","getAnchor","referencePoint","getTranslatedAnchor","refPoint","refContainer","edge","translatedRefPoint","anchor","SNode","opacity","SPort","SEdge","sourceId","router","LinearEdgeRouter","SLabel","SCompartment","outgoing","incoming","sourceArr","targetArr","FluentIterableImpl","nextOutgoingIndex","nextIncomingIndex","done","objectToString","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isRegExp","re","isObject","isDate","isError","isFunction","o","binding_when_syntax_1","BindingOnSyntax","_binding","onActivation","handler","BindingWhenSyntax","binding_on_syntax_1","when","whenTargetNamed","whenTargetIsDefault","whenTargetTagged","whenInjectedInto","parentRequest","whenParentNamed","whenParentTagged","whenAnyAncestorIs","ancestor","whenNoAncestorIs","whenAnyAncestorNamed","whenNoAncestorNamed","whenAnyAncestorTagged","whenNoAncestorTagged","whenAnyAncestorMatches","whenNoAncestorMatches","addNS","childData","h","is","primitive","vnode_1","animation_frame_syncer_1","set_model_1","undo_redo_1","action_handler_1","actionHandlerRegistry","commandStack","postponedActions","initialCommand","blockUntil","handleBlocked","UndoAction","RedoAction","handleAction","handlers","promises","handlers_1","warn","object","localCache","store","isLocalStorageAvailable","localStorage","setItem","JSON","stringify","load","getItem","parse","viewerOptions","baseDiv","getPrefix","AbstractLayout","layout","layouter","boundsData","getBoundsData","getLayoutOptions","childrenSize","getChildrenSize","maxWidth","paddingFactor","resizeContainer","getFixedContainerBounds","paddingLeft","paddingRight","maxHeight","paddingTop","paddingBottom","layoutChildren","getFinalContainerBounds","boundsChanged","lastOffset","layoutOptions","currentContainer","containerOptions","currentOffset","childOptions","getChildLayoutOptions","layoutChild","getDx","hAlign","getDy","vAlign","spread","allOptions","getDefaultLayoutOptions","vbox_layout_1","hbox_layout_1","stack_layout_1","VBoxLayouter","HBoxLayouter","StackLayouter","layoutRegistry","element2boundsData","StatefulLayouter","toBeLayouted","doLayout","alignmentChanged","ButtonHandlerRegistry","buttonHandlerFactories","factory","SButton","enabled","expandFeature","FadeAnimation","elementFades","removeAfterFadeOut","elementFade","ElementFader","OpenAction","OpenMouseListener","openableTarget","isOpenable","UndoRedoKeyListener","forEachMatch","matchResult","callback","applyMatches","matches","matches_1","newElementInserted","leftParentId","right","rightParentId","ModelMatcher","matchLeft","matchRight","fade_1","move_1","model_matching_1","resize_1","UpdateModelAction","input","UpdateModelCommand","performUpdate","convertToMatchResult","animationOrRoot","computeAnimation","leftRoot","rightRoot","matches_2","converted","animationData","fades","updateElement","leftCopy","animations","createAnimations","leftPos","rightPos","resizes","fromDimension","toDimension","movesMap","resizesMap","_b","_c","resize","ResizeAnimation","viewport_1","CenterAction","elementIds","CenterCommand","FitToScreenAction","padding","maxZoom","FitToScreenCommand","BoundsAwareViewportCommand","allBounds_1","getElementIds","boundsInViewport","getNewViewport","equal","vp1","vp2","delta","CenterKeyboardListener","svg_exporter_1","isCtrlOrCmd","navigator","userAgent","isCrossSite","url","location","baseURL","protocol","host","startsWith","toArray","filterIterable","createIterator","iterator","DONE_RESULT","collection","ArrayIterator","startFn","nextFn","NullLogger","logLevel","none","thisArg","message","params","info","ConsoleLogger","viewOptions","console","consoleArguments","caller","Date","toLocaleTimeString","fn","arg1","arg2","arg3","saveAs","test","doc","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","click","node","MouseEvent","dispatchEvent","is_safari","HTMLElement","safari","is_chrome_ios","throw_outside","ex","setImmediate","revoke","file","revoker","revokeObjectURL","filesaver","event_types","auto_bom","blob","Blob","FileSaver","no_auto_bom","object_url","force","dispatch_all","split","readyState","INIT","createObjectURL","href","download","DONE","FileReader","reader","onloadend","readAsDataURL","FS_proto","msSaveOrOpenBlob","abort","WRITING","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","content","define","amd","getConstructorMetadata","constructorFunc","compilerGeneratedMetadata","userGeneratedMetadata","getPropertiesMetadata","metadata_1","queryable_string_1","Target","namedOrTagged","QueryableString","metadataItem","hasTag","matchesArray","matchesTag","some","isOptional","matchesNamedTag","BindingWhenOnSyntax","_bindingWhenSyntax","_bindingOnSyntax","bindings","isUndef","isDef","sameVnode","vnode1","vnode2","isVnode","createKeyToOldIdx","beginIdx","endIdx","ch","init","domApi","emptyNodeAt","className","api","createRmCb","childElm","createElm","insertedVnodeQueue","hook","createComment","hashIdx","dotIdx","hash","dot","cbs","emptyNode","createTextNode","insert","addVnodes","parentElm","before","vnodes","startIdx","insertBefore","invokeDestroyHook","destroy","removeVnodes","i_1","rm","updateChildren","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","patchVnode","nextSibling","oldVnode","prepatch","setTextContent","postpatch","htmldomapi_1","hooks","pre","post","h_1","thunk_1","thunk","__awaiter","_arguments","P","generator","fulfilled","step","rejected","__generator","verb","op","_","label","ops","pop","trys","sent","throw","return","CommandStack","viewerProvider","undoStack","redoStack","offStack","currentPromise","hiddenRoot","popupRoot","rootChanged","hiddenRootChanged","popupChanged","executeAll","commands","handleCommand","mergeOrPush","thenUpdate","undoOffStackSystemCommands","undoPreceedingSystemCommands","pushToUndoStack","redoFollowingSystemCommands","operation","beforeResolve","newResult","createContext","newModel","undoHistoryLimit","updateHidden","updatePopup","currentModel","viewer","lastCommand","defaultDuration","isThunk","snabbdom_1","ThunkView","renderAndDecorate","watchedArgs","doRender","copyToThunk","cur","old","oldArg","newArg","configureModelElement","modelConstr","viewConstr","toConstantValue","snabbdom","registerDefaults","EmptyView","MissingView","class-sprotty-empty","class-sprotty-missing","ViewerCache","delegate","isCacheEmpty","cachedModelRoot","cachedHiddenModelRoot","cachedPopup","scheduleUpdate","hiddenModel","nextHiddenModelRoot","nextModelRoot","configureViewerOptions","opt","defaultViewerOptions","isBound","rebind","overrideViewerOptions","baseClass","hiddenClass","popupDiv","popupClass","popupClosedClass","needsClientLayout","needsServerLayout","props_1","attributes_1","style_1","eventlisteners_1","class_1","thunk_view_1","ModelRenderer","viewRegistry","renderElement","vNode","renderChildren","Viewer","modelRendererFactory","hiddenDecorators","popupDecorators","actiondispatcher","onWindowResize","vdom","patcher","createPatcher","renderer","hiddenRenderer","popupRenderer","createModules","propsModule","attributesModule","classModule","styleModule","eventListenersModule","newVDOM","lastVDOM","hadFocus","hasFocus","restoreFocus","placeholder","addEventListener","activeElement","lastRootVNode","lastElement","hiddenVNode","lastHiddenVDOM","popupClosed","inlineStyle","lastPopupVDOM","FocusFixDecorator","FocusFixDecorator_1","tabIndex","abstract_layout_1","isFirst","hGap","vGap","ExportSvgKeyListener","RequestExportSvgAction","ExportSvgCommand","ExportSvgDecorator","svgExporter","openFeature","button_handler_1","SelectAction","selectedElementsIDs","deselectedElementsIDs","SelectCommand","SelectAllAction","select","SelectAllCommand","deselected","selection","childrenLength","previousSelection","selectAll","newState","SelectMouseListener","buttonHandlerRegistry","wasSelected","buttonHandler","selectableTarget_1","deselect","routableDeselect","selectableTarget","SelectKeyboardListener","isScrollable","ScrollMouseListener","lastScrollPosition","isZoomable","ZoomMouseListener","newZoom","deltaY","factor","offsetX","offsetY","isActionMessage","smodel_storage_1","update_model_1","bounds_manipulation_1","hover_1","model_source_1","file_saver_1","expand_1","open_1","ServerStatusAction","receivedFromServerProperty","DiagramServer","storage","currentRoot","clientId","handleLocally","sendMessage","messageReceived","storeNewModel","handleComputedBounds","handleExportSvgAction","handleServerStateAction","lastSubmittedModelType","applyBounds","applyAlignment","newAlignment","ExpansionState","expandedElementIds","collapsed","collapseAll","computeCircleAnchor","radius","cx","cy","getXIntersection","yIntersection","centerPoint","getYIntersection","xIntersection","computeRectangleAnchor","finder","NearestPointFinder","xTop","addCandidate","xBottom","yLeft","yRight","best","currentDist","dist","currentBest","copyProps","SafeBuffer","EventEmitter","_events","_maxListeners","defaultMaxListeners","setMaxListeners","er","newListener","warned","trace","fired","listenerCount","evlistener","emitter","WriteReq","chunk","CorkedRequest","finish","onCorkedFinish","_uint8ArrayToBuffer","_isUint8Array","OurUint8Array","nop","WritableState","stream","objectMode","writableObjectMode","hwm","highWaterMark","defaultHwm","finalCalled","needDrain","ending","finished","noDecode","decodeStrings","defaultEncoding","writing","corked","sync","bufferProcessing","writecb","writelen","bufferedRequest","lastBufferedRequest","pendingcb","prefinished","errorEmitted","bufferedRequestCount","corkedRequestsFree","realHasInstance","_write","writev","_writev","final","_final","Stream","writeAfterEnd","validChunk","valid","decodeChunk","writeOrBuffer","isBuf","newChunk","last","doWrite","onwriteError","finishMaybe","onwriteStateUpdate","needFinish","clearBuffer","asyncWrite","afterWrite","onwriteDrain","holder","count","allBuffers","callFinal","prefinish","need","endWritable","corkReq","internalUtil","deprecate","destroyImpl","getBuffer","hasInstance","pipe","cork","uncork","setDefaultEncoding","_undestroy","undestroy","Transform","PassThrough","lib_1","views_1","sprotty_model_1","FilteringSvgExporter","isExported","styleSheet","endsWith","elkGraphModule","unbind","to","inSingletonScope","SGraphFactory","SGraphView","ElkNode","ElkNodeView","ElkPort","ElkPortView","ElkEdge","ElkEdgeView","ElkLabelView","ElkJunction","JunctionView","getParameters","search","nextParamIndex","param","valueIndex","setupModelLink","editor","contentChangeTimeout","parameters","newHref","assembleHref","onDidChangeModelContent","queryIndex","combineParameters","propertyKey","attributes","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","ToPropertyKey","DecorateProperty","metadataValue","IsPropertyKey","OrdinaryDefineOwnMetadata","hasMetadata","OrdinaryHasMetadata","OrdinaryHasOwnMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","targetMetadata","decorated","O","Create","_Map","MetadataKey","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","_Set","ownKeys_1","parentKeys_1","keysObj","GetIterator","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","IsSymbol","ToPrimitive","PreferredType","hint","exoticToPrim","GetMethod","toPrimitiveSymbol","OrdinaryToPrimitive","toString_1","IsCallable","valueOf","toString_2","argument","ToString","V","func","iteratorSymbol","iterResult","proto","functionPrototype","prototypeProto","MakeDictionary","HashMap","hasOwn","supportsSymbol","toPrimitive","supportsCreate","supportsProto","downLevel","usePolyfill","entries","getKey","getValue","getEntry","cacheSentinel","arraySentinel","MapIterator","values","_index","_keys","_values","_selector","_cacheKey","_cacheIndex","_find","clear","_map","_WeakMap","WeakMap","CreateUniqueKey","CreateUUID","GetOrCreateWeakMapTable","rootKey","FillRandomBytes","GenRandomBytes","crypto","getRandomValues","msCrypto","UUID_SIZE","byte","_key","table","__global","RectangularNode","RectangularPort","class-elknode","class-mouseover","class-selected","RectangularNodeView","port","class-elkport","renderLine","segments","firstPoint","path","class-elkedge","renderAdditionals","class-edge","class-arrow","transform","PolylineEdgeView","class-elklabel","getRadius","class-elkjunction","CircularNodeView","attrRE","voidElements","expectingValueAfterEquals","voidElement","pushTextNode","level","ignoreWhitespace","tagRE","parseTag","empty","byTag","inComponent","isOpen","isComment","nextChar","targetKey","ERRORS_MSGS","types","literal_types_1","Binding","defaultScope","activated","scope","cache","provider","dynamicValue","clone","BindingCount","MultipleBindingsAvailable","NoBindingsAvailable","OnlyOneBindingAvailable","binding_1","lookup_1","planner_1","resolver_1","binding_to_syntax_1","container_snapshot_1","_bindingDictionary","Lookup","_snapshots","_middleware","_metadataReader","container1","container2","copyDictionary","origin","destination","traverse","bindingDictionary","getBindingDictionary","bindingDictionary1","bindingDictionary2","setModuleId","bindingToSyntax","moduleId","getBindFunction","getUnbindFunction","getIsboundFunction","getRebindFunction","bindFunction","unbindFunction","isboundFunction","rebindFunction","unload","conditionFactory","expected","condition","removeByCondition","BindingToSyntax","unbindAll","bound","isBoundNamed","isBoundTagged","request_1","createMockRequest","snapshot","ContainerSnapshot","of","restore","middleware","createChild","applyMiddleware","middlewares","initial","_planAndResolve","applyCustomMetadataReader","metadataReader","_get","getTagged","getNamed","getAll","getAllTagged","getAllNamed","constructorFunction","tempContainer","toSelf","avoidConstraints","isMultiInject","targetType","defaultArgs","contextInterceptor","plan","getMap","updatedEntries","Context","addPlan","Plan","parentContext","rootRequest","cntnr","_createTarget","injectMetadata","target_1","tagMetadata","_getActiveBindings","activeBindings","Request","_validateActiveBindingCount","binding_count_1","msg","_createSubRequests","childRequest_1","thePlan","plan_1","addChildRequest","subChildRequest","reflection_utils_1","getDependencies","dependency","context_1","searchString","reverseString","reverseSearchString","compareString","getTargets","constructorName","isBaseClass","serviceIdentifiers","constructorArgsMetadata","hasUserDeclaredUnknownInjections","iterations","constructorTargets","getConstructorArgsAsTargets","propertyTargets","getClassPropsAsTargets","targets","baseClassDependencyCount","getBaseClassDependencyCount","getConstructorArgsAsTarget","formatTargetMetadata","isManaged","injectIdentifier","isUnknownType","classPropsMetadata","baseConstructor","baseTargets","baseConstructorName","unmanagedCount","dependencyCount","targetMetadataMap","_injectProperties","resolveRequest","propertyInjectionsRequests","propertyInjections","injection","_createInstance","Func","injections","_postConstruct","error_msgs_1","resolveInstance","_resolveRequest","targetIsAnArray","targetParentIsNotAnArray","isSingleton","instantiation_1","binding_when_on_syntax_1","BindingInSyntax","inTransientScope","binding_in_syntax_1","BindingInWhenOnSyntax","_bindingInSyntax","binding_in_when_on_syntax_1","toDynamicValue","toConstructor","toFactory","toFunction","bindingWhenOnSyntax","toAutoFactory","toProvider","strings","isInteger","unshift","ReadableState","readableObjectMode","BufferList","pipes","pipesCount","flowing","endEmitted","reading","needReadable","emittedReadable","readableListening","resumeScheduled","awaitDrain","readingMore","decoder","StringDecoder","_read","readableAddChunk","addToFront","skipChunkCheck","onEofChunk","chunkInvalid","addChunk","maybeReadMore","needMoreData","emitReadable","computeNewHighWaterMark","MAX_HWM","howMuchToRead","head","debug","emitReadable_","flow","maybeReadMore_","pipeOnDrain","EElistenerCount","nReadingNextTick","resume","resume_","fromList","shift","fromListPartial","hasStrings","copyFromBufferString","copyFromBuffer","nb","tail","endReadable","endReadableNT","EE","debugUtil","debuglog","kProxyEvents","isPaused","setEncoding","enc","nOrig","doRead","dest","pipeOpts","onunpipe","unpipeInfo","hasUnpiped","cleanup","onclose","onfinish","ondrain","unpipe","ondata","cleanedUp","increasedAwaitDrain","pause","doEnd","stdout","stderr","endFn","dests","ev","wrap","paused","_fromList","TransformState","afterTransform","needTransform","transforming","writechunk","writeencoding","ts","_transformState","rs","_transform","flush","_flush","ws","err2","readableDestroyed","writableDestroyed","emitErrorNT","_interopRequireDefault","__esModule","_defineProperty","convertNodes","nodes","createdVNodes","toVNode","newNode","_utils","createTextVNode","_h2","buildVNodeData","memo","unescapeEntities","parseStyle","classes","parseClass","styleProp","transformName","_parse2","_parse","_h","_vnode2","$1","$2","toUpperCase","el","entityRegex","entity","innerHTML","textContent","_vnode","RegExp","namespaceURI","qualifiedName","referenceNode","getTextContent","isElement","nodeType","isText","htmlDomApi","updateAttrs","oldAttrs","xChar","colonChar","setAttributeNS","xmlNS","xlinkNS","updateClass","oldClass","klass","invokeHandler","createListener","updateEventListeners","oldOn","oldListener","oldElm","removeEventListener","updateProps","oldProps","props","setNextFrame","prop","nextFrame","updateStyle","oldStyle","oldHasDel","removeProperty","delayed","name2","setProperty","applyDestroyStyle","applyRemoveStyle","compStyle","amount","applied","raf","oldArgs","overrideCommandStackOptions","defaultOptions","logging_1","command_stack_1","viewer_1","viewer_options_1","vnode_decorators_1","view_1","viewer_cache_1","id_decorator_1","defaultContainerModule","IdDecorator","hidden_bounds_updater_1","layout_1","HiddenBoundsUpdater","BoundsData","getBoundsFromDOM","realignments","boundingBox","getBBox","elementResizes","elementResize","newDimension","ExpandButtonView","class-sprotty-button","class-enabled","export_1","exportSvgModule","popup_position_updater_1","initializer_1","PopupPositionUpdater","PopupActionHandlerInitializer","center_fit_1","ClosePopupActionHandler","closePopupActionHandler","boundingClientRect","innerHeight","innerWidth","select_1","scroll_1","zoom_1","minimalPointDistance","sourceAnchor","targetAnchor","p0","sourceAnchorCorrection","pn","targetAnchorCorrection","startRef","endRef","sgraph_1","isNodeSchema","isPortSchema","isEdgeSchema","isLabelSchema","isCompartmentSchema","isButtonSchema","isGraphSchema","class-sprotty-graph","renderDanglingEdge","class-sprotty-edge","class-sprotty-edge-dangling","SRoutingHandleView","getPosition","class-sprotty-routing-handle","getLinePosition","getJunctionPosition","SLabelView","class-sprotty-label","subType","SCompartmentView","class-sprotty-comp","strings_1","PreRenderedView","correctNamespace","setNamespace","HtmlRootView","anchors_1","CircularNode","strokeWidth","strokeCorrection","CircularPort","HtmlRoot","PreRenderedElement","ShapedPreRenderedElement","SvgViewportView","class-sprotty-node","class-sprotty-port","async_1","diagram_state_1","LocalModelSource","modelProvider","popupModelProvider","layoutEngine","diagramState","expansionState","pendingUpdates","setModel","submitModel","updateModel","deferred","Deferred","promise","doSubmitModel","layoutResult","error_1","updates","stack","addElements","elements_1","anye","removeElements","elements_2","handleRequestModel","handleRequestPopupModel","handleCollapseExpandAction","handleCollapseExpandAllAction","getModel","getPopupModel","expandedModel","LoggingAction","severity","ForwardingLogger","modelSourceProvider","forward","date","modelSource","diagram_server_1","WebSocketDiagramServer","listen","webSocket","disconnect","send","rgb","red","green","blue","toSVG","ColorMap","stops","getColor","assertEncoding","isBufferEncoding","passThroughWrite","utf16DetectIncompleteChar","charReceived","charLength","base64DetectIncompleteChar","surrogateSize","detectIncompleteChar","charBuffer","charStr","available","charCode","cr","area","base","br","col","embed","hr","img","keygen","link","menuitem","meta","track","wbr","Disposable","dispose","Event","_disposable","None","CallbackList","bucket","_callbacks","_contexts","foundCallbackWithDifferentContext","invoke","callbacks","contexts","isEmpty","Emitter","_options","_event","thisArgs","disposables","onFirstListenerAdd","_noop","onLastListenerRemove","fire","boolean","number","stringArray","every","elem","_createMessageConnection","messageReader","messageWriter","strategy","createRequestQueueKey","createResponseQueueKey","unknownResponseSquenceNumber","createNotificationQueueKey","notificationSquenceNumber","addMessageToQueue","messages_1","isRequestMessage","isResponseMessage","cancelUndispatched","_message","isListening","ConnectionState","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","New","closeEmitter","readErrorHandler","errorEmitter","writeErrorHandler","triggerMessageQueue","timer","messageQueue","processMessageQueue","handleRequest","isNotificationMessage","handleNotification","handleResponse","handleInvalidMessage","requestMessage","reply","resultOrError","startTime","jsonrpc","ResponseError","toJson","traceSendingResponse","replyError","traceReceivedRequest","requestHandler","requestHandlers","now","starRequestHandler","cancellationSource","cancellation_1","CancellationTokenSource","tokenKey_1","requestTokens","handlerResult","numberOfParams","token","Is","ErrorCodes","InternalError","MethodNotFound","responseMessage","responsePromise","responsePromises","traceReceivedResponse","notificationHandler","CancelNotification","cancel","notificationHandlers","starNotificationHandler","traceReceivedNotification","unhandledNotificationEmitter","responseHandler","traceSendingRequest","Trace","Off","tracer","Verbose","traceSendNotification","LogTraceNotification","timerStart","throwIfClosedOrDisposed","ConnectionError","ConnectionErrors","throwIfListening","AlreadyListening","throwIfNotListening","undefinedToNull","computeMessageParams","sequenceNumber","linkedMap_1","LinkedMap","events_1","disposeEmitter","onClose","onError","toCancel","response","connection","sendNotification","messageParams","notificationMessage","onNotification","sendRequest","CancellationToken","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","SetTraceNotification","onUnhandledNotification","onDispose","verbose","isMessageReader","isMessageWriter","createMessageConnection","output","messageReader_1","StreamMessageReader","messageWriter_1","StreamMessageWriter","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","MessageReader","IPCMessageReader","SocketMessageReader","MessageWriter","IPCMessageWriter","SocketMessageWriter","Messages","ConnectionStrategy","candidate","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","placeHoldersCount","b64","tmp","placeHolders","Arr","L","revLookup","tripletToBase64","num","lookup","encodeChunk","uint8","extraBytes","parts","len2","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","LN2","LZString","getBaseValue","alphabet","character","baseReverseDic","keyStrBase64","keyStrUriSafe","compressToBase64","_compress","decompressFromBase64","_decompress","compressToUTF16","decompressFromUTF16","compressed","compressToUint8Array","uncompressed","compress","TotalLen","current_value","decompressFromUint8Array","decompress","compressToEncodedURIComponent","decompressFromEncodedURIComponent","bitsPerChar","getCharFromInt","ii","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data","context_data_val","context_data_position","resetValue","getNextValue","w","bits","resb","maxpower","power","dictionary","enlargeIn","dictSize","numBits","services_1","DisposableCollection","disposable","_classCallCheck","copyBuffer","tasksByHandle","nextHandle","registerImmediate","runIfPresent","currentlyRunningATask","attachTo","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","messagePrefix","onGlobalMessage","attachEvent","MessageChannel","channel","port1","port2","documentElement","script","onreadystatechange","deprecated","config","DefaultSize","CR","LF","CRLF","MessageBuffer","append","toAppend","bufferLen","newSize","ceil","tryReadHeaders","header","nextStart","tryReadContent","onPartialMessage","AbstractMessageReader","partialMessageEmitter","fireError","asError","fireClose","firePartialMessage","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","onData","headers","contentLength","setPartialMessageTimer","clearPartialMessageTimer","json","waitingTime","eventEmitter","socket","ContentLength","AbstractMessageWriter","errorCount","sending","doWriteMessage","handleError","stream_1","ReadableStream","WritableStream","toBuffer","MonacoCommands","_commandService","addCommand","_accessor","protocol_1","ConsoleWindow","channels","showMessage","MessageType","Warning","Info","Log","createOutputChannel","existing","appendLine","line","show","base_1","ProtocolCodeLens","ProtocolCompletionItem","MonacoToProtocolConverter","asPosition","lineNumber","column","asRange","range","startLineNumber","startColumn","endLineNumber","endColumn","asTextDocumentIdentifier","uri","asTextDocumentPositionParams","textDocument","asCompletionItem","detail","documentation","filterText","fillPrimaryInsertText","monaco","languages","CompletionItemKind","Text","Reference","sortText","format","InsertTextFormat","PlainText","textEdit","insertText","Snippet","insertTextFormat","fromEdit","newText","asReferenceParams","includeDeclaration","asDocumentSymbolParams","asCodeLensParams","asDiagnosticSeverity","Severity","DiagnosticSeverity","Information","asDiagnostic","Range","Diagnostic","asDiagnostics","markers","asCodeActionContext","diagnostics","asCodeActionParams","asCommand","asCodeLens","asFormattingOptions","tabSize","insertSpaces","asDocumentFormattingParams","asDocumentRangeFormattingParams","asDocumentOnTypeFormattingParams","asRenameParams","newName","asDocumentLinkParams","asDocumentLink","ProtocolToMonacoConverter","asResourceEdits","resource","edits","edit","asWorkspaceEdit","documentChanges","change","Uri","changes","asTextEdit","asTextEdits","items","asCodeLenses","codeLens","asCommands","asSymbolInformations","information","asSymbolInformation","containerName","asLocation","asDocumentHighlights","asDocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asReferences","asDefinitionResult","asSignatureHelp","activeSignature","activeParameter","signatures","asSignatureInformations","asSignatureInformation","asParameterInformations","asParameterInformation","asHover","hover","contents","asSeverity","Ignore","asMarker","diagnostic","asCompletionResult","isIncomplete","asCompletionInsertText","asILinks","documentLinks","links","documentLinks_1","documentLink","asILink","Position","testGlob","pattern","globToRegExp","extended","globstar","getLanguages","language","diagnostic_collection_1","disposable_1","MonacoModelIdentifier","fromDocument","languageId","fromModel","getModeId","MonacoLanguages","p2m","m2p","completion","completionItem","snippetSupport","matchModel","createDiagnosticCollection","MonacoDiagnosticCollection","registerCompletionItemProvider","triggerCharacters","completionProvider","createCompletionProvider","providers","provideCompletionItems","resolveCompletionItem","protocolItem","registerHoverProvider","hoverProvider","createHoverProvider","provideHover","registerSignatureHelpProvider","signatureHelpProvider","createSignatureHelpProvider","signatureHelpTriggerCharacters","provideSignatureHelp","signatureHelp","registerDefinitionProvider","definitionProvider","createDefinitionProvider","provideDefinition","registerReferenceProvider","referenceProvider","createReferenceProvider","provideReferences","registerDocumentHighlightProvider","documentHighlightProvider","createDocumentHighlightProvider","provideDocumentHighlights","registerDocumentSymbolProvider","documentSymbolProvider","createDocumentSymbolProvider","provideDocumentSymbols","registerCodeActionsProvider","codeActionProvider","createCodeActionProvider","registerCodeActionProvider","provideCodeActions","registerCodeLensProvider","codeLensProvider","createCodeLensProvider","provideCodeLenses","resolveCodeLens","protocolCodeLens","registerDocumentFormattingEditProvider","documentFormattingEditProvider","createDocumentFormattingEditProvider","provideDocumentFormattingEdits","registerDocumentRangeFormattingEditProvider","documentRangeFormattingEditProvider","createDocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","registerOnTypeFormattingEditProvider","firstTriggerCharacter","moreTriggerCharacter","onTypeFormattingEditProvider","createOnTypeFormattingEditProvider","autoFormatTriggerCharacters","provideOnTypeFormattingEdits","registerRenameProvider","renameProvider","createRenameProvider","provideRenameEdits","registerDocumentLinkProvider","linkProvider","createDocumentLinkProvider","registerLinkProvider","provideLinks","provideDocumentLinks","resolveLink","resolveDocumentLink","DocumentFilter","scheme","MonacoWorkspace","_rootUri","capabilities","applyEdit","workspaceEdit","documents","onDidOpenTextDocumentEmitter","onDidCloseTextDocumentEmitter","onDidChangeTextDocumentEmitter","getModels","addModel","onDidCreateModel","onWillDisposeModel","removeModel","onDidChangeContent","contentChanges","rangeLength","TextDocument","getVersionId","models","acc","currentEdit","editsByResource","pushEditOperations","resourceEdit","identifier","major","minor","lift","forceMoveMarkers","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","MessageReadError","AbstractMessageType","_method","_numberOfParams","defined","three","four","Location","Hint","TextEdit","del","TextDocumentEdit","VersionedTextDocumentIdentifier","TextEditChangeImpl","WorkspaceChange","_textEditChanges","_workspaceEdit","textDocumentEdit","textEditChange","getTextEditChange","TextDocumentIdentifier","TextDocumentItem","Method","Field","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Color","File","CompletionItem","CompletionList","MarkedString","fromPlainText","plainText","ParameterInformation","SignatureInformation","DocumentHighlight","SymbolKind","Namespace","Package","Constant","Boolean","SymbolInformation","CodeActionContext","typedArray","CodeLens","FormattingOptions","DocumentLink","EOL","FullTextDocument","lineCount","getText","positionAt","offsetAt","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","_uri","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","low","high","mid","lineOffset","nextLineOffset","check","WebSocketMessageReader","events","onMessage","readMessage","reason","event_1","AbstractStreamMessageReader","WebSocketMessageWriter","AbstractStreamMessageWriter","createLanguageClient","messageConnection","monaco_languageclient_1","BaseLanguageClient","clientOptions","documentSelector","errorHandler","ErrorAction","Continue","closed","CloseAction","DoNotRestart","connectionProvider","createConnection","diagramServer","vscode_ws_jsonrpc_1","url_parameters_1","sprotty_config_1","language_diagram_server_1","WebSocket","urlParameters","initialContent","compressedContent","decodeURIComponent","sprottyContainer","modelUri","createModel","updateOptions","minimap","socketUrl","socketOptions","maxReconnectionDelay","minReconnectionDelay","reconnectionDelayGrowFactor","connectionTimeout","maxRetries","createMonacoServices","onConnection","languageClient","extensions","setLanguageConfiguration","comments","lineComment","blockComment","brackets","autoClosingPairs","setMonarchTokensProvider","keywords","typeKeywords","operators","symbols","escapes","tokenizer","cases","@typeKeywords","@keywords","@default","@operators","whitespace","comment","DIAGRAM_ENDPOINT_NOTIFICATION","DID_CLOSE_NOTIFICATION","LanguageDiagramServer","onload","glob","opts","reStr","inGroup","flags","prevChar","starCount","toDispose","modelDiagnostics_1","MonacoModelDiagnostics","owner","doUpdateModelMarkers","_diagnostics","_markers","updateModelMarkers","setModelMarkers","converter_1","commands_1","languages_1","workspace","workspace_1","rootUri","console_window_1","endianness","hostname","loadavg","uptime","freemem","MAX_VALUE","totalmem","cpus","release","appVersion","networkInterfaces","getNetworkInterfaces","arch","platform","tmpdir","tmpDir","normalizeArray","allowAboveRoot","up","splitPathRe","splitPath","filename","exec","resolvedPath","resolvedAbsolute","normalize","isAbsolute","trailingSlash","paths","relative","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","basename","extname","isWebSocket","CLOSING","isGlobalWebSocket","getDefaultOptions","bypassProperty","initReconnectionDelay","updateReconnectionDelay","previousDelay","newDelay","LEVEL_0_EVENTS","reassignEventListeners","oldWs","ReconnectingWebsocket","protocols","connectingTimeout","reconnectDelay","retriesCount","shouldRetry","savedOnClose","emitError","handleClose","connect","wsUrl","keepClosed","_d","fastClose","_e","delay","fakeCloseEvent_1","wasClean","didOnEnd","_isStdio","Cancelled","isCancellationRequested","shortcutEvent","MutableToken","_isCancelled","_emitter","_token","Touch","First","Last","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","forEachReverse","generateRandomPipeName","randomSuffix","crypto_1","randomBytes","path_1","os_1","createClientPipeTransport","pipeName","connectResolve","connected","_reject","server","net_1","createServer","onConnected","createServerPipeTransport","logger_1","onopen","toSocket","socket_1","createWebSocketConnection","ErrorEvent","reader_1","writer_1","vscode_jsonrpc_1","writeMessage","writer"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC/DAA,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIC,aAAc,mBAAAC,CAAQ,IAC1BH,SAAQI,UAAYF,YAAYE,SAChC,IAAIC,oBAAqB,mBAAAF,CAAQ,IACjCH,SAAQM,gBAAkBD,mBAAmBC,eAC7C,IAAIC,cAAe,mBAAAJ,CAAQ,IAC3BH,SAAQQ,WAAaD,aAAaC,UAClC,IAAIC,UAAW,mBAAAN,CAAQ,IACvBH,SAAQU,OAASD,SAASC,MAC1B,IAAIC,SAAU,mBAAAR,CAAQ,IACtBH,SAAQY,MAAQD,QAAQC,KACxB,IAAIC,UAAW,mBAAAV,CAAQ,IACvBH,SAAQc,OAASD,SAASC,MAC1B,IAAIC,YAAa,mBAAAZ,CAAQ,IACzBH,SAAQgB,SAAWD,WAAWC,QAC9B,IAAIC,aAAc,mBAAAd,CAAQ,IAC1BH,SAAQkB,UAAYD,YAAYC,SAChC,IAAIC,gBAAiB,mBAAAhB,CAAQ,IAC7BH,SAAQoB,YAAcD,eAAeC,WACrC,IAAIC,eAAgB,mBAAAlB,CAAQ,IAC5BH,SAAQsB,WAAaD,cAAcC,UACnC,IAAIC,kBAAmB,mBAAApB,CAAQ,IAC/BH,SAAQwB,cAAgBD,iBAAiBC,aACzC,IAAIC,mBAAoB,mBAAAtB,CAAQ,GAChCH,SAAQ0B,eAAiBD,kBAAkBC,cAC3C,IAAIC,QAAS,mBAAAxB,CAAQ,GACrBH,SAAQ4B,KAAOD,OAAOC,IACtB,IAAIC,mBAAoB,mBAAA1B,CAAQ,GAChCH,SAAQ8B,SAAWD,kBAAkBC,QACrC,IAAIC,sBAAuB,mBAAA5B,CAAQ,GACnCH,SAAQgC,mBAAqBD,qBAAqBC,mBAClDhC,QAAQiC,iBAAmBF,qBAAqBE,iBAChDjC,QAAQkC,gBAAkBH,qBAAqBG,gBAC/ClC,QAAQmC,eAAiBJ,qBAAqBI,cAC9C,IAAIC,iBAAkB,mBAAAjC,CAAQ,GAC9BH,SAAQqC,6BAA+BD,gBAAgBC,6B;;;;;;;AC7BvDvC,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQsC,OACJC,kBAAmBC,OAAO,qBAC1BC,0BAA2BD,OAAO,6BAClCE,0BAA2BF,OAAO,6BAClCG,sBAAuBH,OAAO,yBAC9BI,qBAAsBJ,OAAO,wBAC7BK,oBAAqBL,OAAO,uBAC5BM,eAAgBN,OAAO,kBACvBO,SAAUP,OAAO,YACjBQ,cAAeR,OAAO,iBACtBS,sBAAuBT,OAAO,yBAC9BU,UAAWV,OAAO,aAClBW,qBAAsBX,OAAO,wBAC7BY,WAAYZ,OAAO,cACnBa,YAAab,OAAO,eACpBc,SAAUd,OAAO,YACjBe,eAAgBf,OAAO,kBACvBgB,QAAShB,OAAO,WAChBiB,SAAUjB,OAAO,YACjBkB,cAAelB,OAAO,iBACtBmB,mBAAoBnB,OAAO,sBAC3BoB,qBAAsBpB,OAAO,wBAC7BqB,YAAarB,OAAO,eACpBsB,oBAAqBtB,OAAO,uBAC5BuB,cAAevB,OAAO,iBAItBwB,kBAAmBxB,OAAO,qBAC1ByB,oBAAqBzB,OAAO,uBAC5B0B,mBAAoB1B,OAAO,sBAC3B2B,oBAAqB3B,OAAO,uBAC5B4B,0BAA2B5B,OAAO,6BAClC6B,eAAgB7B,OAAO,kBACvB8B,cAAe9B,OAAO,iBACtB+B,wBAAyB/B,OAAO,2BAChCgC,YAAahC,OAAO,eACpBiC,QAASjC,OAAO,WAChBkC,cAAelC,OAAO,iBACtBmC,gBAAiBnC,OAAO,mBACxBoC,iBAAkBpC,OAAO,oBACzBqC,aAAcrC,OAAO,gBACrBsC,gBAAiBtC,OAAO,oB;;;;;;;ACU5B,QAASuC,UAASC,GACd,GAAIC,GAAWD,EAAQC,QACvB,YAAoBC,KAAbD,GAA0BA,EAASE,cAAgBC,MAgI9D,QAASC,gBAAeC,OACL,KAAXA,IAAqBA,EAAS,EAElC,KAAK,GADDC,GAAK,GACAC,EAAI,EAAGA,EAAIF,EAAQE,IACxBD,GAAME,SAASC,OAAOC,KAAKC,MAAMD,KAAKE,SAAWJ,SAASH,QAE9D,OAAOC,GA7LX,GAAIO,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBwG,WAAa,mBAAAxG,CAAQ,IAKrByG,cAA+B,WAC/B,QAASA,MAgCT,MA9BA9G,QAAOC,eAAe6G,EAAcJ,UAAW,QAC3CK,IAAK,WAED,IADA,GAAIC,GAAUf,KACPe,GAAS,CACZ,GAAIA,YAAmBC,YACnB,MAAOD,EAEPA,GADKA,YAAmBE,eACdF,EAAQG,WAER/B,GAElB,KAAM,IAAIgC,OAAM,wBAEpBC,YAAY,EACZC,cAAc,IAElBtH,OAAOC,eAAe6G,EAAcJ,UAAW,SAC3CK,IAAK,WACD,MAAOd,MAAKsB,KAAKC,OAErBH,YAAY,EACZC,cAAc,IAMlBR,EAAcJ,UAAUe,WAAa,SAAUC,GAC3C,OAAO,GAEJZ,IAEX5G,SAAQ4G,cAAgBA,cAKxB5G,QAAQ+E,SAAWA,QAInB,IAAI0C,gBAAgC,SAAUC,GAE1C,QAASD,KACL,GAAIE,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAM1C,YACC0C,EAgFX,MApFA7B,WAAU2B,EAAgBC,GAM1BD,EAAejB,UAAUsB,IAAM,SAAUC,EAAOvC,GAC5C,GAAIP,GAAWc,KAAKd,QACpB,QAAUC,KAANM,EACAP,EAAS+C,KAAKD,OAEb,CACD,GAAIvC,EAAI,GAAKA,EAAIO,KAAKd,SAASK,OAC3B,KAAM,IAAI4B,OAAM,eAAiB1B,EAAI,sBAAwBP,EAASK,OAAS,IAEnFL,GAASgD,OAAOzC,EAAG,EAAGuC,GAE1BA,EAAMd,OAASlB,KACfA,KAAKuB,MAAMQ,IAAIC,IAEnBN,EAAejB,UAAU0B,OAAS,SAAUH,GACxC,GAAI9C,GAAWc,KAAKd,SAChBO,EAAIP,EAASkD,QAAQJ,EACzB,IAAIvC,EAAI,EACJ,KAAM,IAAI0B,OAAM,iBAAmBa,EAAMxC,GAE7CN,GAASgD,OAAOzC,EAAG,SACZuC,GAAMd,OACblB,KAAKuB,MAAMY,OAAOH,IAEtBN,EAAejB,UAAU4B,UAAY,SAAUC,GAC3C,GAAIV,GAAQ5B,KACRd,EAAWc,KAAKd,QACpB,QAAeC,KAAXmD,GACA,IAAK,GAAI7C,GAAIP,EAASK,OAAS,EAAGE,GAAK,EAAGA,IACtC,GAAI6C,EAAOpD,EAASO,IAAK,CACrB,GAAIuC,GAAQ9C,EAASgD,OAAOzC,EAAG,GAAG,SAC3BuC,GAAMd,OACblB,KAAKuB,MAAMY,OAAOH,QAK1B9C,GAASqD,QAAQ,SAAUP,SAChBA,GAAMd,OACbU,EAAML,MAAMY,OAAOH,KAEvB9C,EAASgD,OAAO,EAAGhD,EAASK,SAGpCmC,EAAejB,UAAU+B,KAAO,SAAUR,EAAOS,GAC7C,GAAIvD,GAAWc,KAAKd,SAChBO,EAAIP,EAASkD,QAAQJ,EACzB,KAAW,IAAPvC,EACA,KAAM,IAAI0B,OAAM,iBAAmBa,EAAMxC,GAGzC,IAAIiD,EAAW,GAAKA,EAAWvD,EAASK,OAAS,EAC7C,KAAM,IAAI4B,OAAM,eAAiBsB,EAAW,sBAAwBvD,EAASK,OAAS,IAE1FL,GAASgD,OAAOzC,EAAG,GACnBP,EAASgD,OAAOO,EAAU,EAAGT,IAUrCN,EAAejB,UAAUiC,cAAgB,SAAUC,GAC/C,MAAOhC,YAAWiC,SAASD,GAASA,GAAUE,EAAGF,EAAME,EAAGC,EAAGH,EAAMG,EAAGC,OAAQ,EAAGC,QAAS,IAS9FtB,EAAejB,UAAUwC,cAAgB,SAAUN,GAC/C,MAAOhC,YAAWiC,SAASD,GAASA,GAAUE,EAAGF,EAAME,EAAGC,EAAGH,EAAMG,EAAGC,OAAQ,EAAGC,QAAS,IAEvFtB,GACTb,cACF5G,SAAQyH,eAAiBA,cAOzB,IAAIT,eAA+B,SAAUU,GAEzC,QAASV,KACL,MAAkB,QAAXU,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAE/D,MAJAD,WAAUkB,EAAeU,GAIlBV,GACTS,eACFzH,SAAQgH,cAAgBA,aAIxB,IAAID,YAA4B,SAAUW,GAEtC,QAASX,GAAWO,OACF,KAAVA,IAAoBA,EAAQ,GAAI2B,aACpC,IAAItB,GAAQD,EAAOwB,KAAKnD,OAASA,IAOjC,OANA4B,GAAMwB,aAAezC,WAAW0C,aAEhCtJ,OAAOC,eAAe4H,EAAO,SACzB1H,MAAOqH,EACP+B,UAAU,IAEP1B,EAEX,MAZA7B,WAAUiB,EAAYW,GAYfX,GACTU,eACFzH,SAAQ+G,WAAaA,UACrB,IAAItB,UAAW,sCASfzF,SAAQqF,eAAiBA,cAIzB,IAAI4D,aAA6B,WAC7B,QAASA,KACLlD,KAAKuD,WAAa,GAAIC,KA2C1B,MAzCAN,GAAYzC,UAAUsB,IAAM,SAAU9C,GAClC,GAAKA,EAAQO,IAKR,GAAIQ,KAAKyD,SAASxE,GACnB,KAAM,IAAIkC,OAAM,0BAA4BlC,EAAQO,QALpD,IACIP,EAAQO,GAAKF,uBACRU,KAAKyD,SAASxE,GAM3B,IADAe,KAAKuD,WAAWG,IAAIzE,EAAQO,GAAIP,OACPE,KAArBF,EAAQC,UAA0BD,EAAQC,SAASE,cAAgBC,MACnE,IAAK,GAAIsE,GAAK,EAAGC,EAAK3E,EAAQC,SAAUyE,EAAKC,EAAGrE,OAAQoE,IAAM,CAC1D,GAAI3B,GAAQ4B,EAAGD,EACf3D,MAAK+B,IAAIC,KAIrBkB,EAAYzC,UAAU0B,OAAS,SAAUlD,GAErC,GADAe,KAAKuD,WAAWM,OAAO5E,EAAQO,QACNL,KAArBF,EAAQC,UAA0BD,EAAQC,SAASE,cAAgBC,MACnE,IAAK,GAAIsE,GAAK,EAAGC,EAAK3E,EAAQC,SAAUyE,EAAKC,EAAGrE,OAAQoE,IAAM,CAC1D,GAAI3B,GAAQ4B,EAAGD,EACf3D,MAAKmC,OAAOH,KAIxBkB,EAAYzC,UAAUgD,SAAW,SAAUxE,GACvC,MAAOe,MAAKuD,WAAWO,IAAI7E,EAAQO,KAEvC0D,EAAYzC,UAAUsD,QAAU,SAAUvE,GACtC,MAAOQ,MAAKuD,WAAWzC,IAAItB,IAE/B0D,EAAYzC,UAAUuD,oBAAsB,SAAU/E,GAClD,UAEJiE,EAAYzC,UAAUwD,IAAM,WACxB,MAAOrD,YAAWsD,YAAYlE,KAAKuD,WAAY,SAAUK,GAC3CA,EAAG,EACb,OADyBA,GAAG,MAI7BV,IAEXjJ,SAAQiJ,YAAcA,Y;;;;;;;ACpOtB,QAASnB,KAAIoC,EAAIC,GACb,OACIvB,EAAGsB,EAAGtB,EAAIuB,EAAGvB,EACbC,EAAGqB,EAAGrB,EAAIsB,EAAGtB,GAUrB,QAASuB,UAASF,EAAIC,GAClB,OACIvB,EAAGsB,EAAGtB,EAAIuB,EAAGvB,EACbC,EAAGqB,EAAGrB,EAAIsB,EAAGtB,GAgBrB,QAASwB,kBAAiBlE,GACtB,MAAOA,GAAE2C,OAAS,GAAK3C,EAAE4C,QAAU,EASvC,QAASJ,UAAS3D,GACd,MAAO,KAAOA,IACP,KAAOA,IACP,SAAWA,IACX,UAAYA,GAUvB,QAASsF,SAAQC,EAAIC,GACjB,GAAIC,GAAO9E,KAAK+E,IAAIH,EAAG3B,EAAG4B,EAAG5B,GACzB+B,EAAOhF,KAAK+E,IAAIH,EAAG1B,EAAG2B,EAAG3B,EAG7B,QACID,EAAG6B,EAAM5B,EAAG8B,EAAM7B,MAHXnD,KAAKiF,IAAIL,EAAG3B,GAAK2B,EAAGzB,OAAS,EAAIyB,EAAGzB,MAAQ,GAAI0B,EAAG5B,GAAK4B,EAAG1B,OAAS,EAAI0B,EAAG1B,MAAQ,IAG1D2B,EAAM1B,OAF/BpD,KAAKiF,IAAIL,EAAG1B,GAAK0B,EAAGxB,QAAU,EAAIwB,EAAGxB,OAAS,GAAIyB,EAAG3B,GAAK2B,EAAGzB,QAAU,EAAIyB,EAAGzB,OAAS,IAEzC4B,GAU7D,QAASE,WAAUzE,EAAGC,GAClB,OACIuC,EAAGxC,EAAEwC,EAAIvC,EAAEuC,EACXC,EAAGzC,EAAEyC,EAAIxC,EAAEwC,EACXC,MAAO1C,EAAE0C,MACTC,OAAQ3C,EAAE2C,QASlB,QAAS+B,QAAO1E,GACZ,OACIwC,EAAGxC,EAAEwC,GAAKxC,EAAE0C,OAAS,EAAI,GAAM1C,EAAE0C,MAAQ,GACzCD,EAAGzC,EAAEyC,GAAKzC,EAAE2C,QAAU,EAAI,GAAM3C,EAAE2C,OAAS,IAInD,QAASgC,cAAaC,EAAGC,GAOrB,MAAOH,SALHlC,EAAGoC,EAAEpC,EAAIqC,EAAErC,EAAIqC,EAAErC,EAAIoC,EAAEpC,EACvBC,EAAGmC,EAAEnC,EAAIoC,EAAEpC,EAAIoC,EAAEpC,EAAImC,EAAEnC,EACvBC,MAAOnD,KAAKuF,IAAID,EAAErC,EAAIoC,EAAEpC,GACxBG,OAAQpD,KAAKuF,IAAID,EAAEpC,EAAImC,EAAEnC,KAQjC,QAASsC,UAAS/E,EAAGC,GACjB,MAAOA,GAAEuC,GAAKxC,EAAEwC,GAAKvC,EAAEuC,GAAKxC,EAAEwC,EAAIxC,EAAE0C,OAASzC,EAAEwC,GAAKzC,EAAEyC,GAAKxC,EAAEwC,GAAKzC,EAAEyC,EAAIzC,EAAE2C,OAmB9E,QAASqC,mBAAkBC,EAAGjF,GAC1B,GAAIkF,GAAKlF,EAAEwC,EAAIyC,EAAEzC,EACb2C,EAAKnF,EAAEyC,EAAIwC,EAAExC,CACjB,OAAOlD,MAAK6F,KAAKF,EAAKA,EAAKC,EAAKA,GAUpC,QAASE,mBAAkBJ,EAAGjF,GAC1B,MAAOT,MAAKuF,IAAI9E,EAAEwC,EAAIyC,EAAEzC,GAAKjD,KAAKuF,IAAI9E,EAAEyC,EAAIwC,EAAExC,GASlD,QAAS6C,aAAYL,EAAGjF,GACpB,MAAOT,MAAKiF,IAAIjF,KAAKuF,IAAI9E,EAAEwC,EAAIyC,EAAEzC,GAAIjD,KAAKuF,IAAI9E,EAAEyC,EAAIwC,EAAExC,IAQ1D,QAAS8C,cAAatF,GAClB,MAAOV,MAAKiG,MAAMvF,EAAEwC,EAAGxC,EAAEuC,GAS7B,QAASiD,oBAAmBR,EAAGjF,GAC3B,GAAI0F,GAAgBnG,KAAK6F,MAAMH,EAAEzC,EAAIyC,EAAEzC,EAAIyC,EAAExC,EAAIwC,EAAExC,IAAMzC,EAAEwC,EAAIxC,EAAEwC,EAAIxC,EAAEyC,EAAIzC,EAAEyC,GAC7E,IAAIkD,MAAMD,IAAoC,IAAlBA,EACxB,MAAOE,IACX,IAAIC,GAAaZ,EAAEzC,EAAIxC,EAAEwC,EAAIyC,EAAExC,EAAIzC,EAAEyC,CACrC,OAAOlD,MAAKuG,KAAKD,EAAaH,GAQlC,QAASK,WAAUd,GACf,MAAW,KAAJA,EAAU1F,KAAKyG,GAQ1B,QAASC,WAAUhB,GACf,MAAOA,GAAI1F,KAAKyG,GAAK,IASzB,QAASE,cAAajB,EAAGjF,GACrB,MAAOT,MAAKuF,IAAIG,EAAIjF,GAAK,KAvN7BtG,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAItDD,QAAQuM,aAAezM,OAAO0M,QAC1B5D,EAAG,EACHC,EAAG,IAcP7I,QAAQ8H,IAAMA,IAad9H,QAAQoK,SAAWA,SAInBpK,QAAQyM,gBAAkB3M,OAAO0M,QAC7B1D,OAAQ,EACRC,QAAS,IAUb/I,QAAQqK,iBAAmBA,iBAC3BrK,QAAQoJ,aAAetJ,OAAO0M,QAC1B5D,EAAG,EACHC,EAAG,EACHC,OAAQ,EACRC,QAAS,IAQb/I,QAAQ2I,SAAWA,SAiBnB3I,QAAQsK,QAAUA,QAelBtK,QAAQ6K,UAAYA,UAYpB7K,QAAQ8K,OAASA,OAUjB9K,QAAQ+K,aAAeA,aAOvB/K,QAAQmL,SAAWA,QAInB,IAAIuB,YACJ,SAAWA,GACPA,EAAUA,EAAgB,KAAI,GAAK,OACnCA,EAAUA,EAAiB,MAAI,GAAK,QACpCA,EAAUA,EAAc,GAAI,GAAK,KACjCA,EAAUA,EAAgB,KAAI,GAAK,QACpCA,UAAY1M,QAAQ0M,YAAc1M,QAAQ0M,eAY7C1M,QAAQoL,kBAAoBA,kBAW5BpL,QAAQyL,kBAAoBA,kBAU5BzL,QAAQ0L,YAAcA,YAStB1L,QAAQ2L,aAAeA,aAcvB3L,QAAQ6L,mBAAqBA,mBAS7B7L,QAAQmM,UAAYA,UASpBnM,QAAQqM,UAAYA,UAUpBrM,QAAQsM,aAAeA,a;;;;;;;AC/NvBxM,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQ2M,UAAY,QACpB3M,QAAQ4M,SAAW,OACnB5M,QAAQ6M,cAAgB,YACxB7M,QAAQ8M,aAAe,WACvB9M,QAAQ+M,WAAa,SACrB/M,QAAQgN,iBAAmB,eAC3BhN,QAAQiN,OAAS,mBACjBjN,QAAQkN,YAAc,yBACtBlN,QAAQmN,YAAc,uBACtBnN,QAAQoN,mBAAqB,oBAC7BpN,QAAQqN,eAAiB,iB;;;;;;;ACLzB,GAAIvH,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAIlBqO,QAAyB,WACzB,QAASA,MAET,MAAOA,KAEXxO,SAAQwO,QAAUA,OASlB,IAAIC,kBAAkC,SAAU/G,GAE5C,QAAS+G,KACL,MAAkB,QAAX/G,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAW/D,MAbAD,WAAU2I,EAAkB/G,GAU5B+G,EAAiBjI,UAAUkI,MAAQ,SAAUC,EAASC,GAClD,OAAO,GAEJH,GACTD,QACFxO,SAAQyO,iBAAmBA,gBAe3B,IAAII,eAA+B,SAAUnH,GAEzC,QAASmH,KACL,MAAkB,QAAXnH,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAU/D,MAZAD,WAAU+I,EAAenH,GAIzBmH,EAAcrI,UAAUsI,KAAO,SAAUF,GAErC,MADAA,GAAQG,OAAOC,MAAMjJ,KAAM,gCACpB6I,EAAQvH,MAEnBwH,EAAcrI,UAAUyI,KAAO,SAAUL,GAErC,MADAA,GAAQG,OAAOC,MAAMjJ,KAAM,gCACpB6I,EAAQvH,MAEZwH,GACTL,QACFxO,SAAQ6O,cAAgBA,aACxB,IAAIK,cAA8B,SAAUxH,GAExC,QAASwH,KACL,MAAkB,QAAXxH,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAE/D,MAJAD,WAAUoJ,EAAcxH,GAIjBwH,GACTV,QACFxO,SAAQkP,aAAeA,YAWvB,IAAIC,eAA+B,SAAUzH,GAEzC,QAASyH,KACL,MAAkB,QAAXzH,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAE/D,MAJAD,WAAUqJ,EAAezH,GAIlByH,GACTX,QACFxO,SAAQmP,cAAgBA,aACxB,IAAIC,sBAAsC,WACtC,QAASA,GAAqBC,GAC1BtJ,KAAKsJ,YAAcA,EAKvB,MAHAD,GAAqB5I,UAAU8I,OAAS,SAAUC,GAC9C,MAAO,IAAIxJ,MAAKsJ,YAAYE,IAEzBH,IAEXpP,SAAQoP,qBAAuBA,oBAC/B,IAAII,iCAAiD,WACjD,QAASA,GAAgCC,GACrC1J,KAAK0J,YAAcA,EAUvB,MARAD,GAAgChJ,UAAUkJ,WAAa,SAAUC,GAC7D5J,KAAK0J,YAAYnH,QAAQ,SAAUsH,GAAc,MAAOD,GAASE,gBAAgBD,MAErFJ,EAAkClC,YAC9BgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAMS,WAAYoL,QAAQ,EAAGG,YAAYtN,YACpF+M,WAAW,qBAAsB3I,SAClCoK,KAGPxP,SAAQwP,gCAAkCA,gC;;;;;;;ACrI1C,QAASM,cAAaC,GAClB,IAAKA,EAAOC,KACR,MAAO,EACX,IAAIC,GAAaF,EAAOC,KAAK7H,QAAQ,IACrC,OAAI8H,IAAc,EACPF,EAAOC,KAAKE,UAAU,EAAGD,GAEzBF,EAAOC,KAOtB,QAASG,YAAWJ,GAChB,IAAKA,EAAOC,KACR,MAAO,EACX,IAAIC,GAAaF,EAAOC,KAAK7H,QAAQ,IACrC,OAAI8H,IAAc,EACPF,EAAOC,KAAKE,UAAUD,EAAa,GAEnCF,EAAOC,KAOtB,QAASI,aAAYnJ,EAAQoJ,GACzB,GAAIpJ,EAAO1B,KAAO8K,EACd,MAAOpJ,EACX,QAAwB/B,KAApB+B,EAAOhC,SACP,IAAK,GAAIyE,GAAK,EAAGC,EAAK1C,EAAOhC,SAAUyE,EAAKC,EAAGrE,OAAQoE,IAAM,CACzD,GAAI3B,GAAQ4B,EAAGD,GACX4G,EAASF,YAAYrI,EAAOsI,EAChC,QAAenL,KAAXoL,EACA,MAAOA,IASvB,QAASC,YAAWvL,EAASwL,GAEzB,IADA,GAAI1J,GAAU9B,MACKE,KAAZ4B,GAAuB,CAC1B,GAAI0J,EAAU1J,GACV,MAAOA,EAEPA,GADKA,YAAmB2J,UAASzJ,cACvBF,EAAQG,WAER/B,GAElB,MAAO4B,GAMX,QAAS4J,qBAAoB1L,EAASwL,GAElC,IADA,GAAI1J,GAAU9B,MACKE,KAAZ4B,GAAuB,CAC1B,GAAI0J,EAAU1J,GACV,MAAOA,EAEPA,GADKA,YAAmB2J,UAASzJ,cACvBF,EAAQG,WAER/B,GAElB,MAAO4B,GAOX,QAAS6J,gBAAejI,EAAOkI,EAAQpD,GACnC,GAAIoD,IAAWpD,EAAQ,CAEnB,KAAOoD,YAAkBH,UAASzJ,eAG9B,GAFA0B,EAAQkI,EAAOnI,cAAcC,IAC7BkI,EAASA,EAAO3J,UACDuG,EACX,MAAO9E,EAIf,KADA,GAAImI,MACGrD,YAAkBiD,UAASzJ,eAC9B6J,EAAY7I,KAAKwF,GACjBA,EAASA,EAAOvG,MAEpB,IAAI2J,IAAWpD,EACX,KAAM,IAAItG,OAAM,mCAAqC0J,EAAOrL,GAAK,KAAOiI,EAAOjI,GACnF,KAAK,GAAIC,GAAIqL,EAAYvL,OAAS,EAAGE,GAAK,EAAGA,IACzCkD,EAAQmI,EAAYrL,GAAGwD,cAAcN,GAG7C,MAAOA,GAzGX5I,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwQ,UAAW,mBAAAtQ,CAAQ,EAcvBH,SAAQ8P,aAAeA,aAcvB9P,QAAQmQ,WAAaA,WAkBrBnQ,QAAQoQ,YAAcA,YAgBtBpQ,QAAQuQ,WAAaA,WAgBrBvQ,QAAQ0Q,oBAAsBA,oBA4B9B1Q,QAAQ2Q,eAAiBA,e;;;;;;;ACzFzB,QAASG,eAAc9L,GACnB,MAAO,UAAYA,GAGvB,QAAS+L,mBAAkB/L,GACvB,MAAO8L,eAAc9L,IACdA,EAAQuC,WAAWvH,QAAQgR,yBAC3B,UAAYhM,GAGvB,QAASiM,mBAAkBjM,GACvB,MAAO8L,eAAc9L,IACdA,EAAQuC,WAAWvH,QAAQkR,wBAGtC,QAASC,YAAWnM,GAChB,MAAOA,GAAQuC,WAAWvH,QAAQoR,gBAAkBN,cAAc9L,GAGtE,QAASqM,aAAYrM,GACjB,MAAOA,GAAQuC,WAAWvH,QAAQsR,eAC3B,aAAetM,GAG1B,QAASuM,mBAAkBvM,GACvB,GAAIwM,GAAcC,eAAef,oBAAoB1L,EAAS8L,cAC9D,QAAoB5L,KAAhBsM,EAA2B,CAG3B,IAFA,GAAIE,GAASF,EAAYE,OACrB5K,EAAU0K,EACP1K,YAAmB2J,UAASzJ,eAAe,CAC9C,GAAI2K,GAAW7K,EAAQG,MACvByK,GAASC,EAASlJ,cAAciJ,GAChC5K,EAAU6K,EAEd,MAAOD,GAEN,GAAI1M,YAAmByL,UAAS1J,WAAY,CAC7C,GAAIoC,GAAenE,EAAQmE,YAC3B,QAASP,EAAG,EAAGC,EAAG,EAAGC,MAAOK,EAAaL,MAAOC,OAAQI,EAAaJ,QAGrE,MAAOrC,YAAW0C,aA3D1B,GAAItD,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnBsR,eAAiB,mBAAAtR,CAAQ,EAC7BH,SAAQoR,cAAgB5O,OAAO,iBAC/BxC,QAAQgR,uBAAyBxO,OAAO,0BACxCxC,QAAQkR,uBAAyB1O,OAAO,0BACxCxC,QAAQsR,aAAe9O,OAAO,gBAI9BxC,QAAQ8Q,cAAgBA,cAMxB9Q,QAAQ+Q,kBAAoBA,kBAK5B/Q,QAAQiR,kBAAoBA,kBAI5BjR,QAAQmR,WAAaA,WAKrBnR,QAAQqR,YAAcA,YAqBtBrR,QAAQuR,kBAAoBA,iBAI5B,IAAIK,eAA+B,SAAUlK,GAEzC,QAASkK,KACL,GAAIjK,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAGhE,OAFA4B,GAAMkK,SAAWnL,WAAW6F,aAC5B5E,EAAMmK,KAAOpL,WAAW+F,gBACjB9E,EAkDX,MAvDA7B,WAAU8L,EAAelK,GAOzB5H,OAAOC,eAAe6R,EAAcpL,UAAW,UAC3CK,IAAK,WACD,OACI+B,EAAG7C,KAAK8L,SAASjJ,EACjBC,EAAG9C,KAAK8L,SAAShJ,EACjBC,MAAO/C,KAAK+L,KAAKhJ,MACjBC,OAAQhD,KAAK+L,KAAK/I,SAG1BU,IAAK,SAAUsI,GACXhM,KAAK8L,UACDjJ,EAAGmJ,EAAUnJ,EACbC,EAAGkJ,EAAUlJ,GAEjB9C,KAAK+L,MACDhJ,MAAOiJ,EAAUjJ,MACjBC,OAAQgJ,EAAUhJ,SAG1B5B,YAAY,EACZC,cAAc,IAElBwK,EAAcpL,UAAUiC,cAAgB,SAAUC,GAC9C,GAAI4H,IACA1H,EAAGF,EAAME,EAAI7C,KAAK8L,SAASjJ,EAC3BC,EAAGH,EAAMG,EAAI9C,KAAK8L,SAAShJ,EAC3BC,OAAQ,EACRC,QAAS,EAMb,OAJIrC,YAAWiC,SAASD,KACpB4H,EAAOxH,MAAQJ,EAAMI,MACrBwH,EAAOvH,OAASL,EAAMK,QAEnBuH,GAEXsB,EAAcpL,UAAUwC,cAAgB,SAAUN,GAC9C,GAAI4H,IACA1H,EAAGF,EAAME,EAAI7C,KAAK8L,SAASjJ,EAC3BC,EAAGH,EAAMG,EAAI9C,KAAK8L,SAAShJ,EAC3BC,OAAQ,EACRC,QAAS,EAMb,OAJIrC,YAAWiC,SAASD,KACpB4H,EAAOxH,MAAQJ,EAAMI,MACrBwH,EAAOvH,OAASL,EAAMK,QAEnBuH,GAEJsB,GACTnB,SAASzJ,cACXhH,SAAQ4R,cAAgBA,c;;;;;;;AClIxB9R,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI+R,YAAa,mBAAA7R,CAAQ,IACzBH,SAAQiS,gCAAkC,qDAC1CjS,QAAQkS,oBAAsB,uDAC9BlS,QAAQmS,cAAgB,gBACxBnS,QAAQoS,cAAgB,gBACxBpS,QAAQqS,gBAAkB,+CAC1BrS,QAAQsS,cAAgB,sCACxBtS,QAAQuS,eAAiB,oDACzBvS,QAAQwS,8BAAgC,8CACxCxS,QAAQyS,0BAA4B,0DACpCzS,QAAQ0S,oBAAsB,6BAC9B1S,QAAQ2S,gBAAkB,oDAC1B3S,QAAQ4S,qBAAuB,wBAC/B5S,QAAQ6S,4BAA8B,oCACtC7S,QAAQ8S,0BAA4B,6DACpC9S,QAAQ+S,yBAA2B,yDACnC/S,QAAQgT,sBAAwB,2FAEhChT,QAAQiT,4BAA8B,uIAEtCjT,QAAQkT,4BAA8B,4DACtClT,QAAQmT,4BAA8B,0EACtCnT,QAAQoT,oCAAsC,+EAE9CpT,QAAQqT,wCAA0C,yFAElDrT,QAAQsT,gCAAkC,yEAC1CtT,QAAQuT,sBAAwB5J,IAAM,iCAAkC,KAAM,IAAKA,GAAG6J,KAAO,iCAAkC,KAAM,IAAKxB,WAAWyB,SAAS9J,GAAI,EAAG,GACrK,IAAIA,I;;;;;;;AC7BJ7J,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyT,cAAe,mBAAAvT,CAAQ,GACvBwT,SAAY,WACZ,QAASA,GAASlG,EAAKxN,GACnB8F,KAAK0H,IAAMA,EACX1H,KAAK9F,MAAQA,EAUjB,MARA0T,GAASnN,UAAUoN,SAAW,WAC1B,MAAI7N,MAAK0H,MAAQiG,aAAa/G,UACnB,UAAY5G,KAAK9F,MAAM2T,WAAa,IAGpC,iBAAmB7N,KAAK0H,IAAImG,WAAa,YAAc7N,KAAK9F,MAAQ,MAG5E0T,IAEX3T,SAAQ2T,SAAWA,S;;;;;;;ACXnB,GAAI7N,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClB0T,WAAa,mBAAA1T,CAAQ,IACrBsQ,SAAW,mBAAAtQ,CAAQ,GAKnB2T,cAA+B,WAC/B,QAASA,GAAcnE,GACnB5J,KAAK4J,SAAWA,EAyFpB,MAvFAmE,GAActN,UAAUuN,cAAgB,SAAUhE,EAAQ9I,GACtD,GAAIc,EACJ,IAAIhC,KAAK4J,SAASqE,OAAOjE,EAAOC,MAAO,CACnC,GAAIiE,GAAalO,KAAK4J,SAAS9I,IAAIkJ,EAAOC,SAAM9K,GAChD,MAAM+O,YAAsBxD,UAASzJ,eACjC,KAAM,IAAIE,OAAM,qBAAuB6I,EAAOC,KAAO,wCACzDjI,GAAQkM,MAGRlM,GAAQ,GAAI0I,UAASzJ,aAEzB,OAAOjB,MAAKmO,gBAAgBnM,EAAOgI,EAAQ9I,IAE/C6M,EAActN,UAAU2N,WAAa,SAAUpE,GAC3C,GAAI1I,EACJ,IAAItB,KAAK4J,SAASqE,OAAOjE,EAAOC,MAAO,CACnC,GAAIiE,GAAalO,KAAK4J,SAAS9I,IAAIkJ,EAAOC,SAAM9K,GAChD,MAAM+O,YAAsBxD,UAAS1J,YACjC,KAAM,IAAIG,OAAM,qBAAuB6I,EAAOC,KAAO,qCACzD3I,GAAO4M,MAGP5M,GAAO,GAAIoJ,UAAS1J,UAExB,OAAOhB,MAAKqO,eAAe/M,EAAM0I,IAErC+D,EAActN,UAAU6N,aAAe,SAAUrP,GAC7C,GAAI2C,GAAQ5B,KACRgK,IACJ,KAAK,GAAItC,KAAOzI,GACZ,IAAKe,KAAKuO,WAAWtP,EAASyI,GAAM,CAChC,GAAIxN,GAAQ+E,EAAQyI,EACC,mBAAVxN,KACP8P,EAAOtC,GAAOxN,GAK1B,MAFI+E,aAAmByL,UAAShJ,iBAC5BsI,EAAiB,SAAI/K,EAAQC,SAASsP,IAAI,SAAUxM,GAAS,MAAOJ,GAAM0M,aAAatM,MACpFgI,GAEX+D,EAActN,UAAUgO,kBAAoB,SAAUxP,EAAS+K,GAC3D,IAAK,GAAItC,KAAOsC,GACZ,IAAKhK,KAAKuO,WAAWtP,EAASyI,GAAM,CAChC,GAAIxN,GAAQ8P,EAAOtC,EACE,mBAAVxN,KACP+E,EAAQyI,GAAOxN,GAG3B,MAAO+E,IAEX8O,EAActN,UAAU8N,WAAa,SAAUtP,EAASyP,GACpD,IAAK,WAAY,SAAU,SAAStM,QAAQsM,IAAiB,EACzD,OAAO,CACX,IAAIC,GAAM1P,CACV,GAAG,CACC,GAAI2P,GAAa7U,OAAO+N,yBAAyB6G,EAAKD,EACtD,QAAmBvP,KAAfyP,EACA,WAA0BzP,KAAnByP,EAAW9N,GACtB6N,GAAM5U,OAAO8U,eAAeF,SACvBA,EACT,QAAO,GAEXZ,EAActN,UAAUqO,iBAAmB,SAAU5N,EAAQ8I,GACzD,GAAIpI,GAAQ5B,IAKZ,OAJAA,MAAKyO,kBAAkBvN,EAAQ8I,GAC3BU,SAAS1L,SAASgL,KAClB9I,EAAOhC,SAAW8K,EAAO9K,SAASsP,IAAI,SAAUO,GAAe,MAAOnN,GAAMoM,cAAce,EAAa7N,MAEpGA,GAEX6M,EAActN,UAAU0N,gBAAkB,SAAUnM,EAAOgI,EAAQ9I,GAK/D,MAJAlB,MAAK8O,iBAAiB9M,EAAOgI,OACd7K,KAAX+B,IACAc,EAAMd,OAASA,GAEZc,GAEX+L,EAActN,UAAU4N,eAAiB,SAAU/M,EAAM0I,GAGrD,MAFAhK,MAAK8O,iBAAiBxN,EAAM0I,GAC5B1I,EAAKC,MAAMQ,IAAIT,GACRA,GAEXyM,EAAgBxG,YACZgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAM+B,iBAC5C0J,WAAW,qBAAsB1J,kBAClCyP,KAGP9T,SAAQ8T,cAAgBA,cACxB9T,QAAQ+U,WAAajV,OAAO0M,QACxBwD,KAAM,OACNzK,GAAI,SAKR,IAAIlB,gBAAgC,SAAUqD,GAE1C,QAASrD,GAAe2Q,GACpB,GAAIrN,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADAiP,GAAc1M,QAAQ,SAAU2M,GAAgB,MAAOtN,GAAMuN,SAASD,EAAajF,KAAMiF,EAAaE,UAC/FxN,EAOX,MAXA7B,WAAUzB,EAAgBqD,GAM1BrD,EAAiBiJ,YACbgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAM8B,4BAA6B+J,QAAQ,EAAGG,YAAYtN,YACrG+M,WAAW,qBAAsB3I,SAClCf,IAELwP,WAAWuB,iBACbpV,SAAQqE,eAAiBA,e;;;;;;;ACzIzB,QAASgR,SAAQC,EAAOC,EAAMtV,GAC1BuV,SAASF,GAAOC,GAAQtV,EAG5B,QAASwV,UAASH,EAAOC,EAAMtV,GAC3ByV,SAASJ,GAAOC,GAAQtV,EAG5B,QAAS0V,sBAAqB/E,EAAQpD,GAClC,GAAIoI,GAAYF,SAAS9E,EACzB,KAAK,GAAIjD,KAAKiI,GACNA,EAAUtP,eAAeqH,IACzB8H,SAASjI,EAAQG,GAAG,GAIhC,QAASkI,wBAAuB7Q,EAASwI,GAErC,IAAK,GADDoI,GAAY5Q,EAAQ4Q,UACfpQ,EAAI,EAAGA,EAAIoQ,EAAUtQ,OAAQE,IAAK,CACvC,GAAIsQ,GAAOF,EAAUE,KAAKtQ,EACtBsQ,IACAL,SAASjI,EAAQsI,GAAM,IAInC,QAASC,YAAWT,EAAOU,GACvBC,QAAQX,GAAOU,MAAQE,YAAcD,QAAQX,GAAOU,UAAcA,GAGtE,QAASG,IAAGb,EAAOc,EAAOC,EAAUrR,GAChC,GAAIsR,GAAMC,MAAMjB,EAChB,IAAIgB,EAAIF,GACJ,KAAM,IAAIlP,OAAM,qBAAuBkP,EAAQ,+BAEnDE,GAAIF,IAAUC,EAAUrR,GAG5B,QAASwQ,UAASF,GACd,GAAIkB,GAAOP,QAAQX,EAGnB,OAFKkB,GAAKC,QACND,EAAKC,UACFD,EAAKC,MAGhB,QAASR,SAAQX,GAGb,MAFKA,GAAMkB,OACPlB,EAAMkB,SACHlB,EAAMkB,KAEjB,QAASd,UAASJ,GACd,GAAIkB,GAAOP,QAAQX,EAGnB,OAFKkB,GAAKE,QACNF,EAAKE,UACFF,EAAKE,MAEhB,QAASH,OAAMjB,GACX,GAAIkB,GAAOP,QAAQX,EAGnB,OAFKkB,GAAKL,KACNK,EAAKL,OACFK,EAAKL,GApEhB,GAAID,UAAYnQ,MAAQA,KAAKmQ,UAAapW,OAAO6W,QAAU,SAASC,GAChE,IAAK,GAAI5L,GAAGxF,EAAI,EAAGqR,EAAIhP,UAAUvC,OAAQE,EAAIqR,EAAGrR,IAAK,CACjDwF,EAAInD,UAAUrC,EACd,KAAK,GAAIa,KAAK2E,GAAOlL,OAAO0G,UAAUF,eAAe4C,KAAK8B,EAAG3E,KACzDuQ,EAAEvQ,GAAK2E,EAAE3E,IAEjB,MAAOuQ,GAEX9W,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAItDD,QAAQqV,QAAUA,QAIlBrV,QAAQyV,SAAWA,SAQnBzV,QAAQ2V,qBAAuBA,qBAS/B3V,QAAQ6V,uBAAyBA,uBAIjC7V,QAAQ+V,WAAaA,WAQrB/V,QAAQmW,GAAKA,GAObnW,QAAQwV,SAAWA,S;;;;;;;AClDnB,QAASsB,cAAa9R,GAClB,MAAOA,GAAQuC,WAAWvH,QAAQ+W,eAHtCjX,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQ+W,cAAgBvU,OAAO,iBAI/BxC,QAAQ8W,aAAeA,a;;;;;;;ACRvB,QAASE,cAAaC,EAAkBxC,EAAcyC,EAAgBhJ,GAElEiJ,wBADkBzD,aAAazG,OACMgK,EAAkBxC,EAAcvG,EAAUgJ,GAGnF,QAASE,aAAYH,EAAkBxC,EAAcvG,GAEjDiJ,wBADkBzD,aAAaxG,YACM+J,EAAiB9R,YAAasP,EAAcvG,GAGrF,QAASiJ,yBAAwBE,EAAaJ,EAAkBxC,EAAcvG,EAAUgJ,GACpF,GAAII,MACAC,EAAkD,gBAAnBL,GAC/BzJ,MAA0BvI,KAAnBgS,GAAgCK,EAAwBL,EAAetD,WAAaa,CAC/F,KAA6B,IAAzB8C,OAAkDrS,KAAjBuP,EACjC,KAAM,IAAIvN,OAAMsQ,WAAWvE,8BAE+B,IAA1DnF,QAAQ2J,eAAeJ,EAAaJ,KACpCK,EAA6BxJ,QAAQ4J,YAAYL,EAAaJ,GAElE,IAAIU,GAA0BL,EAA2B7J,EACzD,KAA+C,IAA3CrI,MAAMwS,QAAQD,GACdA,SAGA,KAAK,GAAInS,GAAI,EAAGA,EAAImS,EAAwBrS,OAAQE,IAAK,CACrD,GAAIqS,GAAIF,EAAwBnS,EAChC,IAAIqS,EAAEpK,MAAQS,EAAST,IACnB,KAAM,IAAIvG,OAAMsQ,WAAWtF,oBAAsB,IAAM2F,EAAEpK,KAIrEkK,EAAwB3P,KAAKkG,GAC7BoJ,EAA2B7J,GAAOkK,EAClC7J,QAAQgK,eAAeT,EAAaC,EAA4BL,GAEpE,QAASc,WAAUxK,EAAYC,GAC3BM,QAAQhM,SAASyL,EAAYC,GAEjC,QAASwK,QAAO5J,EAAYC,GACxB,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3D,QAAStM,UAASuM,EAAWb,EAAQ0J,GACH,gBAAnBA,GACPa,WAAWC,OAAOd,EAAgB7I,IAAab,GAEhB,gBAAnB0J,GACZpJ,QAAQhM,UAAUuM,GAAYb,EAAQ0J,GAGtCa,WAAW1J,GAAYb,GArD/B1N,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyT,cAAe,mBAAAvT,CAAQ,GACvBqX,WAAa,mBAAArX,CAAQ,EAKzBH,SAAQgX,aAAeA,aAKvBhX,QAAQoX,YAAcA,YA4CtBpX,QAAQ8B,SAAWA,S;;;;;;;ACxDnBhC,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIgY,mBACAC,UAAW,YACXC,UAAW,YAEfnY,SAAQiY,iBAAmBA,gBAC3B,IAAIG,kBACAC,cAAe,gBACfC,YAAa,cACbC,aAAc,eACdC,QAAS,UACTC,SAAU,WACVC,SAAU,WACVC,QAAS,UACTC,SAAU,WAEd5Y,SAAQoY,gBAAkBA,eAC1B,IAAIS,iBACAC,cAAe,gBACfC,oBAAqB,sBACrBC,SAAU,WAEdhZ,SAAQ6Y,eAAiBA,e;;;;;;;AChBzB,GAAI/S,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBsQ,SAAW,mBAAAtQ,CAAQ,GACnB8Y,SAAW,mBAAA9Y,CAAQ,IACnB+Y,cAAgB,mBAAA/Y,CAAQ,IACxBgZ,aAAe,mBAAAhZ,CAAQ,IACvBiZ,UAA2B,WAC3B,QAASA,GAAUC,EAAkBC,EAAWC,OACrB,KAAnBA,IAA6BA,MACjCxT,KAAKsT,iBAAmBA,EACxBtT,KAAKuT,UAAYA,EACjBvT,KAAKwT,eAAiBA,EA4G1B,MA1GAH,GAAU5S,UAAU0O,SAAW,SAAUsE,GACrCzT,KAAKwT,eAAevR,KAAKwR,IAE7BJ,EAAU5S,UAAUiT,WAAa,SAAUD,GACvC,GAAIlS,GAAQvB,KAAKwT,eAAepR,QAAQqR,EACpClS,IAAS,GACTvB,KAAKwT,eAAetR,OAAOX,EAAO,IAE1C8R,EAAU5S,UAAUkT,iBAAmB,SAAUC,EAAOvD,GAGpD,IAFA,GAAI5I,GAAS4I,EAAM5I,OACflG,EAAQqS,EAAMrS,MACXkG,GAAQ,CACX,GAAIA,EAAOjI,GAAI,CACX,GAAIP,GAAUsC,EAAMwC,QAAQ/D,KAAKuT,UAAUM,yBAAyBpM,GACpE,QAAgBtI,KAAZF,EACA,MAAOA,GAEfwI,EAASA,EAAOqM,aAIxBT,EAAU5S,UAAUsT,YAAc,SAAUC,EAAYJ,EAAOvD,GAC3D,GAAIzO,GAAQ5B,IACZA,MAAKiU,kBAAkBD,EAAYJ,EACnC,IAAI3U,GAAUe,KAAK2T,iBAAiBC,EAAOvD,EAC3C,IAAKpR,EAAL,CAEA,GAAIiV,GAAUlU,KAAKwT,eACdhF,IAAI,SAAU8B,GAAY,MAAOA,GAAS0D,GAAYnS,MAAMyO,GAAWrR,EAASoR,MAChF8D,OAAO,SAAU7O,EAAGjF,GAAK,MAAOiF,GAAE8O,OAAO/T,IAC9C,IAAI6T,EAAQ3U,OAAS,EAAG,CACpB8Q,EAAMgE,gBACN,KAAK,GAAI1Q,GAAK,EAAG2Q,EAAYJ,EAASvQ,EAAK2Q,EAAU/U,OAAQoE,IAAM,CAC/D,GAAI4Q,GAAkBD,EAAU3Q,EAC5BuP,UAASsB,SAASD,GAClBvU,KAAKsT,iBAAiBmB,SAASF,GAG/BA,EAAgBG,KAAK,SAAUlL,GAC3B5H,EAAM0R,iBAAiBmB,SAASjL,SAMpD6J,EAAU5S,UAAUwT,kBAAoB,SAAUD,EAAYJ,GAC1D,GAAIe,SAAU,CACV,GAAIC,GAAaD,SAASE,eAAe7U,KAAKuT,UAAUuB,yBAAyBlB,GAC9D,eAAfI,GAA6C,OAAfY,GAAmD,kBAArBA,GAAWG,OACvEH,EAAWG,UAGvB1B,EAAU5S,UAAUuU,UAAY,SAAUpB,EAAOvD,GAC7CrQ,KAAK+T,YAAY,YAAaH,EAAOvD,IAEzCgD,EAAU5S,UAAUwU,SAAW,SAAUrB,EAAOvD,GAC5CrQ,KAAK+T,YAAY,WAAYH,EAAOvD,IAExCgD,EAAU5S,UAAUyU,WAAa,SAAUtB,EAAOvD,GAC9CrQ,KAAK+T,YAAY,aAAcH,EAAOvD,IAE1CgD,EAAU5S,UAAU0U,WAAa,SAAUvB,EAAOvD,GAC9CrQ,KAAK+T,YAAY,aAAcH,EAAOvD,IAE1CgD,EAAU5S,UAAU2U,UAAY,SAAUxB,EAAOvD,GAC7CrQ,KAAK+T,YAAY,YAAaH,EAAOvD,IAEzCgD,EAAU5S,UAAU4U,UAAY,SAAUzB,EAAOvD,GAC7CrQ,KAAK+T,YAAY,YAAaH,EAAOvD,IAEzCgD,EAAU5S,UAAU6U,QAAU,SAAU1B,EAAOvD,GAC3CrQ,KAAK+T,YAAY,UAAWH,EAAOvD,IAEvCgD,EAAU5S,UAAU8U,MAAQ,SAAU3B,EAAOvD,GACzCrQ,KAAK+T,YAAY,QAASH,EAAOvD,IAErCgD,EAAU5S,UAAU+U,YAAc,SAAU5B,EAAOvD,GAC/CrQ,KAAK+T,YAAY,cAAeH,EAAOvD,IAE3CgD,EAAU5S,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAgB5C,MAfIA,aAAmByL,UAAS1J,aAC5BmS,cAAc/C,GAAGb,EAAO,YAAavP,KAAKgV,UAAUS,KAAKzV,MAAOf,GAChEkU,cAAc/C,GAAGb,EAAO,WAAYvP,KAAKiV,SAASQ,KAAKzV,MAAOf,GAC9DkU,cAAc/C,GAAGb,EAAO,aAAcvP,KAAKkV,WAAWO,KAAKzV,MAAOf,GAClEkU,cAAc/C,GAAGb,EAAO,aAAcvP,KAAKmV,WAAWM,KAAKzV,MAAOf,GAClEkU,cAAc/C,GAAGb,EAAO,YAAavP,KAAKoV,UAAUK,KAAKzV,MAAOf,GAChEkU,cAAc/C,GAAGb,EAAO,UAAWvP,KAAKsV,QAAQG,KAAKzV,MAAOf,GAC5DkU,cAAc/C,GAAGb,EAAO,YAAavP,KAAKqV,UAAUI,KAAKzV,MAAOf,GAChEkU,cAAc/C,GAAGb,EAAO,QAASvP,KAAKuV,MAAME,KAAKzV,MAAOf,GACxDkU,cAAc/C,GAAGb,EAAO,cAAe,SAAU9H,EAAQ4I,GACrDA,EAAMgE,kBACPpV,GACHkU,cAAc/C,GAAGb,EAAO,WAAYvP,KAAKwV,YAAYC,KAAKzV,MAAOf,IAErEsQ,EAAQvP,KAAKwT,eAAeW,OAAO,SAAUrD,EAAGR,GAAY,MAAOA,GAASvU,SAAS+U,EAAG7R,IAAasQ,IAGzG8D,EAAU5S,UAAUiV,WAAa,aAEjCrC,EAAY9L,YACRgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5C4L,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMY,YAC5CiL,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAMyB,gBAAiBoK,QAAQ,EAAGG,YAAYtN,YACzF+M,WAAW,qBAAsBjO,OAAQqZ,aAAajW,UAAWkC,SAClEgU,KAGPpZ,SAAQoZ,UAAYA,SACpB,IAAIsC,gBAAgC,SAAUhU,GAE1C,QAASgU,GAAerC,EAAkBC,EAAWC,OAC1B,KAAnBA,IAA6BA,KACjC,IAAI5R,GAAQD,EAAOwB,KAAKnD,KAAMsT,EAAkBC,EAAWC,IAAmBxT,IAI9E,OAHA4B,GAAM0R,iBAAmBA,EACzB1R,EAAM2R,UAAYA,EAClB3R,EAAM4R,eAAiBA,EAChB5R,EASX,MAhBA7B,WAAU4V,EAAgBhU,GAS1BgU,EAAiBpO,YACbgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5C4L,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMY,YAC5CiL,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAM4B,qBAAsBiK,QAAQ,EAAGG,YAAYtN,YAC9F+M,WAAW,qBAAsBjO,OAAQqZ,aAAajW,UAAWkC,SAClEsW,IAELtC,UACFpZ,SAAQ0b,eAAiBA,cACzB,IAAI3X,eAA+B,WAC/B,QAASA,MAmCT,MAjCAA,GAAcyC,UAAUuU,UAAY,SAAUvN,EAAQ4I,GAClD,UAEJrS,EAAcyC,UAAUwU,SAAW,SAAUxN,EAAQ4I,GACjD,UAEJrS,EAAcyC,UAAUyU,WAAa,SAAUzN,EAAQ4I,GACnD,UAEJrS,EAAcyC,UAAU0U,WAAa,SAAU1N,EAAQ4I,GACnD,UAEJrS,EAAcyC,UAAU2U,UAAY,SAAU3N,EAAQ4I,GAClD,UAEJrS,EAAcyC,UAAU4U,UAAY,SAAU5N,EAAQ4I,GAClD,UAEJrS,EAAcyC,UAAU6U,QAAU,SAAU7N,EAAQ4I,GAChD,UAEJrS,EAAcyC,UAAU8U,MAAQ,SAAU9N,EAAQ4I,GAC9C,UAEJrS,EAAcyC,UAAU+U,YAAc,SAAU/N,EAAQ4I,GACpD,UAEJrS,EAAcyC,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAChD,MAAOsQ,IAEXvR,EAAgBuJ,YACZgB,YAAY9N,cACbuD,KAGP/D,SAAQ+D,cAAgBA,c;;;;;;;ACxMxB,QAAS4X,YAAW3W,GAChB,MAAOA,aAAmByL,UAAS1J,YAC5B/B,EAAQuC,WAAWvH,QAAQ4b,kBAC3B,QAAU5W,IACV,UAAYA,GAPvBlF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwQ,UAAW,mBAAAtQ,CAAQ,EACvBH,SAAQ4b,gBAAkBpZ,OAAO,mBAOjCxC,QAAQ2b,WAAaA,W;;;;;;;ACdrB,QAAS/Z,QACL,QAASia,KACL,MAAOlW,MAAKC,MAA4B,OAArB,EAAID,KAAKE,WACvB+N,SAAS,IACT1D,UAAU,GAEnB,MAAO2L,KAAOA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAC3CA,IAAO,IAAMA,IAAOA,IAAOA,IARnC/b,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAUtDD,QAAQ4B,KAAOA,K;;;;;;;ACLf,QAASka,aAAYxF,GACnB,MAAuB,gBAARA,IACQ,gBAARA,IACQ,iBAARA,IACQ,gBAARA,IACC,OAARA,OACQpR,KAARoR,EAGV,QAASyF,gBAAetF,EAAOuF,EAAOC,EAAOC,GAkB3C,QAASC,GAAQC,EAAW3O,EAAK6I,IACtB/B,EAAI6H,KAAe7H,EAAI6H,QAC7B3O,GAAO6I,EAlBZ,IAAK,GADD/B,IAAQ8H,GAAIL,GACPxW,EAAI,EAAG8W,EAAMJ,EAAQ5W,OAAQE,EAAI8W,EAAK9W,IAAK,CAClD,GAAI+W,GAAML,EAAQ1W,EACfiR,GAAM8F,KACPhI,EAAIgI,GAAO9F,EAAM8F,IAErB,IAAI,GAAI9O,KAAOgJ,GACb,GAAW,QAARhJ,GAAyB,eAARA,GAAgC,aAARA,EAAoB,CAC9D,GAAI+O,GAAM/O,EAAItF,QAAQ,IACnBqU,GAAM,EACPL,EAAQ1O,EAAIgP,MAAM,EAAGD,GAAM/O,EAAIgP,MAAMD,EAAI,GAAI/F,EAAMhJ,IAC5C8G,EAAI9G,IACX0O,EAAQF,EAAOxO,EAAKgJ,EAAMhJ,IAGhC,MAAO8G,GAQT,QAASmI,oBAAmBV,EAAOC,EAAOC,EAASS,EAAKlG,EAAOxR,GAK7D,GAHGwR,EAAMmG,WACPD,GAAYlG,EAAMmG,UAEjBnG,EAAMoG,WAAY,CACnB,GAAIC,GAAMrG,EAAMoG,UAChBF,GAAMA,EAAM,KACVvX,MAAMwS,QAAQkF,GAAOA,EAAIC,KAAK,KAAOD,EAAIE,QAAQ,OAAQ,MAI7D,OACEC,IAAYN,EACZnG,KAAYuF,eAAetF,EAAOuF,EAAOC,EAAOC,GAChDjX,SAAYA,EAASsP,IAAK,SAAS5G,GACjC,MAAOmO,aAAYnO,IAAMuP,KAAMvP,GAAKA,IAEtCF,IAAKgJ,EAAMhJ,KAIf,QAAS0P,oBAAmBnB,EAAOC,EAAOC,EAASS,EAAKlG,EAAOxR,GAC7D,GAAImY,EACJ,IAAkB,kBAART,GACRS,EAAMT,EAAIlG,EAAOxR,OACd,IAAG0X,GAA2B,kBAAbA,GAAIU,KACxBD,EAAMT,EAAIU,KAAK5G,EAAOxR,OACnB,KAAG0X,GAA6B,kBAAfA,GAAIW,OAGxB,KAAM,0FAFNF,GAAMT,EAAIW,OAAO7G,EAAOxR,GAI1B,MADAmY,GAAI3P,IAAMgJ,EAAMhJ,IACT2P,EAGT,QAASG,SAAQC,EAAQC,EAAOC,GAC9B,IAAK,GAAIlY,GAAIiY,EAAOnB,EAAMkB,EAAOlY,OAAQE,EAAI8W,EAAK9W,IAAK,CACrD,GAAIsQ,GAAO0H,EAAOhY,EACdJ,OAAMwS,QAAQ9B,GAChByH,QAAQzH,EAAM,EAAG4H,GAEjBA,EAAK1V,KAAK8N,IAKhB,QAAS6H,cAAaC,GACpB,GAAIA,EACF,IAAK,GAAIpY,GAAI,EAAG8W,EAAMsB,EAAMtY,OAAQE,EAAI8W,EAAK9W,IAC3C,GAAIJ,MAAMwS,QAAQgG,EAAMpY,IAAK,CAC3B,GAAIkY,GAAOE,EAAMnB,MAAM,EAAGjX,EAC1B+X,SAAQK,EAAOpY,EAAGkY,GAClBE,EAAQF,CACR,OAIN,MAAOE,GAGT,QAASC,YAAW7B,EAAOC,EAAOC,EAASS,EAAKlG,EAAOxR,GAGrD,MAFAwR,GAAQA,MACRxR,EAAW0Y,aAAa1Y,GACN,gBAAR0X,GACDD,mBAAmBV,EAAOC,EAAOC,EAASS,EAAKlG,EAAOxR,GAEtDkY,mBAAmBnB,EAAOC,EAAOC,EAASS,EAAKlG,EAAOxR,GAIjE,QAAS6Y,KAAI9B,EAAOC,EAAOC,GACzB,MAAO,UAAyBS,EAAKlG,EAAOxR,GAG1C,OAFG4C,UAAUvC,OAAS,IAAMF,MAAMwS,QAAQ3S,MACxCA,EAAWwX,MAAMvT,KAAKrB,UAAW,IAC5BgW,WAAW7B,EAAOC,GAAS,QAASC,GAAW6B,UAAWpB,EAAKlG,EAAOxR,IAhHjF,GAAI+Y,OAAQ,6BACRD,WAAa,OAAQ,KAAM,QAAS,QAAS,QAAS,QAAS,WAC/DtB,MAAQrX,MAAMoB,UAAUiW,KAkH5BwB,QAAOje,SACLke,KAAMJ,QAAI5Y,IACViZ,IAAKL,IAAIE,MAAO,SAChBF,IAAKA,K;;;;;;;AClHP,GAAIhY,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIme,UAAW,mBAAAje,CAAQ,IAKnBke,UAA2B,WAC3B,QAASA,GAAUzP,EAAS0P,OACX,KAATA,IAAmBA,EAAOF,SAASG,WACvCxY,KAAK6I,QAAUA,EACf7I,KAAKuY,KAAOA,EAqChB,MAnCAD,GAAU7X,UAAUiX,MAAQ,WACxB,GAAI9V,GAAQ5B,IACZ,OAAO,IAAIyY,SAAQ,SAAUC,EAASC,GAClC,GAAIjB,OAAQvY,GACRyZ,EAAS,EACTC,EAAS,SAAUC,GACnBF,GACA,IAAIG,OACU5Z,KAAVuY,GACAA,EAAQoB,EACRC,EAAQ,GAGRA,EAAQD,EAAOpB,CAEnB,IAAI7G,GAAIjR,KAAK+E,IAAI,EAAGoU,EAAQnX,EAAMiH,QAAQmQ,UACtCjY,EAAUa,EAAMqX,MAAMrX,EAAM2W,KAAK1H,GAAIjP,EAAMiH,QAC/CjH,GAAMiH,QAAQqQ,aAAaC,OAAOpY,GACxB,IAAN8P,GACAjP,EAAMiH,QAAQG,OAAOoQ,IAAIxX,EAAiB,IAATgX,EAAgBhX,EAAMiH,QAAQmQ,SAAY,QAC3EN,EAAQ3X,IAGRa,EAAMiH,QAAQwQ,OAAOC,YAAYT,GAGzC,IAAIjX,EAAMiH,QAAQwQ,OAAOE,cACrB3X,EAAMiH,QAAQwQ,OAAOC,YAAYT,OAEhC,CACD,GAAIW,GAAa5X,EAAMqX,MAAM,EAAGrX,EAAMiH,QACtC6P,GAAQc,OAIblB,IAEXre,SAAQqe,UAAYA,SACpB,IAAImB,mBAAmC,SAAU9X,GAE7C,QAAS8X,GAAkB7F,EAAO/K,EAAS6Q,EAAYnB,OAChC,KAAfmB,IAAyBA,UAChB,KAATnB,IAAmBA,EAAOF,SAASG,UACvC,IAAI5W,GAAQD,EAAOwB,KAAKnD,KAAM6I,EAAS0P,IAASvY,IAKhD,OAJA4B,GAAMgS,MAAQA,EACdhS,EAAMiH,QAAUA,EAChBjH,EAAM8X,WAAaA,EACnB9X,EAAM2W,KAAOA,EACN3W,EAaX,MAtBA7B,WAAU0Z,EAAmB9X,GAW7B8X,EAAkBhZ,UAAUkZ,QAAU,SAAUC,GAE5C,MADA5Z,MAAK0Z,WAAWzX,KAAK2X,GACd5Z,MAEXyZ,EAAkBhZ,UAAUwY,MAAQ,SAAUpI,EAAGhI,GAC7C,IAAK,GAAIlF,GAAK,EAAGC,EAAK5D,KAAK0Z,WAAY/V,EAAKC,EAAGrE,OAAQoE,IAAM,CACjDC,EAAGD,GACTsV,MAAMpI,EAAGhI,GAEf,MAAO7I,MAAK4T,OAET6F,GACTnB,UACFre,SAAQwf,kBAAoBA,kB;;;;;;;ACrF5B,GAAIlS,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBsQ,SAAW,mBAAAtQ,CAAQ,GACnB+Y,cAAgB,mBAAA/Y,CAAQ,IACxByf,QAAyB,WACzB,QAASA,GAAQvG,EAAkBwG,OACV,KAAjBA,IAA2BA,MAC/B9Z,KAAKsT,iBAAmBA,EACxBtT,KAAK8Z,aAAeA,EAsCxB,MApCAD,GAAQpZ,UAAU0O,SAAW,SAAU4K,GACnC/Z,KAAK8Z,aAAa7X,KAAK8X,IAE3BF,EAAQpZ,UAAUiT,WAAa,SAAUqG,GACrC,GAAIxY,GAAQvB,KAAK8Z,aAAa1X,QAAQ2X,EAClCxY,IAAS,GACTvB,KAAK8Z,aAAa5X,OAAOX,EAAO,IAExCsY,EAAQpZ,UAAUsT,YAAc,SAAUC,EAAYJ,EAAOvD,GACzD,GAAI6D,GAAUlU,KAAK8Z,aACdtL,IAAI,SAAU8B,GAAY,MAAOA,GAAS0D,GAAYnS,MAAMyO,GAAWsD,EAAOvD,MAC9E8D,OAAO,SAAU7O,EAAGjF,GAAK,MAAOiF,GAAE8O,OAAO/T,IAC1C6T,GAAQ3U,OAAS,IACjB8Q,EAAMgE,iBACNrU,KAAKsT,iBAAiB0G,YAAY9F,KAG1C2F,EAAQpZ,UAAUwZ,QAAU,SAAUhb,EAASoR,GAC3CrQ,KAAK+T,YAAY,UAAW9U,EAASoR,IAEzCwJ,EAAQpZ,UAAUsU,MAAQ,aAC1B8E,EAAQpZ,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAK1C,MAJIA,aAAmByL,UAAS1J,aAC5BmS,cAAc/C,GAAGb,EAAO,QAASvP,KAAK+U,MAAMU,KAAKzV,MAAOf,GACxDkU,cAAc/C,GAAGb,EAAO,UAAWvP,KAAKia,QAAQxE,KAAKzV,MAAOf,IAEzDsQ,GAEXsK,EAAQpZ,UAAUiV,WAAa,aAE/BmE,EAAUtS,YACNgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5C4L,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAMe,cAAe8K,QAAQ,EAAGG,YAAYtN,YACvF+M,WAAW,qBAAsBjO,OAAQsF,SAC1Cwa,KAGP5f,SAAQ4f,QAAUA,OAClB,IAAIvc,aAA6B,WAC7B,QAASA,MAQT,MANAA,GAAYmD,UAAUwZ,QAAU,SAAUhb,EAASoR,GAC/C,UAEJ/S,EAAciK,YACVgB,YAAY9N,cACb6C,KAGPrD,SAAQqD,YAAcA,Y;;;;;;;ACxDtB,QAAS4c,YAAWjb,GAChB,WAAiCE,KAA1BF,EAAQkb,eAA0D,kBAAnBlb,GAAa,MAGvE,QAASmb,gBAAenb,GACpB,MAAOib,YAAWjb,IAAYA,EAAQuC,WAAWvH,QAAQogB,aAyB7D,QAASC,uBAAsBC,EAAOrZ,GAClC,GAA+B,IAA3BA,EAAOhC,SAASK,OAChB,MAAOgb,EAqBX,KApBA,GAAI9a,GAAI,EAoBDA,EAAI8a,EAAMhb,SAnBH,WACV,GAAIib,GAAOD,EAAM9a,EACjB,QAAwBN,KAApBqb,EAAKC,WAA0B,CAC/B,GAAIlR,GAASrI,EAAOhC,SAASwb,KAAK,SAAU1Y,GACxC,MAAOA,aAAiB2Y,iBAAiC,aAAf3Y,EAAM4Y,MAAuB5Y,EAAMyY,aAAeD,EAAKC,YAErG,QAAetb,KAAXoK,GAAwBA,EAAOsR,UAAYpb,EAAI,GAAKA,EAAI8a,EAAMhb,OAAS,EAAG,CAC1E,GAAIub,GAAOP,EAAM9a,EAAI,GAAIsb,EAAOR,EAAM9a,EAAI,GACtCub,GAAanY,EAAGiY,EAAKjY,EAAI2X,EAAK3X,EAAGC,EAAGgY,EAAKhY,EAAI0X,EAAK1X,GAClDmY,GAAapY,EAAGkY,EAAKlY,EAAI2X,EAAK3X,EAAGC,EAAGiY,EAAKjY,EAAI0X,EAAK1X,GAClDoY,EAAQva,WAAWmF,mBAAmBkV,EAAUC,EACpD,IAAIrb,KAAKuF,IAAIvF,KAAKyG,GAAK6U,GAASC,wBAE5B,MADAZ,GAAMrY,OAAOzC,EAAG,GACT,YAInBA,MAKJ,OAAO8a,GAzEX,GAAIxa,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnBghB,QAAU,mBAAAhhB,CAAQ,IAClBihB,QAAU,mBAAAjhB,CAAQ,IAClBkhB,QAAU,mBAAAlhB,CAAQ,GACtBH,SAAQogB,YAAc5d,OAAO,eAI7BxC,QAAQigB,WAAaA,WAIrBjgB,QAAQmgB,eAAiBA,cACzB,IAAIO,gBAAgC,SAAUhZ,GAE1C,QAASgZ,KACL,GAAI/Y,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAKhE,OAHA4B,GAAMiZ,UAAW,EACjBjZ,EAAM2Z,eAAgB,EACtB3Z,EAAM4Z,UAAW,EACV5Z,EAKX,MAZA7B,WAAU4a,EAAgBhZ,GAS1BgZ,EAAela,UAAUe,WAAa,SAAUC,GAC5C,MAAOA,KAAY2Z,QAAQpK,eAAiBvP,IAAY4Z,QAAQI,aAAeha,IAAY6Z,QAAQI,sBAEhGf,GACTjQ,SAASzJ,cACXhH,SAAQ0gB,eAAiBA,cAEzB,IAAIQ,yBAA0B,EAiC9BlhB,SAAQqgB,sBAAwBA,sB;;;;;;;ACzEhC,QAASqB,cAAa1c,GAClB,WAA+BE,KAAxBF,EAAkB,SAG7B,QAAS2c,YAAW3c,GAChB,MAAOA,GAAQuC,WAAWvH,QAAQwhB,cAAgBE,aAAa1c,GAPnElF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQwhB,YAAchf,OAAO,eAI7BxC,QAAQ0hB,aAAeA,aAIvB1hB,QAAQ2hB,WAAaA,W;;;;;;;ACTrB,GAAI7b,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClB0T,WAAa,mBAAA1T,CAAQ,IACrByhB,UAAY,mBAAAzhB,CAAQ,GAIpBwC,sBAAuC,SAAU+E,GAEjD,QAAS/E,GAAsBkf,GAC3B,GAAIla,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADA8b,GAAavZ,QAAQ,SAAUwZ,GAAe,MAAOna,GAAMoa,wBAAwBD,KAC5Ena,EAaX,MAjBA7B,WAAUnD,EAAuB+E,GAMjC/E,EAAsB6D,UAAUqJ,gBAAkB,SAAUR,GACxDtJ,KAAKmP,SAAS7F,EAAY2S,KAAM,GAAIJ,WAAUxS,qBAAqBC,KAEvE1M,EAAsB6D,UAAUub,wBAA0B,SAAUD,GAChEA,EAAYpS,WAAW3J,OAE3BpD,EAAwB2K,YACpBgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAMI,4BAA6ByL,QAAQ,EAAGG,YAAYtN,YACrG+M,WAAW,qBAAsB3I,SAClCzC,IAELkR,WAAWoO,sBACbjiB,SAAQ2C,sBAAwBA,sB;;;;;;;AClDhC,GAAI2K,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIkhB,SAAU,mBAAAhhB,CAAQ,GAClB+hB,oBAAsB,mBAAA/hB,CAAQ,IAC9BoO,QAAU,mBAAApO,CAAQ,GAClBuG,WAAa,mBAAAvG,CAAQ,GACrBmO,YAAc,mBAAAnO,CAAQ,GACtBgiB,gBAAiC,WACjC,QAASA,GAAgBhE,GACrBpY,KAAKoY,IAAMA,EACXpY,KAAK4a,KAAOwB,EAAgBH,KAGhC,MADAG,GAAgBH,KAAO,YAChBG,IAEXniB,SAAQmiB,gBAAkBA,eAC1B,IAAI3d,aAA6B,WAC7B,QAASA,GAAY4d,EAAS/I,EAAkB8F,GAC5CpZ,KAAKqc,QAAUA,EACfrc,KAAKsT,iBAAmBA,EACxBtT,KAAKoZ,IAAMA,EAwEf,MAtEA3a,GAAYgC,UAAU6b,OAAS,SAAUhb,GACrC,GAAwB,mBAAbqT,UAA0B,CACjC,GAAI4H,GAAM5H,SAASE,eAAe7U,KAAKqc,QAAQG,UAC/C,IAAY,OAARD,GAAgBA,EAAIE,mBAAuD,QAAlCF,EAAIE,kBAAkBC,QAAmB,CAClF,GAAIC,GAAaJ,EAAIE,kBACjBrE,EAAMpY,KAAK4c,UAAUD,EAAYrb,EACrCtB,MAAKsT,iBAAiBmB,SAAS,GAAI2H,iBAAgBhE,OAI/D3Z,EAAYgC,UAAUmc,UAAY,SAAUC,EAAgBvb,GACxD,GAAIwb,GAAa,GAAIC,eACjBC,EAAUF,EAAWG,kBAAkBJ,GACvCK,EAASvI,SAAS3G,cAAc,SAEpC,IADA2G,SAASwI,KAAKC,YAAYF,IACrBA,EAAOG,cACR,KAAM,IAAIlc,OAAM,8BACpB,IAAImc,GAAUJ,EAAOG,cAAc1I,QACnC2I,GAAQC,OACRD,EAAQE,MAAMR,GACdM,EAAQG,OACR,IAAIC,GAAgBJ,EAAQzI,eAAegI,EAAerd,GAC1Dke,GAAcC,gBAAgB,WAC9B3d,KAAK4d,WAAWf,EAAgBa,GAAgB,QAAS,SAAU,YACnEA,EAAcG,aAAa,UAAW,MACtC,IAAIlS,GAAS3L,KAAK8d,UAAUxc,EAC5Boc,GAAcG,aAAa,UAAWlS,EAAO9I,EAAI,IAAM8I,EAAO7I,EAAI,IAAM6I,EAAO5I,MAAQ,IAAM4I,EAAO3I,OACpG,IAAI+a,GAAUjB,EAAWG,kBAAkBS,EAE3C,OADA/I,UAASwI,KAAKa,YAAYd,GACnBa,GAEXtf,EAAYgC,UAAUmd,WAAa,SAAU/S,EAAQpD,EAAQwW,GAIzD,IAAK,GAHDC,GAAcC,iBAAiBtT,GAC/BuT,EAAcD,iBAAiB1W,GAC/B4W,EAAY,GACP5e,EAAI,EAAGA,EAAIye,EAAY3e,OAAQE,IAAK,CACzC,GAAIiI,GAAMwW,EAAYze,EACtB,KAAuC,IAAnCwe,EAAiB7b,QAAQsF,GAAa,CACtC,GAAIxN,GAAQgkB,EAAYI,iBAAiB5W,EACrC0W,GAAYE,iBAAiB5W,KAASxN,IACtCmkB,GAAa3W,EAAM,IAAMxN,EAAQ,MAI3B,KAAdmkB,GACA5W,EAAOoW,aAAa,QAASQ,EAEjC,KAAK,GAAI5e,GAAI,EAAGA,EAAIoL,EAAO0T,WAAWhf,SAAUE,EAAG,CAC/C,GAAI+e,GAAc3T,EAAO0T,WAAW9e,GAChCgf,EAAchX,EAAO8W,WAAW9e,EAChC+e,aAAuBE,UACvB1e,KAAK4d,WAAWY,EAAaC,QAGzChgB,EAAYgC,UAAUqd,UAAY,SAAUxc,GACxC,GAAIqd,IAAahe,WAAW0C,aAM5B,OALA/B,GAAKpC,SAASqD,QAAQ,SAAUtD,GACxBmc,QAAQrQ,cAAc9L,IACtB0f,EAAU1c,KAAKhD,EAAQ0M,UAGxBgT,EAAUxK,OAAO,SAAUyK,EAAKC,GAAO,MAAOle,YAAW4D,QAAQqa,EAAKC,MAEjFpgB,EAAc8I,YACVgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CyJ,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5C4L,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkB,UAC5CuK,WAAW,qBAAsBjO,OAAQoiB,oBAAoB2C,iBAAkB/kB,UAChF0E,KAGPxE,SAAQwE,YAAcA,Y;;;;;;;ACzGtB,GAAIsB,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI2hB,WAAY,mBAAAzhB,CAAQ,GACpB2kB,YAAc,mBAAA3kB,CAAQ,IACtBghB,QAAU,mBAAAhhB,CAAQ,IAClB4kB,eAAgC,WAChC,QAASA,GAAe1U,EAAW2U,EAAaC,GAC5Clf,KAAKsK,UAAYA,EACjBtK,KAAKif,YAAcA,EACnBjf,KAAKkf,QAAUA,EACflf,KAAK4a,KAAOuE,gBAAgBlD,KAEhC,MAAO+C,KAEX/kB,SAAQ+kB,eAAiBA,cACzB,IAAIG,iBAAiC,SAAUxd,GAE3C,QAASwd,GAAgB3V,GACrB,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAGjC,OAFA4B,GAAM4H,OAASA,EACf5H,EAAMqd,YAAczV,EAAOyV,YACpBrd,EAkCX,MAvCA7B,WAAUof,EAAiBxd,GAO3Bwd,EAAgB1e,UAAU2e,QAAU,SAAUvW,GAC1C,GAAI+K,GAAQ/K,EAAQvH,KAChBrC,EAAU2U,EAAMrS,MAAMwC,QAAQ/D,KAAKwJ,OAAOc,UAC9C,IAAIrL,GAAWmc,QAAQxF,WAAW3W,GAAU,CAMxC,GALAe,KAAKf,QAAUA,EACfe,KAAKqf,aACDC,OAAQtf,KAAKf,QAAQqgB,OACrBC,KAAMvf,KAAKf,QAAQsgB,MAEnBvf,KAAKwJ,OAAO0V,QACZ,MAAO,IAAIM,mBAAkBxf,KAAKf,QAASe,KAAKqf,YAAarf,KAAKif,YAAapW,GAAS6O,OAExF1X,MAAKf,QAAQqgB,OAAStf,KAAKif,YAAYK,OACvCtf,KAAKf,QAAQsgB,KAAOvf,KAAKif,YAAYM,KAG7C,MAAO3L,IAEXuL,EAAgB1e,UAAUsI,KAAO,SAAUF,GACvC,MAAO,IAAI2W,mBAAkBxf,KAAKf,QAASe,KAAKif,YAAajf,KAAKqf,YAAaxW,GAAS6O,SAE5FyH,EAAgB1e,UAAUyI,KAAO,SAAUL,GACvC,MAAO,IAAI2W,mBAAkBxf,KAAKf,QAASe,KAAKqf,YAAarf,KAAKif,YAAapW,GAAS6O,SAE5FyH,EAAgB1e,UAAUkI,MAAQ,SAAUC,EAASC,GACjD,OAAK7I,KAAKwJ,OAAO0V,SAAWtW,YAAmBuW,IAAmBnf,KAAKf,UAAY2J,EAAQ3J,UACvFe,KAAKif,YAAcrW,EAAQqW,aACpB,IAIfE,EAAgBlD,KAAO,WAChBkD,GACTtD,UAAUnT,iBACZzO,SAAQklB,gBAAkBA,eAC1B,IAAIK,mBAAmC,SAAU7d,GAE7C,QAAS6d,GAAkBvgB,EAASogB,EAAaJ,EAAapW,GAC1D,GAAIjH,GAAQD,EAAOwB,KAAKnD,KAAM6I,IAAY7I,IAM1C,OALA4B,GAAM3C,QAAUA,EAChB2C,EAAMyd,YAAcA,EACpBzd,EAAMqd,YAAcA,EACpBrd,EAAMiH,QAAUA,EAChBjH,EAAM6d,WAAa7f,KAAKwZ,IAAI6F,EAAYM,KAAOF,EAAYE,MACpD3d,EAUX,MAlBA7B,WAAUyf,EAAmB7d,GAU7B6d,EAAkB/e,UAAUwY,MAAQ,SAAUpI,EAAGhI,GAM7C,MALA7I,MAAKf,QAAQqgB,QACTzc,GAAI,EAAIgO,GAAK7Q,KAAKqf,YAAYC,OAAOzc,EAAIgO,EAAI7Q,KAAKif,YAAYK,OAAOzc,EACrEC,GAAI,EAAI+N,GAAK7Q,KAAKqf,YAAYC,OAAOxc,EAAI+N,EAAI7Q,KAAKif,YAAYK,OAAOxc,GAEzE9C,KAAKf,QAAQsgB,KAAOvf,KAAKqf,YAAYE,KAAO3f,KAAK8f,IAAI7O,EAAI7Q,KAAKyf,YACvD5W,EAAQvH,MAEZke,GACTT,YAAYzG,UACdre,SAAQulB,kBAAoBA,kB;;;;;;;ACxF5B,GAAIjY,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBiV,iBAAkC,WAClC,QAASA,KACLrP,KAAK2f,SAAW,GAAInc,KA8BxB,MA5BA6L,GAAiB5O,UAAU0O,SAAW,SAAUzH,EAAKkY,GACjD,OAAYzgB,KAARuI,EACA,KAAM,IAAIvG,OAAM,mBACpB,IAAInB,KAAKiO,OAAOvG,GACZ,KAAM,IAAIvG,OAAM,8BAAgCuG,EACpD1H,MAAK2f,SAASjc,IAAIgE,EAAKkY,IAE3BvQ,EAAiB5O,UAAUiT,WAAa,SAAUhM,GAC9C,OAAYvI,KAARuI,EACA,KAAM,IAAIvG,OAAM,mBACpBnB,MAAK2f,SAAS9b,OAAO6D,IAEzB2H,EAAiB5O,UAAUwN,OAAS,SAAUvG,GAC1C,MAAO1H,MAAK2f,SAAS7b,IAAI4D,IAE7B2H,EAAiB5O,UAAUK,IAAM,SAAU4G,EAAKmY,GAC5C,GAAIC,GAAe9f,KAAK2f,SAAS7e,IAAI4G,EACrC,OAAIoY,GACO,GAAIA,GAAaD,GAEjB7f,KAAK+f,QAAQrY,EAAKmY,IAEjCxQ,EAAiB5O,UAAUsf,QAAU,SAAUrY,EAAKmY,GAChD,KAAM,IAAI1e,OAAM,yBAA2BuG,IAE/C2H,EAAmB9H,YACfgB,YAAY9N,cACb4U,KAGPpV,SAAQoV,iBAAmBA,gBAC3B,IAAI2Q,kBAAkC,WAClC,QAASA,KACLhgB,KAAK2f,SAAW,GAAInc,KA8BxB,MA5BAwc,GAAiBvf,UAAU0O,SAAW,SAAUzH,EAAKuY,GACjD,OAAY9gB,KAARuI,EACA,KAAM,IAAIvG,OAAM,mBACpB,IAAInB,KAAKiO,OAAOvG,GACZ,KAAM,IAAIvG,OAAM,8BAAgCuG,EACpD1H,MAAK2f,SAASjc,IAAIgE,EAAKuY,IAE3BD,EAAiBvf,UAAUiT,WAAa,SAAUhM,GAC9C,OAAYvI,KAARuI,EACA,KAAM,IAAIvG,OAAM,mBACpBnB,MAAK2f,SAAS9b,OAAO6D,IAEzBsY,EAAiBvf,UAAUwN,OAAS,SAAUvG,GAC1C,MAAO1H,MAAK2f,SAAS7b,IAAI4D,IAE7BsY,EAAiBvf,UAAUK,IAAM,SAAU4G,GACvC,GAAIwY,GAAmBlgB,KAAK2f,SAAS7e,IAAI4G,EACzC,OAAIwY,IAGOlgB,KAAK+f,QAAQrY,IAE5BsY,EAAiBvf,UAAUsf,QAAU,SAAUrY,GAC3C,KAAM,IAAIvG,OAAM,yBAA2BuG,IAE/CsY,EAAmBzY,YACfgB,YAAY9N,cACbulB,KAGP/lB,SAAQ+lB,iBAAmBA,gBAC3B,IAAI9D,uBAAuC,WACvC,QAASA,KACLlc,KAAK2f,SAAW,GAAInc,KA0BxB,MAxBA0Y,GAAsBzb,UAAU0O,SAAW,SAAUzH,EAAKuY,GACtD,OAAY9gB,KAARuI,EACA,KAAM,IAAIvG,OAAM,mBACpB,IAAIgf,GAAYngB,KAAK2f,SAAS7e,IAAI4G,OAChBvI,KAAdghB,EACAA,EAAUle,KAAKge,GAEfjgB,KAAK2f,SAASjc,IAAIgE,GAAMuY,KAEhC/D,EAAsBzb,UAAU2f,cAAgB,SAAU1Y,GACtD,OAAYvI,KAARuI,EACA,KAAM,IAAIvG,OAAM,mBACpBnB,MAAK2f,SAAS9b,OAAO6D,IAEzBwU,EAAsBzb,UAAUK,IAAM,SAAU4G,GAC5C,GAAI2Y,GAAoBrgB,KAAK2f,SAAS7e,IAAI4G,EAC1C,YAA0BvI,KAAtBkhB,EACOA,MAIfnE,EAAwB3U,YACpBgB,YAAY9N,cACbyhB,KAGPjiB,SAAQiiB,sBAAwBA,sB;;;;;;ACnHhC,GAAIoE,EAGJA,GAAI,WACH,MAAOtgB,QAGR,KAECsgB,EAAIA,GAAK5N,SAAS,mBAAoB,EAAG6N,MAAM,QAC9C,MAAMrb,GAEc,gBAAXsb,UACTF,EAAIE,QAONtI,OAAOje,QAAUqmB,E;;;;;;ACTjB,QAASG,oBACL,KAAM,IAAItf,OAAM,mCAEpB,QAASuf,uBACL,KAAM,IAAIvf,OAAM,qCAsBpB,QAASwf,YAAWC,GAChB,GAAIC,mBAAqBC,WAErB,MAAOA,YAAWF,EAAK,EAG3B,KAAKC,mBAAqBJ,mBAAqBI,mBAAqBC,WAEhE,MADAD,kBAAmBC,WACZA,WAAWF,EAAK,EAE3B,KAEI,MAAOC,kBAAiBD,EAAK,GAC/B,MAAM1b,GACJ,IAEI,MAAO2b,kBAAiB1d,KAAK,KAAMyd,EAAK,GAC1C,MAAM1b,GAEJ,MAAO2b,kBAAiB1d,KAAKnD,KAAM4gB,EAAK,KAMpD,QAASG,iBAAgBC,GACrB,GAAIC,qBAAuBC,aAEvB,MAAOA,cAAaF,EAGxB,KAAKC,qBAAuBP,sBAAwBO,qBAAuBC,aAEvE,MADAD,oBAAqBC,aACdA,aAAaF,EAExB,KAEI,MAAOC,oBAAmBD,GAC5B,MAAO9b,GACL,IAEI,MAAO+b,oBAAmB9d,KAAK,KAAM6d,GACvC,MAAO9b,GAGL,MAAO+b,oBAAmB9d,KAAKnD,KAAMghB,KAYjD,QAASG,mBACAC,UAAaC,eAGlBD,UAAW,EACPC,aAAa9hB,OACb+hB,MAAQD,aAAajN,OAAOkN,OAE5BC,YAAc,EAEdD,MAAM/hB,QACNiiB,cAIR,QAASA,cACL,IAAIJ,SAAJ,CAGA,GAAIK,GAAUd,WAAWQ,gBACzBC,WAAW,CAGX,KADA,GAAI7K,GAAM+K,MAAM/hB,OACVgX,GAAK,CAGP,IAFA8K,aAAeC,MACfA,WACSC,WAAahL,GACd8K,cACAA,aAAaE,YAAYG,KAGjCH,aAAc,EACdhL,EAAM+K,MAAM/hB,OAEhB8hB,aAAe,KACfD,UAAW,EACXL,gBAAgBU,IAiBpB,QAASE,MAAKf,EAAK/I,GACf7X,KAAK4gB,IAAMA,EACX5gB,KAAK6X,MAAQA,EAYjB,QAAS+J,SAhKT,GAAIC,SAAU3J,OAAOje,WAOjB4mB,iBACAI,oBAQH,WACG,IAEQJ,iBADsB,kBAAfC,YACYA,WAEAL,iBAEzB,MAAOvb,GACL2b,iBAAmBJ,iBAEvB,IAEQQ,mBADwB,kBAAjBC,cACcA,aAEAR,oBAE3B,MAAOxb,GACL+b,mBAAqBP,uBAuD7B,IAAIY,UACAF,UAAW,EACXC,aACAE,YAAc,CAyClBM,SAAQC,SAAW,SAAUlB,GACzB,GAAImB,GAAO,GAAI1iB,OAAMyC,UAAUvC,OAAS,EACxC,IAAIuC,UAAUvC,OAAS,EACnB,IAAK,GAAIE,GAAI,EAAGA,EAAIqC,UAAUvC,OAAQE,IAClCsiB,EAAKtiB,EAAI,GAAKqC,UAAUrC,EAGhC6hB,OAAMrf,KAAK,GAAI0f,MAAKf,EAAKmB,IACJ,IAAjBT,MAAM/hB,QAAiB6hB,UACvBT,WAAWa,aASnBG,KAAKlhB,UAAUihB,IAAM,WACjB1hB,KAAK4gB,IAAI/e,MAAM,KAAM7B,KAAK6X,QAE9BgK,QAAQG,MAAQ,UAChBH,QAAQI,SAAU,EAClBJ,QAAQK,OACRL,QAAQM,QACRN,QAAQO,QAAU,GAClBP,QAAQQ,YAIRR,QAAQzR,GAAKwR,KACbC,QAAQS,YAAcV,KACtBC,QAAQU,KAAOX,KACfC,QAAQW,IAAMZ,KACdC,QAAQY,eAAiBb,KACzBC,QAAQa,mBAAqBd,KAC7BC,QAAQc,KAAOf,KACfC,QAAQe,gBAAkBhB,KAC1BC,QAAQgB,oBAAsBjB,KAE9BC,QAAQiB,UAAY,SAAUtT,GAAQ,UAEtCqS,QAAQkB,QAAU,SAAUvT,GACxB,KAAM,IAAIrO,OAAM,qCAGpB0gB,QAAQmB,IAAM,WAAc,MAAO,KACnCnB,QAAQoB,MAAQ,SAAUC,GACtB,KAAM,IAAI/hB,OAAM,mCAEpB0gB,QAAQsB,MAAQ,WAAa,MAAO,I;;;;;;;ACpLpC,QAAS7mB,8BAA6B8mB,GAClC,GAAiC,kBAAtBA,GAAkC,CACzC,GAAIC,GAAqBD,CACzB,OAAOC,GAAmB7T,KAEzB,GAAiC,gBAAtB4T,GACZ,MAAOA,GAAkBvV,UAGzB,IAAIwV,GAAqBD,CACzB,OAAOC,GAIf,QAASC,4CAA2CC,EAAWH,EAAmBI,GAC9E,GAAIC,GAAyB,GACzBC,EAAqBF,EAAYD,EAAWH,EAchD,OAbkC,KAA9BM,EAAmBnkB,SACnBkkB,EAAyB,yBACzBC,EAAmBnhB,QAAQ,SAAUwgB,GACjC,GAAIvT,GAAO,QACwB,QAA/BuT,EAAQY,qBACRnU,EAAOoU,gBAAgBb,EAAQY,qBAEnCF,EAAyBA,EAAyB,MAAQjU,EACtDuT,EAAQc,WAAWC,WACnBL,EAAyBA,EAAyB,MAAQV,EAAQc,WAAWC,aAIlFL,EAGX,QAASM,+BAA8BC,EAASC,OACT,KAA/BA,IAAyCA,KAC7C,IAAIC,GAA0B5nB,6BAA6B0nB,EAAQZ,kBACnEa,GAA2BhiB,KAAKiiB,GAChCF,EAAQG,cAAc5hB,QAAQ,SAAU6hB,GACpC,GAAIC,GAAyB/nB,6BAA6B8nB,EAAahB,kBACvE,KAAoE,IAAhEa,EAA2B7hB,QAAQiiB,GAQlC,CACDJ,EAA2BhiB,KAAKoiB,EAChC,IAAIC,GAAWL,EAA2B9P,OAAO,SAAU2G,EAAMN,GAC7D,MAAiB,KAATM,EAAeA,EAAO,OAASN,EAAO,GAAKA,GACpD,GACH,MAAM,IAAIrZ,OAAMsQ,WAAW9E,oBAAsB,IAAM2X,GAZnDF,EAAaD,cAAc5kB,OAAS,EACpCwkB,8BAA8BK,EAAcH,GAG5CA,EAA2BhiB,KAAKoiB,KAahD,QAASE,uBAAsBC,EAAyB/c,GACpD,GAAIA,EAAOgd,YAAchd,EAAOid,UAAW,CACvC,GAAIC,GAAM,GACNC,EAAWnd,EAAOod,cAClBC,EAAYrd,EAAOsd,eASvB,OARiB,QAAbH,IACAD,GAAOC,EAAS/W,WAAa,MAEf,OAAdiX,GACAA,EAAUviB,QAAQ,SAAUqU,GACxB+N,GAAO/N,EAAI/I,WAAa,OAGzB,IAAM2W,EAA0B,MAAQA,EAA0B,MAAQG,EAGjF,MAAO,IAAMH,EAIrB,QAASZ,iBAAgB1b,GACrB,GAAIA,EAAEsH,KACF,MAAOtH,GAAEsH,IAGT,IAAIwV,GAAS9c,EAAE2F,WACXoX,EAAQD,EAAOC,MAAM,wBACzB,OAAOA,GAAQA,EAAM,GAAK,uBAAyBD,EAtF3DjrB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIuX,YAAa,mBAAArX,CAAQ,EAczBH,SAAQqC,6BAA+BA,6BAmBvCrC,QAAQqpB,2CAA6CA,2CAwBrDrpB,QAAQ8pB,8BAAgCA,8BAoBxC9pB,QAAQsqB,sBAAwBA,sBAWhCtqB,QAAQ2pB,gBAAkBA,gB;;;;;;;ACnF1B,GAAIrc,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtByC,qBAAsC,WACtC,QAASA,KACLmD,KAAKklB,SACLllB,KAAKmlB,YACLnlB,KAAKolB,WAAY,EAmCrB,MAjCAvoB,GAAqB4D,UAAU8Y,YAAc,WACzC,MAAwC,kBAA1B8L,wBAElBxoB,EAAqB4D,UAAU6Y,YAAc,SAAUgM,GACnDtlB,KAAKklB,MAAMjjB,KAAKqjB,GAChBtlB,KAAKulB,WAET1oB,EAAqB4D,UAAU+kB,iBAAmB,SAAUF,GACxDtlB,KAAKmlB,SAASljB,KAAKqjB,GACnBtlB,KAAKulB,WAET1oB,EAAqB4D,UAAU8kB,QAAU,WACrC,GAAI3jB,GAAQ5B,IACPA,MAAKolB,YACNplB,KAAKolB,WAAY,EACbplB,KAAKuZ,cACL8L,sBAAsB,SAAUvM,GAAQ,MAAOlX,GAAM8f,IAAI5I,KAEzDgI,WAAW,SAAUhI,GAAQ,MAAOlX,GAAM8f,IAAI5I,OAG1Djc,EAAqB4D,UAAUihB,IAAM,SAAU5I,GAC3C,GAAIoM,GAAQllB,KAAKklB,MACbC,EAAWnlB,KAAKmlB,QACpBnlB,MAAKolB,WAAY,EACjBplB,KAAKklB,SACLllB,KAAKmlB,YACLD,EAAM3iB,QAAQ,SAAU+iB,GAAQ,MAAOA,GAAKniB,SAAKhE,GAAW2Z,KAC5DqM,EAAS5iB,QAAQ,SAAU+iB,GAAQ,MAAOA,GAAKniB,SAAKhE,GAAW2Z,MAEnEjc,EAAuB0K,YACnBgB,YAAY9N,cACboC,KAGP5C,SAAQ4C,qBAAuBA,qB;;;;;;;ACjD/B,GAAIkD,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,GAE1GnO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtByhB,UAAY,mBAAAzhB,CAAQ,GACpBqrB,oBAAsB,mBAAArrB,CAAQ,IAM9BsrB,mBAAoC,WACpC,QAASA,GAAmBrJ,GACxBrc,KAAKqc,QAAUA,EACfrc,KAAK4a,KAAO8K,EAAmBzJ,KAGnC,MADAyJ,GAAmBzJ,KAAO,eACnByJ,IAEXzrB,SAAQyrB,mBAAqBA,kBAI7B,IAAIC,gBAAgC,WAChC,QAASA,GAAeC,GACpB5lB,KAAK4lB,QAAUA,EACf5lB,KAAK4a,KAAOiL,gBAAgB5J,KAEhC,MAAO0J,KAEX1rB,SAAQ0rB,eAAiBA,cACzB,IAAIE,iBAAiC,SAAUlkB,GAE3C,QAASkkB,GAAgBrc,GACrB,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADA4B,GAAM4H,OAASA,EACR5H,EAyBX,MA7BA7B,WAAU8lB,EAAiBlkB,GAM3BkkB,EAAgBplB,UAAU2e,QAAU,SAAUvW,GAG1C,MAFA7I,MAAK8lB,QAAUjd,EAAQkd,aAAa3X,WAAWvF,EAAQvH,MACvDtB,KAAK4lB,QAAU/c,EAAQkd,aAAa3X,WAAWpO,KAAKwJ,OAAOoc,SACpD5lB,KAAK4lB,SAEhBC,EAAgBplB,UAAUsI,KAAO,SAAUF,GACvC,MAAO7I,MAAK8lB,SAEhBD,EAAgBplB,UAAUyI,KAAO,SAAUL,GACvC,MAAO7I,MAAK4lB,SAEhB7rB,OAAOC,eAAe6rB,EAAgBplB,UAAW,cAC7CK,IAAK,WACD,MAAO,UAAU0I,GAAU,MAAOA,GAAOoR,OAAS6K,oBAAoBO,8BAA8B/J,OAExG7a,YAAY,EACZC,cAAc,IAElBwkB,EAAgB5J,KAAO,WACvB4J,EAAkBte,YACdgB,YAAY9N,aACZuN,WAAW,qBAAsB2d,kBAClCE,IAELhK,UAAUpT,QACZxO,SAAQ4rB,gBAAkBA,gB;;;;;;;AChF1B,GAAI9lB,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI2hB,WAAY,mBAAAzhB,CAAQ,GACpBghB,QAAU,mBAAAhhB,CAAQ,GAKlB6rB,gBAAiC,WACjC,QAASA,GAAgBta,GACrB3L,KAAK2L,OAASA,EACd3L,KAAK4a,KAAOsL,iBAAiBjK,KAEjC,MAAOgK,KAEXhsB,SAAQgsB,gBAAkBA,eAO1B,IAAIE,qBAAqC,WACrC,QAASA,GAAoBP,GACzB5lB,KAAK4lB,QAAUA,EACf5lB,KAAK4a,KAAOwL,qBAAqBnK,KAErC,MAAOkK,KAEXlsB,SAAQksB,oBAAsBA,mBAQ9B,IAAIE,sBAAsC,WACtC,QAASA,GAAqB1a,EAAQ2a,EAAUC,GAC5CvmB,KAAK2L,OAASA,EACd3L,KAAKsmB,SAAWA,EAChBtmB,KAAKumB,WAAaA,EAClBvmB,KAAK4a,KAAOyL,EAAqBpK,KAGrC,MADAoK,GAAqBpK,KAAO,iBACrBoK,IAEXpsB,SAAQosB,qBAAuBA,oBAC/B,IAAIH,kBAAkC,SAAUvkB,GAE5C,QAASukB,GAAiB1c,GACtB,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAGjC,OAFA4B,GAAM4H,OAASA,EACf5H,EAAM+J,UACC/J,EAyBX,MA9BA7B,WAAUmmB,EAAkBvkB,GAO5BukB,EAAiBzlB,UAAU2e,QAAU,SAAUvW,GAC3C,GAAIjH,GAAQ5B,IAWZ,OAVAA,MAAKwJ,OAAOmC,OAAOpJ,QAAQ,SAAUlC,GACjC,GAAIpB,GAAU4J,EAAQvH,KAAKC,MAAMwC,QAAQ1D,EAAEiK,UACvCrL,IAAWmc,QAAQrQ,cAAc9L,IACjC2C,EAAM+J,OAAO1J,MACThD,QAASA,EACTunB,UAAWvnB,EAAQ0M,OACnBK,UAAW3L,EAAE2L,cAIlBhM,KAAKkJ,KAAKL,IAErBqd,EAAiBzlB,UAAUsI,KAAO,SAAUF,GAExC,MADA7I,MAAK2L,OAAOpJ,QAAQ,SAAUlC,GAAK,MAAOA,GAAEpB,QAAQ0M,OAAStL,EAAEmmB,YACxD3d,EAAQvH,MAEnB4kB,EAAiBzlB,UAAUyI,KAAO,SAAUL,GAExC,MADA7I,MAAK2L,OAAOpJ,QAAQ,SAAUlC,GAAK,MAAOA,GAAEpB,QAAQ0M,OAAStL,EAAE2L,YACxDnD,EAAQvH,MAEnB4kB,EAAiBjK,KAAO,YACjBiK,GACTrK,UAAUzS,cACZnP,SAAQisB,iBAAmBA,gBAC3B,IAAIE,sBAAsC,SAAUzkB,GAEhD,QAASykB,GAAqB5c,GAC1B,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADA4B,GAAM4H,OAASA,EACR5H,EAaX,MAjBA7B,WAAUqmB,EAAsBzkB,GAMhCykB,EAAqB3lB,UAAU2e,QAAU,SAAUvW,GAC/C,MAAOA,GAAQkd,aAAa3X,WAAWpO,KAAKwJ,OAAOoc,UAEvD7rB,OAAOC,eAAeosB,EAAqB3lB,UAAW,cAClDK,IAAK,WACD,MAAO,UAAU0I,GAAU,MAAOA,GAAOoR,OAASyL,qBAAqBpK,OAE3E7a,YAAY,EACZC,cAAc,IAElB+kB,EAAqBnK,KAAO,gBACrBmK,GACTvK,UAAU/S,cACZ7O,SAAQmsB,qBAAuBA,qB;;;;;;;AC7G/B,QAASK,YAAWxnB,GAChB,MAAOA,GAAQuC,WAAWvH,QAAQysB,kBAAuCvnB,KAAvBF,EAAiB,QAHvElF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQysB,YAAcjqB,OAAO,eAI7BxC,QAAQwsB,WAAaA,W;;;;;;;ACLrB,GAAI1mB,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBusB,WAAa,mBAAAvsB,CAAQ,IACrBuG,WAAa,mBAAAvG,CAAQ,GACrBoO,QAAU,mBAAApO,CAAQ,GAClBsQ,SAAW,mBAAAtQ,CAAQ,GACnBwsB,aAAe,mBAAAxsB,CAAQ,IACvByhB,UAAY,mBAAAzhB,CAAQ,GACpBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3B0sB,WAAa,mBAAA1sB,CAAQ,IACrBsR,eAAiB,mBAAAtR,CAAQ,GACzBghB,QAAU,mBAAAhhB,CAAQ,GAClBihB,QAAU,mBAAAjhB,CAAQ,IAIlB2sB,oBAAqC,WACrC,QAASA,GAAoBC,EAAkBC,GAC3CjnB,KAAKgnB,iBAAmBA,EACxBhnB,KAAKinB,YAAcA,EACnBjnB,KAAK4a,KAAOsM,qBAAqBjL,KAErC,MAAO8K,KAEX9sB,SAAQ8sB,oBAAsBA,mBAC9B,IAAIG,sBAAsC,SAAUvlB,GAEhD,QAASulB,GAAqB1d,GAC1B,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADA4B,GAAM4H,OAASA,EACR5H,EAmBX,MAvBA7B,WAAUmnB,EAAsBvlB,GAMhCulB,EAAqBzmB,UAAU2e,QAAU,SAAUvW,GAC/C,GAAI+K,GAAQ/K,EAAQvH,KAChB6lB,EAAevT,EAAMrS,MAAMwC,QAAQ/D,KAAKwJ,OAAOwd,iBAMnD,OALIG,IACI9L,QAAQ+L,YAAYD,KACpBA,EAAa5L,cAAgBvb,KAAKwJ,OAAOyd,aAG1CjnB,KAAKkJ,KAAKL,IAErBqe,EAAqBzmB,UAAUsI,KAAO,SAAUF,GAC5C,MAAOA,GAAQvH,MAEnB4lB,EAAqBzmB,UAAUyI,KAAO,SAAUL,GAC5C,MAAOA,GAAQvH,MAEnB4lB,EAAqBjL,KAAO,gBACrBiL,GACTrL,UAAUpT,QACZxO,SAAQitB,qBAAuBA,oBAM/B,IAAIG,yBAAyC,WACzC,QAASA,GAAwB/c,EAAWqB,GACxC3L,KAAKsK,UAAYA,EACjBtK,KAAK2L,OAASA,EACd3L,KAAK4a,KAAOyM,EAAwBpL,KAGxC,MADAoL,GAAwBpL,KAAO,oBACxBoL,IAEXptB,SAAQotB,wBAA0BA,uBAKlC,IAAIC,qBAAqC,WACrC,QAASA,GAAoB1B,GACzB5lB,KAAK4lB,QAAUA,EACf5lB,KAAK4a,KAAO2M,qBAAqBtL,KAErC,MAAOqL,KAEXrtB,SAAQqtB,oBAAsBA,mBAC9B,IAAIC,sBAAsC,SAAU5lB,GAEhD,QAAS4lB,GAAqB/d,GAC1B,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADA4B,GAAM4H,OAASA,EACR5H,EAcX,MAlBA7B,WAAUwnB,EAAsB5lB,GAMhC4lB,EAAqB9mB,UAAU2e,QAAU,SAAUvW,GAG/C,MAFA7I,MAAK8lB,QAAUjd,EAAQvH,KACvBtB,KAAK4lB,QAAU/c,EAAQkd,aAAa3X,WAAWpO,KAAKwJ,OAAOoc,SACpD5lB,KAAK4lB,SAEhB2B,EAAqB9mB,UAAUsI,KAAO,SAAUF,GAC5C,MAAO7I,MAAK8lB,SAEhByB,EAAqB9mB,UAAUyI,KAAO,SAAUL,GAC5C,MAAO7I,MAAK4lB,SAEhB2B,EAAqBtL,KAAO,gBACrBsL,GACT1L,UAAU1S,aACZlP,SAAQstB,qBAAuBA,oBAC/B,IAAIC,4BAA4C,SAAU7lB,GAEtD,QAAS6lB,GAA2BnL,EAASoL,GACzC,GAAI7lB,GAAQD,EAAOwB,KAAKnD,OAASA,IAGjC,OAFA4B,GAAMya,QAAUA,EAChBza,EAAM6lB,MAAQA,EACP7lB,EA8BX,MAnCA7B,WAAUynB,EAA4B7lB,GAOtC6lB,EAA2B/mB,UAAUinB,kBAAoB,eACpBvoB,KAA7Ba,KAAKynB,MAAME,gBACXnH,OAAOU,aAAalhB,KAAKynB,MAAME,eAC/B3nB,KAAKynB,MAAME,kBAAgBxoB,KAGnCqoB,EAA2B/mB,UAAUmnB,mBAAqB,WACtD,GAAIhmB,GAAQ5B,IAEZ,OADAA,MAAK0nB,oBACE,GAAIjP,SAAQ,SAAUC,GACzB9W,EAAM6lB,MAAME,cAAgBnH,OAAOM,WAAW,WAC1Clf,EAAM6lB,MAAMI,WAAY,EACxBjmB,EAAM6lB,MAAMK,yBAAuB3oB,GACnCuZ,EAAQ,GAAI4O,sBAAsBrd,KAAM4c,iBAAiB7X,WAAW/E,KAAMzK,GAAIqnB,iBAAiB7X,WAAWxP,OAC3GoC,EAAMya,QAAQ0L,oBAGzBP,EAA2B/mB,UAAUunB,mBAAqB,eACpB7oB,KAA9Ba,KAAKynB,MAAMQ,iBACXzH,OAAOU,aAAalhB,KAAKynB,MAAMQ,gBAC/BjoB,KAAKynB,MAAMQ,mBAAiB9oB,KAGpCqoB,EAA6BjgB,YACzBa,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CyJ,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMc,aAC5C2K,WAAW,qBAAsBjO,OAAQA,UAC1CytB,IAELZ,aAAa5oB,cACf/D,SAAQutB,2BAA6BA,0BACrC,IAAIU,oBAAoC,SAAUvmB,GAE9C,QAASumB,KACL,MAAkB,QAAXvmB,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAiG/D,MAnGAD,WAAUmoB,EAAoBvmB,GAI9BumB,EAAmBznB,UAAU0nB,mBAAqB,SAAU1gB,EAAQ2gB,GAEhE,GAAIC,IAAWxlB,GAAI,EAAGC,EAAG,IACrBwlB,EAAelN,QAAQ5P,kBAAkB/D,GACzCrE,EAAeqE,EAAOnG,KAAK8B,aAC3BmlB,EAAiB5nB,WAAWmE,UAAUwjB,EAAcllB,GACpDolB,EAAYD,EAAe1lB,EAAI0lB,EAAexlB,MAAQqlB,EAAcvlB,EACpE4lB,EAAaF,EAAezlB,EAAIylB,EAAevlB,OAASolB,EAActlB,CACtE2lB,IAAcD,GAAaxoB,KAAK0oB,kBAAkBjhB,EAAQ,QAASghB,GAEnEJ,GAAWxlB,GAAI,EAAGC,EAAGlD,KAAK+oB,MAAMF,EAAa,IAExCD,GAAaC,GAAczoB,KAAK0oB,kBAAkBjhB,EAAQ,QAAS+gB,KAExEH,GAAWxlB,EAAGjD,KAAK+oB,MAAMH,EAAY,GAAI1lB,GAAI,GAEjD,IAAI8lB,GAAoBR,EAAcvlB,EAAIwlB,EAAOxlB,EAC7CgmB,EAA4BzlB,EAAaP,EAAIO,EAAaL,KAC1D6lB,GAAoBC,IACpBD,EAAoBC,EAExB,IAAIC,GAAmBV,EAActlB,EAAIulB,EAAOvlB,EAC5CimB,EAA6B3lB,EAAaN,EAAIM,EAAaJ,MAI/D,OAHI8lB,GAAmBC,IACnBD,EAAmBC,IAEdlmB,EAAG+lB,EAAmB9lB,EAAGgmB,EAAkB/lB,OAAQ,EAAGC,QAAS,IAE5EklB,EAAmBznB,UAAUioB,kBAAoB,SAAUjhB,EAAQuhB,EAAMC,GACrE,QAASxhB,YAAkBiD,UAAS1J,aAAeioB,GAAY,KAEnEf,EAAmBznB,UAAUyoB,oBAAsB,SAAUzhB,EAAQ4I,GACjE,GAAIzO,GAAQ5B,IAEZ,OADAA,MAAKgoB,qBACE,GAAIvP,SAAQ,SAAUC,GACzB9W,EAAM6lB,MAAMQ,eAAiBzH,OAAOM,WAAW,WAC3C,GAAIqI,GAAcvnB,EAAMumB,mBAAmB1gB,GAAU5E,EAAGwN,EAAM+Y,MAAOtmB,EAAGuN,EAAMgZ,OAC9E3Q,GAAQ,GAAI2O,yBAAwB5f,EAAOjI,GAAI2pB,IAC/CvnB,EAAM6lB,MAAMI,WAAY,EACxBjmB,EAAM6lB,MAAMK,qBAAuBrgB,GACpC7F,EAAMya,QAAQiN,mBAGzBpB,EAAmBznB,UAAUuU,UAAY,SAAUvN,EAAQ4I,GACvD,GAAI9F,MACAgf,EAAc7d,eAAelB,WAAW/C,EAAQ4T,QAAQmO,gBACxDxpB,MAAKynB,MAAMI,gBAA8B1oB,KAAhBoqB,OACWpqB,KAApCa,KAAKynB,MAAMK,sBAAsC9nB,KAAKynB,MAAMK,qBAAqBtoB,KAAO+pB,EAAY/pB,IACpG+K,EAAOtI,KAAKjC,KAAK4nB,uBAGjB5nB,KAAKgoB,qBACLhoB,KAAK0nB,yBAEWvoB,KAAhBoqB,OACqCpqB,KAApCa,KAAKynB,MAAMK,sBAAsC9nB,KAAKynB,MAAMK,qBAAqBtoB,KAAO+pB,EAAY/pB,IACrG+K,EAAOtI,KAAKjC,KAAKkpB,oBAAoBK,EAAalZ,GAEtD,IAAIoZ,GAAc/d,eAAef,oBAAoBlD,EAAQ4T,QAAQ+L,YAGrE,YAFoBjoB,KAAhBsqB,GACAlf,EAAOtI,KAAK,GAAI8kB,qBAAoB0C,EAAYjqB,IAAI,IACjD+K,GAEX2d,EAAmBznB,UAAUwU,SAAW,SAAUxN,EAAQ4I,GACtD,GAAI9F,KACJ,IAAIvK,KAAKynB,MAAMI,UAAW,CACtB,GAAI0B,GAAc7d,eAAelB,WAAW/C,EAAQ4T,QAAQmO,qBACpBrqB,KAApCa,KAAKynB,MAAMK,0BAAsD3oB,KAAhBoqB,GAC9CvpB,KAAKynB,MAAMK,qBAAqBtoB,KAAO+pB,EAAY/pB,IACtD+K,EAAOtI,KAAKjC,KAAK4nB,sBAEzB5nB,KAAKgoB,oBACL,IAAIyB,GAAc/d,eAAef,oBAAoBlD,EAAQ4T,QAAQ+L,YAGrE,YAFoBjoB,KAAhBsqB,GACAlf,EAAOtI,KAAK,GAAI8kB,qBAAoB0C,EAAYjqB,IAAI,IACjD+K,GAEX2d,EAAmBznB,UAAU4U,UAAY,SAAU5N,EAAQ4I,GACvD,GAAI9F,UACoCpL,KAApCa,KAAKynB,MAAMK,sBAAsC9nB,KAAK0pB,iBAAiB1pB,KAAKynB,MAAMK,qBAAsBzX,IACxG9F,EAAOtI,KAAKjC,KAAK4nB,qBAErB,IAAI2B,GAAc7d,eAAelB,WAAW/C,EAAQ4T,QAAQmO,gBAK5D,YAJoBrqB,KAAhBoqB,OAAkEpqB,KAApCa,KAAKynB,MAAMK,sBACtC9nB,KAAKynB,MAAMK,qBAAqBtoB,KAAO+pB,EAAY/pB,IACtD+K,EAAOtI,KAAKjC,KAAKkpB,oBAAoBK,EAAalZ,IAE/C9F,GAEX2d,EAAmBznB,UAAUipB,iBAAmB,SAAUjiB,EAAQ4I,GAC9D,MAAO5I,aAAkBiD,UAAS1J,YAEtCknB,EAAqB3gB,YACjBgB,YAAY9N,cACbytB,IAELV,2BACFvtB,SAAQiuB,mBAAqBA,kBAC7B,IAAIyB,yBAAyC,SAAUhoB,GAEnD,QAASgoB,KACL,MAAkB,QAAXhoB,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAa/D,MAfAD,WAAU4pB,EAAyBhoB,GAInCgoB,EAAwBlpB,UAAUwU,SAAW,SAAUxN,EAAQ4I,GAC3D,OAAQrQ,KAAK4nB,uBAEjB+B,EAAwBlpB,UAAUuU,UAAY,SAAUvN,EAAQ4I,GAG5D,MAFArQ,MAAK0nB,oBACL1nB,KAAKgoB,yBAGT2B,EAA0BpiB,YACtBgB,YAAY9N,cACbkvB,IAELnC,2BACFvtB,SAAQ0vB,wBAA0BA,uBAClC,IAAIC,kBAAkC,SAAUjoB,GAE5C,QAASioB,KACL,MAAkB,QAAXjoB,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAQ/D,MAVAD,WAAU6pB,EAAkBjoB,GAI5BioB,EAAiBnpB,UAAUwZ,QAAU,SAAUhb,EAASoR,GACpD,MAAIsW,YAAWkD,iBAAiBxZ,EAAO,WAC3B,GAAIiX,sBAAsBrd,KAAM4c,iBAAiB7X,WAAW/E,KAAMzK,GAAIqnB,iBAAiB7X,WAAWxP,UAI3GoqB,GACT9C,WAAWxpB,YACbrD,SAAQ2vB,iBAAmBA,iB;;;;;;;ACvS3B,QAASxC,aAAYnoB,GACjB,MAAOA,GAAQuC,WAAWvH,QAAQyhB,sBAItC,QAAS8N,iBAAgBvqB,GACrB,MAAOA,GAAQuC,WAAWvH,QAAQ6vB,cARtC/vB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQyhB,qBAAuBjf,OAAO,wBAItCxC,QAAQmtB,YAAcA,YACtBntB,QAAQ6vB,aAAertB,OAAO,gBAI9BxC,QAAQuvB,gBAAkBA,gB;;;;;;;ACF1B,QAASK,kBAAiBxZ,EAAO0Z,GAE7B,IAAK,GADDC,MACKrmB,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpCqmB,EAAUrmB,EAAK,GAAK7B,UAAU6B,EAElC,IAAIsmB,cAAc5Z,KAAW0Z,EACzB,OAAO,CACX,IAAIG,UAAUC,QAAS,CACnB,GAAI9Z,EAAM+Z,UAAaJ,EAAUK,UAAU,SAAUvY,GAAK,MAAa,SAANA,KAAoB,EACjF,OAAO,CACX,IAAIzB,EAAMia,UAAaN,EAAUK,UAAU,SAAUvY,GAAK,MAAa,SAANA,GAAsB,YAANA,KAAuB,EACpG,OAAO,MAEV,CACD,GAAIzB,EAAM+Z,UAAaJ,EAAUK,UAAU,SAAUvY,GAAK,MAAa,SAANA,GAAsB,YAANA,KAAuB,EACpG,OAAO,CACX,IAAIzB,EAAMia,UAAaN,EAAUK,UAAU,SAAUvY,GAAK,MAAa,SAANA,KAAoB,EACjF,OAAO,EAEf,MAAIzB,GAAMka,SAAYP,EAAUK,UAAU,SAAUvY,GAAK,MAAa,QAANA,KAAmB,GAE/EzB,EAAMma,WAAcR,EAAUK,UAAU,SAAUvY,GAAK,MAAa,UAANA,KAAqB,EAS3F,QAASmY,eAAc5Z,GACnB,GAAIA,EAAMoa,QAAS,CACf,GAAIlgB,GAASmgB,YAAYra,EAAMoa,QAC/B,QAAetrB,KAAXoL,EACA,MAAOA,GAEf,MAAO8F,GAAM0Z,KA5CjBhwB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIgwB,WAAY,mBAAA9vB,CAAQ,GAgCxBH,SAAQ4vB,iBAAmBA,iBAa3B5vB,QAAQgwB,cAAgBA,aACxB,IAAIS,aAAc,GAAIrrB,OAAM,MAC5B,WACI,QAASsrB,GAAWC,EAAYC,OACK1rB,KAA7BurB,YAAYG,KACZH,YAAYG,GAAeD,GAEnCD,EAAW,QAAS,GACpBA,EAAW,YAAa,GACxBA,EAAW,MAAO,GAClBA,EAAW,QAAS,IACpBA,EAAW,YAAa,IACxBA,EAAW,aAAc,IACzBA,EAAW,cAAe,IAC1BA,EAAW,eAAgB,IAC3BA,EAAW,UAAW,IACtBA,EAAW,WAAY,IACvBA,EAAW,WAAY,IACvBA,EAAW,SAAU,IACrBA,EAAW,QAAS,IACpBA,EAAW,SAAU,IACrBA,EAAW,WAAY,IACvBA,EAAW,MAAO,IAClBA,EAAW,OAAQ,IACnBA,EAAW,YAAa,IACxBA,EAAW,UAAW,IACtBA,EAAW,aAAc,IACzBA,EAAW,YAAa,IACxBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,SAAU,IACrBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,OAAQ,IACnBA,EAAW,SAAU,IACrBA,EAAW,WAAY,IACvBA,EAAW,UAAW,IACtBA,EAAW,YAAa,IACxBA,EAAW,cAAe,IAC1BA,EAAW,UAAW,IACtBA,EAAW,UAAW,IACtBA,EAAW,UAAW,IACtBA,EAAW,UAAW,IACtBA,EAAW,UAAW,KACtBA,EAAW,UAAW,KACtBA,EAAW,UAAW,KACtBA,EAAW,UAAW,KACtBA,EAAW,UAAW,KACtBA,EAAW,UAAW,KACtBA,EAAW,iBAAkB,KAC7BA,EAAW,YAAa,KACxBA,EAAW,kBAAmB,KAC9BA,EAAW,iBAAkB,KAC7BA,EAAW,gBAAiB,KAC5BA,EAAW,eAAgB,KAC3BA,EAAW,KAAM,KACjBA,EAAW,KAAM,KACjBA,EAAW,KAAM,KACjBA,EAAW,KAAM,KACjBA,EAAW,KAAM,KACjBA,EAAW,KAAM,KACjBA,EAAW,KAAM,KACjBA,EAAW,KAAM,KACjBA,EAAW,KAAM,KACjBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,MAAO,KAClBA,EAAW,UAAW,KACtBA,EAAW,aAAc,KACzBA,EAAW,YAAa,KACxBA,EAAW,QAAS,KACpBA,EAAW,QAAS,KACpBA,EAAW,QAAS,KACpBA,EAAW,SAAU,KACrBA,EAAW,QAAS,KACpBA,EAAW,YAAa,KACxBA,EAAW,SAAU,KACrBA,EAAW,cAAe,KAC1BA,EAAW,YAAa,KACxBA,EAAW,eAAgB,KAC3BA,EAAW,QAAS,KACpBA,EAAW,UAAW,Q;;;;;;;AC3K1B,QAASG,UAAShZ,GACd,IAAK,GAAIxR,KAAKwR,GAAQ7X,QAAQsG,eAAeD,KAAIrG,QAAQqG,GAAKwR,EAAExR,IAEpEvG,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAEtD4wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,IACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,IACjB0wB,SAAS,mBAAA1wB,CAAQ,IACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,GACjB,IAAI2wB,aAAc,mBAAA3wB,CAAQ,IAC1BH,SAAQ+wB,cAAgBD,YAAYE,QAEpCH,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,IACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,IACjB,IAAI8wB,aAAc,mBAAA9wB,CAAQ,IAC1BH,SAAQkxB,WAAaD,YAAYD,OACjC,IAAIG,aAAc,mBAAAhxB,CAAQ,IAC1BH,SAAQoxB,aAAeD,YAAYH,OACnC,IAAIK,aAAc,mBAAAlxB,CAAQ,IAC1BH,SAAQsxB,WAAaD,YAAYL,OACjC,IAAIO,aAAc,mBAAApxB,CAAQ,IAC1BH,SAAQwxB,aAAeD,YAAYP,OACnC,IAAIS,aAAc,mBAAAtxB,CAAQ,IAC1BH,SAAQ0xB,eAAiBD,YAAYT,OACrC,IAAIW,aAAc,mBAAAxxB,CAAQ,IAC1BH,SAAQ4xB,eAAiBD,YAAYX,OACrC,IAAIa,aAAc,mBAAA1xB,CAAQ,IAC1BH,SAAQ8xB,YAAcD,YAAYb,OAClC,IAAIe,aAAc,mBAAA5xB,CAAQ,IAC1BH,SAAQgyB,eAAiBD,YAAYf,OACrC,IAAIiB,cAAe,mBAAA9xB,CAAQ,IAC3BH,SAAQkyB,aAAeD,aAAajB,OACpC,IAAImB,cAAe,mBAAAhyB,CAAQ,IAC3BH,SAAQoyB,aAAeD,aAAanB,OACpC,IAAIqB,cAAe,mBAAAlyB,CAAQ,IAC3BH,SAAQsyB,WAAaD,aAAarB,OAClC,IAAIuB,cAAe,mBAAApyB,CAAQ,IAC3BH,SAAQwyB,aAAeD,aAAavB,QAEpCH,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,MAEjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MAEjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB,IAAIsyB,cAAe,mBAAAtyB,CAAQ,IAC3BH,SAAQ0yB,kBAAoBD,aAAazB,QAEzCH,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,IACjB0wB,SAAS,mBAAA1wB,CAAQ,KACjB0wB,SAAS,mBAAA1wB,CAAQ,K;;;;;;;8CCxEjB,QAASwyB,qBACP,IACE,GAAIC,GAAM,GAAIC,YAAW,EAEzB,OADAD,GAAI1sB,WAAaA,UAAW2sB,WAAWrsB,UAAWssB,IAAK,WAAc,MAAO,MACvD,KAAdF,EAAIE,OACiB,kBAAjBF,GAAIG,UACuB,IAAlCH,EAAIG,SAAS,EAAG,GAAGC,WACvB,MAAO/nB,GACP,OAAO,GAIX,QAASgoB,cACP,MAAOC,QAAOC,oBACV,WACA,WAGN,QAASC,cAAcC,EAAM/tB,GAC3B,GAAI2tB,aAAe3tB,EACjB,KAAM,IAAIguB,YAAW,6BAcvB,OAZIJ,QAAOC,qBAETE,EAAO,GAAIR,YAAWvtB,GACtB+tB,EAAKntB,UAAYgtB,OAAO1sB,YAGX,OAAT6sB,IACFA,EAAO,GAAIH,QAAO5tB,IAEpB+tB,EAAK/tB,OAASA,GAGT+tB,EAaT,QAASH,QAAQtN,EAAK2N,EAAkBjuB,GACtC,KAAK4tB,OAAOC,qBAAyBptB,eAAgBmtB,SACnD,MAAO,IAAIA,QAAOtN,EAAK2N,EAAkBjuB,EAI3C,IAAmB,gBAARsgB,GAAkB,CAC3B,GAAgC,gBAArB2N,GACT,KAAM,IAAIrsB,OACR,oEAGJ,OAAOssB,aAAYztB,KAAM6f,GAE3B,MAAO6N,MAAK1tB,KAAM6f,EAAK2N,EAAkBjuB,GAW3C,QAASmuB,MAAMJ,EAAMpzB,EAAOszB,EAAkBjuB,GAC5C,GAAqB,gBAAVrF,GACT,KAAM,IAAIyzB,WAAU,wCAGtB,OAA2B,mBAAhBC,cAA+B1zB,YAAiB0zB,aAClDC,gBAAgBP,EAAMpzB,EAAOszB,EAAkBjuB,GAGnC,gBAAVrF,GACF4zB,WAAWR,EAAMpzB,EAAOszB,GAG1BO,WAAWT,EAAMpzB,GA4B1B,QAAS8zB,YAAYjiB,GACnB,GAAoB,gBAATA,GACT,KAAM,IAAI4hB,WAAU,mCACf,IAAI5hB,EAAO,EAChB,KAAM,IAAIwhB,YAAW,wCAIzB,QAASU,OAAOX,EAAMvhB,EAAMmiB,EAAMC,GAEhC,MADAH,YAAWjiB,GACPA,GAAQ,EACHshB,aAAaC,EAAMvhB,OAEf5M,KAAT+uB,EAIyB,gBAAbC,GACVd,aAAaC,EAAMvhB,GAAMmiB,KAAKA,EAAMC,GACpCd,aAAaC,EAAMvhB,GAAMmiB,KAAKA,GAE7Bb,aAAaC,EAAMvhB,GAW5B,QAAS0hB,aAAaH,EAAMvhB,GAG1B,GAFAiiB,WAAWjiB,GACXuhB,EAAOD,aAAaC,EAAMvhB,EAAO,EAAI,EAAoB,EAAhBqiB,QAAQriB,KAC5CohB,OAAOC,oBACV,IAAK,GAAI3tB,GAAI,EAAGA,EAAIsM,IAAQtM,EAC1B6tB,EAAK7tB,GAAK,CAGd,OAAO6tB,GAgBT,QAASQ,YAAYR,EAAMe,EAAQF,GAKjC,GAJwB,gBAAbA,IAAsC,KAAbA,IAClCA,EAAW,SAGRhB,OAAOmB,WAAWH,GACrB,KAAM,IAAIR,WAAU,6CAGtB,IAAIpuB,GAAwC,EAA/B0tB,WAAWoB,EAAQF,EAChCb,GAAOD,aAAaC,EAAM/tB,EAE1B,IAAIgvB,GAASjB,EAAK9P,MAAM6Q,EAAQF,EAShC,OAPII,KAAWhvB,IAIb+tB,EAAOA,EAAK5W,MAAM,EAAG6X,IAGhBjB,EAGT,QAASkB,eAAelB,EAAMzV,GAC5B,GAAItY,GAASsY,EAAMtY,OAAS,EAAI,EAA4B,EAAxB6uB,QAAQvW,EAAMtY,OAClD+tB,GAAOD,aAAaC,EAAM/tB,EAC1B,KAAK,GAAIE,GAAI,EAAGA,EAAIF,EAAQE,GAAK,EAC/B6tB,EAAK7tB,GAAgB,IAAXoY,EAAMpY,EAElB,OAAO6tB,GAGT,QAASO,iBAAiBP,EAAMzV,EAAO4W,EAAYlvB,GAGjD,GAFAsY,EAAMoV,WAEFwB,EAAa,GAAK5W,EAAMoV,WAAawB,EACvC,KAAM,IAAIlB,YAAW,4BAGvB,IAAI1V,EAAMoV,WAAawB,GAAclvB,GAAU,GAC7C,KAAM,IAAIguB,YAAW,4BAmBvB,OAfE1V,OADiB1Y,KAAfsvB,OAAuCtvB,KAAXI,EACtB,GAAIutB,YAAWjV,OACH1Y,KAAXI,EACD,GAAIutB,YAAWjV,EAAO4W,GAEtB,GAAI3B,YAAWjV,EAAO4W,EAAYlvB,GAGxC4tB,OAAOC,qBAETE,EAAOzV,EACPyV,EAAKntB,UAAYgtB,OAAO1sB,WAGxB6sB,EAAOkB,cAAclB,EAAMzV,GAEtByV,EAGT,QAASS,YAAYT,EAAM3e,GACzB,GAAIwe,OAAOuB,SAAS/f,GAAM,CACxB,GAAI4H,GAA4B,EAAtB6X,QAAQzf,EAAIpP,OAGtB,OAFA+tB,GAAOD,aAAaC,EAAM/W,GAEN,IAAhB+W,EAAK/tB,OACA+tB,GAGT3e,EAAIggB,KAAKrB,EAAM,EAAG,EAAG/W,GACd+W,GAGT,GAAI3e,EAAK,CACP,GAA4B,mBAAhBif,cACRjf,EAAIigB,iBAAkBhB,cAAgB,UAAYjf,GACpD,MAA0B,gBAAfA,GAAIpP,QAAuBsvB,MAAMlgB,EAAIpP,QACvC8tB,aAAaC,EAAM,GAErBkB,cAAclB,EAAM3e,EAG7B,IAAiB,WAAbA,EAAI1E,MAAqB4H,QAAQlD,EAAI8B,MACvC,MAAO+d,eAAclB,EAAM3e,EAAI8B,MAInC,KAAM,IAAIkd,WAAU,sFAGtB,QAASS,SAAS7uB,GAGhB,GAAIA,GAAU2tB,aACZ,KAAM,IAAIK,YAAW,0DACaL,aAAarf,SAAS,IAAM,SAEhE,OAAgB,GAATtO,EAGT,QAASuvB,YAAYvvB,GAInB,OAHKA,GAAUA,IACbA,EAAS,GAEJ4tB,OAAOc,OAAO1uB,GA+EvB,QAAS0tB,YAAYoB,EAAQF,GAC3B,GAAIhB,OAAOuB,SAASL,GAClB,MAAOA,GAAO9uB,MAEhB,IAA2B,mBAAhBquB,cAA6D,kBAAvBA,aAAYmB,SACxDnB,YAAYmB,OAAOV,IAAWA,YAAkBT,cACnD,MAAOS,GAAOpB,UAEM,iBAAXoB,KACTA,EAAS,GAAKA,EAGhB,IAAI9X,GAAM8X,EAAO9uB,MACjB,IAAY,IAARgX,EAAW,MAAO,EAItB,KADA,GAAIyY,IAAc,IAEhB,OAAQb,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,MAAO5X,EACT,KAAK,OACL,IAAK,QACL,SAAKpX,GACH,MAAO8vB,aAAYZ,GAAQ9uB,MAC7B,KAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAa,GAANgX,CACT,KAAK,MACH,MAAOA,KAAQ,CACjB,KAAK,SACH,MAAO2Y,eAAcb,GAAQ9uB,MAC/B,SACE,GAAIyvB,EAAa,MAAOC,aAAYZ,GAAQ9uB,MAC5C4uB,IAAY,GAAKA,GAAUgB,cAC3BH,GAAc,GAMtB,QAASI,cAAcjB,EAAUzW,EAAO2X,GACtC,GAAIL,IAAc,CAclB,SALc7vB,KAAVuY,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQ1X,KAAKT,OACf,MAAO,EAOT,SAJYJ,KAARkwB,GAAqBA,EAAMrvB,KAAKT,UAClC8vB,EAAMrvB,KAAKT,QAGT8vB,GAAO,EACT,MAAO,EAOT,IAHAA,KAAS,EACT3X,KAAW,EAEP2X,GAAO3X,EACT,MAAO,EAKT,KAFKyW,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,MAAOmB,UAAStvB,KAAM0X,EAAO2X,EAE/B,KAAK,OACL,IAAK,QACH,MAAOE,WAAUvvB,KAAM0X,EAAO2X,EAEhC,KAAK,QACH,MAAOG,YAAWxvB,KAAM0X,EAAO2X,EAEjC,KAAK,SACL,IAAK,SACH,MAAOI,aAAYzvB,KAAM0X,EAAO2X,EAElC,KAAK,SACH,MAAOK,aAAY1vB,KAAM0X,EAAO2X,EAElC,KAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAOM,cAAa3vB,KAAM0X,EAAO2X,EAEnC,SACE,GAAIL,EAAa,KAAM,IAAIrB,WAAU,qBAAuBQ,EAC5DA,IAAYA,EAAW,IAAIgB,cAC3BH,GAAc,GAStB,QAASY,MAAMvvB,EAAGyQ,EAAGgB,GACnB,GAAIrS,GAAIY,EAAEyQ,EACVzQ,GAAEyQ,GAAKzQ,EAAEyR,GACTzR,EAAEyR,GAAKrS,EAmIT,QAASowB,sBAAsBjB,EAAQre,EAAKke,EAAYN,EAAUjL,GAEhE,GAAsB,IAAlB0L,EAAOrvB,OAAc,OAAQ,CAmBjC,IAhB0B,gBAAfkvB,IACTN,EAAWM,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAEhBA,GAAcA,EACVzoB,MAAMyoB,KAERA,EAAavL,EAAM,EAAK0L,EAAOrvB,OAAS,GAItCkvB,EAAa,IAAGA,EAAaG,EAAOrvB,OAASkvB,GAC7CA,GAAcG,EAAOrvB,OAAQ,CAC/B,GAAI2jB,EAAK,OAAQ,CACZuL,GAAaG,EAAOrvB,OAAS,MAC7B,IAAIkvB,EAAa,EAAG,CACzB,IAAIvL,EACC,OAAQ,CADJuL,GAAa,EAUxB,GALmB,gBAARle,KACTA,EAAM4c,OAAOO,KAAKnd,EAAK4d,IAIrBhB,OAAOuB,SAASne,GAElB,MAAmB,KAAfA,EAAIhR,QACE,EAEHuwB,aAAalB,EAAQre,EAAKke,EAAYN,EAAUjL,EAClD,IAAmB,gBAAR3S,GAEhB,MADAA,IAAY,IACR4c,OAAOC,qBACiC,kBAAjCN,YAAWrsB,UAAU2B,QAC1B8gB,EACK4J,WAAWrsB,UAAU2B,QAAQe,KAAKyrB,EAAQre,EAAKke,GAE/C3B,WAAWrsB,UAAUsvB,YAAY5sB,KAAKyrB,EAAQre,EAAKke,GAGvDqB,aAAalB,GAAUre,GAAOke,EAAYN,EAAUjL,EAG7D,MAAM,IAAIyK,WAAU,wCAGtB,QAASmC,cAAcjD,EAAKtc,EAAKke,EAAYN,EAAUjL,GAmBrD,QAAS8M,GAAMC,EAAKxwB,GAClB,MAAkB,KAAdywB,EACKD,EAAIxwB,GAEJwwB,EAAIE,aAAa1wB,EAAIywB,GAtBhC,GAAIA,GAAY,EACZE,EAAYvD,EAAIttB,OAChB8wB,EAAY9f,EAAIhR,MAEpB,QAAiBJ,KAAbgvB,IAEe,UADjBA,EAAWmC,OAAOnC,GAAUgB,gBACY,UAAbhB,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAItB,EAAIttB,OAAS,GAAKgR,EAAIhR,OAAS,EACjC,OAAQ,CAEV2wB,GAAY,EACZE,GAAa,EACbC,GAAa,EACb5B,GAAc,EAYlB,GAAIhvB,EACJ,IAAIyjB,EAAK,CACP,GAAIqN,IAAc,CAClB,KAAK9wB,EAAIgvB,EAAYhvB,EAAI2wB,EAAW3wB,IAClC,GAAIuwB,EAAKnD,EAAKptB,KAAOuwB,EAAKzf,GAAqB,IAAhBggB,EAAoB,EAAI9wB,EAAI8wB,IAEzD,IADoB,IAAhBA,IAAmBA,EAAa9wB,GAChCA,EAAI8wB,EAAa,IAAMF,EAAW,MAAOE,GAAaL,OAEtC,IAAhBK,IAAmB9wB,GAAKA,EAAI8wB,GAChCA,GAAc,MAKlB,KADI9B,EAAa4B,EAAYD,IAAW3B,EAAa2B,EAAYC,GAC5D5wB,EAAIgvB,EAAYhvB,GAAK,EAAGA,IAAK,CAEhC,IAAK,GADD+wB,IAAQ,EACHC,EAAI,EAAGA,EAAIJ,EAAWI,IAC7B,GAAIT,EAAKnD,EAAKptB,EAAIgxB,KAAOT,EAAKzf,EAAKkgB,GAAI,CACrCD,GAAQ,CACR,OAGJ,GAAIA,EAAO,MAAO/wB,GAItB,OAAQ,EAeV,QAASixB,UAAUT,EAAK5B,EAAQhG,EAAQ9oB,GACtC8oB,EAASsI,OAAOtI,IAAW,CAC3B,IAAIuI,GAAYX,EAAI1wB,OAAS8oB,CACxB9oB,IAGHA,EAASoxB,OAAOpxB,IACHqxB,IACXrxB,EAASqxB,GAJXrxB,EAASqxB,CASX,IAAIC,GAASxC,EAAO9uB,MACpB,IAAIsxB,EAAS,GAAM,EAAG,KAAM,IAAIlD,WAAU,qBAEtCpuB,GAASsxB,EAAS,IACpBtxB,EAASsxB,EAAS,EAEpB,KAAK,GAAIpxB,GAAI,EAAGA,EAAIF,IAAUE,EAAG,CAC/B,GAAIqxB,GAASC,SAAS1C,EAAO2C,OAAW,EAAJvxB,EAAO,GAAI,GAC/C,IAAIuG,MAAM8qB,GAAS,MAAOrxB,EAC1BwwB,GAAI5H,EAAS5oB,GAAKqxB,EAEpB,MAAOrxB,GAGT,QAASwxB,WAAWhB,EAAK5B,EAAQhG,EAAQ9oB,GACvC,MAAO2xB,YAAWjC,YAAYZ,EAAQ4B,EAAI1wB,OAAS8oB,GAAS4H,EAAK5H,EAAQ9oB,GAG3E,QAAS4xB,YAAYlB,EAAK5B,EAAQhG,EAAQ9oB,GACxC,MAAO2xB,YAAWE,aAAa/C,GAAS4B,EAAK5H,EAAQ9oB,GAGvD,QAAS8xB,aAAapB,EAAK5B,EAAQhG,EAAQ9oB,GACzC,MAAO4xB,YAAWlB,EAAK5B,EAAQhG,EAAQ9oB,GAGzC,QAAS+xB,aAAarB,EAAK5B,EAAQhG,EAAQ9oB,GACzC,MAAO2xB,YAAWhC,cAAcb,GAAS4B,EAAK5H,EAAQ9oB,GAGxD,QAASgyB,WAAWtB,EAAK5B,EAAQhG,EAAQ9oB,GACvC,MAAO2xB,YAAWM,eAAenD,EAAQ4B,EAAI1wB,OAAS8oB,GAAS4H,EAAK5H,EAAQ9oB,GAkF9E,QAASmwB,aAAaO,EAAKvY,EAAO2X,GAChC,MAAc,KAAV3X,GAAe2X,IAAQY,EAAI1wB,OACtBkyB,OAAOC,cAAczB,GAErBwB,OAAOC,cAAczB,EAAIvZ,MAAMgB,EAAO2X,IAIjD,QAASE,WAAWU,EAAKvY,EAAO2X,GAC9BA,EAAMzvB,KAAK+E,IAAIsrB,EAAI1wB,OAAQ8vB,EAI3B,KAHA,GAAIhY,MAEA5X,EAAIiY,EACDjY,EAAI4vB,GAAK,CACd,GAAIsC,GAAY1B,EAAIxwB,GAChBmyB,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,CAEJ,IAAIlyB,EAAIoyB,GAAoBxC,EAAK,CAC/B,GAAIyC,GAAYC,EAAWC,EAAYC,CAEvC,QAAQJ,GACN,IAAK,GACCF,EAAY,MACdC,EAAYD,EAEd,MACF,KAAK,GACHG,EAAa7B,EAAIxwB,EAAI,GACO,MAAV,IAAbqyB,KACHG,GAA6B,GAAZN,IAAqB,EAAoB,GAAbG,GACzB,MAClBF,EAAYK,EAGhB,MACF,KAAK,GACHH,EAAa7B,EAAIxwB,EAAI,GACrBsyB,EAAY9B,EAAIxwB,EAAI,GACQ,MAAV,IAAbqyB,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZN,IAAoB,IAAoB,GAAbG,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEL,EAAYK,EAGhB,MACF,KAAK,GACHH,EAAa7B,EAAIxwB,EAAI,GACrBsyB,EAAY9B,EAAIxwB,EAAI,GACpBuyB,EAAa/B,EAAIxwB,EAAI,GACO,MAAV,IAAbqyB,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZN,IAAoB,IAAqB,GAAbG,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CL,EAAYK,IAMJ,OAAdL,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbva,EAAIpV,KAAK2vB,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBva,EAAIpV,KAAK2vB,GACTnyB,GAAKoyB,EAGP,MAAOK,uBAAsB7a,GAQ/B,QAAS6a,uBAAuBC,GAC9B,GAAI5b,GAAM4b,EAAW5yB,MACrB,IAAIgX,GAAO6b,qBACT,MAAO9B,QAAO+B,aAAaxwB,MAAMyuB,OAAQ6B,EAM3C,KAFA,GAAI9a,GAAM,GACN5X,EAAI,EACDA,EAAI8W,GACTc,GAAOiZ,OAAO+B,aAAaxwB,MACzByuB,OACA6B,EAAWzb,MAAMjX,EAAGA,GAAK2yB,sBAG7B,OAAO/a,GAGT,QAASmY,YAAYS,EAAKvY,EAAO2X,GAC/B,GAAIiD,GAAM,EACVjD,GAAMzvB,KAAK+E,IAAIsrB,EAAI1wB,OAAQ8vB,EAE3B,KAAK,GAAI5vB,GAAIiY,EAAOjY,EAAI4vB,IAAO5vB,EAC7B6yB,GAAOhC,OAAO+B,aAAsB,IAATpC,EAAIxwB,GAEjC,OAAO6yB,GAGT,QAAS7C,aAAaQ,EAAKvY,EAAO2X,GAChC,GAAIiD,GAAM,EACVjD,GAAMzvB,KAAK+E,IAAIsrB,EAAI1wB,OAAQ8vB,EAE3B,KAAK,GAAI5vB,GAAIiY,EAAOjY,EAAI4vB,IAAO5vB,EAC7B6yB,GAAOhC,OAAO+B,aAAapC,EAAIxwB,GAEjC,OAAO6yB,GAGT,QAAShD,UAAUW,EAAKvY,EAAO2X,GAC7B,GAAI9Y,GAAM0Z,EAAI1wB,SAETmY,GAASA,EAAQ,KAAGA,EAAQ,KAC5B2X,GAAOA,EAAM,GAAKA,EAAM9Y,KAAK8Y,EAAM9Y,EAGxC,KAAK,GADDgc,GAAM,GACD9yB,EAAIiY,EAAOjY,EAAI4vB,IAAO5vB,EAC7B8yB,GAAOC,MAAMvC,EAAIxwB,GAEnB,OAAO8yB,GAGT,QAAS5C,cAAcM,EAAKvY,EAAO2X,GAGjC,IAAK,GAFDoD,GAAQxC,EAAIvZ,MAAMgB,EAAO2X,GACzBhY,EAAM,GACD5X,EAAI,EAAGA,EAAIgzB,EAAMlzB,OAAQE,GAAK,EACrC4X,GAAOiZ,OAAO+B,aAAaI,EAAMhzB,GAAoB,IAAfgzB,EAAMhzB,EAAI,GAElD,OAAO4X,GA0CT,QAASqb,aAAarK,EAAQsK,EAAKpzB,GACjC,GAAK8oB,EAAS,GAAO,GAAKA,EAAS,EAAG,KAAM,IAAIkF,YAAW,qBAC3D,IAAIlF,EAASsK,EAAMpzB,EAAQ,KAAM,IAAIguB,YAAW,yCA+JlD,QAASqF,UAAU3C,EAAK/1B,EAAOmuB,EAAQsK,EAAK9tB,EAAKF,GAC/C,IAAKwoB,OAAOuB,SAASuB,GAAM,KAAM,IAAItC,WAAU,8CAC/C,IAAIzzB,EAAQ2K,GAAO3K,EAAQyK,EAAK,KAAM,IAAI4oB,YAAW,oCACrD,IAAIlF,EAASsK,EAAM1C,EAAI1wB,OAAQ,KAAM,IAAIguB,YAAW,sBAkDtD,QAASsF,mBAAmB5C,EAAK/1B,EAAOmuB,EAAQyK,GAC1C54B,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,EACxC,KAAK,GAAIuF,GAAI,EAAGgxB,EAAI7wB,KAAK+E,IAAIsrB,EAAI1wB,OAAS8oB,EAAQ,GAAI5oB,EAAIgxB,IAAKhxB,EAC7DwwB,EAAI5H,EAAS5oB,IAAMvF,EAAS,KAAS,GAAK44B,EAAerzB,EAAI,EAAIA,MAClC,GAA5BqzB,EAAerzB,EAAI,EAAIA,GA8B9B,QAASszB,mBAAmB9C,EAAK/1B,EAAOmuB,EAAQyK,GAC1C54B,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,EAC5C,KAAK,GAAIuF,GAAI,EAAGgxB,EAAI7wB,KAAK+E,IAAIsrB,EAAI1wB,OAAS8oB,EAAQ,GAAI5oB,EAAIgxB,IAAKhxB,EAC7DwwB,EAAI5H,EAAS5oB,GAAMvF,IAAuC,GAA5B44B,EAAerzB,EAAI,EAAIA,GAAU,IAmJnE,QAASuzB,cAAc/C,EAAK/1B,EAAOmuB,EAAQsK,EAAK9tB,EAAKF,GACnD,GAAI0jB,EAASsK,EAAM1C,EAAI1wB,OAAQ,KAAM,IAAIguB,YAAW,qBACpD,IAAIlF,EAAS,EAAG,KAAM,IAAIkF,YAAW,sBAGvC,QAAS0F,YAAYhD,EAAK/1B,EAAOmuB,EAAQyK,EAAcI,GAKrD,MAJKA,IACHF,aAAa/C,EAAK/1B,EAAOmuB,EAAQ,EAAG,uBAAyB,uBAE/D8K,QAAQ3V,MAAMyS,EAAK/1B,EAAOmuB,EAAQyK,EAAc,GAAI,GAC7CzK,EAAS,EAWlB,QAAS+K,aAAanD,EAAK/1B,EAAOmuB,EAAQyK,EAAcI,GAKtD,MAJKA,IACHF,aAAa/C,EAAK/1B,EAAOmuB,EAAQ,EAAG,wBAA0B,wBAEhE8K,QAAQ3V,MAAMyS,EAAK/1B,EAAOmuB,EAAQyK,EAAc,GAAI,GAC7CzK,EAAS,EAgIlB,QAASgL,aAAaC,GAIpB,GAFAA,EAAMC,WAAWD,GAAKrc,QAAQuc,kBAAmB,IAE7CF,EAAI/zB,OAAS,EAAG,MAAO,EAE3B,MAAO+zB,EAAI/zB,OAAS,GAAM,GACxB+zB,GAAY,GAEd,OAAOA,GAGT,QAASC,YAAYD,GACnB,MAAIA,GAAIG,KAAaH,EAAIG,OAClBH,EAAIrc,QAAQ,aAAc,IAGnC,QAASub,OAAO1hB,GACd,MAAIA,GAAI,GAAW,IAAMA,EAAEjD,SAAS,IAC7BiD,EAAEjD,SAAS,IAGpB,QAASohB,aAAaZ,EAAQqF,GAC5BA,EAAQA,GAASC,GAMjB,KAAK,GALD/B,GACAryB,EAAS8uB,EAAO9uB,OAChBq0B,EAAgB,KAChBnB,KAEKhzB,EAAI,EAAGA,EAAIF,IAAUE,EAAG,CAI/B,IAHAmyB,EAAYvD,EAAOwF,WAAWp0B,IAGd,OAAUmyB,EAAY,MAAQ,CAE5C,IAAKgC,EAAe,CAElB,GAAIhC,EAAY,MAAQ,EAEjB8B,GAAS,IAAM,GAAGjB,EAAMxwB,KAAK,IAAM,IAAM,IAC9C,UACK,GAAIxC,EAAI,IAAMF,EAAQ,EAEtBm0B,GAAS,IAAM,GAAGjB,EAAMxwB,KAAK,IAAM,IAAM,IAC9C,UAIF2xB,EAAgBhC,CAEhB,UAIF,GAAIA,EAAY,MAAQ,EACjB8B,GAAS,IAAM,GAAGjB,EAAMxwB,KAAK,IAAM,IAAM,KAC9C2xB,EAAgBhC,CAChB,UAIFA,EAAkE,OAArDgC,EAAgB,OAAU,GAAKhC,EAAY,WAC/CgC,KAEJF,GAAS,IAAM,GAAGjB,EAAMxwB,KAAK,IAAM,IAAM,IAMhD,IAHA2xB,EAAgB,KAGZhC,EAAY,IAAM,CACpB,IAAK8B,GAAS,GAAK,EAAG,KACtBjB,GAAMxwB,KAAK2vB,OACN,IAAIA,EAAY,KAAO,CAC5B,IAAK8B,GAAS,GAAK,EAAG,KACtBjB,GAAMxwB,KACJ2vB,GAAa,EAAM,IACP,GAAZA,EAAmB,SAEhB,IAAIA,EAAY,MAAS,CAC9B,IAAK8B,GAAS,GAAK,EAAG,KACtBjB,GAAMxwB,KACJ2vB,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,MAAIA,EAAY,SASrB,KAAM,IAAIzwB,OAAM,qBARhB,KAAKuyB,GAAS,GAAK,EAAG,KACtBjB,GAAMxwB,KACJ2vB,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,MAAOa,GAGT,QAASrB,cAAckC,GAErB,IAAK,GADDQ,MACKr0B,EAAI,EAAGA,EAAI6zB,EAAI/zB,SAAUE,EAEhCq0B,EAAU7xB,KAAyB,IAApBqxB,EAAIO,WAAWp0B,GAEhC,OAAOq0B,GAGT,QAAStC,gBAAgB8B,EAAKI,GAG5B,IAAK,GAFD9rB,GAAGmsB,EAAIC,EACPF,KACKr0B,EAAI,EAAGA,EAAI6zB,EAAI/zB,WACjBm0B,GAAS,GAAK,KADaj0B,EAGhCmI,EAAI0rB,EAAIO,WAAWp0B,GACnBs0B,EAAKnsB,GAAK,EACVosB,EAAKpsB,EAAI,IACTksB,EAAU7xB,KAAK+xB,GACfF,EAAU7xB,KAAK8xB,EAGjB,OAAOD,GAGT,QAAS5E,eAAeoE,GACtB,MAAO7B,QAAOwC,YAAYZ,YAAYC,IAGxC,QAASpC,YAAYgD,EAAKC,EAAK9L,EAAQ9oB,GACrC,IAAK,GAAIE,GAAI,EAAGA,EAAIF,KACbE,EAAI4oB,GAAU8L,EAAI50B,QAAYE,GAAKy0B,EAAI30B,UADhBE,EAE5B00B,EAAI10B,EAAI4oB,GAAU6L,EAAIz0B,EAExB,OAAOA,GAGT,QAASovB,OAAOte,GACd,MAAOA,KAAQA,EAjvDjB,GAAIkhB,QAAS,mBAAAr3B,CAAQ,KACjB+4B,QAAU,mBAAA/4B,CAAQ,KAClByX,QAAU,mBAAAzX,CAAQ,IAEtBH,SAAQkzB,OAASA,OACjBlzB,QAAQ60B,WAAaA,WACrB70B,QAAQm6B,kBAAoB,GA0B5BjH,OAAOC,wBAAqDjuB,KAA/Bk1B,OAAOjH,oBAChCiH,OAAOjH,oBACPR,oBAKJ3yB,QAAQizB,WAAaA,aAkErBC,OAAOmH,SAAW,KAGlBnH,OAAOoH,SAAW,SAAU1H,GAE1B,MADAA,GAAI1sB,UAAYgtB,OAAO1sB,UAChBosB,GA2BTM,OAAOO,KAAO,SAAUxzB,EAAOszB,EAAkBjuB,GAC/C,MAAOmuB,MAAK,KAAMxzB,EAAOszB,EAAkBjuB,IAGzC4tB,OAAOC,sBACTD,OAAO1sB,UAAUN,UAAY2sB,WAAWrsB,UACxC0sB,OAAOhtB,UAAY2sB,WACG,mBAAXrwB,SAA0BA,OAAO+3B,SACxCrH,OAAO1wB,OAAO+3B,WAAarH,QAE7BpzB,OAAOC,eAAemzB,OAAQ1wB,OAAO+3B,SACnCt6B,MAAO,KACPmH,cAAc,KAiCpB8rB,OAAOc,MAAQ,SAAUliB,EAAMmiB,EAAMC,GACnC,MAAOF,OAAM,KAAMliB,EAAMmiB,EAAMC,IAiBjChB,OAAOM,YAAc,SAAU1hB,GAC7B,MAAO0hB,aAAY,KAAM1hB,IAK3BohB,OAAOsH,gBAAkB,SAAU1oB,GACjC,MAAO0hB,aAAY,KAAM1hB,IAiH3BohB,OAAOuB,SAAW,SAAmBruB,GACnC,QAAe,MAALA,IAAaA,EAAEq0B,YAG3BvH,OAAOwH,QAAU,SAAkBrvB,EAAGjF,GACpC,IAAK8sB,OAAOuB,SAASppB,KAAO6nB,OAAOuB,SAASruB,GAC1C,KAAM,IAAIstB,WAAU,4BAGtB,IAAIroB,IAAMjF,EAAG,MAAO,EAKpB,KAAK,GAHDwC,GAAIyC,EAAE/F,OACNuD,EAAIzC,EAAEd,OAEDE,EAAI,EAAG8W,EAAM3W,KAAK+E,IAAI9B,EAAGC,GAAIrD,EAAI8W,IAAO9W,EAC/C,GAAI6F,EAAE7F,KAAOY,EAAEZ,GAAI,CACjBoD,EAAIyC,EAAE7F,GACNqD,EAAIzC,EAAEZ,EACN,OAIJ,MAAIoD,GAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GAGTsqB,OAAOmB,WAAa,SAAqBH,GACvC,OAAQmC,OAAOnC,GAAUgB,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,CACT,SACE,OAAO,IAIbhC,OAAO/Y,OAAS,SAAiBwgB,EAAMr1B,GACrC,IAAKsS,QAAQ+iB,GACX,KAAM,IAAIjH,WAAU,8CAGtB,IAAoB,IAAhBiH,EAAKr1B,OACP,MAAO4tB,QAAOc,MAAM,EAGtB,IAAIxuB,EACJ,QAAeN,KAAXI,EAEF,IADAA,EAAS,EACJE,EAAI,EAAGA,EAAIm1B,EAAKr1B,SAAUE,EAC7BF,GAAUq1B,EAAKn1B,GAAGF,MAItB,IAAIqvB,GAASzB,OAAOM,YAAYluB,GAC5Bs1B,EAAM,CACV,KAAKp1B,EAAI,EAAGA,EAAIm1B,EAAKr1B,SAAUE,EAAG,CAChC,GAAIwwB,GAAM2E,EAAKn1B,EACf,KAAK0tB,OAAOuB,SAASuB,GACnB,KAAM,IAAItC,WAAU,8CAEtBsC,GAAItB,KAAKC,EAAQiG,GACjBA,GAAO5E,EAAI1wB,OAEb,MAAOqvB,IA8CTzB,OAAOF,WAAaA,WA0EpBE,OAAO1sB,UAAUi0B,WAAY,EAQ7BvH,OAAO1sB,UAAUq0B,OAAS,WACxB,GAAIve,GAAMvW,KAAKT,MACf,IAAIgX,EAAM,GAAM,EACd,KAAM,IAAIgX,YAAW,4CAEvB,KAAK,GAAI9tB,GAAI,EAAGA,EAAI8W,EAAK9W,GAAK,EAC5BmwB,KAAK5vB,KAAMP,EAAGA,EAAI,EAEpB,OAAOO,OAGTmtB,OAAO1sB,UAAUs0B,OAAS,WACxB,GAAIxe,GAAMvW,KAAKT,MACf,IAAIgX,EAAM,GAAM,EACd,KAAM,IAAIgX,YAAW,4CAEvB,KAAK,GAAI9tB,GAAI,EAAGA,EAAI8W,EAAK9W,GAAK,EAC5BmwB,KAAK5vB,KAAMP,EAAGA,EAAI,GAClBmwB,KAAK5vB,KAAMP,EAAI,EAAGA,EAAI,EAExB,OAAOO,OAGTmtB,OAAO1sB,UAAUu0B,OAAS,WACxB,GAAIze,GAAMvW,KAAKT,MACf,IAAIgX,EAAM,GAAM,EACd,KAAM,IAAIgX,YAAW,4CAEvB,KAAK,GAAI9tB,GAAI,EAAGA,EAAI8W,EAAK9W,GAAK,EAC5BmwB,KAAK5vB,KAAMP,EAAGA,EAAI,GAClBmwB,KAAK5vB,KAAMP,EAAI,EAAGA,EAAI,GACtBmwB,KAAK5vB,KAAMP,EAAI,EAAGA,EAAI,GACtBmwB,KAAK5vB,KAAMP,EAAI,EAAGA,EAAI,EAExB,OAAOO,OAGTmtB,OAAO1sB,UAAUoN,SAAW,WAC1B,GAAItO,GAAuB,EAAdS,KAAKT,MAClB,OAAe,KAAXA,EAAqB,GACA,IAArBuC,UAAUvC,OAAqBgwB,UAAUvvB,KAAM,EAAGT,GAC/C6vB,aAAavtB,MAAM7B,KAAM8B,YAGlCqrB,OAAO1sB,UAAUw0B,OAAS,SAAiB50B,GACzC,IAAK8sB,OAAOuB,SAASruB,GAAI,KAAM,IAAIstB,WAAU,4BAC7C,OAAI3tB,QAASK,GACsB,IAA5B8sB,OAAOwH,QAAQ30B,KAAMK,IAG9B8sB,OAAO1sB,UAAUy0B,QAAU,WACzB,GAAI5B,GAAM,GACNzuB,EAAM5K,QAAQm6B,iBAKlB,OAJIp0B,MAAKT,OAAS,IAChB+zB,EAAMtzB,KAAK6N,SAAS,MAAO,EAAGhJ,GAAKogB,MAAM,SAASjO,KAAK,KACnDhX,KAAKT,OAASsF,IAAKyuB,GAAO,UAEzB,WAAaA,EAAM,KAG5BnG,OAAO1sB,UAAUk0B,QAAU,SAAkBltB,EAAQiQ,EAAO2X,EAAK8F,EAAWC,GAC1E,IAAKjI,OAAOuB,SAASjnB,GACnB,KAAM,IAAIkmB,WAAU,4BAgBtB,QAbcxuB,KAAVuY,IACFA,EAAQ,OAEEvY,KAARkwB,IACFA,EAAM5nB,EAASA,EAAOlI,OAAS,OAEfJ,KAAdg2B,IACFA,EAAY,OAEEh2B,KAAZi2B,IACFA,EAAUp1B,KAAKT,QAGbmY,EAAQ,GAAK2X,EAAM5nB,EAAOlI,QAAU41B,EAAY,GAAKC,EAAUp1B,KAAKT,OACtE,KAAM,IAAIguB,YAAW,qBAGvB,IAAI4H,GAAaC,GAAW1d,GAAS2X,EACnC,MAAO,EAET,IAAI8F,GAAaC,EACf,OAAQ,CAEV,IAAI1d,GAAS2X,EACX,MAAO,EAQT,IALA3X,KAAW,EACX2X,KAAS,EACT8F,KAAe,EACfC,KAAa,EAETp1B,OAASyH,EAAQ,MAAO,EAS5B,KAAK,GAPD5E,GAAIuyB,EAAUD,EACdryB,EAAIusB,EAAM3X,EACVnB,EAAM3W,KAAK+E,IAAI9B,EAAGC,GAElBuyB,EAAWr1B,KAAK0W,MAAMye,EAAWC,GACjCE,EAAa7tB,EAAOiP,MAAMgB,EAAO2X,GAE5B5vB,EAAI,EAAGA,EAAI8W,IAAO9W,EACzB,GAAI41B,EAAS51B,KAAO61B,EAAW71B,GAAI,CACjCoD,EAAIwyB,EAAS51B,GACbqD,EAAIwyB,EAAW71B,EACf,OAIJ,MAAIoD,GAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GA6HTsqB,OAAO1sB,UAAU2E,SAAW,SAAmBmL,EAAKke,EAAYN,GAC9D,OAAoD,IAA7CnuB,KAAKoC,QAAQmO,EAAKke,EAAYN,IAGvChB,OAAO1sB,UAAU2B,QAAU,SAAkBmO,EAAKke,EAAYN,GAC5D,MAAO0B,sBAAqB7vB,KAAMuQ,EAAKke,EAAYN,GAAU,IAG/DhB,OAAO1sB,UAAUsvB,YAAc,SAAsBxf,EAAKke,EAAYN,GACpE,MAAO0B,sBAAqB7vB,KAAMuQ,EAAKke,EAAYN,GAAU,IAkD/DhB,OAAO1sB,UAAU+c,MAAQ,SAAgB6Q,EAAQhG,EAAQ9oB,EAAQ4uB,GAE/D,OAAehvB,KAAXkpB,EACF8F,EAAW,OACX5uB,EAASS,KAAKT,OACd8oB,EAAS,MAEJ,QAAelpB,KAAXI,GAA0C,gBAAX8oB,GACxC8F,EAAW9F,EACX9oB,EAASS,KAAKT,OACd8oB,EAAS,MAEJ,KAAIkN,SAASlN,GAWlB,KAAM,IAAIlnB,OACR,0EAXFknB,IAAkB,EACdkN,SAASh2B,IACXA,GAAkB,MACDJ,KAAbgvB,IAAwBA,EAAW,UAEvCA,EAAW5uB,EACXA,MAASJ,IASb,GAAIyxB,GAAY5wB,KAAKT,OAAS8oB,CAG9B,SAFelpB,KAAXI,GAAwBA,EAASqxB,KAAWrxB,EAASqxB,GAEpDvC,EAAO9uB,OAAS,IAAMA,EAAS,GAAK8oB,EAAS,IAAOA,EAASroB,KAAKT,OACrE,KAAM,IAAIguB,YAAW,yCAGlBY,KAAUA,EAAW,OAG1B,KADA,GAAIa,IAAc,IAEhB,OAAQb,GACN,IAAK,MACH,MAAOuC,UAAS1wB,KAAMquB,EAAQhG,EAAQ9oB,EAExC,KAAK,OACL,IAAK,QACH,MAAO0xB,WAAUjxB,KAAMquB,EAAQhG,EAAQ9oB,EAEzC,KAAK,QACH,MAAO4xB,YAAWnxB,KAAMquB,EAAQhG,EAAQ9oB,EAE1C,KAAK,SACL,IAAK,SACH,MAAO8xB,aAAYrxB,KAAMquB,EAAQhG,EAAQ9oB,EAE3C,KAAK,SAEH,MAAO+xB,aAAYtxB,KAAMquB,EAAQhG,EAAQ9oB,EAE3C,KAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAOgyB,WAAUvxB,KAAMquB,EAAQhG,EAAQ9oB,EAEzC,SACE,GAAIyvB,EAAa,KAAM,IAAIrB,WAAU,qBAAuBQ,EAC5DA,IAAY,GAAKA,GAAUgB,cAC3BH,GAAc,IAKtB7B,OAAO1sB,UAAU+0B,OAAS,WACxB,OACEvrB,KAAM,SACNwG,KAAMpR,MAAMoB,UAAUiW,MAAMvT,KAAKnD,KAAKy1B,MAAQz1B,KAAM,IAwFxD,IAAIoyB,sBAAuB,IA8D3BjF,QAAO1sB,UAAUiW,MAAQ,SAAgBgB,EAAO2X,GAC9C,GAAI9Y,GAAMvW,KAAKT,MACfmY,KAAUA,EACV2X,MAAclwB,KAARkwB,EAAoB9Y,IAAQ8Y,EAE9B3X,EAAQ,GACVA,GAASnB,GACG,IAAGmB,EAAQ,GACdA,EAAQnB,IACjBmB,EAAQnB,GAGN8Y,EAAM,GACRA,GAAO9Y,GACG,IAAG8Y,EAAM,GACVA,EAAM9Y,IACf8Y,EAAM9Y,GAGJ8Y,EAAM3X,IAAO2X,EAAM3X,EAEvB,IAAIge,EACJ,IAAIvI,OAAOC,oBACTsI,EAAS11B,KAAKgtB,SAAStV,EAAO2X,GAC9BqG,EAAOv1B,UAAYgtB,OAAO1sB,cACrB,CACL,GAAIk1B,GAAWtG,EAAM3X,CACrBge,GAAS,GAAIvI,QAAOwI,MAAUx2B,GAC9B,KAAK,GAAIM,GAAI,EAAGA,EAAIk2B,IAAYl2B,EAC9Bi2B,EAAOj2B,GAAKO,KAAKP,EAAIiY,GAIzB,MAAOge,IAWTvI,OAAO1sB,UAAUm1B,WAAa,SAAqBvN,EAAQ4E,EAAYiG,GACrE7K,GAAkB,EAClB4E,GAA0B,EACrBiG,GAAUR,YAAYrK,EAAQ4E,EAAYjtB,KAAKT,OAKpD,KAHA,GAAIgR,GAAMvQ,KAAKqoB,GACXwN,EAAM,EACNp2B,EAAI,IACCA,EAAIwtB,IAAe4I,GAAO,MACjCtlB,GAAOvQ,KAAKqoB,EAAS5oB,GAAKo2B,CAG5B,OAAOtlB,IAGT4c,OAAO1sB,UAAUq1B,WAAa,SAAqBzN,EAAQ4E,EAAYiG,GACrE7K,GAAkB,EAClB4E,GAA0B,EACrBiG,GACHR,YAAYrK,EAAQ4E,EAAYjtB,KAAKT,OAKvC,KAFA,GAAIgR,GAAMvQ,KAAKqoB,IAAW4E,GACtB4I,EAAM,EACH5I,EAAa,IAAM4I,GAAO,MAC/BtlB,GAAOvQ,KAAKqoB,IAAW4E,GAAc4I,CAGvC,OAAOtlB,IAGT4c,OAAO1sB,UAAUs1B,UAAY,SAAoB1N,EAAQ6K,GAEvD,MADKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QACpCS,KAAKqoB,IAGd8E,OAAO1sB,UAAUu1B,aAAe,SAAuB3N,EAAQ6K,GAE7D,MADKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QACpCS,KAAKqoB,GAAWroB,KAAKqoB,EAAS,IAAM,GAG7C8E,OAAO1sB,UAAU0vB,aAAe,SAAuB9H,EAAQ6K,GAE7D,MADKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QACnCS,KAAKqoB,IAAW,EAAKroB,KAAKqoB,EAAS,IAG7C8E,OAAO1sB,UAAUw1B,aAAe,SAAuB5N,EAAQ6K,GAG7D,MAFKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,SAElCS,KAAKqoB,GACTroB,KAAKqoB,EAAS,IAAM,EACpBroB,KAAKqoB,EAAS,IAAM,IACD,SAAnBroB,KAAKqoB,EAAS,IAGrB8E,OAAO1sB,UAAUy1B,aAAe,SAAuB7N,EAAQ6K,GAG7D,MAFKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QAEpB,SAAfS,KAAKqoB,IACTroB,KAAKqoB,EAAS,IAAM,GACrBroB,KAAKqoB,EAAS,IAAM,EACrBroB,KAAKqoB,EAAS,KAGlB8E,OAAO1sB,UAAU01B,UAAY,SAAoB9N,EAAQ4E,EAAYiG,GACnE7K,GAAkB,EAClB4E,GAA0B,EACrBiG,GAAUR,YAAYrK,EAAQ4E,EAAYjtB,KAAKT,OAKpD,KAHA,GAAIgR,GAAMvQ,KAAKqoB,GACXwN,EAAM,EACNp2B,EAAI,IACCA,EAAIwtB,IAAe4I,GAAO,MACjCtlB,GAAOvQ,KAAKqoB,EAAS5oB,GAAKo2B,CAM5B,OAJAA,IAAO,IAEHtlB,GAAOslB,IAAKtlB,GAAO3Q,KAAKw2B,IAAI,EAAG,EAAInJ,IAEhC1c,GAGT4c,OAAO1sB,UAAU41B,UAAY,SAAoBhO,EAAQ4E,EAAYiG,GACnE7K,GAAkB,EAClB4E,GAA0B,EACrBiG,GAAUR,YAAYrK,EAAQ4E,EAAYjtB,KAAKT,OAKpD,KAHA,GAAIE,GAAIwtB,EACJ4I,EAAM,EACNtlB,EAAMvQ,KAAKqoB,IAAW5oB,GACnBA,EAAI,IAAMo2B,GAAO,MACtBtlB,GAAOvQ,KAAKqoB,IAAW5oB,GAAKo2B,CAM9B,OAJAA,IAAO,IAEHtlB,GAAOslB,IAAKtlB,GAAO3Q,KAAKw2B,IAAI,EAAG,EAAInJ,IAEhC1c,GAGT4c,OAAO1sB,UAAU61B,SAAW,SAAmBjO,EAAQ6K,GAErD,MADKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QACtB,IAAfS,KAAKqoB,IAC0B,GAA5B,IAAOroB,KAAKqoB,GAAU,GADKroB,KAAKqoB,IAI3C8E,OAAO1sB,UAAU81B,YAAc,SAAsBlO,EAAQ6K,GACtDA,GAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,OAC3C,IAAIgR,GAAMvQ,KAAKqoB,GAAWroB,KAAKqoB,EAAS,IAAM,CAC9C,OAAc,OAAN9X,EAAsB,WAANA,EAAmBA,GAG7C4c,OAAO1sB,UAAU+1B,YAAc,SAAsBnO,EAAQ6K,GACtDA,GAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,OAC3C,IAAIgR,GAAMvQ,KAAKqoB,EAAS,GAAMroB,KAAKqoB,IAAW,CAC9C,OAAc,OAAN9X,EAAsB,WAANA,EAAmBA,GAG7C4c,OAAO1sB,UAAUg2B,YAAc,SAAsBpO,EAAQ6K,GAG3D,MAFKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QAEnCS,KAAKqoB,GACVroB,KAAKqoB,EAAS,IAAM,EACpBroB,KAAKqoB,EAAS,IAAM,GACpBroB,KAAKqoB,EAAS,IAAM,IAGzB8E,OAAO1sB,UAAUi2B,YAAc,SAAsBrO,EAAQ6K,GAG3D,MAFKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QAEnCS,KAAKqoB,IAAW,GACrBroB,KAAKqoB,EAAS,IAAM,GACpBroB,KAAKqoB,EAAS,IAAM,EACpBroB,KAAKqoB,EAAS,IAGnB8E,OAAO1sB,UAAUk2B,YAAc,SAAsBtO,EAAQ6K,GAE3D,MADKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QACpC4zB,QAAQnD,KAAKhwB,KAAMqoB,GAAQ,EAAM,GAAI,IAG9C8E,OAAO1sB,UAAUm2B,YAAc,SAAsBvO,EAAQ6K,GAE3D,MADKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QACpC4zB,QAAQnD,KAAKhwB,KAAMqoB,GAAQ,EAAO,GAAI,IAG/C8E,OAAO1sB,UAAUo2B,aAAe,SAAuBxO,EAAQ6K,GAE7D,MADKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QACpC4zB,QAAQnD,KAAKhwB,KAAMqoB,GAAQ,EAAM,GAAI,IAG9C8E,OAAO1sB,UAAUq2B,aAAe,SAAuBzO,EAAQ6K,GAE7D,MADKA,IAAUR,YAAYrK,EAAQ,EAAGroB,KAAKT,QACpC4zB,QAAQnD,KAAKhwB,KAAMqoB,GAAQ,EAAO,GAAI,IAS/C8E,OAAO1sB,UAAUs2B,YAAc,SAAsB78B,EAAOmuB,EAAQ4E,EAAYiG,GAI9E,GAHAh5B,GAASA,EACTmuB,GAAkB,EAClB4E,GAA0B,GACrBiG,EAAU,CAEbN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ4E,EADfrtB,KAAKw2B,IAAI,EAAG,EAAInJ,GAAc,EACO,GAGtD,GAAI4I,GAAM,EACNp2B,EAAI,CAER,KADAO,KAAKqoB,GAAkB,IAARnuB,IACNuF,EAAIwtB,IAAe4I,GAAO,MACjC71B,KAAKqoB,EAAS5oB,GAAMvF,EAAQ27B,EAAO,GAGrC,OAAOxN,GAAS4E,GAGlBE,OAAO1sB,UAAUu2B,YAAc,SAAsB98B,EAAOmuB,EAAQ4E,EAAYiG,GAI9E,GAHAh5B,GAASA,EACTmuB,GAAkB,EAClB4E,GAA0B,GACrBiG,EAAU,CAEbN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ4E,EADfrtB,KAAKw2B,IAAI,EAAG,EAAInJ,GAAc,EACO,GAGtD,GAAIxtB,GAAIwtB,EAAa,EACjB4I,EAAM,CAEV,KADA71B,KAAKqoB,EAAS5oB,GAAa,IAARvF,IACVuF,GAAK,IAAMo2B,GAAO,MACzB71B,KAAKqoB,EAAS5oB,GAAMvF,EAAQ27B,EAAO,GAGrC,OAAOxN,GAAS4E,GAGlBE,OAAO1sB,UAAUw2B,WAAa,SAAqB/8B,EAAOmuB,EAAQ6K,GAMhE,MALAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,IAAM,GACjD8E,OAAOC,sBAAqBlzB,EAAQ0F,KAAKC,MAAM3F,IACpD8F,KAAKqoB,GAAmB,IAARnuB,EACTmuB,EAAS,GAWlB8E,OAAO1sB,UAAUy2B,cAAgB,SAAwBh9B,EAAOmuB,EAAQ6K,GAUtE,MATAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,MAAQ,GACpD8E,OAAOC,qBACTptB,KAAKqoB,GAAmB,IAARnuB,EAChB8F,KAAKqoB,EAAS,GAAMnuB,IAAU,GAE9B24B,kBAAkB7yB,KAAM9F,EAAOmuB,GAAQ,GAElCA,EAAS,GAGlB8E,OAAO1sB,UAAU02B,cAAgB,SAAwBj9B,EAAOmuB,EAAQ6K,GAUtE,MATAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,MAAQ,GACpD8E,OAAOC,qBACTptB,KAAKqoB,GAAWnuB,IAAU,EAC1B8F,KAAKqoB,EAAS,GAAc,IAARnuB,GAEpB24B,kBAAkB7yB,KAAM9F,EAAOmuB,GAAQ,GAElCA,EAAS,GAUlB8E,OAAO1sB,UAAU22B,cAAgB,SAAwBl9B,EAAOmuB,EAAQ6K,GAYtE,MAXAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,WAAY,GACxD8E,OAAOC,qBACTptB,KAAKqoB,EAAS,GAAMnuB,IAAU,GAC9B8F,KAAKqoB,EAAS,GAAMnuB,IAAU,GAC9B8F,KAAKqoB,EAAS,GAAMnuB,IAAU,EAC9B8F,KAAKqoB,GAAmB,IAARnuB,GAEhB64B,kBAAkB/yB,KAAM9F,EAAOmuB,GAAQ,GAElCA,EAAS,GAGlB8E,OAAO1sB,UAAU42B,cAAgB,SAAwBn9B,EAAOmuB,EAAQ6K,GAYtE,MAXAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,WAAY,GACxD8E,OAAOC,qBACTptB,KAAKqoB,GAAWnuB,IAAU,GAC1B8F,KAAKqoB,EAAS,GAAMnuB,IAAU,GAC9B8F,KAAKqoB,EAAS,GAAMnuB,IAAU,EAC9B8F,KAAKqoB,EAAS,GAAc,IAARnuB,GAEpB64B,kBAAkB/yB,KAAM9F,EAAOmuB,GAAQ,GAElCA,EAAS,GAGlB8E,OAAO1sB,UAAU62B,WAAa,SAAqBp9B,EAAOmuB,EAAQ4E,EAAYiG,GAG5E,GAFAh5B,GAASA,EACTmuB,GAAkB,GACb6K,EAAU,CACb,GAAIqE,GAAQ33B,KAAKw2B,IAAI,EAAG,EAAInJ,EAAa,EAEzC2F,UAAS5yB,KAAM9F,EAAOmuB,EAAQ4E,EAAYsK,EAAQ,GAAIA,GAGxD,GAAI93B,GAAI,EACJo2B,EAAM,EACN2B,EAAM,CAEV,KADAx3B,KAAKqoB,GAAkB,IAARnuB,IACNuF,EAAIwtB,IAAe4I,GAAO,MAC7B37B,EAAQ,GAAa,IAARs9B,GAAsC,IAAzBx3B,KAAKqoB,EAAS5oB,EAAI,KAC9C+3B,EAAM,GAERx3B,KAAKqoB,EAAS5oB,IAAOvF,EAAQ27B,GAAQ,GAAK2B,EAAM,GAGlD,OAAOnP,GAAS4E,GAGlBE,OAAO1sB,UAAUg3B,WAAa,SAAqBv9B,EAAOmuB,EAAQ4E,EAAYiG,GAG5E,GAFAh5B,GAASA,EACTmuB,GAAkB,GACb6K,EAAU,CACb,GAAIqE,GAAQ33B,KAAKw2B,IAAI,EAAG,EAAInJ,EAAa,EAEzC2F,UAAS5yB,KAAM9F,EAAOmuB,EAAQ4E,EAAYsK,EAAQ,GAAIA,GAGxD,GAAI93B,GAAIwtB,EAAa,EACjB4I,EAAM,EACN2B,EAAM,CAEV,KADAx3B,KAAKqoB,EAAS5oB,GAAa,IAARvF,IACVuF,GAAK,IAAMo2B,GAAO,MACrB37B,EAAQ,GAAa,IAARs9B,GAAsC,IAAzBx3B,KAAKqoB,EAAS5oB,EAAI,KAC9C+3B,EAAM,GAERx3B,KAAKqoB,EAAS5oB,IAAOvF,EAAQ27B,GAAQ,GAAK2B,EAAM,GAGlD,OAAOnP,GAAS4E,GAGlBE,OAAO1sB,UAAUi3B,UAAY,SAAoBx9B,EAAOmuB,EAAQ6K,GAO9D,MANAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,KAAO,KAClD8E,OAAOC,sBAAqBlzB,EAAQ0F,KAAKC,MAAM3F,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtC8F,KAAKqoB,GAAmB,IAARnuB,EACTmuB,EAAS,GAGlB8E,OAAO1sB,UAAUk3B,aAAe,SAAuBz9B,EAAOmuB,EAAQ6K,GAUpE,MATAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,OAAS,OACrD8E,OAAOC,qBACTptB,KAAKqoB,GAAmB,IAARnuB,EAChB8F,KAAKqoB,EAAS,GAAMnuB,IAAU,GAE9B24B,kBAAkB7yB,KAAM9F,EAAOmuB,GAAQ,GAElCA,EAAS,GAGlB8E,OAAO1sB,UAAUm3B,aAAe,SAAuB19B,EAAOmuB,EAAQ6K,GAUpE,MATAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,OAAS,OACrD8E,OAAOC,qBACTptB,KAAKqoB,GAAWnuB,IAAU,EAC1B8F,KAAKqoB,EAAS,GAAc,IAARnuB,GAEpB24B,kBAAkB7yB,KAAM9F,EAAOmuB,GAAQ,GAElCA,EAAS,GAGlB8E,OAAO1sB,UAAUo3B,aAAe,SAAuB39B,EAAOmuB,EAAQ6K,GAYpE,MAXAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,YAAa,YACzD8E,OAAOC,qBACTptB,KAAKqoB,GAAmB,IAARnuB,EAChB8F,KAAKqoB,EAAS,GAAMnuB,IAAU,EAC9B8F,KAAKqoB,EAAS,GAAMnuB,IAAU,GAC9B8F,KAAKqoB,EAAS,GAAMnuB,IAAU,IAE9B64B,kBAAkB/yB,KAAM9F,EAAOmuB,GAAQ,GAElCA,EAAS,GAGlB8E,OAAO1sB,UAAUq3B,aAAe,SAAuB59B,EAAOmuB,EAAQ6K,GAapE,MAZAh5B,IAASA,EACTmuB,GAAkB,EACb6K,GAAUN,SAAS5yB,KAAM9F,EAAOmuB,EAAQ,EAAG,YAAa,YACzDnuB,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxCizB,OAAOC,qBACTptB,KAAKqoB,GAAWnuB,IAAU,GAC1B8F,KAAKqoB,EAAS,GAAMnuB,IAAU,GAC9B8F,KAAKqoB,EAAS,GAAMnuB,IAAU,EAC9B8F,KAAKqoB,EAAS,GAAc,IAARnuB,GAEpB64B,kBAAkB/yB,KAAM9F,EAAOmuB,GAAQ,GAElCA,EAAS,GAgBlB8E,OAAO1sB,UAAUs3B,aAAe,SAAuB79B,EAAOmuB,EAAQ6K,GACpE,MAAOD,YAAWjzB,KAAM9F,EAAOmuB,GAAQ,EAAM6K,IAG/C/F,OAAO1sB,UAAUu3B,aAAe,SAAuB99B,EAAOmuB,EAAQ6K,GACpE,MAAOD,YAAWjzB,KAAM9F,EAAOmuB,GAAQ,EAAO6K,IAWhD/F,OAAO1sB,UAAUw3B,cAAgB,SAAwB/9B,EAAOmuB,EAAQ6K,GACtE,MAAOE,aAAYpzB,KAAM9F,EAAOmuB,GAAQ,EAAM6K,IAGhD/F,OAAO1sB,UAAUy3B,cAAgB,SAAwBh+B,EAAOmuB,EAAQ6K,GACtE,MAAOE,aAAYpzB,KAAM9F,EAAOmuB,GAAQ,EAAO6K,IAIjD/F,OAAO1sB,UAAUkuB,KAAO,SAAelnB,EAAQ0wB,EAAazgB,EAAO2X,GAQjE,GAPK3X,IAAOA,EAAQ,GACf2X,GAAe,IAARA,IAAWA,EAAMrvB,KAAKT,QAC9B44B,GAAe1wB,EAAOlI,SAAQ44B,EAAc1wB,EAAOlI,QAClD44B,IAAaA,EAAc,GAC5B9I,EAAM,GAAKA,EAAM3X,IAAO2X,EAAM3X,GAG9B2X,IAAQ3X,EAAO,MAAO,EAC1B,IAAsB,IAAlBjQ,EAAOlI,QAAgC,IAAhBS,KAAKT,OAAc,MAAO,EAGrD,IAAI44B,EAAc,EAChB,KAAM,IAAI5K,YAAW,4BAEvB,IAAI7V,EAAQ,GAAKA,GAAS1X,KAAKT,OAAQ,KAAM,IAAIguB,YAAW,4BAC5D,IAAI8B,EAAM,EAAG,KAAM,IAAI9B,YAAW,0BAG9B8B,GAAMrvB,KAAKT,SAAQ8vB,EAAMrvB,KAAKT,QAC9BkI,EAAOlI,OAAS44B,EAAc9I,EAAM3X,IACtC2X,EAAM5nB,EAAOlI,OAAS44B,EAAczgB,EAGtC,IACIjY,GADA8W,EAAM8Y,EAAM3X,CAGhB,IAAI1X,OAASyH,GAAUiQ,EAAQygB,GAAeA,EAAc9I,EAE1D,IAAK5vB,EAAI8W,EAAM,EAAG9W,GAAK,IAAKA,EAC1BgI,EAAOhI,EAAI04B,GAAen4B,KAAKP,EAAIiY,OAEhC,IAAInB,EAAM,MAAS4W,OAAOC,oBAE/B,IAAK3tB,EAAI,EAAGA,EAAI8W,IAAO9W,EACrBgI,EAAOhI,EAAI04B,GAAen4B,KAAKP,EAAIiY,OAGrCoV,YAAWrsB,UAAUiD,IAAIP,KACvBsE,EACAzH,KAAKgtB,SAAStV,EAAOA,EAAQnB,GAC7B4hB,EAIJ,OAAO5hB,IAOT4W,OAAO1sB,UAAUytB,KAAO,SAAe3d,EAAKmH,EAAO2X,EAAKlB,GAEtD,GAAmB,gBAAR5d,GAAkB,CAS3B,GARqB,gBAAVmH,IACTyW,EAAWzW,EACXA,EAAQ,EACR2X,EAAMrvB,KAAKT,QACa,gBAAR8vB,KAChBlB,EAAWkB,EACXA,EAAMrvB,KAAKT,QAEM,IAAfgR,EAAIhR,OAAc,CACpB,GAAIwqB,GAAOxZ,EAAIsjB,WAAW,EACtB9J,GAAO,MACTxZ,EAAMwZ,GAGV,OAAiB5qB,KAAbgvB,GAA8C,gBAAbA,GACnC,KAAM,IAAIR,WAAU,4BAEtB,IAAwB,gBAAbQ,KAA0BhB,OAAOmB,WAAWH,GACrD,KAAM,IAAIR,WAAU,qBAAuBQ,OAErB,gBAAR5d,KAChBA,GAAY,IAId,IAAImH,EAAQ,GAAK1X,KAAKT,OAASmY,GAAS1X,KAAKT,OAAS8vB,EACpD,KAAM,IAAI9B,YAAW,qBAGvB,IAAI8B,GAAO3X,EACT,MAAO1X,KAGT0X,MAAkB,EAClB2X,MAAclwB,KAARkwB,EAAoBrvB,KAAKT,OAAS8vB,IAAQ,EAE3C9e,IAAKA,EAAM,EAEhB,IAAI9Q,EACJ,IAAmB,gBAAR8Q,GACT,IAAK9Q,EAAIiY,EAAOjY,EAAI4vB,IAAO5vB,EACzBO,KAAKP,GAAK8Q,MAEP,CACL,GAAIkiB,GAAQtF,OAAOuB,SAASne,GACxBA,EACA0e,YAAY,GAAI9B,QAAO5c,EAAK4d,GAAUtgB,YACtC0I,EAAMkc,EAAMlzB,MAChB,KAAKE,EAAI,EAAGA,EAAI4vB,EAAM3X,IAASjY,EAC7BO,KAAKP,EAAIiY,GAAS+a,EAAMhzB,EAAI8W,GAIhC,MAAOvW,MAMT,IAAIwzB,mBAAoB,qB;;;;;;;AC7mDK,kBAAlBz5B,QAAO2G,OAEhBwX,OAAOje,QAAU,SAAkBm+B,EAAMC,GACvCD,EAAKE,OAASD,EACdD,EAAK33B,UAAY1G,OAAO2G,OAAO23B,EAAU53B,WACvCrB,aACElF,MAAOk+B,EACPh3B,YAAY,EACZkC,UAAU,EACVjC,cAAc,MAMpB6W,OAAOje,QAAU,SAAkBm+B,EAAMC,GACvCD,EAAKE,OAASD,CACd,IAAIE,GAAW,YACfA,GAAS93B,UAAY43B,EAAU53B,UAC/B23B,EAAK33B,UAAY,GAAI83B,GACrBH,EAAK33B,UAAUrB,YAAcg5B,G;;;;;;;ACwCjC,QAASI,QAAOnc,GACd,KAAMrc,eAAgBw4B,SAAS,MAAO,IAAIA,QAAOnc,EAEjDoc,UAASt1B,KAAKnD,KAAMqc,GACpBqc,SAASv1B,KAAKnD,KAAMqc,GAEhBA,IAAgC,IAArBA,EAAQsc,WAAoB34B,KAAK24B,UAAW,GAEvDtc,IAAgC,IAArBA,EAAQ/Y,WAAoBtD,KAAKsD,UAAW,GAE3DtD,KAAK44B,eAAgB,EACjBvc,IAAqC,IAA1BA,EAAQuc,gBAAyB54B,KAAK44B,eAAgB,GAErE54B,KAAKuiB,KAAK,MAAOsW,OAInB,QAASA,SAGH74B,KAAK44B,eAAiB54B,KAAK84B,eAAeC,OAI9CC,gBAAgBC,QAASj5B,MAG3B,QAASi5B,SAAQC,GACfA,EAAK7J,MA+BP,QAAS9sB,SAAQ42B,EAAIC,GACnB,IAAK,GAAI35B,GAAI,EAAG45B,EAAIF,EAAG55B,OAAQE,EAAI45B,EAAG55B,IACpC25B,EAAED,EAAG15B,GAAIA,GA3Fb,GAAIu5B,iBAAkB,mBAAA5+B,CAAQ,IAI1Bk/B,WAAav/B,OAAOw/B,MAAQ,SAAU5qB,GACxC,GAAI4qB,KACJ,KAAK,GAAI7xB,KAAOiH,GACd4qB,EAAKt3B,KAAKyF,EACX,OAAO6xB,GAIVrhB,QAAOje,QAAUu+B,MAGjB,IAAIgB,MAAO,mBAAAp/B,CAAQ,GACnBo/B,MAAKC,SAAW,mBAAAr/B,CAAQ,GAGxB,IAAIq+B,UAAW,mBAAAr+B,CAAQ,KACnBs+B,SAAW,mBAAAt+B,CAAQ,IAEvBo/B,MAAKC,SAASjB,OAAQC,SAGtB,KAAK,GADDc,MAAOD,WAAWZ,SAASj4B,WACtByH,EAAI,EAAGA,EAAIqxB,KAAKh6B,OAAQ2I,IAAK,CACpC,GAAIwxB,QAASH,KAAKrxB,EACbswB,QAAO/3B,UAAUi5B,UAASlB,OAAO/3B,UAAUi5B,QAAUhB,SAASj4B,UAAUi5B,SAkC/E3/B,OAAOC,eAAew+B,OAAO/3B,UAAW,aACtCK,IAAK,WACH,WAA4B3B,KAAxBa,KAAK25B,oBAAwDx6B,KAAxBa,KAAK84B,iBAGvC94B,KAAK25B,eAAeC,WAAa55B,KAAK84B,eAAec,YAE9Dl2B,IAAK,SAAUxJ,OAGeiF,KAAxBa,KAAK25B,oBAAwDx6B,KAAxBa,KAAK84B,iBAM9C94B,KAAK25B,eAAeC,UAAY1/B,EAChC8F,KAAK84B,eAAec,UAAY1/B,MAIpCs+B,OAAO/3B,UAAUo5B,SAAW,SAAUC,EAAKC,GACzC/5B,KAAKiC,KAAK,MACVjC,KAAKqvB,MAEL2J,gBAAgBe,EAAID,I;;;;;;;AC7GtB,GAAI/5B,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBuG,WAAa,mBAAAvG,CAAQ,GACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnByhB,UAAY,mBAAAzhB,CAAQ,GAMpB4/B,wBAAyC,WACzC,QAASA,GAAwB1mB,GAC7BtT,KAAKsT,iBAAmBA,EAsC5B,MApCA0mB,GAAwBv5B,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAI1D,MAHIA,aAAmByL,UAAS1J,aAAeL,WAAW2D,iBAAiBrF,EAAQmE,gBAC/EpD,KAAKi6B,cAAgBh7B,EAASsQ,IAE3BA,GAEXyqB,EAAwBv5B,UAAUiV,WAAa,WAC3C,OAA0BvW,KAAtBa,KAAKi6B,aAA4B,CACjC,GAAIrlB,GAAa5U,KAAKi6B,aAAa,GAAGC,IAClC1T,EAAYxmB,KAAKi6B,aAAa,GAAG72B,YACrC,QAAmBjE,KAAfyV,EAA0B,CAC1B,GAAI5I,GAAYhM,KAAKm6B,gBAAgBvlB,EAC/BjU,YAAW4F,aAAayF,EAAUnJ,EAAG2jB,EAAU3jB,IAC9ClC,WAAW4F,aAAayF,EAAUlJ,EAAG0jB,EAAU1jB,IAC/CnC,WAAW4F,aAAayF,EAAUjJ,MAAOyjB,EAAUzjB,QACnDpC,WAAW4F,aAAayF,EAAUhJ,OAAQwjB,EAAUzjB,QACvD/C,KAAKsT,iBAAiBmB,SAAS,GAAI2lB,8BAA6BpuB,IAExEhM,KAAKi6B,iBAAe96B,KAG5B66B,EAAwBv5B,UAAU05B,gBAAkB,SAAUl7B,GAC1D,GAAI0M,GAAS1M,EAAQo7B,wBACjB/a,EAA2B,mBAAXkB,SAA2B3d,EAAG2d,OAAO8Z,QAASx3B,EAAG0d,OAAO+Z,SAAY55B,WAAW6F,YACnG,QACI3D,EAAG8I,EAAO6uB,KAAOlb,EAAOzc,EACxBC,EAAG6I,EAAO8uB,IAAMnb,EAAOxc,EACvBC,MAAO4I,EAAO5I,MACdC,OAAQ2I,EAAO3I,SAGvBg3B,EAA0BzyB,YACtBgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5CwL,WAAW,qBAAsBjO,UAClCigC,KAGP//B,SAAQ+/B,wBAA0BA,uBAClC,IAAII,8BAA8C,WAC9C,QAASA,GAA6BM,GAClC16B,KAAK06B,gBAAkBA,EACvB16B,KAAK4a,KAAOoL,8BAA8B/J,KAE9C,MAAOme,KAEXngC,SAAQmgC,6BAA+BA,4BACvC,IAAIpU,+BAA+C,SAAUrkB,GAEzD,QAASqkB,GAA8Bxc,GACnC,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADA4B,GAAM4H,OAASA,EACR5H,EAcX,MAlBA7B,WAAUimB,EAA+BrkB,GAMzCqkB,EAA8BvlB,UAAU2e,QAAU,SAAUvW,GAGxD,MAFA7I,MAAK06B,gBAAkB16B,KAAKwJ,OAAOkxB,gBACnC7xB,EAAQvH,KAAK8B,aAAepD,KAAK06B,gBAC1B7xB,EAAQvH,MAEnB0kB,EAA8BvlB,UAAUsI,KAAO,SAAUF,GACrD,MAAOA,GAAQvH,MAEnB0kB,EAA8BvlB,UAAUyI,KAAO,SAAUL,GACrD,MAAOA,GAAQvH,MAEnB0kB,EAA8B/J,KAAO,yBAC9B+J,GACTnK,UAAUzS,cACZnP,SAAQ+rB,8BAAgCA,8B;;;;;;;AChFxC,QAAS2U,qBAAoB/f,EAAMggB,EAAUr5B,GACzC,GAAIgI,GAAS,GAAI6R,SAAQT,cAIzB,OAHApR,GAAOU,KAAgB,aAAT2Q,EAAsB,gBAAkB,yBACtDrR,EAAOqR,KAAOA,EACdrR,EAAOkR,WAAalZ,EACbgI,EAGX,QAASsxB,sBAAqBC,GAC1B,GAAIC,GAAUD,EAAW3gB,cAAc5a,OACnCy7B,EAAWF,EAAWt7B,EAC1Bs7B,GAAW/4B,IAAI44B,oBAAoB,OAAQK,GAAW,GACtD,KAAK,GAAIv7B,GAAI,EAAGA,EAAIs7B,EAASt7B,IACzBq7B,EAAW/4B,IAAI44B,oBAAoB,WAAYK,EAAUv7B,IACzDq7B,EAAW/4B,IAAI44B,oBAAoB,OAAQK,EAAUv7B,IAvC7D,GAAIM,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,GAE1GnO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBghB,QAAU,mBAAAhhB,CAAQ,IAClByhB,UAAY,mBAAAzhB,CAAQ,GACpBsQ,SAAW,mBAAAtQ,CAAQ,GACnB2kB,YAAc,mBAAA3kB,CAAQ,GAQ1BH,SAAQ0gC,oBAAsBA,oBAU9B1gC,QAAQ4gC,qBAAuBA,oBAC/B,IAAII,sBAAsC,WACtC,QAASA,GAAqBC,EAAoBC,OACnB,KAAvBD,IAAiCA,UACR,KAAzBC,IAAmCA,MACvCn7B,KAAKk7B,mBAAqBA,EAC1Bl7B,KAAKm7B,qBAAuBA,EAC5Bn7B,KAAK4a,KAAOwgB,sBAAsBnf,KAEtC,MAAOgf,KAEXhhC,SAAQghC,qBAAuBA,oBAC/B,IAAIG,uBAAuC,SAAUz5B,GAEjD,QAASy5B,GAAsB5xB,GAC3B,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAKjC,OAJA4B,GAAM4H,OAASA,EACf5H,EAAMs5B,sBACNt5B,EAAMu5B,wBACNv5B,EAAMy5B,mBACCz5B,EA6EX,MApFA7B,WAAUq7B,EAAuBz5B,GASjCy5B,EAAsB36B,UAAU2e,QAAU,SAAUvW,GAChD,GAAIjH,GAAQ5B,KACRuB,EAAQsH,EAAQvH,KAAKC,KAmBzB,OAlBAvB,MAAKwJ,OAAO0xB,mBAAmB34B,QAAQ,SAAU/C,GAC7C,GAAIP,GAAUsC,EAAMwC,QAAQvE,OACZL,KAAZF,GACA2C,EAAMs5B,mBAAmBj5B,KAAKhD,KAEtCe,KAAKwJ,OAAO2xB,qBAAqB54B,QAAQ,SAAU/C,GAC/C,GAAIP,GAAUsC,EAAMwC,QAAQvE,EAG5B,QAFgBL,KAAZF,GACA2C,EAAMu5B,qBAAqBl5B,KAAKhD,GAChCA,YAAmBmc,SAAQT,gBAAkBS,QAAQlB,WAAWjb,EAAQiC,QAAS,CACjF,GAAI0K,GAAW3M,EAAQiC,MACnBU,GAAM05B,mBAAmBr8B,EAAS2M,KAClChK,EAAMy5B,gBAAgBp5B,MAAOsH,OAAQtK,EAASiC,OAAQ0K,IACtDhK,EAAMu5B,qBAAqBl5B,KAAK2J,GAChChK,EAAMs5B,mBAAmBj5B,KAAK2J,OAInC5L,KAAKu7B,UAAU1yB,IAE1BuyB,EAAsB36B,UAAU86B,UAAY,SAAU1yB,GAgBlD,MAfA7I,MAAKq7B,gBAAgB94B,QAAQ,SAAUi5B,GACnCA,EAAM74B,MAAQ64B,EAAMt6B,OAAOiZ,cAAcjY,OAAOs5B,EAAMjyB,OAAOkR,WAAY,GAAG,KAEhFza,KAAKm7B,qBAAqB54B,QAAQ,SAAUtD,GACpCmc,QAAQlB,WAAWjb,IAAYA,YAAmByL,UAAShJ,eAC3DzC,EAAQoD,UAAU,SAAUL,GAAS,MAAOA,aAAiBoZ,SAAQT,iBAChE1b,YAAmBmc,SAAQT,iBAChC1b,EAAQ4b,UAAW,KAE3B7a,KAAKk7B,mBAAmB34B,QAAQ,SAAUtD,GAClCmc,QAAQhB,eAAenb,IAAYA,YAAmByL,UAAShJ,eAC/Dm5B,qBAAqB57B,GAChBA,YAAmBmc,SAAQT,iBAChC1b,EAAQ4b,UAAW,KAEpBhS,EAAQvH,MAEnB85B,EAAsB36B,UAAU66B,mBAAqB,SAAU/xB,EAAQrI,GACnE,GAAoB,aAAhBqI,EAAOqR,KAAqB,CAE5B,WAAqFzb,KADzE+B,EAAOqZ,QACNG,KAAK,SAAU+gB,GAAM,MAAOA,GAAGhhB,aAAelR,EAAOkR,aAEtE,OAAO,GAEX2gB,EAAsB36B,UAAUsI,KAAO,SAAUF,GAiB7C,MAhBA7I,MAAKq7B,gBAAgB94B,QAAQ,SAAUi5B,OACfr8B,KAAhBq8B,EAAM74B,OACN64B,EAAMt6B,OAAOiZ,cAAcjY,OAAOs5B,EAAMjyB,OAAOkR,WAAY,EAAG+gB,EAAM74B,SAE5E3C,KAAKk7B,mBAAmB34B,QAAQ,SAAUtD,GAClCmc,QAAQlB,WAAWjb,IAAYA,YAAmByL,UAAShJ,eAC3DzC,EAAQoD,UAAU,SAAUL,GAAS,MAAOA,aAAiBoZ,SAAQT,iBAChE1b,YAAmBmc,SAAQT,iBAChC1b,EAAQ4b,UAAW,KAE3B7a,KAAKm7B,qBAAqB54B,QAAQ,SAAUtD,GACpCmc,QAAQhB,eAAenb,IAAYA,YAAmByL,UAAShJ,eAC/Dm5B,qBAAqB57B,GAChBA,YAAmBmc,SAAQT,iBAChC1b,EAAQ4b,UAAW,KAEpBhS,EAAQvH,MAEnB85B,EAAsB36B,UAAUyI,KAAO,SAAUL,GAC7C,MAAO7I,MAAKu7B,UAAU1yB,IAE1BuyB,EAAsBnf,KAAO,iBAC7Bmf,EAAwB7zB,YACpBgB,YAAY9N,aACZuN,WAAW,qBAAsBizB,wBAClCG,IAELvf,UAAUpT,QACZxO,SAAQmhC,sBAAwBA,qBAChC,IAAIM,yBAAyC,WACzC,QAASA,GAAwBC,EAAOzc,OACpB,KAAZA,IAAsBA,GAAU,GACpClf,KAAK27B,MAAQA,EACb37B,KAAKkf,QAAUA,EACflf,KAAK4a,KAAOghB,yBAAyB3f,KAEzC,MAAOyf,KAEXzhC,SAAQyhC,wBAA0BA,uBAClC,IAAIE,0BAA0C,SAAUj6B,GAEpD,QAASi6B,GAAyBpyB,GAC9B,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAIjC,OAHA4B,GAAM4H,OAASA,EACf5H,EAAMi6B,cAAgB,GAAIr4B,KAC1B5B,EAAMk6B,sBAAwB,GAAIt4B,KAC3B5B,EA4FX,MAlGA7B,WAAU67B,EAA0Bj6B,GAQpCi6B,EAAyBn7B,UAAU2e,QAAU,SAAUvW,GACnD,GAAIjH,GAAQ5B,KACR4T,EAAQ/K,EAAQvH,IAUpB,OATAtB,MAAKwJ,OAAOmyB,MAAMp5B,QAAQ,SAAUC,GAChC,GAAIu5B,GAAen6B,EAAM8W,QAAQlW,EAAMoR,EAAMrS,MAC7C,QAAqBpC,KAAjB48B,EAA4B,CAC5Bn6B,EAAMi6B,cAAcn4B,IAAIq4B,EAAazxB,UAAWyxB,EAChD,IAAIC,GAAWD,EAAa76B,MACxBka,SAAQlB,WAAW8hB,IACnBp6B,EAAMk6B,sBAAsBp4B,IAAIs4B,EAASx8B,GAAIw8B,EAAS7hB,cAAczD,YAG5E1W,KAAKwJ,OAAO0V,QACL,GAAI+c,sBAAqBroB,EAAO5T,KAAK67B,cAAe77B,KAAK87B,sBAAuBjzB,GAAS6O,QAGzF1X,KAAKk8B,OAAOrzB,IAG3B+yB,EAAyBn7B,UAAUiY,QAAU,SAAUlW,EAAMjB,GACzD,GAAItC,GAAUsC,EAAMwC,QAAQvB,EAAK8H,UACjC,IAAIrL,YAAmBmc,SAAQT,eAC3B,OACIrQ,UAAW9H,EAAK8H,UAChBrL,QAASA,EACTiC,OAAQjC,EAAQiC,OAChBi7B,aAAc35B,EAAK25B,aACnBC,WAAY55B,EAAK45B,aAK7BR,EAAyBn7B,UAAUy7B,OAAS,SAAUrzB,GAyBlD,MAxBA7I,MAAK67B,cAAct5B,QAAQ,SAAU8U,GACjC,GAAI9N,GAAS8N,EAAIpY,QACbiC,EAASmW,EAAInW,MACjB,IAAIka,QAAQlB,WAAWhZ,GAAS,CAC5B,GAAIm7B,GAASn7B,EAAOiZ,cAChBmiB,EAAU/yB,EAAOkR,UACD,UAAhBlR,EAAOqR,OAEPrR,EAAOqR,KAAO,WACdrR,EAAOU,KAAO,gBACdoyB,EAAOn6B,OAAOo6B,EAAU,EAAG,EAAGjlB,EAAI8kB,cAAgBE,EAAOz8B,KAAKiF,IAAIy3B,EAAS,KAC3Ep7B,EAAOhC,SAASqD,QAAQ,SAAUP,GAC1BA,YAAiBoZ,SAAQT,iBAAmB3Y,IAAUuH,GAAUvH,EAAMyY,WAAa6hB,IACnFt6B,EAAMyY,eAEdvZ,EAAOa,IAAI44B,oBAAoB,OAAQz5B,EAAO1B,GAAI88B,IAClDp7B,EAAOa,IAAI44B,oBAAoB,OAAQz5B,EAAO1B,GAAI88B,EAAU,IAC5DA,KAEAA,GAAW,GAAKA,EAAUD,EAAO98B,SACjC88B,EAAOC,GAAWjlB,EAAI+kB,eAI3BvzB,EAAQvH,MAEnBs6B,EAAyBn7B,UAAUsI,KAAO,SAAUF,GAChD,GAAIjH,GAAQ5B,IACZ,OAAIA,MAAKwJ,OAAO0V,QACL,GAAI+c,sBAAqBpzB,EAAQvH,KAAMtB,KAAK67B,cAAe77B,KAAK87B,sBAAuBjzB,GAAS,GAAM6O,SAG7G1X,KAAK67B,cAAct5B,QAAQ,SAAU8U,GACjC,GAAInW,GAASmW,EAAInW,OACbm7B,EAASz6B,EAAMk6B,sBAAsBh7B,IAAII,EAAO1B,QACrCL,KAAXk9B,GAAwBjhB,QAAQlB,WAAWhZ,KAC3CA,EAAOiZ,cAAgBkiB,EACvBn7B,EAAOmB,UAAU,SAAU6C,GAAK,MAAOA,aAAakW,SAAQT,iBAC5DkgB,qBAAqB35B,MAGtB2H,EAAQvH,OAGvBs6B,EAAyBn7B,UAAUyI,KAAO,SAAUL,GAChD,MAAI7I,MAAKwJ,OAAO0V,QACL,GAAI+c,sBAAqBpzB,EAAQvH,KAAMtB,KAAK67B,cAAe77B,KAAK87B,sBAAuBjzB,GAAS,GAAO6O,QAGvG1X,KAAKk8B,OAAOrzB,IAG3B+yB,EAAyB3f,KAAO,aAChC2f,EAA2Br0B,YACvBgB,YAAY9N,aACZuN,WAAW,qBAAsB0zB,2BAClCE,IAEL/f,UAAUpT,QACZxO,SAAQ2hC,yBAA2BA,wBACnC,IAAIK,sBAAsC,SAAUt6B,GAEhD,QAASs6B,GAAqBroB,EAAO2oB,EAAaT,EAAuBjzB,EAAS2zB,OAC9D,KAAZA,IAAsBA,GAAU,EACpC,IAAI56B,GAAQD,EAAOwB,KAAKnD,KAAM6I,IAAY7I,IAK1C,OAJA4B,GAAMgS,MAAQA,EACdhS,EAAM26B,YAAcA,EACpB36B,EAAMk6B,sBAAwBA,EAC9Bl6B,EAAM46B,QAAUA,EACT56B,EAoCX,MA5CA7B,WAAUk8B,EAAsBt6B,GAUhCs6B,EAAqBx7B,UAAUwY,MAAQ,SAAUpI,GAC7C,GAAIjP,GAAQ5B,IA+BZ,OA9BAA,MAAKu8B,YAAYh6B,QAAQ,SAAUk6B,GAC/B,GAAIv7B,GAASu7B,EAAWv7B,MACxB,IAAIka,QAAQlB,WAAWhZ,QAAuC/B,KAA5Bs9B,EAAWN,aAA4B,CACrE,GAAIv6B,EAAM46B,SAAiB,IAAN3rB,EAAS,CAC1B,GAAI6rB,GAAY96B,EAAMk6B,sBAAsBh7B,IAAII,EAAO1B,GACvD,QAAkBL,KAAdu9B,EAIA,MAHAx7B,GAAOiZ,cAAgBuiB,EACvBx7B,EAAOmB,UAAU,SAAU6C,GAAK,MAAOA,aAAakW,SAAQT,qBAC5DkgB,sBAAqB35B,GAI7B,GAAIm7B,GAASn7B,EAAOiZ,cAChB5Y,EAAQk7B,EAAWx9B,QAAQwb,UAC3BlZ,IAAS,GAAKA,EAAQ86B,EAAO98B,SACzBqC,EAAM46B,QACNH,EAAO96B,IACHsB,GAAI,EAAIgO,GAAK4rB,EAAWL,WAAWv5B,EAAIgO,EAAI4rB,EAAWN,aAAat5B,EACnEC,GAAI,EAAI+N,GAAK4rB,EAAWL,WAAWt5B,EAAI+N,EAAI4rB,EAAWN,aAAar5B,GAIvEu5B,EAAO96B,IACHsB,GAAI,EAAIgO,GAAK4rB,EAAWN,aAAat5B,EAAIgO,EAAI4rB,EAAWL,WAAWv5B,EACnEC,GAAI,EAAI+N,GAAK4rB,EAAWN,aAAar5B,EAAI+N,EAAI4rB,EAAWL,WAAWt5B,OAMhF9C,KAAK4T,OAETqoB,GACTld,YAAYzG,UACdre,SAAQgiC,qBAAuBA,qB;;;;;;;AC7S/B,GAAI10B,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwR,gBAAiB,mBAAAtR,CAAQ,GACzBghB,QAAU,mBAAAhhB,CAAQ,IAClBmO,YAAc,mBAAAnO,CAAQ,GAKtBuiC,qBAAsC,WACtC,QAASA,GAAqBC,EAAWC,GACrC78B,KAAK48B,UAAYA,EACjB58B,KAAK68B,YAAcA,EACnB78B,KAAK4a,KAAO+hB,EAAqB1gB,KAGrC,MADA0gB,GAAqB1gB,KAAO,iBACrB0gB,IAEX1iC,SAAQ0iC,qBAAuBA,oBAI/B,IAAIG,yBAAyC,WAIzC,QAASA,GAAwBC,OACd,KAAXA,IAAqBA,GAAS,GAClC/8B,KAAK+8B,OAASA,EACd/8B,KAAK4a,KAAOkiB,EAAwB7gB,KAGxC,MADA6gB,GAAwB7gB,KAAO,oBACxB6gB,IAEX7iC,SAAQ6iC,wBAA0BA,uBAClC,IAAIE,qBAAqC,WACrC,QAASA,MAeT,MAbAA,GAAoBv8B,UAAUw8B,cAAgB,SAAUC,GACpD,GAAIC,GAAazxB,eAAef,oBAAoBuyB,EAAQ9hB,QAAQgiB,aACpE,YAAmBj+B,KAAfg+B,GACQ,GAAIR,sBAAqBQ,EAAWE,aAAiBF,EAAW39B,IAAK29B,EAAWE,UAAYF,EAAW39B,aAMvHw9B,EAAoBM,KAAO,gBAC3BN,EAAsBz1B,YAClBgB,YAAY9N,cACbuiC,KAGP/iC,SAAQ+iC,oBAAsBA,oB;;;;;;;ACxD9B,QAASO,cAAat+B,GAClB,MAAOA,GAAQuC,WAAWvH,QAAQujC,oBAAwCr+B,KAAtBF,EAAgB,OAHxElF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQujC,cAAgB/gC,OAAO,iBAI/BxC,QAAQsjC,aAAeA,a;;;;;;;ACLvB,GAAIx9B,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBuG,WAAa,mBAAAvG,CAAQ,GACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnBqjC,SAAW,mBAAArjC,CAAQ,GACnBsR,eAAiB,mBAAAtR,CAAQ,GACzByhB,UAAY,mBAAAzhB,CAAQ,GACpB2kB,YAAc,mBAAA3kB,CAAQ,IACtBwsB,aAAe,mBAAAxsB,CAAQ,IACvB+Y,cAAgB,mBAAA/Y,CAAQ,IACxBghB,QAAU,mBAAAhhB,CAAQ,IAClBihB,QAAU,mBAAAjhB,CAAQ,IAClBkhB,QAAU,mBAAAlhB,CAAQ,GAClBsjC,QAAU,mBAAAtjC,CAAQ,IAClBujC,eAAiB,mBAAAvjC,CAAQ,IACzBwjC,QAAU,mBAAAxjC,CAAQ,IAClByjC,WAA4B,WAC5B,QAASA,GAAWlC,EAAOzc,OACP,KAAZA,IAAsBA,GAAU,GACpClf,KAAK27B,MAAQA,EACb37B,KAAKkf,QAAUA,EACflf,KAAK4a,KAAOkjB,YAAY7hB,KAE5B,MAAO4hB,KAEX5jC,SAAQ4jC,WAAaA,UACrB,IAAIC,aAA6B,SAAUn8B,GAEvC,QAASm8B,GAAYt0B,GACjB,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAIjC,OAHA4B,GAAM4H,OAASA,EACf5H,EAAMi6B,cAAgB,GAAIr4B,KAC1B5B,EAAMm8B,eAAiB,GAAIv6B,KACpB5B,EA+FX,MArGA7B,WAAU+9B,EAAan8B,GAQvBm8B,EAAYr9B,UAAU2e,QAAU,SAAUvW,GACtC,GAAIjH,GAAQ5B,KACR4T,EAAQ/K,EAAQvH,KAChB08B,EAAmB,GAAIC,IAS3B,OARAj+B,MAAKwJ,OAAOmyB,MAAMp5B,QAAQ,SAAUC,GAChC,GAAIu5B,GAAen6B,EAAM8W,QAAQlW,EAAMoR,EAAMrS,WACxBpC,KAAjB48B,IACAn6B,EAAMi6B,cAAcn4B,IAAIq4B,EAAazxB,UAAWyxB,GAChDnoB,EAAMrS,MAAMyC,oBAAoB+3B,EAAa98B,SAASsD,QAAQ,SAAU2C,GAAK,MAAO84B,GAAiBj8B,IAAImD,QAGjH84B,EAAiBz7B,QAAQ,SAAUtD,GAAW,MAAO2C,GAAMs8B,sBAAsBj/B,KAC7Ee,KAAKwJ,OAAO0V,QACL,GAAIif,eAAcvqB,EAAO5T,KAAK67B,cAAe77B,KAAK+9B,eAAgBl1B,GAAS6O,QAG3E1X,KAAKk8B,OAAOrzB,IAG3Bi1B,EAAYr9B,UAAUiY,QAAU,SAAUlW,EAAMjB,GAC5C,GAAItC,GAAUsC,EAAMwC,QAAQvB,EAAK8H,UACjC,QAAgBnL,KAAZF,GAAyB2+B,QAAQjiB,aAAa1c,GAAU,CACxD,GAAIk9B,GAAe35B,EAAK25B,eAAkBt5B,EAAG5D,EAAQ6M,SAASjJ,EAAGC,EAAG7D,EAAQ6M,SAAShJ,EACrF,QACIwH,UAAW9H,EAAK8H,UAChBrL,QAASA,EACTk9B,aAAcA,EACdC,WAAY55B,EAAK45B,cAK7B0B,EAAYr9B,UAAUy9B,sBAAwB,SAAUj/B,GACpD,GAAIy+B,QAAQxjB,WAAWjb,GAAU,CAC7B,GAAI4L,GAAS5L,EAAQ4L,OACjBuzB,EAAavzB,EAAS7K,KAAK67B,cAAc/6B,IAAI+J,EAAOrL,QAAML,GAC1DsI,EAASxI,EAAQwI,OACjB42B,EAAa52B,EAASzH,KAAK67B,cAAc/6B,IAAI2G,EAAOjI,QAAML,EAC9D,QAAmBA,KAAfi/B,OAA2Cj/B,KAAfk/B,EAA0B,CACtD,GAAIC,GAAWD,EAAWjC,WAAWv5B,EAAIw7B,EAAWlC,aAAat5B,EAC7D07B,EAAWF,EAAWjC,WAAWt5B,EAAIu7B,EAAWlC,aAAar5B,CACjE9C,MAAK+9B,eAAer6B,IAAIzE,EAAQO,IAC5B8K,UAAWrL,EAAQO,GACnBP,QAASA,EACTu/B,UAAWv/B,EAAQkb,cACnBskB,QAASx/B,EAAQkb,cAAc3L,IAAI,SAAUitB,GAAM,OAC/C54B,EAAG44B,EAAG54B,EAAIy7B,EACVx7B,EAAG24B,EAAG34B,EAAIy7B,UAM9BT,EAAYr9B,UAAUy7B,OAAS,SAAUrzB,EAAS2zB,GAa9C,MAZAx8B,MAAK67B,cAAct5B,QAAQ,SAAU8U,GAE7BA,EAAIpY,QAAQ6M,SADZ0wB,EACuBnlB,EAAI8kB,aAEJ9kB,EAAI+kB,aAEnCp8B,KAAK+9B,eAAex7B,QAAQ,SAAU8U,GAE9BA,EAAIpY,QAAQkb,cADZqiB,EAC4BnlB,EAAImnB,UAEJnnB,EAAIonB,UAEjC51B,EAAQvH,MAEnBw8B,EAAYr9B,UAAUsI,KAAO,SAAUF,GACnC,MAAO,IAAIs1B,eAAct1B,EAAQvH,KAAMtB,KAAK67B,cAAe77B,KAAK+9B,eAAgBl1B,GAAS,GAAM6O,SAEnGomB,EAAYr9B,UAAUyI,KAAO,SAAUL,GACnC,MAAO,IAAIs1B,eAAct1B,EAAQvH,KAAMtB,KAAK67B,cAAe77B,KAAK+9B,eAAgBl1B,GAAS,GAAO6O,SAEpGomB,EAAYr9B,UAAUkI,MAAQ,SAAUC,EAASC,GAC7C,GAAIjH,GAAQ5B,IACZ,QAAKA,KAAKwJ,OAAO0V,SAAWtW,YAAmBk1B,KAC3Cl1B,EAAQY,OAAOmyB,MAAMp5B,QAAQ,SAAUm8B,GACnC,GAAIC,GAAe/8B,EAAMi6B,cAAc/6B,IAAI49B,EAAUp0B,UACrD,IAAIq0B,EACAA,EAAavC,WAAasC,EAAUtC,eAEnC,CACD,GAAIL,GAAen6B,EAAM8W,QAAQgmB,EAAW71B,EAAQvH,KAAKC,MACrDw6B,IACAn6B,EAAMi6B,cAAcn4B,IAAIq4B,EAAazxB,UAAWyxB,OAGrD,IAIf+B,EAAY7hB,KAAO,OACZ6hB,GACTjiB,UAAUnT,iBACZzO,SAAQ6jC,YAAcA,WACtB,IAAIK,eAA+B,SAAUx8B,GAEzC,QAASw8B,GAAcvqB,EAAOgrB,EAAcC,EAAeh2B,EAAS2zB,OAChD,KAAZA,IAAsBA,GAAU,EACpC,IAAI56B,GAAQD,EAAOwB,KAAKnD,KAAM6I,IAAY7I,IAK1C,OAJA4B,GAAMgS,MAAQA,EACdhS,EAAMg9B,aAAeA,EACrBh9B,EAAMi9B,cAAgBA,EACtBj9B,EAAM46B,QAAUA,EACT56B,EAwCX,MAhDA7B,WAAUo+B,EAAex8B,GAUzBw8B,EAAc19B,UAAUwY,MAAQ,SAAUpI,GACtC,GAAIjP,GAAQ5B,IAmCZ,OAlCAA,MAAK4+B,aAAar8B,QAAQ,SAAUu8B,GAC5Bl9B,EAAM46B,QACNsC,EAAY7/B,QAAQ6M,UAChBjJ,GAAI,EAAIgO,GAAKiuB,EAAY1C,WAAWv5B,EAAIgO,EAAIiuB,EAAY3C,aAAat5B,EACrEC,GAAI,EAAI+N,GAAKiuB,EAAY1C,WAAWt5B,EAAI+N,EAAIiuB,EAAY3C,aAAar5B,GAIzEg8B,EAAY7/B,QAAQ6M,UAChBjJ,GAAI,EAAIgO,GAAKiuB,EAAY3C,aAAat5B,EAAIgO,EAAIiuB,EAAY1C,WAAWv5B,EACrEC,GAAI,EAAI+N,GAAKiuB,EAAY3C,aAAar5B,EAAI+N,EAAIiuB,EAAY1C,WAAWt5B,KAIjF9C,KAAK6+B,cAAct8B,QAAQ,SAAUw8B,GAEjC,IAAK,GADDxkB,MACK9a,EAAI,EAAGA,EAAIs/B,EAAaP,UAAUj/B,QAAUE,EAAIs/B,EAAaN,QAAQl/B,OAAQE,IAAK,CACvF,GAAIu/B,GAAKD,EAAaP,UAAU/+B,GAC5Bw/B,EAAKF,EAAaN,QAAQh/B,EAC1BmC,GAAM46B,QACNjiB,EAAMtY,MACFY,GAAI,EAAIgO,GAAKouB,EAAGp8B,EAAIgO,EAAImuB,EAAGn8B,EAC3BC,GAAI,EAAI+N,GAAKouB,EAAGn8B,EAAI+N,EAAImuB,EAAGl8B,IAI/ByX,EAAMtY,MACFY,GAAI,EAAIgO,GAAKmuB,EAAGn8B,EAAIgO,EAAIouB,EAAGp8B,EAC3BC,GAAI,EAAI+N,GAAKmuB,EAAGl8B,EAAI+N,EAAIouB,EAAGn8B,IAIvCi8B,EAAa9/B,QAAQkb,cAAgBI,IAElCva,KAAK4T,OAETuqB,GACTpf,YAAYzG,UACdre,SAAQkkC,cAAgBA,aACxB,IAAIe,mBAAmC,SAAUv9B,GAE7C,QAASu9B,KACL,GAAIt9B,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAMu9B,YAAa,EACZv9B,EA6HX,MAjIA7B,WAAUm/B,EAAmBv9B,GAM7Bu9B,EAAkBz+B,UAAU2U,UAAY,SAAU3N,EAAQ4I,GACtD,GAAI9F,KACJ,IAAqB,IAAjB8F,EAAM6sB,OAAc,CACpB,GAAIkC,GAAW1zB,eAAef,oBAAoBlD,EAAQm2B,QAAQhiB,YAC9DyjB,EAAkB53B,YAAkBi2B,SAAQ/iB,cAE5C3a,MAAKs/B,qBADQngC,KAAbigC,GAA0BC,GACAx8B,EAAGwN,EAAM+Y,MAAOtmB,EAAGuN,EAAMgZ,WAG3BlqB,GAE5Ba,KAAKm/B,YAAa,EACdE,GACA90B,EAAOtI,KAAK,GAAI07B,gBAAe1C,sBAAsBxzB,EAAOjI,SAGpE,MAAO+K,IAEX20B,EAAkBz+B,UAAU4U,UAAY,SAAU5N,EAAQ4I,GACtD,GAAIzO,GAAQ5B,KACRuK,IACJ,IAAsB,IAAlB8F,EAAMkvB,QACNv/B,KAAKsV,QAAQ7N,EAAQ4I,OACpB,IAAIrQ,KAAKs/B,iBAAkB,CAC5B,GAAIE,GAAW9zB,eAAef,oBAAoBlD,EAAQ2T,QAAQxF,WAClE5V,MAAKm/B,YAAa,CAClB,IAAI5f,GAAOigB,EAAWA,EAASjgB,KAAO,EAClCkgB,GAAQpvB,EAAM+Y,MAAQppB,KAAKs/B,iBAAiBz8B,GAAK0c,EACjDmgB,GAAQrvB,EAAMgZ,MAAQrpB,KAAKs/B,iBAAiBx8B,GAAKyc,EACjDogB,KACAC,IACJn4B,GAAOnG,KAAKC,MAAM0C,MACb3B,OAAO,SAAUrD,GAAW,MAAOoc,SAAQtK,aAAa9R,IAAYA,EAAQuc,WAC5EjZ,QAAQ,SAAUtD,GACnB,GAAI2+B,QAAQhiB,WAAW3c,GACnB0gC,EAAY19B,MACRqI,UAAWrL,EAAQO,GACnB28B,cACIt5B,EAAG5D,EAAQ6M,SAASjJ,EACpBC,EAAG7D,EAAQ6M,SAAShJ,GAExBs5B,YACIv5B,EAAG5D,EAAQ6M,SAASjJ,EAAI48B,EACxB38B,EAAG7D,EAAQ6M,SAAShJ,EAAI48B,SAI/B,IAAIzgC,YAAmBy+B,SAAQ/iB,eAAgB,CAChD,GAAIhY,GAAQf,EAAMi+B,kBAAkB5gC,OACtBE,KAAVwD,GACAi9B,EAAc39B,MACVqI,UAAWrL,EAAQO,GACnB28B,aAAcx5B,EACdy5B,YACIv5B,EAAGF,EAAME,EAAI48B,EACb38B,EAAGH,EAAMG,EAAI48B,QAMjC1/B,KAAKs/B,kBAAqBz8B,EAAGwN,EAAM+Y,MAAOtmB,EAAGuN,EAAMgZ,OAC/CsW,EAAYpgC,OAAS,GACrBgL,EAAOtI,KAAK,GAAI47B,YAAW8B,GAAa,IACxCC,EAAcrgC,OAAS,GACvBgL,EAAOtI,KAAK,GAAI07B,gBAAejC,wBAAwBkE,GAAe,IAE9E,MAAOr1B,IAEX20B,EAAkBz+B,UAAUo/B,kBAAoB,SAAUt2B,GACtD,GAAIrI,GAASqI,EAAOrI,MACpB,IAAKw8B,QAAQxjB,WAAWhZ,GAGxB,GAAoB,SAAhBqI,EAAOqR,KAAiB,CAWxB,IAAK,GAVDklB,GAAW,SAAUrE,GACrB,WAAsBt8B,KAAlBs8B,EAAGhhB,WACIghB,EAAGhhB,WACO,WAAZghB,EAAG7gB,KACD1Z,EAAOiZ,cAAc5a,QAEpB,GAEZgb,EAAQrZ,EAAOqZ,QACfwlB,MAAM,GAAQC,MAAM,GACfr8B,EAAK,EAAGs8B,EAAU1lB,EAAO5W,EAAKs8B,EAAQ1gC,OAAQoE,IAAM,CACzD,GAAI83B,GAAKwE,EAAQt8B,GACblE,EAAIqgC,EAASrE,EACbh8B,IAAK8J,EAAOkR,iBAAuBtb,KAAR4gC,GAAqBtgC,EAAIqgC,EAASC,MAC7DA,EAAMtE,GACNh8B,EAAI8J,EAAOkR,iBAAuBtb,KAAR6gC,GAAqBvgC,EAAIqgC,EAASE,MAC5DA,EAAMvE,GAEd,OAAYt8B,KAAR4gC,OAA6B5gC,KAAR6gC,EACrB,MAAOr/B,YAAWqE,aAAa+6B,EAAKC,OAGvC,IAAIz2B,EAAOkR,YAAc,EAC1B,MAAOvZ,GAAOiZ,cAAc5Q,EAAOkR,aAI3CykB,EAAkBz+B,UAAUyU,WAAa,SAAUzN,EAAQ4I,GAGvD,MAFI5I,aAAkBg2B,UAASz8B,YAAgC,IAAlBqP,EAAMkvB,SAC/Cv/B,KAAKsV,QAAQ7N,EAAQ4I,OAG7B6uB,EAAkBz+B,UAAU6U,QAAU,SAAU7N,EAAQ4I,GACpD,GAAI9F,KAUJ,OATIvK,MAAKs/B,kBACL73B,EAAOnG,KAAKC,MAAM0C,MACb1B,QAAQ,SAAUtD,GACfA,YAAmBy+B,SAAQ/iB,gBAAkB1b,EAAQ4b,UACrDtQ,EAAOtI,KAAK,GAAI07B,gBAAe1C,yBAA0Bh8B,EAAQO,QAG7EQ,KAAKm/B,YAAa,EAClBn/B,KAAKs/B,qBAAmBngC,GACjBoL,GAEX20B,EAAkBz+B,UAAU1E,SAAW,SAAUwT,EAAOtQ,GACpD,MAAOsQ,IAEJ2vB,GACTtY,aAAa5oB,cACf/D,SAAQilC,kBAAoBA,iBAC5B,IAAIgB,mBAAmC,WACnC,QAASA,MAqBT,MAnBAA,GAAkBz/B,UAAU1E,SAAW,SAAUwT,EAAOtQ,GACpD,GAAI6F,GAAY,EAWhB,OAVI84B,SAAQjiB,aAAa1c,IAAYA,YAAmByL,UAASzJ,mBAAoC9B,KAAnBF,EAAQiC,SACtF4D,EAAY,aAAe7F,EAAQ6M,SAASjJ,EAAI,KAAO5D,EAAQ6M,SAAShJ,EAAI,KAE5EwY,QAAQhQ,YAAYrM,KAChB6F,EAAUvF,OAAS,IACnBuF,GAAa,KACjBA,GAAa,aAAe7F,EAAQkhC,UAAUt9B,EAAI,KAAO5D,EAAQkhC,UAAUr9B,EAAI,KAE/EgC,EAAUvF,OAAS,GACnB4T,cAAc7D,QAAQC,EAAO,YAAazK,GACvCyK,GAEX2wB,EAAkBz/B,UAAUiV,WAAa,aAEzCwqB,EAAoB34B,YAChBgB,YAAY9N,cACbylC,KAGPjmC,SAAQimC,kBAAoBA,kB;;;;;;;ACpW5B,GAAIngC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0G,YAAa,mBAAAxG,CAAQ,IACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnBghB,QAAU,mBAAAhhB,CAAQ,GAClBihB,QAAU,mBAAAjhB,CAAQ,IAClBkhB,QAAU,mBAAAlhB,CAAQ,IAClBsjC,QAAU,mBAAAtjC,CAAQ,IAClBwjC,QAAU,mBAAAxjC,CAAQ,IAClBgmC,gBAAkB,mBAAAhmC,CAAQ,IAC1BuG,WAAa,mBAAAvG,CAAQ,GACrBimC,QAAU,mBAAAjmC,CAAQ,GAClBkmC,QAAU,mBAAAlmC,CAAQ,IAClBsR,eAAiB,mBAAAtR,CAAQ,GACzBmmC,UAAY,mBAAAnmC,CAAQ,KAIpBomC,OAAwB,SAAU7+B,GAElC,QAAS6+B,GAAOj/B,GAEZ,WADc,KAAVA,IAAoBA,EAAQ,GAAIk/B,cAC7B9+B,EAAOwB,KAAKnD,KAAMuB,IAAUvB,KAEvC,MALAD,WAAUygC,EAAQ7+B,GAKX6+B,GACTJ,gBAAgBM,oBAClBzmC,SAAQumC,OAASA,MAMjB,IAAIG,qBAAqC,SAAUh/B,GAE/C,QAASg/B,KACL,MAAkB,QAAXh/B,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAqD/D,MAvDAD,WAAU4gC,EAAqBh/B,GAI/B5H,OAAOC,eAAe2mC,EAAoBlgC,UAAW,iBAKjDK,IAAK,WACD,MAAOd,MAAKuB,MAAMq/B,iBAAiB5gC,OAEvCoB,YAAY,EACZC,cAAc,IAElBtH,OAAOC,eAAe2mC,EAAoBlgC,UAAW,iBAKjDK,IAAK,WACD,MAAOd,MAAKuB,MAAMs/B,iBAAiB7gC,OAEvCoB,YAAY,EACZC,cAAc,IAclBs/B,EAAoBlgC,UAAUqgC,UAAY,SAAUC,EAAgB1Y,GAChE,MAAO1nB,YAAWoE,OAAO/E,KAAK2L,SAWlCg1B,EAAoBlgC,UAAUugC,oBAAsB,SAAUC,EAAUC,EAAcC,EAAM9Y,GACxF,GAAI+Y,GAAqB11B,eAAed,eAAeq2B,EAAUC,EAAclhC,KAAKkB,QAChFmgC,EAASrhC,KAAK8gC,UAAUM,EAAoB/Y,EAChD,OAAO3c,gBAAed,eAAey2B,EAAQrhC,KAAKkB,OAAQigC,EAAKjgC,SAE5Dy/B,GACTN,QAAQx0B,cACV5R,SAAQ0mC,oBAAsBA,mBAM9B,IAAIW,OAAuB,SAAU3/B,GAEjC,QAAS2/B,KACL,GAAI1/B,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAIhE,OAHA4B,GAAM4Z,UAAW,EACjB5Z,EAAM2Z,eAAgB,EACtB3Z,EAAM2/B,QAAU,EACT3/B,EAOX,MAbA7B,WAAUuhC,EAAO3/B,GAQjB2/B,EAAM7gC,UAAUe,WAAa,SAAUC,GACnC,MAAOA,KAAYm8B,QAAQ5sB,eAAiBvP,IAAYi8B,QAAQjiB,aAAeha,IAAY2Z,QAAQ/P,eAC5F5J,IAAY2Z,QAAQnQ,wBAA0BxJ,IAAY4Z,QAAQqL,aAAejlB,IAAY6Z,QAAQI,sBACrGja,IAAY6Z,QAAQwO,cAExBwX,GACTX,oBACF1mC,SAAQqnC,MAAQA,KAIhB,IAAIE,OAAuB,SAAU7/B,GAEjC,QAAS6/B,KACL,GAAI5/B,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAIhE,OAHA4B,GAAM4Z,UAAW,EACjB5Z,EAAM2Z,eAAgB,EACtB3Z,EAAM2/B,QAAU,EACT3/B,EAMX,MAZA7B,WAAUyhC,EAAO7/B,GAQjB6/B,EAAM/gC,UAAUe,WAAa,SAAUC,GACnC,MAAOA,KAAYm8B,QAAQ5sB,eAAiBvP,IAAY2Z,QAAQ/P,eAAiB5J,IAAY4Z,QAAQqL,aAC9FjlB,IAAY6Z,QAAQI,sBAExB8lB,GACTb,oBACF1mC,SAAQunC,MAAQA,KAMhB,IAAIC,OAAuB,SAAU9/B,GAEjC,QAAS8/B,KACL,GAAI7/B,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAKhE,OAJA4B,GAAMuY,iBACNvY,EAAM4Z,UAAW,EACjB5Z,EAAM2Z,eAAgB,EACtB3Z,EAAM2/B,QAAU,EACT3/B,EA0BX,MAjCA7B,WAAU0hC,EAAO9/B,GASjB5H,OAAOC,eAAeynC,EAAMhhC,UAAW,UACnCK,IAAK,WACD,MAAOd,MAAKuB,MAAMwC,QAAQ/D,KAAK0hC,WAEnCtgC,YAAY,EACZC,cAAc,IAElBtH,OAAOC,eAAeynC,EAAMhhC,UAAW,UACnCK,IAAK,WACD,MAAOd,MAAKuB,MAAMwC,QAAQ/D,KAAKg7B,WAEnC55B,YAAY,EACZC,cAAc,IAElBogC,EAAMhhC,UAAU8Z,MAAQ,eACApb,KAAhBa,KAAK2hC,SACL3hC,KAAK2hC,OAAS,GAAIpB,WAAUqB,iBAChC,IAAIrnB,GAAQva,KAAK2hC,OAAOpnB,MAAMva,KAC9B,OAAOsgC,SAAQhmB,sBAAsBC,EAAOva,OAEhDyhC,EAAMhhC,UAAUe,WAAa,SAAUC,GACnC,MAAOA,KAAY4Z,QAAQqL,aAAejlB,IAAYm8B,QAAQ5sB,eAC1DvP,IAAY6+B,QAAQjmB,aAAe5Y,IAAY6Z,QAAQI,sBAExD+lB,GACT/2B,SAASzJ,cACXhH,SAAQwnC,MAAQA,KAIhB,IAAII,QAAwB,SAAUlgC,GAElC,QAASkgC,KACL,GAAIjgC,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAIhE,OAHA4B,GAAM4Z,UAAW,EACjB5Z,EAAMu+B,UAAYx/B,WAAW6F,aAC7B5E,EAAM2/B,QAAU,EACT3/B,EAKX,MAXA7B,WAAU8hC,EAAQlgC,GAQlBkgC,EAAOphC,UAAUe,WAAa,SAAUC,GACpC,MAAOA,KAAY2Z,QAAQ/P,eAAiB5J,IAAY2Z,QAAQ7P,cAAgB9J,IAAY4Z,QAAQqL,aAAejlB,IAAY2Z,QAAQjQ,wBAEpI02B,GACTxB,QAAQx0B,cACV5R,SAAQ4nC,OAASA,MAKjB,IAAIC,cAA8B,SAAUngC,GAExC,QAASmgC,KACL,GAAIlgC,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAM2/B,QAAU,EACT3/B,EAKX,MATA7B,WAAU+hC,EAAcngC,GAMxBmgC,EAAarhC,UAAUe,WAAa,SAAUC,GAC1C,MAAOA,KAAY2Z,QAAQ/P,eAAiB5J,IAAY2Z,QAAQnQ,wBAA0BxJ,IAAY2Z,QAAQjQ,wBAA0B1J,IAAY4Z,QAAQqL,aAEzJob,GACTzB,QAAQx0B,cACV5R,SAAQ6nC,aAAeA,YAIvB,IAAIrB,aAA6B,SAAU9+B,GAEvC,QAAS8+B,KACL,GAAI7+B,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAGhE,OAFA4B,GAAMmgC,SAAW,GAAIv+B,KACrB5B,EAAMogC,SAAW,GAAIx+B,KACd5B,EAoFX,MAzFA7B,WAAU0gC,EAAa9+B,GAOvB8+B,EAAYhgC,UAAUsB,IAAM,SAAU9C,GAElC,GADA0C,EAAOlB,UAAUsB,IAAIoB,KAAKnD,KAAMf,GAC5BA,YAAmBwiC,OAAO,CAE1B,GAAIxiC,EAAQyiC,SAAU,CAClB,GAAIO,GAAYjiC,KAAK+hC,SAASjhC,IAAI7B,EAAQyiC,cACxBviC,KAAd8iC,EACAjiC,KAAK+hC,SAASr+B,IAAIzE,EAAQyiC,UAAWziC,IAErCgjC,EAAUhgC,KAAKhD,GAGvB,GAAIA,EAAQ+7B,SAAU,CAClB,GAAIkH,GAAYliC,KAAKgiC,SAASlhC,IAAI7B,EAAQ+7B,cACxB77B,KAAd+iC,EACAliC,KAAKgiC,SAASt+B,IAAIzE,EAAQ+7B,UAAW/7B,IAErCijC,EAAUjgC,KAAKhD,MAI/BwhC,EAAYhgC,UAAU0B,OAAS,SAAUlD,GAErC,GADA0C,EAAOlB,UAAU0B,OAAOgB,KAAKnD,KAAMf,GAC/BA,YAAmBwiC,OAAO,CAE1B,GAAIQ,GAAYjiC,KAAK+hC,SAASjhC,IAAI7B,EAAQyiC,SAC1C,QAAkBviC,KAAd8iC,EAAyB,CACzB,GAAI1gC,GAAQ0gC,EAAU7/B,QAAQnD,EAC1BsC,IAAS,IACgB,IAArB0gC,EAAU1iC,OACVS,KAAK+hC,SAASl+B,OAAO5E,EAAQyiC,UAE7BO,EAAU//B,OAAOX,EAAO,IAIpC,GAAI2gC,GAAYliC,KAAKgiC,SAASlhC,IAAI7B,EAAQ+7B,SAC1C,QAAkB77B,KAAd+iC,EAAyB,CACzB,GAAI3gC,GAAQ2gC,EAAU9/B,QAAQnD,EAC1BsC,IAAS,IACgB,IAArB2gC,EAAU3iC,OACVS,KAAKgiC,SAASn+B,OAAO5E,EAAQ+7B,UAE7BkH,EAAUhgC,OAAOX,EAAO,OAK5Ck/B,EAAYhgC,UAAUuD,oBAAsB,SAAU/E,GAClD,GAAI2C,GAAQ5B,IACZ,OAAO,IAAIY,YAAWuhC,mBAAmB,WAAc,OACnDJ,SAAUngC,EAAMmgC,SAASjhC,IAAI7B,EAAQO,IACrCwiC,SAAUpgC,EAAMogC,SAASlhC,IAAI7B,EAAQO,IACrC4iC,kBAAmB,EACnBC,kBAAmB,IAChB,SAAU5a,GACb,GAAIlmB,GAAQkmB,EAAM2a,iBAClB,QAAuBjjC,KAAnBsoB,EAAMsa,UAA0BxgC,EAAQkmB,EAAMsa,SAASxiC,OAEvD,MADAkoB,GAAM2a,kBAAoB7gC,EAAQ,GACzB+gC,MAAM,EAAOpoC,MAAOutB,EAAMsa,SAASxgC,GAGhD,IADAA,EAAQkmB,EAAM4a,sBACSljC,KAAnBsoB,EAAMua,SAEN,KAAOzgC,EAAQkmB,EAAMua,SAASziC,QAAQ,CAClC,GAAI4hC,GAAO1Z,EAAMua,SAASzgC,EAC1B,IAAI4/B,EAAKO,WAAaP,EAAKnG,SAEvB,MADAvT,GAAM4a,kBAAoB9gC,EAAQ,GACzB+gC,MAAM,EAAOpoC,MAAOinC,EAEjC5/B,KAGR,OAAS+gC,MAAM,EAAMpoC,UAAOiF,OAGpCshC,EAAYhgC,UAAUmgC,iBAAmB,SAAU3hC,GAC/C,MAAOe,MAAKgiC,SAASlhC,IAAI7B,EAAQO,SAErCihC,EAAYhgC,UAAUogC,iBAAmB,SAAU5hC,GAC/C,MAAOe,MAAK+hC,SAASjhC,IAAI7B,EAAQO,SAE9BihC,GACT/1B,SAASxH,YACXjJ,SAAQwmC,YAAcA,Y;;;;;;ACxStB,sDAAS5uB,SAAQgO,GACf,MAAIxgB,OAAMwS,QACDxS,MAAMwS,QAAQgO,GAEQ,mBAAxB0iB,eAAe1iB,GAIxB,QAAS2iB,WAAU3iB,GACjB,MAAsB,iBAARA,GAIhB,QAAS4iB,QAAO5iB,GACd,MAAe,QAARA,EAIT,QAAS6iB,mBAAkB7iB,GACzB,MAAc,OAAPA,EAIT,QAAS8iB,UAAS9iB,GAChB,MAAsB,gBAARA,GAIhB,QAAS+iB,UAAS/iB,GAChB,MAAsB,gBAARA,GAIhB,QAASgjB,UAAShjB,GAChB,MAAsB,gBAARA,GAIhB,QAASijB,aAAYjjB,GACnB,WAAe,KAARA,EAIT,QAASkjB,UAASC,GAChB,MAA8B,oBAAvBT,eAAeS,GAIxB,QAASC,UAASpjB,GAChB,MAAsB,gBAARA,IAA4B,OAARA,EAIpC,QAASqjB,QAAO9iC,GACd,MAA6B,kBAAtBmiC,eAAeniC,GAIxB,QAAS+iC,SAAQj+B,GACf,MAA8B,mBAAtBq9B,eAAer9B,IAA2BA,YAAa/D,OAIjE,QAASiiC,YAAWvjB,GAClB,MAAsB,kBAARA,GAIhB,QAAS9J,aAAY8J,GACnB,MAAe,QAARA,GACe,iBAARA,IACQ,gBAARA,IACQ,gBAARA,IACQ,gBAARA,QACQ,KAARA,EAMhB,QAAS0iB,gBAAec,GACtB,MAAOtpC,QAAO0G,UAAUoN,SAAS1K,KAAKkgC,GA3ExCppC,QAAQ4X,QAAUA,QAKlB5X,QAAQuoC,UAAYA,UAKpBvoC,QAAQwoC,OAASA,OAKjBxoC,QAAQyoC,kBAAoBA,kBAK5BzoC,QAAQ0oC,SAAWA,SAKnB1oC,QAAQ2oC,SAAWA,SAKnB3oC,QAAQ4oC,SAAWA,SAKnB5oC,QAAQ6oC,YAAcA,YAKtB7oC,QAAQ8oC,SAAWA,SAKnB9oC,QAAQgpC,SAAWA,SAKnBhpC,QAAQipC,OAASA,OAKjBjpC,QAAQkpC,QAAUA,QAKlBlpC,QAAQmpC,WAAaA,WAUrBnpC,QAAQ8b,YAAcA,YAEtB9b,QAAQy0B,SAAWvB,OAAOuB,S;;;;;;;;ACrG1B30B,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIopC,uBAAwB,mBAAAlpC,CAAQ,IAChCmpC,gBAAmB,WACnB,QAASA,GAAgBxgB,GACrB/iB,KAAKwjC,SAAWzgB,EAMpB,MAJAwgB,GAAgB9iC,UAAUgjC,aAAe,SAAUC,GAE/C,MADA1jC,MAAKwjC,SAASC,aAAeC,EACtB,GAAIJ,uBAAsBK,kBAAkB3jC,KAAKwjC,WAErDD,IAEXtpC,SAAQspC,gBAAkBA,gB;;;;;;;ACZ1BxpC,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0pC,qBAAsB,mBAAAxpC,CAAQ,IAC9B4B,qBAAuB,mBAAA5B,CAAQ,IAC/BupC,kBAAqB,WACrB,QAASA,GAAkB5gB,GACvB/iB,KAAKwjC,SAAWzgB,EAyFpB,MAvFA4gB,GAAkBljC,UAAUojC,KAAO,SAAUhgB,GAEzC,MADA7jB,MAAKwjC,SAAS3f,WAAaA,EACpB,GAAI+f,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUqjC,gBAAkB,SAAUt0B,GAEpD,MADAxP,MAAKwjC,SAAS3f,WAAa7nB,qBAAqBG,gBAAgBqT,GACzD,GAAIo0B,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUsjC,oBAAsB,WAO9C,MANA/jC,MAAKwjC,SAAS3f,WAAa,SAAUG,GAIjC,MAH0C,QAAnBA,EAAQvc,SACG,IAA7Buc,EAAQvc,OAAOid,YACe,IAA9BV,EAAQvc,OAAOgd,YAGjB,GAAImf,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUujC,iBAAmB,SAAUptB,EAAK1c,GAE1D,MADA8F,MAAKwjC,SAAS3f,WAAa7nB,qBAAqBE,iBAAiB0a,GAAK1c,GAC/D,GAAI0pC,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUwjC,iBAAmB,SAAU/iC,GAIrD,MAHAlB,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,MAAOhoB,sBAAqBI,eAAe8E,GAAQ8iB,EAAQkgB,gBAExD,GAAIN,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAU0jC,gBAAkB,SAAU30B,GAIpD,MAHAxP,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,MAAOhoB,sBAAqBG,gBAAgBqT,GAAMwU,EAAQkgB,gBAEvD,GAAIN,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAU2jC,iBAAmB,SAAUxtB,EAAK1c,GAI1D,MAHA8F,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,MAAOhoB,sBAAqBE,iBAAiB0a,GAAK1c,GAAO8pB,EAAQkgB,gBAE9D,GAAIN,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAU4jC,kBAAoB,SAAUC,GAItD,MAHAtkC,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,MAAOhoB,sBAAqBC,mBAAmB+nB,EAAShoB,qBAAqBI,eAAekoC,KAEzF,GAAIV,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAU8jC,iBAAmB,SAAUD,GAIrD,MAHAtkC,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,OAAQhoB,qBAAqBC,mBAAmB+nB,EAAShoB,qBAAqBI,eAAekoC,KAE1F,GAAIV,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAU+jC,qBAAuB,SAAUh1B,GAIzD,MAHAxP,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,MAAOhoB,sBAAqBC,mBAAmB+nB,EAAShoB,qBAAqBG,gBAAgBqT,KAE1F,GAAIo0B,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUgkC,oBAAsB,SAAUj1B,GAIxD,MAHAxP,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,OAAQhoB,qBAAqBC,mBAAmB+nB,EAAShoB,qBAAqBG,gBAAgBqT,KAE3F,GAAIo0B,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUikC,sBAAwB,SAAU9tB,EAAK1c,GAI/D,MAHA8F,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,MAAOhoB,sBAAqBC,mBAAmB+nB,EAAShoB,qBAAqBE,iBAAiB0a,GAAK1c,KAEhG,GAAI0pC,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUkkC,qBAAuB,SAAU/tB,EAAK1c,GAI9D,MAHA8F,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,OAAQhoB,qBAAqBC,mBAAmB+nB,EAAShoB,qBAAqBE,iBAAiB0a,GAAK1c,KAEjG,GAAI0pC,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUmkC,uBAAyB,SAAU/gB,GAI3D,MAHA7jB,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,MAAOhoB,sBAAqBC,mBAAmB+nB,EAASH,IAErD,GAAI+f,qBAAoBL,gBAAgBvjC,KAAKwjC,WAExDG,EAAkBljC,UAAUokC,sBAAwB,SAAUhhB,GAI1D,MAHA7jB,MAAKwjC,SAAS3f,WAAa,SAAUG,GACjC,OAAQhoB,qBAAqBC,mBAAmB+nB,EAASH,IAEtD,GAAI+f,qBAAoBL,gBAAgBvjC,KAAKwjC,WAEjDG,IAEX1pC,SAAQ0pC,kBAAoBA,kB;;;;;;;AC7F5B,QAASmB,OAAMr0B,EAAMvR,EAAUgY,GAE3B,GADAzG,EAAK6F,GAAK,6BACE,kBAARY,OAAwC/X,KAAbD,EAC3B,IAAK,GAAIO,GAAI,EAAGA,EAAIP,EAASK,SAAUE,EAAG,CACtC,GAAIslC,GAAY7lC,EAASO,GAAGgR,SACVtR,KAAd4lC,GACAD,MAAMC,EAAW7lC,EAASO,GAAGP,SAAUA,EAASO,GAAGyX,MAKnE,QAAS8tB,GAAE9tB,EAAK7W,EAAGuH,GACf,GAAe1I,GAAUiY,EAAM1X,EAA3BgR,IA2BJ,QA1BUtR,KAANyI,GACA6I,EAAOpQ,EACH4kC,GAAGptB,MAAMjQ,GACT1I,EAAW0I,EAENq9B,GAAGC,UAAUt9B,GAClBuP,EAAOvP,EAEFA,GAAKA,EAAEsP,MACZhY,GAAY0I,SAGLzI,KAANkB,IACD4kC,GAAGptB,MAAMxX,GACTnB,EAAWmB,EAEN4kC,GAAGC,UAAU7kC,GAClB8W,EAAO9W,EAEFA,GAAKA,EAAE6W,IACZhY,GAAYmB,GAGZoQ,EAAOpQ,GAGX4kC,GAAGptB,MAAM3Y,GACT,IAAKO,EAAI,EAAGA,EAAIP,EAASK,SAAUE,EAC3BwlC,GAAGC,UAAUhmC,EAASO,MACtBP,EAASO,GAAK0lC,QAAQ51B,UAAMpQ,OAAWA,OAAWA,GAAWD,EAASO,IAOlF,OAJe,MAAXyX,EAAI,IAAyB,MAAXA,EAAI,IAAyB,MAAXA,EAAI,IACxB,IAAfA,EAAI3X,QAA2B,MAAX2X,EAAI,IAAyB,MAAXA,EAAI,IAC3C4tB,MAAMr0B,EAAMvR,EAAUgY,GAEnBiuB,QAAQ51B,MAAM2H,EAAKzG,EAAMvR,EAAUiY,MAAMhY,IApDpDpF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIirC,SAAU,mBAAA/qC,CAAQ,IAClB6qC,GAAK,mBAAA7qC,CAAQ,GAoDjBH,SAAQ+qC,EAAIA,EAEZ/qC,QAAQgxB,QAAU+Z,E;;;;;;;ACvDlB,QAASz1B,OAAM2H,EAAKzG,EAAMvR,EAAUiY,EAAM+iB,GAEtC,OAAShjB,IAAKA,EAAKzG,KAAMA,EAAMvR,SAAUA,EACrCiY,KAAMA,EAAM+iB,IAAKA,EAAKxyB,QAFPvI,KAATsR,MAAqBtR,GAAYsR,EAAK/I,KAFpD3N,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAMtDD,QAAQsV,MAAQA,MAChBtV,QAAQgxB,QAAU1b,M;;;;;;;ACDlB,GAAIhI,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3BgrC,yBAA2B,mBAAAhrC,CAAQ,IACnCirC,YAAc,mBAAAjrC,CAAQ,IACtBkrC,YAAc,mBAAAlrC,CAAQ,IACtB8Y,SAAW,mBAAA9Y,CAAQ,IACnBmrC,iBAAmB,mBAAAnrC,CAAQ,IAK3B0kB,iBAAkC,WAClC,QAASA,GAAiB0mB,EAAuBC,EAAcz8B,EAAQqQ,GACnErZ,KAAKwlC,sBAAwBA,EAC7BxlC,KAAKylC,aAAeA,EACpBzlC,KAAKgJ,OAASA,EACdhJ,KAAKqZ,OAASA,EACdrZ,KAAK0lC,oBACL1lC,KAAK0lC,mBACL,IAAIC,GAAiB,GAAIN,aAAYxf,gBAAgB,GAAIwf,aAAY1f,eAAekB,iBAAiB7X,YACrGhP,MAAK4lC,WAAaD,EAAeC,WACjC5lC,KAAKylC,aAAarmB,QAAQumB,GAuE9B,MArEA7mB,GAAiBre,UAAUuZ,YAAc,SAAU9F,GAC/C,GAAItS,GAAQ5B,IACZ,OAAOyY,SAAQxU,IAAIiQ,EAAQ1F,IAAI,SAAUhF,GAAU,MAAO5H,GAAM6S,SAASjL,OAE7EsV,EAAiBre,UAAUgU,SAAW,SAAUjL,GAC5C,WAAwBrK,KAApBa,KAAK4lC,WACE5lC,KAAK6lC,cAAcr8B,EAAQxJ,KAAK4lC,YAElCp8B,EAAOoR,OAAS0qB,YAAYQ,WAAW7pB,KACrCjc,KAAKylC,aAAa18B,OAAO2L,KAAK,cAEhClL,EAAOoR,OAAS0qB,YAAYS,WAAW9pB,KACrCjc,KAAKylC,aAAav8B,OAAOwL,KAAK,cAG9B1U,KAAKgmC,aAAax8B,IAGjCsV,EAAiBre,UAAUulC,aAAe,SAAUx8B,GAChDxJ,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,SAAUwJ,EAChC,IAAIy8B,GAAWjmC,KAAKwlC,sBAAsB1kC,IAAI0I,EAAOoR,KACrD,IAAIqrB,EAAS1mC,OAAS,EAAG,CAErB,IAAK,GADD2mC,MACKviC,EAAK,EAAGwiC,EAAaF,EAAUtiC,EAAKwiC,EAAW5mC,OAAQoE,IAAM,CAClE,GAAI+/B,GAAUyC,EAAWxiC,GACrB4G,EAASm5B,EAAQn6B,OAAOC,EACxB0J,UAASsB,SAASjK,GAClB27B,EAASjkC,KAAKjC,KAAKyU,SAASlK,QAEZpL,KAAXoL,IACL27B,EAASjkC,KAAKjC,KAAKylC,aAAarmB,QAAQ7U,IACxCvK,KAAK4lC,WAAar7B,EAAOq7B,YAGjC,MAAOntB,SAAQxU,IAAIiiC,GAInB,MADAlmC,MAAKgJ,OAAOo9B,KAAKpmC,KAAM,6BAA8BwJ,GAC9CiP,QAAQE,OAAO,+BAAiCnP,EAAOoR,KAAO,MAG7EkE,EAAiBre,UAAUolC,cAAgB,SAAUr8B,EAAQiB,GACzD,GAAI7I,GAAQ5B,IACZ,IAAIyK,EAAUjB,GAAS,CACnBxJ,KAAK4lC,eAAazmC,EAClB,IAAIoL,GAASvK,KAAKgmC,aAAax8B,GAC3B0K,EAAUlU,KAAK0lC,gBACnB1lC,MAAK0lC,mBACL,KAAK,GAAI/hC,GAAK,EAAG2Q,EAAYJ,EAASvQ,EAAK2Q,EAAU/U,OAAQoE,IAAM,CAC/D,GAAI2B,GAAIgP,EAAU3Q,EAClB3D,MAAKyU,SAASnP,EAAEkE,QAAQkL,KAAKpP,EAAEoT,QAASpT,EAAEqT,QAE9C,MAAOpO,GAIP,MADAvK,MAAKgJ,OAAOoQ,IAAIpZ,KAAM,6CAA8CwJ,GAC7D,GAAIiP,SAAQ,SAAUC,EAASC,GAClC/W,EAAM8jC,iBAAiBzjC,MAAOuH,OAAQA,EAAQkP,QAASA,EAASC,OAAQA,OAIpFmG,EAAmBvX,YACfgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMK,wBAC5CwL,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMU,gBAC5CmL,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkB,UAC5C2K,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMM,uBAC5CmL,WAAW,qBAAsBu9B,iBAAiB3oC,sBAAuB7C,OAAQA,OAAQqrC,yBAAyBvoC,wBACnHiiB,KAGP7kB,SAAQ6kB,iBAAmBA,iB;;;;;;;AC3G3B,QAAStK,UAAS6xB,GACd,WAAkBlnC,KAAXknC,GAAwBA,EAAO9lC,eAAe,SAAuC,gBAApB8lC,GAAc,KAF1FtsC,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAItDD,QAAQua,SAAWA,S;;;;;;;ACJnB,GAAIjN,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,GAE1GnO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3BmE,cAA+B,WAC/B,QAASA,KACLyB,KAAKsmC,WAAa,GAAI9iC,KAuC1B,MArCAjF,GAAckC,UAAU8lC,MAAQ,SAAUjlC,GAClCtB,KAAKwmC,0BACLC,aAAaC,QAAQ1mC,KAAK0H,IAAKi/B,KAAKC,UAAUtlC,IAE9CtB,KAAKsmC,WAAW5iC,IAAI1D,KAAK0H,IAAKi/B,KAAKC,UAAUtlC,KAErD/C,EAAckC,UAAUomC,KAAO,WAC3B,GAAI78B,GAAUhK,KAAKwmC,0BACbC,aAAaK,QAAQ9mC,KAAK0H,KAC1B1H,KAAKsmC,WAAWxlC,IAAId,KAAK0H,IAC/B,OAAIsC,GACO28B,KAAKI,MAAM/8B,GAEX6c,iBAAiB7X,YAEhCzQ,EAAckC,UAAU+lC,wBAA0B,WAC9C,IACI,MAA+B,gBAAjBC,eAA8C,OAAjBA,aAE/C,MAAOvhC,GACH,OAAO,IAGfnL,OAAOC,eAAeuE,EAAckC,UAAW,OAC3CK,IAAK,WACD,MAAOd,MAAKgnC,cAAcC,SAE9B7lC,YAAY,EACZC,cAAc,IAElBkG,YACIgB,YAAYxN,OAAOyN,QAAQjM,MAAMoC,eACjCqJ,WAAW,cAAejO,SAC3BwE,EAAckC,UAAW,oBAAiB,IAC7ClC,EAAgBgJ,YACZgB,YAAY9N,cACb8D,KAGPtE,SAAQsE,cAAgBA,c;;;;;;;ACxDxB,GAAIgJ,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClB+C,UAA2B,WAC3B,QAASA,GAAU6pC,GACfhnC,KAAKgnC,cAAgBA,EAkBzB,MAhBA7pC,GAAUsD,UAAUymC,UAAY,WAG5B,WAFoC/nC,KAAvBa,KAAKgnC,mBAA8D7nC,KAA/Ba,KAAKgnC,cAAcC,QAChEjnC,KAAKgnC,cAAcC,QAAU,IAAM,IAG3C9pC,EAAUsD,UAAUqU,yBAA2B,SAAU7V,GACrD,MAAOe,MAAKknC,YAAcjoC,EAAQO,IAEtCrC,EAAUsD,UAAUoT,yBAA2B,SAAU5U,GACrD,MAAOA,GAAQO,GAAGyX,QAAQjX,KAAKknC,YAAa,KAEhD/pC,EAAYoK,YACRgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CqJ,WAAW,qBAAsBjO,UAClCoD,KAGPlD,SAAQkD,UAAYA,U;;;;;;;ACrCpBpD,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnBghB,QAAU,mBAAAhhB,CAAQ,GAClB+sC,eAAgC,WAChC,QAASA,MAyGT,MAvGAA,GAAe1mC,UAAU2mC,OAAS,SAAU7jB,EAAW8jB,GACnD,GAAIC,GAAaD,EAASE,cAAchkB,GACpClH,EAAUrc,KAAKwnC,iBAAiBjkB,GAChCkkB,EAAeznC,KAAK0nC,gBAAgBnkB,EAAWlH,EAASgrB,GACxDM,EAAWtrB,EAAQurB,eAAiBvrB,EAAQwrB,gBAC1CJ,EAAa1kC,MACbnD,KAAKiF,IAAI,EAAG7E,KAAK8nC,wBAAwBvkB,EAAWlH,EAASgrB,GAAUtkC,OAASsZ,EAAQ0rB,YAAc1rB,EAAQ2rB,cAChHC,EAAY5rB,EAAQurB,eAAiBvrB,EAAQwrB,gBAC3CJ,EAAazkC,OACbpD,KAAKiF,IAAI,EAAG7E,KAAK8nC,wBAAwBvkB,EAAWlH,EAASgrB,GAAUrkC,QAAUqZ,EAAQ6rB,WAAa7rB,EAAQ8rB,cACpH,IAAIR,EAAW,GAAKM,EAAY,EAAG,CAC/B,GAAI5f,GAASroB,KAAKooC,eAAe7kB,EAAW8jB,EAAUhrB,EAASsrB,EAAUM,EACzEX,GAAW37B,OAAS3L,KAAKqoC,wBAAwB9kB,EAAW8E,EAAQhM,EAASsrB,EAAUM,GACvFX,EAAWgB,eAAgB,IAGnCnB,EAAe1mC,UAAU4nC,wBAA0B,SAAU9kB,EAAWglB,EAAYlsB,EAASsrB,EAAUM,GACnG,OACIplC,EAAG0gB,EAAU5X,OAAO9I,EACpBC,EAAGygB,EAAU5X,OAAO7I,EACpBC,MAAO4kC,EAAWtrB,EAAQ0rB,YAAc1rB,EAAQ2rB,aAChDhlC,OAAQilC,EAAY5rB,EAAQ6rB,WAAa7rB,EAAQ8rB,gBAGzDhB,EAAe1mC,UAAUqnC,wBAA0B,SAAUvkB,EAAWilB,EAAenB,GAEnF,IADA,GAAIoB,GAAmBllB,IACV,CACT,GAAInI,QAAQrQ,cAAc09B,GAAmB,CACzC,GAAI98B,GAAS88B,EAAiB98B,MAG9B,IAFIyP,QAAQpQ,kBAAkBy9B,IAAqBD,EAAcX,iBAC7DR,EAASjuB,IAAInQ,MAAMw/B,EAAkB,0DACrC9nC,WAAW2D,iBAAiBqH,GAC5B,MAAOA,GAEf,KAAI88B,YAA4B/9B,UAASzJ,eAKrC,MADAomC,GAASjuB,IAAInQ,MAAMw/B,EAAkB,8BAC9B9nC,WAAW0C,YAJlBolC,GAAmBA,EAAiBvnC,SAQhDimC,EAAe1mC,UAAU2nC,eAAiB,SAAU7kB,EAAW8jB,EAAUqB,EAAkBf,EAAUM,GACjG,GAAIrmC,GAAQ5B,KACR2oC,GACA9lC,EAAG6lC,EAAiBX,YAAc,IAAOJ,EAAYA,EAAWe,EAAiBd,eACjF9kC,EAAG4lC,EAAiBR,WAAa,IAAOD,EAAaA,EAAYS,EAAiBd,eAYtF,OAVArkB,GAAUrkB,SAASqD,QAAQ,SAAUP,GACjC,GAAIoZ,QAAQlQ,kBAAkBlJ,GAAQ,CAClC,GAAIslC,GAAaD,EAASE,cAAcvlC,GACpC2J,EAAS27B,EAAW37B,OACpBi9B,EAAehnC,EAAMinC,sBAAsB7mC,EAAO0mC,OACvCvpC,KAAXwM,GAAwBhL,WAAW2D,iBAAiBqH,KACpDg9B,EAAgB/mC,EAAMknC,YAAY9mC,EAAOslC,EAAY37B,EAAQi9B,EAAcF,EAAkBC,EAAehB,EAAUM,OAI3HU,GAEXxB,EAAe1mC,UAAUsoC,MAAQ,SAAUC,EAAQr9B,EAAQg8B,GACvD,OAAQqB,GACJ,IAAK,OACD,MAAO,EACX,KAAK,SACD,MAAO,IAAOrB,EAAWh8B,EAAO5I,MACpC,KAAK,QACD,MAAO4kC,GAAWh8B,EAAO5I,QAGrCokC,EAAe1mC,UAAUwoC,MAAQ,SAAUC,EAAQv9B,EAAQs8B,GACvD,OAAQiB,GACJ,IAAK,MACD,MAAO,EACX,KAAK,SACD,MAAO,IAAOjB,EAAYt8B,EAAO3I,OACrC,KAAK,SACD,MAAOilC,GAAYt8B,EAAO3I,SAGtCmkC,EAAe1mC,UAAUooC,sBAAwB,SAAU7mC,EAAO0mC,GAC9D,GAAIF,GAAgBxmC,EAAMwmC,aAC1B,YAAsBrpC,KAAlBqpC,EACOE,EAEA1oC,KAAKmpC,OAAOT,EAAkBF,IAE7CrB,EAAe1mC,UAAU+mC,iBAAmB,SAAUvoC,GAIlD,IAHA,GAAI2C,GAAQ5B,KACRe,EAAU9B,EACVmqC,SACejqC,KAAZ4B,GAAuB,CAC1B,GAAIynC,GAAgBznC,EAAQynC,aAG5B,QAFsBrpC,KAAlBqpC,GACAY,EAAWnnC,KAAKumC,KAChBznC,YAAmB2J,UAASzJ,eAG5B,KAFAF,GAAUA,EAAQG,OAI1B,MAAOkoC,GAAW5M,UAAUroB,OAAO,SAAU7O,EAAGjF,GAAK,MAAOuB,GAAMunC,OAAO7jC,EAAGjF,IAAOL,KAAKqpC,4BAErFlC,IAEXltC,SAAQktC,eAAiBA,e;;;;;;;AChHzB,GAAIpnC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClB0T,WAAa,mBAAA1T,CAAQ,IACrBuG,WAAa,mBAAAvG,CAAQ,GACrBghB,QAAU,mBAAAhhB,CAAQ,GAClBkvC,cAAgB,mBAAAlvC,CAAQ,IACxBmvC,cAAgB,mBAAAnvC,CAAQ,IACxBovC,eAAiB,mBAAApvC,CAAQ,IACzBoD,eAAgC,SAAUmE,GAE1C,QAASnE,KACL,GAAIoE,GAAQD,EAAOwB,KAAKnD,OAASA,IAIjC,OAHA4B,GAAMuN,SAASm6B,cAAcG,aAAaxtB,KAAM,GAAIqtB,eAAcG,cAClE7nC,EAAMuN,SAASo6B,cAAcG,aAAaztB,KAAM,GAAIstB,eAAcG,cAClE9nC,EAAMuN,SAASq6B,eAAeG,cAAc1tB,KAAM,GAAIutB,gBAAeG,eAC9D/nC,EAEX,MARA7B,WAAUvC,EAAgBmE,GAQnBnE,GACTsQ,WAAWkS,iBACb/lB,SAAQuD,eAAiBA,cACzB,IAAID,UAA0B,WAC1B,QAASA,GAASqsC,EAAgB5gC,GAC9BhJ,KAAK4pC,eAAiBA,EACtB5pC,KAAKgJ,OAASA,EAWlB,MATAzL,GAASkD,UAAU2mC,OAAS,SAAUyC,GAClC,GAAIC,kBAAiBD,EAAoB7pC,KAAK4pC,eAAgB5pC,KAAKgJ,QAAQo+B,UAE/E7pC,EAAWgK,YACPgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMiB,iBAC5C4K,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkB,UAC5CuK,WAAW,qBAAsBxK,eAAgBzD,UAClDwD,KAGPtD,SAAQsD,SAAWA,QACnB,IAAIusC,kBAAkC,WAClC,QAASA,GAAiBD,EAAoBD,EAAgBxwB,GAC1D,GAAIxX,GAAQ5B,IACZA,MAAK6pC,mBAAqBA,EAC1B7pC,KAAK4pC,eAAiBA,EACtB5pC,KAAKoZ,IAAMA,EACXpZ,KAAK+pC,gBACLF,EAAmBtnC,QAAQ,SAAUkO,EAAMxR,GACnCmc,QAAQpQ,kBAAkB/L,IAC1B2C,EAAMmoC,aAAa9nC,KAAKhD,KAyCpC,MAtCA6qC,GAAiBrpC,UAAU8mC,cAAgB,SAAUtoC,GACjD,GAAIqoC,GAAatnC,KAAK6pC,mBAAmB/oC,IAAI7B,GACzC0M,EAAS1M,EAAQ0M,MAYrB,OAXIyP,SAAQpQ,kBAAkB/L,IAAYe,KAAK+pC,aAAa3nC,QAAQnD,IAAY,IAC5E0M,EAAS3L,KAAKgqC,SAAS/qC,IAEtBqoC,IACDA,GACI37B,OAAQA,EACR28B,eAAe,EACf2B,kBAAkB,GAEtBjqC,KAAK6pC,mBAAmBnmC,IAAIzE,EAASqoC,IAElCA,GAEXwC,EAAiBrpC,UAAU2mC,OAAS,WAChC,KAAOpnC,KAAK+pC,aAAaxqC,OAAS,GAAG,CACjC,GAAIN,GAAUe,KAAK+pC,aAAa,EAChC/pC,MAAKgqC,SAAS/qC,KAGtB6qC,EAAiBrpC,UAAUupC,SAAW,SAAU/qC,GAC5C,GAAIsC,GAAQvB,KAAK+pC,aAAa3nC,QAAQnD,EAClCsC,IAAS,GACTvB,KAAK+pC,aAAa7nC,OAAOX,EAAO,EACpC,IAAI6lC,GAASpnC,KAAK4pC,eAAe9oC,IAAI7B,EAAQmoC,OACzCA,IACAA,EAAOA,OAAOnoC,EAASe,KAC3B,IAAIsnC,GAAatnC,KAAK6pC,mBAAmB/oC,IAAI7B,EAC7C,YAAmBE,KAAfmoC,OAAkDnoC,KAAtBmoC,EAAW37B,OAChC27B,EAAW37B,QAGlB3L,KAAKoZ,IAAInQ,MAAMhK,EAAS,iBACjB0B,WAAW0C,eAGnBymC,IAEX7vC,SAAQ6vC,iBAAmBA,iB;;;;;;;AChH3B,GAAI/pC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI4T,YAAa,mBAAA1T,CAAQ,IACrBmO,YAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClB8vC,sBAAuC,SAAUvoC,GAEjD,QAASuoC,GAAsBC,GAC3B,GAAIvoC,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADAmqC,GAAuB5nC,QAAQ,SAAU6nC,GAAW,MAAOxoC,GAAMuN,SAASi7B,EAAQ9M,KAAM,GAAI8M,MACrFxoC,EAOX,MAXA7B,WAAUmqC,EAAuBvoC,GAMjCuoC,EAAwB3iC,YACpBgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAMQ,iBAAkBqL,QAAQ,EAAGG,YAAYtN,YAC1F+M,WAAW,qBAAsB3I,SAClC6qC,IAELp8B,WAAWkS,iBACb/lB,SAAQiwC,sBAAwBA,sB;;;;;;;ACxChC,GAAInqC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIkhB,SAAU,mBAAAhhB,CAAQ,GAClBihB,QAAU,mBAAAjhB,CAAQ,IAClBiwC,QAAyB,SAAU1oC,GAEnC,QAAS0oC,KACL,GAAIzoC,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAM0oC,SAAU,EACT1oC,EAKX,MATA7B,WAAUsqC,EAAS1oC,GAMnB0oC,EAAQ5pC,UAAUe,WAAa,SAAUC,GACrC,MAAOA,KAAY2Z,QAAQ/P,eAAiB5J,IAAY4Z,QAAQqL,aAAejlB,IAAY2Z,QAAQjQ,wBAEhGk/B,GACTjvB,QAAQvP,cACV5R,SAAQowC,QAAUA,Q;;;;;;;ACvBlB,QAASjN,cAAan+B,GAClB,MAAOA,GAAQuC,WAAWvH,QAAQswC,gBAAkB,YAActrC,GAHtElF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQswC,cAAgB9tC,OAAO,iBAI/BxC,QAAQmjC,aAAeA,a;;;;;;;ACLvB,GAAIr9B,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtB2kB,YAAc,mBAAA3kB,CAAQ,IACtBsQ,SAAW,mBAAAtQ,CAAQ,GACnB+Y,cAAgB,mBAAA/Y,CAAQ,IACxBghB,QAAU,mBAAAhhB,CAAQ,IAClBowC,cAA+B,SAAU7oC,GAEzC,QAAS6oC,GAAc52B,EAAO62B,EAAc5hC,EAAS6hC,OACtB,KAAvBA,IAAiCA,GAAqB,EAC1D,IAAI9oC,GAAQD,EAAOwB,KAAKnD,KAAM6I,IAAY7I,IAI1C,OAHA4B,GAAMgS,MAAQA,EACdhS,EAAM6oC,aAAeA,EACrB7oC,EAAM8oC,mBAAqBA,EACpB9oC,EAkBX,MAzBA7B,WAAUyqC,EAAe7oC,GASzB6oC,EAAc/pC,UAAUwY,MAAQ,SAAUpI,EAAGhI,GACzC,IAAK,GAAIlF,GAAK,EAAGC,EAAK5D,KAAKyqC,aAAc9mC,EAAKC,EAAGrE,OAAQoE,IAAM,CAC3D,GAAIgnC,GAAc/mC,EAAGD,GACjB1E,EAAU0rC,EAAY1rC,OACD,QAArB0rC,EAAY1gC,KACZhL,EAAQsiC,QAAU1wB,EAEQ,QAArB85B,EAAY1gC,OACjBhL,EAAQsiC,QAAU,EAAI1wB,EACZ,IAANA,GAAW7Q,KAAK0qC,oBAAsBzrC,YAAmByL,UAASzJ,eAClEhC,EAAQiC,OAAOiB,OAAOlD,IAIlC,MAAOe,MAAK4T,OAET42B,GACTzrB,YAAYzG,UACdre,SAAQuwC,cAAgBA,aACxB,IAAII,cAA8B,WAC9B,QAASA,MAaT,MAXAA,GAAanqC,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAI/C,MAHImc,SAAQqL,WAAWxnB,IACnBkU,cAAc7D,QAAQC,EAAO,UAAWtQ,EAAQsiC,SAE7ChyB,GAEXq7B,EAAanqC,UAAUiV,WAAa,aAEpCk1B,EAAerjC,YACXgB,YAAY9N,cACbmwC,KAGP3wC,SAAQ2wC,aAAeA,a;;;;;;;ACnEvB,GAAI7qC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0sB,cAAe,mBAAAxsB,CAAQ,IACvBsR,eAAiB,mBAAAtR,CAAQ,GACzBghB,QAAU,mBAAAhhB,CAAQ,IAClBywC,WAA4B,WAC5B,QAASA,GAAWvgC,GAChBtK,KAAKsK,UAAYA,EACjBtK,KAAK4a,KAAOiwB,EAAW5uB,KAG3B,MADA4uB,GAAW5uB,KAAO,OACX4uB,IAEX5wC,SAAQ4wC,WAAaA,UACrB,IAAIC,mBAAmC,SAAUnpC,GAE7C,QAASmpC,KACL,MAAkB,QAAXnpC,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAS/D,MAXAD,WAAU+qC,EAAmBnpC,GAI7BmpC,EAAkBrqC,UAAU+U,YAAc,SAAU/N,EAAQ4I,GACxD,GAAI06B,GAAiBr/B,eAAef,oBAAoBlD,EAAQ2T,QAAQ4vB,WACxE,YAAuB7rC,KAAnB4rC,GACQ,GAAIF,YAAWE,EAAevrC,SAIvCsrC,GACTlkB,aAAa5oB,cACf/D,SAAQ6wC,kBAAoBA,kB;;;;;;;ACrC5B,GAAI/qC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIysB,YAAa,mBAAAvsB,CAAQ,IACrB0sB,WAAa,mBAAA1sB,CAAQ,IACrB0rC,WAA4B,WAC5B,QAASA,KACL9lC,KAAK4a,KAAOkrB,EAAW7pB,KAG3B,MADA6pB,GAAW7pB,KAAO,OACX6pB,IAEX7rC,SAAQ6rC,WAAaA,UACrB,IAAIC,YAA4B,WAC5B,QAASA,KACL/lC,KAAK4a,KAAOmrB,EAAW9pB,KAG3B,MADA8pB,GAAW9pB,KAAO,OACX8pB,IAEX9rC,SAAQ8rC,WAAaA,UACrB,IAAIkF,qBAAqC,SAAUtpC,GAE/C,QAASspC,KACL,MAAkB,QAAXtpC,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAS/D,MAXAD,WAAUkrC,EAAqBtpC,GAI/BspC,EAAoBxqC,UAAUwZ,QAAU,SAAUhb,EAASoR,GACvD,MAAIsW,YAAWkD,iBAAiBxZ,EAAO,OAAQ,YACnC,GAAIy1B,aACZnf,WAAWkD,iBAAiBxZ,EAAO,OAAQ,UAAW,UAC9C,GAAI01B,iBAGbkF,GACTnkB,WAAWxpB,YACbrD,SAAQgxC,oBAAsBA,oB;;;;;;;ACzC9B,QAASC,cAAaC,EAAaC,GAC/B,IAAK,GAAI5rC,KAAM2rC,GACPA,EAAY5qC,eAAef,IAC3B4rC,EAAS5rC,EAAI2rC,EAAY3rC,IAwDrC,QAAS6rC,cAAa/pC,EAAMgqC,GACxB,GAAI/pC,EACAD,aAAgBoJ,UAAS1J,WACzBO,EAAQD,EAAKC,OAGbA,EAAQ,GAAImJ,UAASxH,YACrB3B,EAAMQ,IAAIT,GAEd,KAAK,GAAIqC,GAAK,EAAG4nC,EAAYD,EAAS3nC,EAAK4nC,EAAUhsC,OAAQoE,IAAM,CAC/D,GAAIshB,GAAQsmB,EAAU5nC,GAClB6nC,GAAqB,CACzB,QAAmBrsC,KAAf8lB,EAAMuV,UAA6Cr7B,KAAvB8lB,EAAMwmB,aAA4B,CAC9D,GAAI7/B,GAAWrK,EAAMwC,QAAQkhB,EAAMwmB,aACnC,QAAiBtsC,KAAbyM,OAAgDzM,KAAtByM,EAAS1M,SAAwB,CAC3D,GAAIO,GAAImM,EAAS1M,SAASkD,QAAQ6iB,EAAMuV,KACpC/6B,IAAK,QACeN,KAAhB8lB,EAAMymB,OAAuBzmB,EAAMwmB,eAAiBxmB,EAAM0mB,eAC1D//B,EAAS1M,SAASgD,OAAOzC,EAAG,EAAGwlB,EAAMymB,OACrCF,GAAqB,GAGrB5/B,EAAS1M,SAASgD,OAAOzC,EAAG,IAGpC8B,EAAMY,OAAO8iB,EAAMuV,OAG3B,IAAKgR,OAAsCrsC,KAAhB8lB,EAAMymB,WAA+CvsC,KAAxB8lB,EAAM0mB,cAA6B,CACvF,GAAI3P,GAAWz6B,EAAMwC,QAAQkhB,EAAM0mB,mBAClBxsC,KAAb68B,QAC0B78B,KAAtB68B,EAAS98B,WACT88B,EAAS98B,aACb88B,EAAS98B,SAAS+C,KAAKgjB,EAAMymB,UA9F7C3xC,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwQ,UAAW,mBAAAtQ,CAAQ,EAOvBH,SAAQixC,aAAeA,YACvB,IAAIU,cAA8B,WAC9B,QAASA,MAgDT,MA9CAA,GAAanrC,UAAUwkB,MAAQ,SAAUuV,EAAMkR,GAC3C,GAAInhC,KAGJ,OAFAvK,MAAK6rC,UAAUrR,EAAMjwB,GACrBvK,KAAK8rC,WAAWJ,EAAOnhC,GAChBA,GAEXqhC,EAAanrC,UAAUorC,UAAY,SAAU5sC,EAASsL,EAAQqwB,GAC1D,GAAI3V,GAAQ1a,EAAOtL,EAAQO,GAY3B,QAXcL,KAAV8lB,GACAA,EAAMuV,KAAOv7B,EACbgmB,EAAMwmB,aAAe7Q,IAGrB3V,GACIuV,KAAMv7B,EACNwsC,aAAc7Q,GAElBrwB,EAAOtL,EAAQO,IAAMylB,GAErBva,SAAS1L,SAASC,GAClB,IAAK,GAAI0E,GAAK,EAAGC,EAAK3E,EAAQC,SAAUyE,EAAKC,EAAGrE,OAAQoE,IAAM,CAC1D,GAAI3B,GAAQ4B,EAAGD,EACf3D,MAAK6rC,UAAU7pC,EAAOuI,EAAQtL,EAAQO,MAIlDosC,EAAanrC,UAAUqrC,WAAa,SAAU7sC,EAASsL,EAAQqwB,GAC3D,GAAI3V,GAAQ1a,EAAOtL,EAAQO,GAY3B,QAXcL,KAAV8lB,GACAA,EAAMymB,MAAQzsC,EACdgmB,EAAM0mB,cAAgB/Q,IAGtB3V,GACIymB,MAAOzsC,EACP0sC,cAAe/Q,GAEnBrwB,EAAOtL,EAAQO,IAAMylB,GAErBva,SAAS1L,SAASC,GAClB,IAAK,GAAI0E,GAAK,EAAGC,EAAK3E,EAAQC,SAAUyE,EAAKC,EAAGrE,OAAQoE,IAAM,CAC1D,GAAI3B,GAAQ4B,EAAGD,EACf3D,MAAK8rC,WAAW9pC,EAAOuI,EAAQtL,EAAQO,MAI5CosC,IAEX3xC,SAAQ2xC,aAAeA,aAuCvB3xC,QAAQoxC,aAAeA,a;;;;;;;ACnGvB,GAAItrC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,GAE1GnO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBuG,WAAa,mBAAAvG,CAAQ,GACrB2kB,YAAc,mBAAA3kB,CAAQ,IACtByhB,UAAY,mBAAAzhB,CAAQ,GACpB2xC,OAAS,mBAAA3xC,CAAQ,IACjBsQ,SAAW,mBAAAtQ,CAAQ,GACnB4xC,OAAS,mBAAA5xC,CAAQ,IACjBghB,QAAU,mBAAAhhB,CAAQ,IAClBihB,QAAU,mBAAAjhB,CAAQ,IAClBkhB,QAAU,mBAAAlhB,CAAQ,GAClBgmC,gBAAkB,mBAAAhmC,CAAQ,IAC1BsjC,QAAU,mBAAAtjC,CAAQ,IAClB6xC,iBAAmB,mBAAA7xC,CAAQ,IAC3B8xC,SAAW,mBAAA9xC,CAAQ,KAKnB+xC,kBAAmC,WACnC,QAASA,GAAkBC,EAAOltB,OACd,KAAZA,IAAsBA,GAAU,GACpClf,KAAKkf,QAAUA,EACflf,KAAK4a,KAAOyxB,mBAAmBpwB,SACd9c,KAAbitC,EAAM5sC,GACNQ,KAAK4lB,QAAUwmB,EAEfpsC,KAAKsrC,QAAUc,EAEvB,MAAOD,KAEXlyC,SAAQkyC,kBAAoBA,iBAC5B,IAAIE,oBAAoC,SAAU1qC,GAE9C,QAAS0qC,GAAmB7iC,GACxB,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADA4B,GAAM4H,OAASA,EACR5H,EAyNX,MA7NA7B,WAAUssC,EAAoB1qC,GAM9B0qC,EAAmB5rC,UAAU2e,QAAU,SAAUvW,GAC7C,GAAI+c,EAWJ,YAV4BzmB,KAAxBa,KAAKwJ,OAAOoc,QACZA,EAAU/c,EAAQkd,aAAa3X,WAAWpO,KAAKwJ,OAAOoc,UAGtDA,EAAU/c,EAAQkd,aAAa3X,WAAWvF,EAAQvH,UACtBnC,KAAxBa,KAAKwJ,OAAO8hC,SACZtrC,KAAKqrC,aAAazlB,EAAS5lB,KAAKwJ,OAAO8hC,QAASziC,IAExD7I,KAAK8lB,QAAUjd,EAAQvH,KACvBtB,KAAK4lB,QAAUA,EACR5lB,KAAKssC,cAActsC,KAAK8lB,QAAS9lB,KAAK4lB,QAAS/c,IAE1DwjC,EAAmB5rC,UAAU6rC,cAAgB,SAAUxmB,EAASF,EAAS/c,GACrE,OAA6B1J,KAAxBa,KAAKwJ,OAAO0V,UAAyBlf,KAAKwJ,OAAO0V,SAAY4G,EAAQtmB,KAAOomB,EAAQpmB,GAkBrF,MAFIsmB,GAAQ7b,OAAS2b,EAAQ3b,MAAQtJ,WAAW2D,iBAAiBwhB,EAAQ1iB,gBACrEwiB,EAAQxiB,aAAe0iB,EAAQ1iB,cAC5BwiB,CAjBP,IAAIulB,OAAc,EAClB,QAA4BhsC,KAAxBa,KAAKwJ,OAAO8hC,QAAuB,CAEnCH,GADc,GAAIc,kBAAiBL,cACb3mB,MAAMa,EAASF,OAGrCulB,GAAcnrC,KAAKusC,qBAAqBvsC,KAAKwJ,OAAO8hC,QAASxlB,EAASF,EAE1E,IAAI4mB,GAAkBxsC,KAAKysC,iBAAiB7mB,EAASulB,EAAatiC,EAClE,OAAI2jC,aAA2BztB,aAAYzG,UAChCk0B,EAAgB90B,QAEhB80B,GAQnBH,EAAmB5rC,UAAU4qC,aAAe,SAAU/pC,EAAMgqC,EAASziC,GAEjE,IAAK,GADDtH,GAAQD,EAAKC,MACRoC,EAAK,EAAG4nC,EAAYD,EAAS3nC,EAAK4nC,EAAUhsC,OAAQoE,IAAM,CAC/D,GAAIshB,GAAQsmB,EAAU5nC,EACtB,QAAmBxE,KAAf8lB,EAAMuV,KAAoB,CAC1B,GAAIv7B,GAAUsC,EAAMwC,QAAQkhB,EAAMuV,KAAKh7B,GACnCP,aAAmByL,UAASzJ,eAC5BhC,EAAQiC,OAAOiB,OAAOlD,GAE9B,OAAoBE,KAAhB8lB,EAAMymB,MAAqB,CAC3B,GAAIzsC,GAAU4J,EAAQkd,aAAa/X,cAAciX,EAAMymB,OACnD9/B,MAAW,OACazM,KAAxB8lB,EAAM0mB,gBACN//B,EAAWrK,EAAMwC,QAAQkhB,EAAM0mB,gBAC/B//B,YAAoBlB,UAAShJ,eAC7BkK,EAAS7J,IAAI9C,GAEbqC,EAAKS,IAAI9C,MAIzBotC,EAAmB5rC,UAAU8rC,qBAAuB,SAAUjB,EAASoB,EAAUC,GAE7E,IAAK,GADDpiC,MACK5G,EAAK,EAAGipC,EAAYtB,EAAS3nC,EAAKipC,EAAUrtC,OAAQoE,IAAM,CAC/D,GAAIshB,GAAQ2nB,EAAUjpC,GAClBkpC,KACArtC,MAAKL,OACUA,KAAf8lB,EAAMuV,OACNh7B,EAAKylB,EAAMuV,KAAKh7B,GAChBqtC,EAAUrS,KAAOkS,EAASnrC,MAAMwC,QAAQvE,GACxCqtC,EAAUpB,aAAexmB,EAAMwmB,kBAEftsC,KAAhB8lB,EAAMymB,QACNlsC,EAAKylB,EAAMymB,MAAMlsC,GACjBqtC,EAAUnB,MAAQiB,EAAUprC,MAAMwC,QAAQvE,GAC1CqtC,EAAUlB,cAAgB1mB,EAAM0mB,mBAEzBxsC,KAAPK,IACA+K,EAAO/K,GAAMqtC,GAErB,MAAOtiC,IAEX8hC,EAAmB5rC,UAAUgsC,iBAAmB,SAAU7mB,EAASulB,EAAatiC,GAC5E,GAAIjH,GAAQ5B,KACR8sC,GACAC,SAEJd,kBAAiBf,aAAaC,EAAa,SAAU3rC,EAAIylB,GACrD,OAAmB9lB,KAAf8lB,EAAMuV,UAAsCr7B,KAAhB8lB,EAAMymB,MAElC9pC,EAAMorC,cAAc/nB,EAAMuV,KAAMvV,EAAMymB,MAAOoB,OAE5C,QAAoB3tC,KAAhB8lB,EAAMymB,MAAqB,CAEhC,GAAIA,GAAQzmB,EAAMymB,KACdtwB,SAAQqL,WAAWilB,KACnBA,EAAMnK,QAAU,EAChBuL,EAAcC,MAAM9qC,MAChBhD,QAASysC,EACTzhC,KAAM,YAIb,IAAIgb,EAAMuV,eAAgB9vB,UAASzJ,cAAe,CAEnD,GAAIu5B,GAAOvV,EAAMuV,IACjB,IAAIpf,QAAQqL,WAAW+T,QAAgCr7B,KAAvB8lB,EAAMwmB,kBACKtsC,KAAnCymB,EAAQrkB,MAAMwC,QAAQy2B,EAAKh7B,IAAmB,CAC9C,GAAIw8B,GAAWpW,EAAQrkB,MAAMwC,QAAQkhB,EAAMwmB,aAC3C,IAAIzP,YAAoBtxB,UAAShJ,eAAgB,CAC7C,GAAIurC,GAAWpkC,EAAQkd,aAAa/X,cAAcwsB,EAClDwB,GAASj6B,IAAIkrC,GACbH,EAAcC,MAAM9qC,MAChBhD,QAASguC,EACThjC,KAAM,YAO9B,IAAIijC,GAAaltC,KAAKmtC,iBAAiBL,EAAelnB,EAAS/c,EAC/D,OAAIqkC,GAAW3tC,QAAU,EACd,GAAIwf,aAAYtF,kBAAkBmM,EAAS/c,EAASqkC,GAEhC,IAAtBA,EAAW3tC,OACT2tC,EAAW,GAGXtnB,GAGfymB,EAAmB5rC,UAAUusC,cAAgB,SAAUxS,EAAMkR,EAAOoB,GAChE,GAAIzxB,QAAQM,aAAa6e,IAASnf,QAAQM,aAAa+vB,GAAQ,CAC3D,GAAI0B,GAAU5S,EAAK1uB,SACfuhC,EAAW3B,EAAM5/B,QAChBnL,YAAW4F,aAAa6mC,EAAQvqC,EAAGwqC,EAASxqC,IAAOlC,WAAW4F,aAAa6mC,EAAQtqC,EAAGuqC,EAASvqC,SACpE3D,KAAxB2tC,EAAcnR,QACdmR,EAAcnR,UAClBmR,EAAcnR,MAAM15B,MAChBhD,QAASysC,EACTphC,UAAWohC,EAAMlsC,GACjB28B,aAAciR,EACdhR,WAAYiR,IAEhB3B,EAAM5/B,SAAWshC,GAGrB9xB,QAAQvQ,cAAcyvB,IAASlf,QAAQvQ,cAAc2gC,KAChD/qC,WAAW2D,iBAAiBonC,EAAM//B,QAQ7BhL,WAAW4F,aAAai0B,EAAK7uB,OAAO5I,MAAO2oC,EAAM//B,OAAO5I,QAC1DpC,WAAW4F,aAAai0B,EAAK7uB,OAAO3I,OAAQ0oC,EAAM//B,OAAO3I,cAC/B7D,KAA1B2tC,EAAcQ,UACdR,EAAcQ,YAClBR,EAAcQ,QAAQrrC,MAClBhD,QAASysC,EACT6B,eACIxqC,MAAOy3B,EAAK7uB,OAAO5I,MACnBC,OAAQw3B,EAAK7uB,OAAO3I,QAExBwqC,aACIzqC,MAAO2oC,EAAM//B,OAAO5I,MACpBC,OAAQ0oC,EAAM//B,OAAO3I,WAnB7B0oC,EAAM//B,QACF9I,EAAG6oC,EAAM//B,OAAO9I,EAChBC,EAAG4oC,EAAM//B,OAAO7I,EAChBC,MAAOy3B,EAAK7uB,OAAO5I,MACnBC,OAAQw3B,EAAK7uB,OAAO3I,SAoB5B06B,QAAQ3sB,aAAaypB,IAASkD,QAAQ3sB,aAAa26B,KACnDA,EAAMlwB,SAAWgf,EAAKhf,UAEtBgf,YAAgB9vB,UAAS1J,YAAc0qC,YAAiBhhC,UAAS1J,aACjE0qC,EAAMtoC,aAAeo3B,EAAKp3B,cAE1Bo3B,YAAgB4F,iBAAgBM,qBAAuBgL,YAAiBtL,iBAAgBM,sBACxFgL,EAAMpsB,OAASkb,EAAKlb,OACpBosB,EAAMnsB,KAAOib,EAAKjb,OAG1B8sB,EAAmB5rC,UAAU0sC,iBAAmB,SAAU18B,EAAMnP,EAAMuH,GAClE,GAAIqkC,KAIJ,IAHIz8B,EAAKs8B,MAAMxtC,OAAS,GACpB2tC,EAAWjrC,KAAK,GAAI8pC,QAAOvB,cAAclpC,EAAMmP,EAAKs8B,MAAOlkC,GAAS,QAErD1J,KAAfsR,EAAKkrB,OAAuBlrB,EAAKkrB,MAAMp8B,OAAS,EAAG,CAEnD,IAAK,GADDkuC,GAAW,GAAIjqC,KACVG,EAAK,EAAGC,EAAK6M,EAAKkrB,MAAOh4B,EAAKC,EAAGrE,OAAQoE,IAAM,CACpD,GAAInB,GAAOoB,EAAGD,EACd8pC,GAAS/pC,IAAIlB,EAAK8H,UAAW9H,GAEjC0qC,EAAWjrC,KAAK,GAAI+pC,QAAO7N,cAAc78B,EAAMmsC,EAAU,GAAIjqC,KAAKqF,GAAS,IAE/E,OAAqB1J,KAAjBsR,EAAK68B,SAAyB78B,EAAK68B,QAAQ/tC,OAAS,EAAG,CAEvD,IAAK,GADDmuC,GAAa,GAAIlqC,KACZmqC,EAAK,EAAGC,EAAKn9B,EAAK68B,QAASK,EAAKC,EAAGruC,OAAQouC,IAAM,CACtD,GAAIE,GAASD,EAAGD,EAChBD,GAAWhqC,IAAImqC,EAAO5uC,QAAQO,GAAIquC,GAEtCX,EAAWjrC,KAAK,GAAIiqC,UAAS4B,gBAAgBxsC,EAAMosC,EAAY7kC,GAAS,IAE5E,MAAOqkC,IAEXb,EAAmB5rC,UAAUsI,KAAO,SAAUF,GAC1C,MAAO7I,MAAKssC,cAActsC,KAAK4lB,QAAS5lB,KAAK8lB,QAASjd,IAE1DwjC,EAAmB5rC,UAAUyI,KAAO,SAAUL,GAC1C,MAAO7I,MAAKssC,cAActsC,KAAK8lB,QAAS9lB,KAAK4lB,QAAS/c,IAE1DwjC,EAAmBpwB,KAAO,cAC1BowB,EAAqB9kC,YACjBgB,YAAY9N,aACZuN,WAAW,qBAAsBmkC,qBAClCE,IAELxwB,UAAUpT,QACZxO,SAAQoyC,mBAAqBA,mB;;;;;;;ACnR7B,GAAItsC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBusB,WAAa,mBAAAvsB,CAAQ,IACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnByhB,UAAY,mBAAAzhB,CAAQ,GACpB0sB,WAAa,mBAAA1sB,CAAQ,IACrBghB,QAAU,mBAAAhhB,CAAQ,GAClBihB,QAAU,mBAAAjhB,CAAQ,IAClB2zC,WAAa,mBAAA3zC,CAAQ,IACrBkhB,QAAU,mBAAAlhB,CAAQ,IAOlB4zC,aAA8B,WAC9B,QAASA,GAAaC,EAAY/uB,OACd,KAAZA,IAAsBA,GAAU,GACpClf,KAAKiuC,WAAaA,EAClBjuC,KAAKkf,QAAUA,EACflf,KAAK4a,KAAOszB,cAAcjyB,KAE9B,MAAO+xB,KAEX/zC,SAAQ+zC,aAAeA,YAOvB,IAAIG,mBAAmC,WACnC,QAASA,GAAkBF,EAAYG,EAASC,EAASnvB,OACrC,KAAZA,IAAsBA,GAAU,GACpClf,KAAKiuC,WAAaA,EAClBjuC,KAAKouC,QAAUA,EACfpuC,KAAKquC,QAAUA,EACfruC,KAAKkf,QAAUA,EACflf,KAAK4a,KAAO0zB,mBAAmBryB,KAEnC,MAAOkyB,KAEXl0C,SAAQk0C,kBAAoBA,iBAC5B,IAAII,4BAA4C,SAAU5sC,GAEtD,QAAS4sC,GAA2BrvB,GAChC,GAAItd,GAAQD,EAAOwB,KAAKnD,OAASA,IAEjC,OADA4B,GAAMsd,QAAUA,EACTtd,EAwEX,MA5EA7B,WAAUwuC,EAA4B5sC,GAMtC4sC,EAA2B9tC,UAAUkJ,WAAa,SAAUiK,GACxD,GAAIhS,GAAQ5B,IACZ,IAAIsb,QAAQ1F,WAAWhC,GAAQ,CAC3B5T,KAAKqf,aACDC,OAAQ1L,EAAM0L,OACdC,KAAM3L,EAAM2L,KAEhB,IAAIivB,KAkBJ,IAjBAxuC,KAAKyuC,gBAAgBlsC,QAAQ,SAAU/C,GACnC,GAAIP,GAAU2U,EAAMrS,MAAMwC,QAAQvE,EAC9BP,IAAWmc,QAAQrQ,cAAc9L,IACjCuvC,EAAYvsC,KAAKL,EAAM8sC,iBAAiBzvC,EAASA,EAAQ0M,OAAQiI,MAE9C,IAAvB46B,EAAYjvC,QACZqU,EAAMrS,MAAM0C,MAAM1B,QAAQ,SAAUtD,GAC5Boc,QAAQtK,aAAa9R,IAAYA,EAAQuc,UAAYJ,QAAQrQ,cAAc9L,IAC3EuvC,EAAYvsC,KAAKL,EAAM8sC,iBAAiBzvC,EAASA,EAAQ0M,OAAQiI,MAGlD,IAAvB46B,EAAYjvC,QACZqU,EAAMrS,MAAM0C,MAAM1B,QAAQ,SAAUtD,GAC5Bmc,QAAQrQ,cAAc9L,IACtBuvC,EAAYvsC,KAAKL,EAAM8sC,iBAAiBzvC,EAASA,EAAQ0M,OAAQiI,MAGlD,IAAvB46B,EAAYjvC,OAAc,CAC1B,GAAIoM,GAAS6iC,EAAYr6B,OAAO,SAAU3P,EAAIC,GAAM,MAAO9D,YAAW4D,QAAQC,EAAIC,IAC9E9D,YAAW2D,iBAAiBqH,KAC5B3L,KAAKif,YAAcjf,KAAK2uC,eAAehjC,EAAQiI,OAI/D26B,EAA2B9tC,UAAUiuC,iBAAmB,SAAUzvC,EAAS0M,EAAQ6zB,GAC/E,MAAIvgC,aAAmByL,UAASzJ,eAAiBhC,EAAQiC,SAAWs+B,EACzDx/B,KAAK0uC,iBAAiBzvC,EAAQiC,OAAQjC,EAAQiC,OAAOwB,cAAciJ,GAAS6zB,GAE5E7zB,GAEf4iC,EAA2B9tC,UAAU2e,QAAU,SAAUvW,GAErD,MADA7I,MAAK2J,WAAWd,EAAQvH,MACjBtB,KAAKkJ,KAAKL,IAErB0lC,EAA2B9tC,UAAUsI,KAAO,SAAUF,GAClD,GAAI+K,GAAQ/K,EAAQvH,IACpB,IAAIga,QAAQ1F,WAAWhC,QAA+BzU,KAArBa,KAAKif,cAA8Bjf,KAAK4uC,MAAM5uC,KAAKif,YAAajf,KAAKqf,aAAc,CAChH,GAAIrf,KAAKkf,QACL,MAAO,IAAI6uB,YAAWvuB,kBAAkB5L,EAAO5T,KAAKif,YAAajf,KAAKqf,YAAaxW,GAAS6O,OAE5F9D,GAAM0L,OAAStf,KAAKqf,YAAYC,OAChC1L,EAAM2L,KAAOvf,KAAKqf,YAAYE,KAGtC,MAAO3L,IAEX26B,EAA2B9tC,UAAUyI,KAAO,SAAUL,GAClD,GAAI+K,GAAQ/K,EAAQvH,IACpB,IAAIga,QAAQ1F,WAAWhC,QAA+BzU,KAArBa,KAAKif,cAA8Bjf,KAAK4uC,MAAM5uC,KAAKif,YAAajf,KAAKqf,aAAc,CAChH,GAAIrf,KAAKkf,QACL,MAAO,IAAI6uB,YAAWvuB,kBAAkB5L,EAAO5T,KAAKqf,YAAarf,KAAKif,YAAapW,GAAS6O,OAG5F9D,GAAM0L,OAAStf,KAAKif,YAAYK,OAChC1L,EAAM2L,KAAOvf,KAAKif,YAAYM,KAGtC,MAAO3L,IAEX26B,EAA2B9tC,UAAUmuC,MAAQ,SAAUC,EAAKC,GACxD,MAAOD,GAAItvB,OAASuvB,EAAIvvB,MAAQsvB,EAAIvvB,OAAOzc,IAAMisC,EAAIxvB,OAAOzc,GAAKgsC,EAAIvvB,OAAOxc,IAAMgsC,EAAIxvB,OAAOxc,GAE1FyrC,GACT1yB,UAAUpT,QACZxO,SAAQs0C,2BAA6BA,0BACrC,IAAIL,eAA+B,SAAUvsC,GAEzC,QAASusC,GAAc1kC,GACnB,GAAI5H,GAAQD,EAAOwB,KAAKnD,KAAMwJ,EAAO0V,UAAYlf,IAEjD,OADA4B,GAAM4H,OAASA,EACR5H,EAmBX,MAvBA7B,WAAUmuC,EAAevsC,GAMzBusC,EAAcztC,UAAUguC,cAAgB,WACpC,MAAOzuC,MAAKwJ,OAAOykC,YAEvBC,EAAcztC,UAAUkuC,eAAiB,SAAUhjC,EAAQiI,GACvD,GAAKjT,WAAW2D,iBAAiBsP,EAAMxQ,cAAvC,CAGA,GAAIwE,GAAIjH,WAAWoE,OAAO4G,EAC1B,QACI2T,QACIzc,EAAG+E,EAAE/E,EAAI,GAAM+Q,EAAMxQ,aAAaL,MAClCD,EAAG8E,EAAE9E,EAAI,GAAM8Q,EAAMxQ,aAAaJ,QAEtCuc,KAAM,KAGd2uB,EAAcjyB,KAAO,SACdiyB,GACTK,2BACFt0C,SAAQi0C,cAAgBA,aACxB,IAAII,oBAAoC,SAAU3sC,GAE9C,QAAS2sC,GAAmB9kC,GACxB,GAAI5H,GAAQD,EAAOwB,KAAKnD,KAAMwJ,EAAO0V,UAAYlf,IAEjD,OADA4B,GAAM4H,OAASA,EACR5H,EAyBX,MA7BA7B,WAAUuuC,EAAoB3sC,GAM9B2sC,EAAmB7tC,UAAUguC,cAAgB,WACzC,MAAOzuC,MAAKwJ,OAAOykC,YAEvBK,EAAmB7tC,UAAUkuC,eAAiB,SAAUhjC,EAAQiI,GAC5D,GAAKjT,WAAW2D,iBAAiBsP,EAAMxQ,cAAvC,CAGA,GAAIwE,GAAIjH,WAAWoE,OAAO4G,GACtBojC,MAAgC5vC,KAAxBa,KAAKwJ,OAAO4kC,QAClB,EACA,EAAIpuC,KAAKwJ,OAAO4kC,QAClB7uB,EAAO3f,KAAK+E,IAAIiP,EAAMxQ,aAAaL,OAAS4I,EAAO5I,MAAQgsC,GAAQn7B,EAAMxQ,aAAaJ,OAAS2I,EAAO3I,OAAS+rC,EAGnH,YAF4B5vC,KAAxBa,KAAKwJ,OAAO6kC,UACZ9uB,EAAO3f,KAAK+E,IAAI4a,EAAMvf,KAAKwJ,OAAO6kC,WAElC/uB,QACIzc,EAAG+E,EAAE/E,EAAI,GAAM+Q,EAAMxQ,aAAaL,MAAQwc,EAC1Czc,EAAG8E,EAAE9E,EAAI,GAAM8Q,EAAMxQ,aAAaJ,OAASuc,GAE/CA,KAAMA,KAGd+uB,EAAmBryB,KAAO,MACnBqyB,GACTC,2BACFt0C,SAAQq0C,mBAAqBA,kBAC7B,IAAIU,wBAAwC,SAAUrtC,GAElD,QAASqtC,KACL,MAAkB,QAAXrtC,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAS/D,MAXAD,WAAUivC,EAAwBrtC,GAIlCqtC,EAAuBvuC,UAAUwZ,QAAU,SAAUhb,EAASoR,GAC1D,MAAIsW,YAAWkD,iBAAiBxZ,EAAO,OAAQ,UAAW,UAC9C,GAAI29B,mBACZrnB,WAAWkD,iBAAiBxZ,EAAO,OAAQ,UAAW,UAC9C,GAAI89B,4BAGba,GACTloB,WAAWxpB,YACbrD,SAAQ+0C,uBAAyBA,uB;;;;;;;AChNjC,GAAIjvC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnBghB,QAAU,mBAAAhhB,CAAQ,IAClBihB,QAAU,mBAAAjhB,CAAQ,IAKlBsmC,oBAAqC,SAAU/+B,GAE/C,QAAS++B,GAAoBn/B,GACzB,GAAIK,GAAQD,EAAOwB,KAAKnD,KAAMuB,IAAUvB,IAIxC,OAHA4B,GAAM0d,QAAWzc,EAAG,EAAGC,EAAG,GAC1BlB,EAAM2d,KAAO,EACb3d,EAAM0a,QAAS,EACR1a,EA+BX,MArCA7B,WAAU2gC,EAAqB/+B,GAQ/B++B,EAAoBjgC,UAAUe,WAAa,SAAUC,GACjD,MAAOA,KAAY2Z,QAAQvF,iBAAmBpU,IAAY4Z,QAAQmiB,eAEtEkD,EAAoBjgC,UAAUiC,cAAgB,SAAUC,GACpD,GAAI4H,IACA1H,GAAIF,EAAME,EAAI7C,KAAKsf,OAAOzc,GAAK7C,KAAKuf,KACpCzc,GAAIH,EAAMG,EAAI9C,KAAKsf,OAAOxc,GAAK9C,KAAKuf,KACpCxc,OAAQ,EACRC,QAAS,EAMb,OAJIrC,YAAWiC,SAASD,KACpB4H,EAAOxH,MAAQJ,EAAMI,MAAQ/C,KAAKuf,KAClChV,EAAOvH,OAASL,EAAMK,OAAShD,KAAKuf,MAEjChV,GAEXm2B,EAAoBjgC,UAAUwC,cAAgB,SAAUN,GACpD,GAAI4H,IACA1H,EAAIF,EAAME,EAAI7C,KAAKuf,KAAQvf,KAAKsf,OAAOzc,EACvCC,EAAIH,EAAMG,EAAI9C,KAAKuf,KAAQvf,KAAKsf,OAAOxc,EACvCC,OAAQ,EACRC,QAAS,EAMb,OAJIrC,YAAWiC,SAASD,IAAUhC,WAAW2D,iBAAiB3B,KAC1D4H,EAAOxH,MAAQJ,EAAMI,MAAQ/C,KAAKuf,KAClChV,EAAOvH,OAASL,EAAMK,OAAShD,KAAKuf,MAEjChV,GAEJm2B,GACTh2B,SAAS1J,WACX/G,SAAQymC,oBAAsBA,oB;;;;;;;AC3D9B,GAAIn5B,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBmrC,iBAAmB,mBAAAnrC,CAAQ,IAC3BirC,YAAc,mBAAAjrC,CAAQ,IACtB60C,eAAiB,mBAAA70C,CAAQ,IAmBzB0D,YAA6B,WAC7B,QAASA,GAAYwV,EAAkBkyB,EAAuBwB,GAC1DhnC,KAAKsT,iBAAmBA,EACxBtT,KAAKgnC,cAAgBA,EACrBhnC,KAAK2J,WAAW67B,GAgBpB,MAdA1nC,GAAY2C,UAAUkJ,WAAa,SAAUC,GAEzCA,EAASE,gBAAgBu7B,YAAYxf,iBAErCjc,EAASuF,SAASk2B,YAAY3f,mBAAmBzJ,KAAMjc,MACvD4J,EAASuF,SAAS8/B,eAAe7yB,gBAAgBH,KAAMjc,OAE3DlC,EAAcyJ,YACVgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5C4L,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMK,wBAC5CwL,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CqJ,WAAW,qBAAsBjO,OAAQwrC,iBAAiB3oC,sBAAuB7C,UAClF+D,KAGP7D,SAAQ6D,YAAcA,Y;;;;;;;ACrDtB,QAASoxC,aAAY7+B,GACjB,MAAI8Z,SACO9Z,EAAMia,QAENja,EAAM+Z,QAGrB,QAASD,SACL,OAAsD,IAA/C3J,OAAO2uB,UAAUC,UAAUhtC,QAAQ,OAG9C,QAASitC,aAAYC,GACjB,GAAIA,GAAyB,mBAAX9uB,SAA0BA,OAAO+uB,SAAU,CACzD,GAAIC,GAAU,EAKd,OAJIhvB,QAAO+uB,SAASE,WAChBD,GAAWhvB,OAAO+uB,SAASE,SAAW,MACtCjvB,OAAO+uB,SAASG,OAChBF,GAAWhvB,OAAO+uB,SAASG,MACxBF,EAAQjwC,OAAS,IAAM+vC,EAAIK,WAAWH,GAEjD,OAAO,EAzBXz1C,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAWtDD,QAAQi1C,YAAcA,YAItBj1C,QAAQkwB,MAAQA,MAYhBlwB,QAAQo1C,YAAcA,Y;;;;;;;ACgBtB,QAASO,SAAQxD,GACb,GAAIA,EAAMhtC,cAAgBC,MACtB,MAAO+sC,EAEX,IAAI7hC,KAEJ,OADA6hC,GAAM7pC,QAAQ,SAAUtD,GAAW,MAAOsL,GAAOtI,KAAKhD,KAC/CsL,EAOX,QAASslC,gBAAezD,EAAOhB,GAC3B,MAAO,IAAIjJ,oBAAmB,WAAc,MAAO2N,gBAAe1D,IAAW,SAAU2D,GACnF,GAAIxlC,EACJ,IACIA,EAASwlC,EAASh1B,cACZxQ,EAAO+3B,OAAS8I,EAAS7gC,EAAOrQ,OAC1C,OAAOqQ,KAOf,QAASrG,aAAYkoC,EAAOhB,GACxB,MAAO,IAAIjJ,oBAAmB,WAAc,MAAO2N,gBAAe1D,IAAW,SAAU2D,GACnF,GAAInsC,GAAKmsC,EAASh1B,OAAQunB,EAAO1+B,EAAG0+B,KAAMpoC,EAAQ0J,EAAG1J,KACrD,OAAIooC,GACOroC,QAAQ+1C,aAEN1N,MAAM,EAAOpoC,MAAOkxC,EAASlxC,MAOlD,QAAS41C,gBAAeG,GACpB,GAAIvW,GAASuW,EAAWxzC,OAAOszC,SAC/B,IAAsB,kBAAXrW,GACP,MAAOA,GAAOv2B,KAAK8sC,EAEvB,IAAI1wC,GAAS0wC,EAAW1wC,MACxB,OAAsB,gBAAXA,IAAuBA,GAAU,EACjC,GAAI2wC,eAAcD,IAEpBl1B,KAAM,WAAc,MAAO9gB,SAAQ+1C,cA3FhDj2C,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GAItD,IAAIioC,oBAAoC,WACpC,QAASA,GAAmBgO,EAASC,GACjCpwC,KAAKmwC,QAAUA,EACfnwC,KAAKowC,OAASA,EA8BlB,MA5BAjO,GAAmB1hC,UAAUhE,OAAOszC,UAAY,WAC5C,GAAInuC,GAAQ5B,KACR+vC,GAAYnsC,GACR6jB,MAAOznB,KAAKmwC,UACZp1B,KAAM,WAAc,MAAOnZ,GAAMwuC,OAAOL,EAAStoB,SAErD7jB,EAAGnH,OAAOszC,UAAY,WAAc,MAAOA,IAC3CnsC,EACJ,OAAOmsC,EACP,IAAInsC,IAERu+B,EAAmB1hC,UAAU6B,OAAS,SAAU8oC,GAC5C,MAAOyE,gBAAe7vC,KAAMorC,IAEhCjJ,EAAmB1hC,UAAU+N,IAAM,SAAU48B,GACzC,MAAOlnC,aAAYlE,KAAMorC,IAE7BjJ,EAAmB1hC,UAAU8B,QAAU,SAAU6oC,GAC7C,GAEI7gC,GAFAwlC,EAAW/vC,KAAKvD,OAAOszC,YACvBxuC,EAAQ,CAEZ,IACIgJ,EAASwlC,EAASh1B,WACG5b,KAAjBoL,EAAOrQ,OACPkxC,EAAS7gC,EAAOrQ,MAAOqH,GAC3BA,WACMgJ,EAAO+3B,OAEdH,IAEXloC,SAAQkoC,mBAAqBA,mBAY7BloC,QAAQ21C,QAAUA,QAClB31C,QAAQ+1C,YAAcj2C,OAAO0M,QAAS67B,MAAM,EAAMpoC,UAAOiF,KAazDlF,QAAQ41C,eAAiBA,eAazB51C,QAAQiK,YAAcA,WAkBtB,IAAIgsC,eAA+B,WAC/B,QAASA,GAAcr4B,GACnB7X,KAAK6X,MAAQA,EACb7X,KAAKuB,MAAQ,EAWjB,MATA2uC,GAAczvC,UAAUsa,KAAO,WAC3B,MAAI/a,MAAKuB,MAAQvB,KAAK6X,MAAMtY,QACf+iC,MAAM,EAAOpoC,MAAO8F,KAAK6X,MAAM7X,KAAKuB,UAEtCtH,QAAQ+1C,aAEvBE,EAAczvC,UAAUhE,OAAOszC,UAAY,WACvC,MAAO/vC,OAEJkwC,K;;;;;;;AC9GX,GAAI3oC,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBsD,UACJ,SAAWA,GACPA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAgB,MAAI,GAAK,QAClCA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAc,IAAI,GAAK,OACjCA,SAAWzD,QAAQyD,WAAazD,QAAQyD,aAC3C,IAAI2yC,YAA4B,WAC5B,QAASA,KACLrwC,KAAKswC,SAAW5yC,SAAS6yC,KA6B7B,MA3BAF,GAAW5vC,UAAUwI,MAAQ,SAAUunC,EAASC,GAE5C,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,IAGnC0sC,EAAW5vC,UAAU2lC,KAAO,SAAUoK,EAASC,GAE3C,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,IAGnC0sC,EAAW5vC,UAAUkwC,KAAO,SAAUH,EAASC,GAE3C,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,IAGnC0sC,EAAW5vC,UAAU2Y,IAAM,SAAUo3B,EAASC,GAE1C,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,IAGnC0sC,EAAa9oC,YACTgB,YAAY9N,cACb41C,KAGPp2C,SAAQo2C,WAAaA,UACrB,IAAIO,eAA+B,WAC/B,QAASA,GAAcN,EAAUO,OACZ,KAAbP,IAAuBA,EAAW5yC,SAAS0b,SAC3B,KAAhBy3B,IAA0BA,GAAgB5J,QAAS,KACvDjnC,KAAKswC,SAAWA,EAChBtwC,KAAK6wC,YAAcA,EA6DvB,MA3DAD,GAAcnwC,UAAUwI,MAAQ,SAAUunC,EAASC,GAE/C,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE/B,IAAI3D,KAAKswC,UAAY5yC,SAASuL,MAC1B,IACI6nC,QAAQ7nC,MAAMpH,MAAM2uC,EAASxwC,KAAK+wC,iBAAiBP,EAASC,EAASC,IAEzE,MAAOznC,MAEf2nC,EAAcnwC,UAAU2lC,KAAO,SAAUoK,EAASC,GAE9C,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE/B,IAAI3D,KAAKswC,UAAY5yC,SAAS0oC,KAC1B,IACI0K,QAAQ1K,KAAKvkC,MAAM2uC,EAASxwC,KAAK+wC,iBAAiBP,EAASC,EAASC,IAExE,MAAOznC,MAEf2nC,EAAcnwC,UAAUkwC,KAAO,SAAUH,EAASC,GAE9C,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE/B,IAAI3D,KAAKswC,UAAY5yC,SAASizC,KAC1B,IACIG,QAAQH,KAAK9uC,MAAM2uC,EAASxwC,KAAK+wC,iBAAiBP,EAASC,EAASC,IAExE,MAAOznC,MAEf2nC,EAAcnwC,UAAU2Y,IAAM,SAAUo3B,EAASC,GAE7C,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE/B,IAAI3D,KAAKswC,UAAY5yC,SAAS0b,IAC1B,IACI03B,QAAQ13B,IAAIvX,MAAM2uC,EAASxwC,KAAK+wC,iBAAiBP,EAASC,EAASC,IAEvE,MAAOznC,MAEf2nC,EAAcnwC,UAAUswC,iBAAmB,SAAUP,EAASC,EAASC,GACnE,GAAIM,EAMJ,OAJIA,GADmB,gBAAZR,GACEA,EAAQpxC,YAAYoQ,KAEpBghC,IACF,GAAIS,OACFC,qBAAuB,IAAMlxC,KAAK6wC,YAAY5J,QAAU,IAAM+J,EAAS,KAAOP,GAASr8B,OAAOs8B,IAE/GE,EAAgBrpC,YACZgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMmB,WAC5C0K,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CqJ,WAAW,qBAAsB2oB,OAAQ52B,UAC1C62C,KAGP32C,SAAQ22C,cAAgBA,c;;;;;;;+CC1HxB,QAAS9uB,UAASqvB,EAAIC,EAAMC,EAAMC,GAChC,GAAkB,kBAAPH,GACT,KAAM,IAAIxjB,WAAU,yCAEtB,IACI5L,GAAMtiB,EADN8W,EAAMzU,UAAUvC,MAEpB,QAAQgX,GACR,IAAK,GACL,IAAK,GACH,MAAOsL,SAAQC,SAASqvB,EAC1B,KAAK,GACH,MAAOtvB,SAAQC,SAAS,WACtBqvB,EAAGhuC,KAAK,KAAMiuC,IAElB,KAAK,GACH,MAAOvvB,SAAQC,SAAS,WACtBqvB,EAAGhuC,KAAK,KAAMiuC,EAAMC,IAExB,KAAK,GACH,MAAOxvB,SAAQC,SAAS,WACtBqvB,EAAGhuC,KAAK,KAAMiuC,EAAMC,EAAMC,IAE9B,SAGE,IAFAvvB,EAAO,GAAI1iB,OAAMkX,EAAM,GACvB9W,EAAI,EACGA,EAAIsiB,EAAKxiB,QACdwiB,EAAKtiB,KAAOqC,UAAUrC,EAExB,OAAOoiB,SAAQC,SAAS,WACtBqvB,EAAGtvC,MAAM,KAAMkgB,OArChBF,QAAQO,SAC0B,IAAnCP,QAAQO,QAAQhgB,QAAQ,QACW,IAAnCyf,QAAQO,QAAQhgB,QAAQ,QAAqD,IAArCyf,QAAQO,QAAQhgB,QAAQ,SAClE8V,OAAOje,QAAU6nB,SAEjB5J,OAAOje,QAAU4nB,QAAQC,S;;;;;;;ACQ3B,qCAAIyvB,QAASA,QAAW,SAASj6B,GAChC,YAEA,UAAoB,KAATA,GAA6C,mBAAd63B,YAA6B,eAAeqC,KAAKrC,UAAUC,YAArG,CAGA,GACGqC,GAAMn6B,EAAK3C,SAEX+8B,EAAU,WACX,MAAOp6B,GAAKq6B,KAAOr6B,EAAKs6B,WAAat6B,GAEpCu6B,EAAYJ,EAAIK,gBAAgB,+BAAgC,KAChEC,EAAoB,YAAcF,GAClCG,EAAQ,SAASC,GAClB,GAAI5hC,GAAQ,GAAI6hC,YAAW,QAC3BD,GAAKE,cAAc9hC,IAElB+hC,EAAY,eAAeZ,KAAKl6B,EAAK+6B,cAAgB/6B,EAAKg7B,OAC1DC,EAAe,eAAef,KAAKrC,UAAUC,WAC7CoD,EAAgB,SAASC,IACzBn7B,EAAKo7B,cAAgBp7B,EAAKwJ,YAAY,WACtC,KAAM2xB,IACJ,IAKFE,EAAS,SAASC,GACnB,GAAIC,GAAU,WACO,gBAATD,GACVlB,IAAUoB,gBAAgBF,GAE1BA,EAAKzwC,SAGP2e,YAAW+xB,EATiB,MAW3Bp+B,EAAW,SAASs+B,EAAWC,EAAa3iC,GAC7C2iC,KAAiB5+B,OAAO4+B,EAExB,KADA,GAAIvzC,GAAIuzC,EAAYzzC,OACbE,KAAK,CACX,GAAI6Q,GAAWyiC,EAAU,KAAOC,EAAYvzC,GAC5C,IAAwB,kBAAb6Q,GACV,IACCA,EAASnN,KAAK4vC,EAAW1iC,GAAS0iC,GACjC,MAAON,GACRD,EAAcC,MAKhBQ,EAAW,SAASC,GAGrB,MAAI,6EAA6E1B,KAAK0B,EAAKjpC,MACnF,GAAIkpC,OAAM7iB,OAAO+B,aAAa,OAAS6gB,IAAQjpC,KAAMipC,EAAKjpC,OAE3DipC,GAENE,EAAY,SAASF,EAAM1jC,EAAM6jC,GAC7BA,IACJH,EAAOD,EAASC,GAGjB,IAIGI,GAHAP,EAAY/yC,KACZiK,EAAOipC,EAAKjpC,KACZspC,EA3CoB,6BA2CZtpC,EAERupC,EAAe,WAChB/+B,EAASs+B,EAAW,qCAAqCU,MAAM,MAuCjE,IAFAV,EAAUW,WAAaX,EAAUY,KAE7B5B,EAUH,MATAuB,GAAa5B,IAAUkC,gBAAgBV,OACvCpyB,YAAW,WACV+wB,EAAUgC,KAAOP,EACjBzB,EAAUiC,SAAWtkC,EACrBwiC,EAAMH,GACN2B,IACAb,EAAOW,GACPP,EAAUW,WAAaX,EAAUgB,QA5CrB,WACZ,IAAKxB,GAAkBgB,GAASnB,IAAe96B,EAAK08B,WAAY,CAE/D,GAAIC,GAAS,GAAID,WAWjB,OAVAC,GAAOC,UAAY,WAClB,GAAI5E,GAAMiD,EAAgB0B,EAAO1pC,OAAS0pC,EAAO1pC,OAAO0M,QAAQ,eAAgB,wBACpEK,GAAKiG,KAAK+xB,EAAK,YAChBh4B,EAAKi4B,SAASsE,KAAOvE,GAChCA,MAAInwC,GACJ4zC,EAAUW,WAAaX,EAAUgB,KACjCP,KAEDS,EAAOE,cAAcjB,QACrBH,EAAUW,WAAaX,EAAUY,MAOlC,GAHKL,IACJA,EAAa5B,IAAUkC,gBAAgBV,IAEpCK,EACHj8B,EAAKi4B,SAASsE,KAAOP,MACf,CACOh8B,EAAKiG,KAAK+1B,EAAY,YAGlCh8B,EAAKi4B,SAASsE,KAAOP,GAGvBP,EAAUW,WAAaX,EAAUgB,KACjCP,IACAb,EAAOW,OAoBRc,EAAWhB,EAAU3yC,UACrB8wC,EAAS,SAAS2B,EAAM1jC,EAAM6jC,GAC/B,MAAO,IAAID,GAAUF,EAAM1jC,GAAQ0jC,EAAK1jC,MAAQ,WAAY6jC,GAI9D,OAAyB,mBAAdlE,YAA6BA,UAAUkF,iBAC1C,SAASnB,EAAM1jC,EAAM6jC,GAM3B,MALA7jC,GAAOA,GAAQ0jC,EAAK1jC,MAAQ,WAEvB6jC,IACJH,EAAOD,EAASC,IAEV/D,UAAUkF,iBAAiBnB,EAAM1jC,KAI1C4kC,EAASE,MAAQ,aACjBF,EAASV,WAAaU,EAAST,KAAO,EACtCS,EAASG,QAAU,EACnBH,EAASL,KAAO,EAEhBK,EAASnrC,MACTmrC,EAASI,aACTJ,EAASK,WACTL,EAASM,QACTN,EAASO,QACTP,EAASQ,QACTR,EAASS,WACR,KAEMtD,KAEY,mBAATrY,OAAwBA,MACb,mBAAX1Y,SAA0BA,QACjCxgB,KAAK80C,QAMa,oBAAX58B,SAA0BA,OAAOje,QAC1Cie,OAAOje,QAAQs3C,OAASA,OACI,uBAAXwD,EAAqC,OAAX,wBAAAA,EAAoC,OAAf,uBAAOC,EACvE,kCAAuB,WACrB,MAAOzD,QAAA;AAAA,oGAAAA,C;;;;;;;ACxLXx3C,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyT,cAAe,mBAAAvT,CAAQ,GACvBuB,eAAkB,WAClB,QAASA,MAcT,MAZAA,GAAe8E,UAAUw0C,uBAAyB,SAAUC,GAGxD,OACIC,0BAH4BptC,QAAQ4J,YAAYhE,aAAavG,YAAa8tC,GAI1EE,sBAHwBrtC,QAAQ4J,YAAYhE,aAAazG,OAAQguC,SAMzEv5C,EAAe8E,UAAU40C,sBAAwB,SAAUH,GAEvD,MAD4BntC,SAAQ4J,YAAYhE,aAAaxG,YAAa+tC,QAGvEv5C,IAEX1B,SAAQ0B,eAAiBA,e;;;;;;;ACnBzB5B,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrBm7C,mBAAqB,mBAAAn7C,CAAQ,KAC7BwB,OAAS,mBAAAxB,CAAQ,IACjBuT,aAAe,mBAAAvT,CAAQ,GACvBo7C,OAAU,WACV,QAASA,GAAOvrC,EAAMuF,EAAM4T,EAAmBqyB,GAC3Cz1C,KAAKnE,KAAOD,OAAOC,OACnBmE,KAAKiK,KAAOA,EACZjK,KAAKojB,kBAAoBA,EACzBpjB,KAAKwP,KAAO,GAAI+lC,oBAAmBG,gBAAgBlmC,GAAQ,IAC3DxP,KAAKmI,SAAW,GAAI9I,MACpB,IAAIs2C,GAAe,IACU,iBAAlBF,GACPE,EAAe,GAAIL,YAAW1nC,SAASD,aAAa/G,UAAW6uC,GAE1DA,YAAyBH,YAAW1nC,WACzC+nC,EAAeF,GAEE,OAAjBE,GACA31C,KAAKmI,SAASlG,KAAK0zC,GAkE3B,MA/DAH,GAAO/0C,UAAUm1C,OAAS,SAAUluC,GAChC,IAAK,GAAIjI,GAAI,EAAGA,EAAIO,KAAKmI,SAAS5I,OAAQE,IAAK,CAE3C,GADQO,KAAKmI,SAAS1I,GAChBiI,MAAQA,EACV,OAAO,EAGf,OAAO,GAEX8tC,EAAO/0C,UAAUoR,QAAU,WACvB,MAAO7R,MAAK41C,OAAOjoC,aAAa1G,mBAEpCuuC,EAAO/0C,UAAUo1C,aAAe,SAAUrmC,GACtC,MAAOxP,MAAK81C,WAAWnoC,aAAa1G,kBAAkBuI,IAE1DgmC,EAAO/0C,UAAUikB,QAAU,WACvB,MAAO1kB,MAAK41C,OAAOjoC,aAAa/G,YAEpC4uC,EAAO/0C,UAAUgkB,SAAW,WACxB,MAAOzkB,MAAKmI,SAAS4tC,KAAK,SAAUjkC,GAChC,MAAQA,GAAEpK,MAAQiG,aAAa3G,YAC1B8K,EAAEpK,MAAQiG,aAAa1G,kBACvB6K,EAAEpK,MAAQiG,aAAa9G,UACvBiL,EAAEpK,MAAQiG,aAAa7G,eACvBgL,EAAEpK,MAAQiG,aAAa/G,aAGpC4uC,EAAO/0C,UAAUu1C,WAAa,WAC1B,MAAOh2C,MAAK81C,WAAWnoC,aAAa5G,eAAc,IAEtDyuC,EAAO/0C,UAAUokB,YAAc,WAC3B,MAAI7kB,MAAK0kB,UACE1kB,KAAKmI,SAAS7F,OAAO,SAAUwP,GAAK,MAAOA,GAAEpK,MAAQiG,aAAa/G,YAAc,GAEpF,MAEX4uC,EAAO/0C,UAAUskB,cAAgB,WAC7B,MAAI/kB,MAAKykB,WACEzkB,KAAKmI,SAAS7F,OAAO,SAAUwP,GAClC,MAAQA,GAAEpK,MAAQiG,aAAa3G,YAC1B8K,EAAEpK,MAAQiG,aAAa1G,kBACvB6K,EAAEpK,MAAQiG,aAAa9G,UACvBiL,EAAEpK,MAAQiG,aAAa7G,eACvBgL,EAAEpK,MAAQiG,aAAa/G,YAG7B,MAEX4uC,EAAO/0C,UAAUw1C,gBAAkB,SAAUzmC,GACzC,MAAOxP,MAAK81C,WAAWnoC,aAAa/G,WAAW4I,IAEnDgmC,EAAO/0C,UAAUq1C,WAAa,SAAUpuC,GACpC,GAAI9F,GAAQ5B,IACZ,OAAO,UAAU9F,GACb,IAAK,GAAIuF,GAAI,EAAGA,EAAImC,EAAMuG,SAAS5I,OAAQE,IAAK,CAC5C,GAAIqS,GAAIlQ,EAAMuG,SAAS1I,EACvB,IAAIqS,EAAEpK,MAAQA,GAAOoK,EAAE5X,QAAUA,EAC7B,OAAO,EAGf,OAAO,IAGRs7C,IAEXv7C,SAAQu7C,OAASA,O;;;;;;;ACxFjBz7C,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIopC,uBAAwB,mBAAAlpC,CAAQ,IAChCwpC,oBAAsB,mBAAAxpC,CAAQ,IAC9B87C,oBAAuB,WACvB,QAASA,GAAoBnzB,GACzB/iB,KAAKwjC,SAAWzgB,EAChB/iB,KAAKm2C,mBAAqB,GAAI7S,uBAAsBK,kBAAkB3jC,KAAKwjC,UAC3ExjC,KAAKo2C,iBAAmB,GAAIxS,qBAAoBL,gBAAgBvjC,KAAKwjC,UAkDzE,MAhDA0S,GAAoBz1C,UAAUojC,KAAO,SAAUhgB,GAC3C,MAAO7jB,MAAKm2C,mBAAmBtS,KAAKhgB,IAExCqyB,EAAoBz1C,UAAUqjC,gBAAkB,SAAUt0B,GACtD,MAAOxP,MAAKm2C,mBAAmBrS,gBAAgBt0B,IAEnD0mC,EAAoBz1C,UAAUsjC,oBAAsB,WAChD,MAAO/jC,MAAKm2C,mBAAmBpS,uBAEnCmS,EAAoBz1C,UAAUujC,iBAAmB,SAAUptB,EAAK1c,GAC5D,MAAO8F,MAAKm2C,mBAAmBnS,iBAAiBptB,EAAK1c,IAEzDg8C,EAAoBz1C,UAAUwjC,iBAAmB,SAAU/iC,GACvD,MAAOlB,MAAKm2C,mBAAmBlS,iBAAiB/iC,IAEpDg1C,EAAoBz1C,UAAU0jC,gBAAkB,SAAU30B,GACtD,MAAOxP,MAAKm2C,mBAAmBhS,gBAAgB30B,IAEnD0mC,EAAoBz1C,UAAU2jC,iBAAmB,SAAUxtB,EAAK1c,GAC5D,MAAO8F,MAAKm2C,mBAAmB/R,iBAAiBxtB,EAAK1c,IAEzDg8C,EAAoBz1C,UAAU4jC,kBAAoB,SAAUC,GACxD,MAAOtkC,MAAKm2C,mBAAmB9R,kBAAkBC,IAErD4R,EAAoBz1C,UAAU8jC,iBAAmB,SAAUD,GACvD,MAAOtkC,MAAKm2C,mBAAmB5R,iBAAiBD,IAEpD4R,EAAoBz1C,UAAU+jC,qBAAuB,SAAUh1B,GAC3D,MAAOxP,MAAKm2C,mBAAmB3R,qBAAqBh1B,IAExD0mC,EAAoBz1C,UAAUikC,sBAAwB,SAAU9tB,EAAK1c,GACjE,MAAO8F,MAAKm2C,mBAAmBzR,sBAAsB9tB,EAAK1c,IAE9Dg8C,EAAoBz1C,UAAUgkC,oBAAsB,SAAUj1B,GAC1D,MAAOxP,MAAKm2C,mBAAmB1R,oBAAoBj1B,IAEvD0mC,EAAoBz1C,UAAUkkC,qBAAuB,SAAU/tB,EAAK1c,GAChE,MAAO8F,MAAKm2C,mBAAmBxR,qBAAqB/tB,EAAK1c,IAE7Dg8C,EAAoBz1C,UAAUmkC,uBAAyB,SAAU/gB,GAC7D,MAAO7jB,MAAKm2C,mBAAmBvR,uBAAuB/gB,IAE1DqyB,EAAoBz1C,UAAUokC,sBAAwB,SAAUhhB,GAC5D,MAAO7jB,MAAKm2C,mBAAmBtR,sBAAsBhhB,IAEzDqyB,EAAoBz1C,UAAUgjC,aAAe,SAAUC,GACnD,MAAO1jC,MAAKo2C,iBAAiB3S,aAAaC,IAEvCwS,IAEXj8C,SAAQi8C,oBAAsBA,oB;;;;;;;AC3D9Bn8C,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrBuT,aAAe,mBAAAvT,CAAQ,GACvB6B,mBAAqB,SAAU+nB,EAASH,GACxC,GAAI3iB,GAAS8iB,EAAQkgB,aACrB,OAAe,QAAXhjC,MACO2iB,EAAW3iB,IAAiBjF,mBAAmBiF,EAAQ2iB,IAMtE5pB,SAAQgC,mBAAqBA,kBAC7B,IAAIC,kBAAmB,SAAUwL,GAAO,MAAO,UAAUxN,GACrD,GAAI2pB,GAAa,SAAUG,GACvB,MAAmB,QAAZA,GAAuC,OAAnBA,EAAQvc,QAAmBuc,EAAQvc,OAAOquC,WAAWpuC,GAAKxN,GAGzF,OADA2pB,GAAWC,SAAW,GAAIwxB,YAAW1nC,SAASlG,EAAKxN,GAC5C2pB,GAEX5pB,SAAQiC,iBAAmBA,gBAC3B,IAAIC,iBAAkBD,iBAAiByR,aAAa/G,UACpD3M,SAAQkC,gBAAkBA,eAC1B,IAAIC,gBAAiB,SAAU6N,GAAQ,MAAO,UAAU+Z,GACpD,GAAIjB,GAAU,IACd,IAAgB,OAAZiB,EAAkB,CAElB,GADAjB,EAAUiB,EAAQqyB,SAAS,GACP,gBAATpsC,GAAmB,CAE1B,MADwB8Y,GAAQK,oBACHnZ,EAG7B,GAAI7K,GAAc4kB,EAAQqyB,SAAS,GAAG1yB,kBACtC,OAAO1Z,KAAS7K,EAGxB,OAAO,GAEXnF,SAAQmC,eAAiBA,e;;;;;;;ACpCzB,QAAS8oC,WAAUjgC,GACf,MAAoB,gBAANA,IAA+B,gBAANA,GAH3ClL,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQ4d,MAAQxY,MAAMwS,QAItB5X,QAAQirC,UAAYA,U;;;;;;;ACDpB,QAASoR,SAAQrxC,GAAK,WAAa9F,KAAN8F,EAC7B,QAASsxC,OAAMtxC,GAAK,WAAa9F,KAAN8F,EAE3B,QAASuxC,WAAUC,EAAQC,GACvB,MAAOD,GAAO/uC,MAAQgvC,EAAOhvC,KAAO+uC,EAAOv/B,MAAQw/B,EAAOx/B,IAE9D,QAASy/B,SAAQpnC,GACb,WAAqBpQ,KAAdoQ,EAAM2H,IAEjB,QAAS0/B,mBAAkB13C,EAAU23C,EAAUC,GAC3C,GAAIr3C,GAAaiI,EAAKqvC,EAAfvoC,IACP,KAAK/O,EAAIo3C,EAAUp3C,GAAKq3C,IAAUr3C,EAEpB,OADVs3C,EAAK73C,EAASO,SAGEN,MADZuI,EAAMqvC,EAAGrvC,OAEL8G,EAAI9G,GAAOjI,EAGvB,OAAO+O,GAOX,QAASwoC,MAAK7gC,EAAS8gC,GAYnB,QAASC,GAAYhd,GACjB,GAAI16B,GAAK06B,EAAI16B,GAAK,IAAM06B,EAAI16B,GAAK,GAC7BoI,EAAIsyB,EAAIid,UAAY,IAAMjd,EAAIid,UAAU1D,MAAM,KAAKz8B,KAAK,KAAO,EACnE,OAAOmuB,SAAQla,QAAQmsB,EAAI16B,QAAQwd,GAAK/K,cAAgB3vB,EAAKoI,YAAWzI,GAAW+6B,GAEvF,QAASmd,GAAWC,EAAUx0B,GAC1B,MAAO,YACH,GAAoB,KAAdA,EAAiB,CACnB,GAAIlX,GAAWwrC,EAAItjC,WAAWwjC,EAC9BF,GAAIp5B,YAAYpS,EAAU0rC,KAItC,QAASC,GAAUhoC,EAAOioC,GACtB,GAAI/3C,GAAGgR,EAAOlB,EAAMkB,SACPtR,KAATsR,GACI8lC,MAAM92C,EAAIgR,EAAKgnC,OAASlB,MAAM92C,EAAIA,EAAEu3C,QACpCv3C,EAAE8P,GACFkB,EAAOlB,EAAMkB,KAGrB,IAAIvR,GAAWqQ,EAAMrQ,SAAUgY,EAAM3H,EAAM2H,GAC3C,IAAY,MAARA,EACIo/B,QAAQ/mC,EAAM4H,QACd5H,EAAM4H,KAAO,IAEjB5H,EAAM2qB,IAAMkd,EAAIM,cAAcnoC,EAAM4H,UAEnC,QAAYhY,KAAR+X,EAAmB,CAExB,GAAIygC,GAAUzgC,EAAI9U,QAAQ,KACtBw1C,EAAS1gC,EAAI9U,QAAQ,IAAKu1C,GAC1BE,EAAOF,EAAU,EAAIA,EAAUzgC,EAAI3X,OACnCu4C,EAAMF,EAAS,EAAIA,EAAS1gC,EAAI3X,OAChCqX,GAAmB,IAAb+gC,IAA8B,IAAZC,EAAgB1gC,EAAIR,MAAM,EAAG9W,KAAK+E,IAAIkzC,EAAMC,IAAQ5gC,EAC5EgjB,EAAM3qB,EAAM2qB,IAAMqc,MAAM9lC,IAAS8lC,MAAM92C,EAAIgR,EAAK6F,IAAM8gC,EAAItF,gBAAgBryC,EAAGmX,GAC3EwgC,EAAIppC,cAAc4I,EAKxB,KAJIihC,EAAOC,GACP5d,EAAIrc,aAAa,KAAM3G,EAAIR,MAAMmhC,EAAO,EAAGC,IAC3CF,EAAS,GACT1d,EAAIrc,aAAa,QAAS3G,EAAIR,MAAMohC,EAAM,GAAG7gC,QAAQ,MAAO,MAC3DxX,EAAI,EAAGA,EAAIs4C,EAAIr3C,OAAOnB,SAAUE,EACjCs4C,EAAIr3C,OAAOjB,GAAGu4C,UAAWzoC,EAC7B,IAAI01B,GAAGptB,MAAM3Y,GACT,IAAKO,EAAI,EAAGA,EAAIP,EAASK,SAAUE,EAAG,CAClC,GAAIs3C,GAAK73C,EAASO,EACR,OAANs3C,GACAK,EAAIh6B,YAAY8c,EAAKqd,EAAUR,EAAIS,QAItCvS,IAAGC,UAAU31B,EAAM4H,OACxBigC,EAAIh6B,YAAY8c,EAAKkd,EAAIa,eAAe1oC,EAAM4H,MAElD1X,GAAI8P,EAAMkB,KAAKgnC,KACXlB,MAAM92C,KACFA,EAAEiB,QACFjB,EAAEiB,OAAOs3C,UAAWzoC,GACpB9P,EAAEy4C,QACFV,EAAmBv1C,KAAKsN,QAIhCA,GAAM2qB,IAAMkd,EAAIa,eAAe1oC,EAAM4H,KAEzC,OAAO5H,GAAM2qB,IAEjB,QAASie,GAAUC,EAAWC,EAAQC,EAAQC,EAAUzB,EAAQU,GAC5D,KAAOe,GAAYzB,IAAUyB,EAAU,CACnC,GAAIxB,GAAKuB,EAAOC,EACN,OAANxB,GACAK,EAAIoB,aAAaJ,EAAWb,EAAUR,EAAIS,GAAqBa,IAI3E,QAASI,GAAkBlpC,GACvB,GAAI9P,GAAGgxB,EAAGhgB,EAAOlB,EAAMkB,IACvB,QAAatR,KAATsR,EAAoB,CAGpB,IAFI8lC,MAAM92C,EAAIgR,EAAKgnC,OAASlB,MAAM92C,EAAIA,EAAEi5C,UACpCj5C,EAAE8P,GACD9P,EAAI,EAAGA,EAAIs4C,EAAIW,QAAQn5C,SAAUE,EAClCs4C,EAAIW,QAAQj5C,GAAG8P,EACnB,QAAuBpQ,KAAnBoQ,EAAMrQ,SACN,IAAKuxB,EAAI,EAAGA,EAAIlhB,EAAMrQ,SAASK,SAAUkxB,EAE5B,OADThxB,EAAI8P,EAAMrQ,SAASuxB,KACW,gBAANhxB,IACpBg5C,EAAkBh5C,IAMtC,QAASk5C,GAAaP,EAAWE,EAAQC,EAAUzB,GAC/C,KAAOyB,GAAYzB,IAAUyB,EAAU,CACnC,GAAIK,OAAM,GAAQ91B,MAAY,GAAQ+1B,MAAK,GAAQ9B,EAAKuB,EAAOC,EAC/D,IAAU,MAANxB,EACA,GAAIR,MAAMQ,EAAG7/B,KAAM,CAIf,IAHAuhC,EAAkB1B,GAClBj0B,EAAYi1B,EAAI51C,OAAO5C,OAAS,EAChCs5C,EAAKxB,EAAWN,EAAG7c,IAAKpX,GACnB81B,EAAM,EAAGA,EAAMb,EAAI51C,OAAO5C,SAAUq5C,EACrCb,EAAI51C,OAAOy2C,GAAK7B,EAAI8B,EACpBtC,OAAMqC,EAAM7B,EAAGtmC,OAAS8lC,MAAMqC,EAAMA,EAAInB,OAASlB,MAAMqC,EAAMA,EAAIz2C,QACjEy2C,EAAI7B,EAAI8B,GAGRA,QAIJzB,GAAIp5B,YAAYo6B,EAAWrB,EAAG7c,MAK9C,QAAS4e,GAAeV,EAAWW,EAAOC,EAAOxB,GAY7C,IAXA,GAOIyB,GACAC,EACAC,EACAd,EAVAe,EAAc,EAAGC,EAAc,EAC/BC,EAAYP,EAAMx5C,OAAS,EAC3Bg6C,EAAgBR,EAAM,GACtBS,EAAcT,EAAMO,GACpBG,EAAYT,EAAMz5C,OAAS,EAC3Bm6C,EAAgBV,EAAM,GACtBW,EAAcX,EAAMS,GAKjBL,GAAeE,GAAaD,GAAeI,GACzB,MAAjBF,EACAA,EAAgBR,IAAQK,GAEJ,MAAfI,EACLA,EAAcT,IAAQO,GAEA,MAAjBI,EACLA,EAAgBV,IAAQK,GAEJ,MAAfM,EACLA,EAAcX,IAAQS,GAEjBjD,UAAU+C,EAAeG,IAC9BE,EAAWL,EAAeG,EAAelC,GACzC+B,EAAgBR,IAAQK,GACxBM,EAAgBV,IAAQK,IAEnB7C,UAAUgD,EAAaG,IAC5BC,EAAWJ,EAAaG,EAAanC,GACrCgC,EAAcT,IAAQO,GACtBK,EAAcX,IAAQS,IAEjBjD,UAAU+C,EAAeI,IAC9BC,EAAWL,EAAeI,EAAanC,GACvCJ,EAAIoB,aAAaJ,EAAWmB,EAAcrf,IAAKkd,EAAIyC,YAAYL,EAAYtf,MAC3Eqf,EAAgBR,IAAQK,GACxBO,EAAcX,IAAQS,IAEjBjD,UAAUgD,EAAaE,IAC5BE,EAAWJ,EAAaE,EAAelC,GACvCJ,EAAIoB,aAAaJ,EAAWoB,EAAYtf,IAAKqf,EAAcrf,KAC3Dsf,EAAcT,IAAQO,GACtBI,EAAgBV,IAAQK,SAGJl6C,KAAhB85C,IACAA,EAAcrC,kBAAkBmC,EAAOK,EAAaE,IAExDJ,EAAWD,EAAYS,EAAchyC,KACjC4uC,QAAQ4C,IACR9B,EAAIoB,aAAaJ,EAAWb,EAAUmC,EAAelC,GAAqB+B,EAAcrf,KACxFwf,EAAgBV,IAAQK,KAGxBF,EAAYJ,EAAMG,GACdC,EAAUjiC,MAAQwiC,EAAcxiC,IAChCkgC,EAAIoB,aAAaJ,EAAWb,EAAUmC,EAAelC,GAAqB+B,EAAcrf,MAGxF0f,EAAWT,EAAWO,EAAelC,GACrCuB,EAAMG,OAAY/5C,GAClBi4C,EAAIoB,aAAaJ,EAAWe,EAAUjf,IAAKqf,EAAcrf,MAE7Dwf,EAAgBV,IAAQK,IAIhCD,GAAcE,GACdjB,EAAiC,MAAxBW,EAAMS,EAAY,GAAa,KAAOT,EAAMS,EAAY,GAAGvf,IACpEie,EAAUC,EAAWC,EAAQW,EAAOK,EAAaI,EAAWjC,IAEvD6B,EAAcI,GACnBd,EAAaP,EAAWW,EAAOK,EAAaE,GAGpD,QAASM,GAAWE,EAAUvqC,EAAOioC,GACjC,GAAI/3C,GAAGg4C,CACHlB,OAAM92C,EAAI8P,EAAMkB,OAAS8lC,MAAMkB,EAAOh4C,EAAEg4C,OAASlB,MAAM92C,EAAIg4C,EAAKsC,WAChEt6C,EAAEq6C,EAAUvqC,EAEhB,IAAI2qB,GAAM3qB,EAAM2qB,IAAM4f,EAAS5f,IAC3B6e,EAAQe,EAAS56C,SACjB63C,EAAKxnC,EAAMrQ,QACf,IAAI46C,IAAavqC,EAAjB,CAEA,OAAmBpQ,KAAfoQ,EAAMkB,KAAoB,CAC1B,IAAKhR,EAAI,EAAGA,EAAIs4C,EAAI5+B,OAAO5Z,SAAUE,EACjCs4C,EAAI5+B,OAAO1Z,GAAGq6C,EAAUvqC,EAC5B9P,GAAI8P,EAAMkB,KAAKgnC,KACXlB,MAAM92C,IAAM82C,MAAM92C,EAAIA,EAAE0Z,SACxB1Z,EAAEq6C,EAAUvqC,GAEhB+mC,QAAQ/mC,EAAM4H,MACVo/B,MAAMwC,IAAUxC,MAAMQ,GAClBgC,IAAUhC,GACV+B,EAAe5e,EAAK6e,EAAOhC,EAAIS,GAE9BjB,MAAMQ,IACPR,MAAMuD,EAAS3iC,OACfigC,EAAI4C,eAAe9f,EAAK,IAC5Bie,EAAUje,EAAK,KAAM6c,EAAI,EAAGA,EAAGx3C,OAAS,EAAGi4C,IAEtCjB,MAAMwC,GACXJ,EAAaze,EAAK6e,EAAO,EAAGA,EAAMx5C,OAAS,GAEtCg3C,MAAMuD,EAAS3iC,OACpBigC,EAAI4C,eAAe9f,EAAK,IAGvB4f,EAAS3iC,OAAS5H,EAAM4H,MAC7BigC,EAAI4C,eAAe9f,EAAK3qB,EAAM4H,MAE9Bo/B,MAAMkB,IAASlB,MAAM92C,EAAIg4C,EAAKwC,YAC9Bx6C,EAAEq6C,EAAUvqC,IAlPpB,GAAI9P,GAAGgxB,EAAGsnB,KACNX,MAAiBj4C,KAAX83C,EAAuBA,EAASiD,aAAajvB,OACvD,KAAKxrB,EAAI,EAAGA,EAAI06C,MAAM56C,SAAUE,EAE5B,IADAs4C,EAAIoC,MAAM16C,OACLgxB,EAAI,EAAGA,EAAIta,EAAQ5W,SAAUkxB,EAAG,CACjC,GAAIgnB,GAAOthC,EAAQsa,GAAG0pB,MAAM16C,QACfN,KAATs4C,GACAM,EAAIoC,MAAM16C,IAAIwC,KAAKw1C,GA8O/B,MAAO,UAAeqC,EAAUvqC,GAC5B,GAAI9P,GAAGy6B,EAAKh5B,EACRs2C,IACJ,KAAK/3C,EAAI,EAAGA,EAAIs4C,EAAIqC,IAAI76C,SAAUE,EAC9Bs4C,EAAIqC,IAAI36C,IAgBZ,KAfKk3C,QAAQmD,KACTA,EAAW5C,EAAY4C,IAEvBtD,UAAUsD,EAAUvqC,GACpBqqC,EAAWE,EAAUvqC,EAAOioC,IAG5Btd,EAAM4f,EAAS5f,IACfh5B,EAASk2C,EAAItjC,WAAWomB,GACxBqd,EAAUhoC,EAAOioC,GACF,OAAXt2C,IACAk2C,EAAIoB,aAAat3C,EAAQqO,EAAM2qB,IAAKkd,EAAIyC,YAAY3f,IACpDye,EAAaz3C,GAAS44C,GAAW,EAAG,KAGvCr6C,EAAI,EAAGA,EAAI+3C,EAAmBj4C,SAAUE,EACzC+3C,EAAmB/3C,GAAGgR,KAAKgnC,KAAKS,OAAOV,EAAmB/3C,GAE9D,KAAKA,EAAI,EAAGA,EAAIs4C,EAAIsC,KAAK96C,SAAUE,EAC/Bs4C,EAAIsC,KAAK56C,IACb,OAAO8P,IA7SfxV,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIirC,SAAU,mBAAA/qC,CAAQ,IAClB6qC,GAAK,mBAAA7qC,CAAQ,IACb8/C,aAAe,mBAAA9/C,CAAQ,KAGvB49C,UAAY7S,QAAQla,QAAQ,aAAY9rB,OAAWA,IAmBnDg7C,OAAS,SAAU,SAAU,SAAU,UAAW,MAAO,QACzDG,IAAM,mBAAAlgD,CAAQ,GAClBH,SAAQ+qC,EAAIsV,IAAItV,CAChB,IAAIuV,SAAU,mBAAAngD,CAAQ,IACtBH,SAAQugD,MAAQD,QAAQC,MAmRxBvgD,QAAQ+8C,KAAOA,K;;;;;;;AClSf,QAASx+B,WAAU3V,GACf,MAAIA,GAAI,GACGA,EAAIA,EAAI,EAER,GAAK,EAAIA,IAAM,EAAIA,GAAK,EAZvC9I,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IActDD,QAAQue,UAAYA,U;;;;;;;ACdpB,GAAIrI,UAAYnQ,MAAQA,KAAKmQ,UAAapW,OAAO6W,QAAU,SAASC,GAChE,IAAK,GAAI5L,GAAGxF,EAAI,EAAGqR,EAAIhP,UAAUvC,OAAQE,EAAIqR,EAAGrR,IAAK,CACjDwF,EAAInD,UAAUrC,EACd,KAAK,GAAIa,KAAK2E,GAAOlL,OAAO0G,UAAUF,eAAe4C,KAAK8B,EAAG3E,KACzDuQ,EAAEvQ,GAAK2E,EAAE3E,IAEjB,MAAOuQ,IAEPtJ,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,KAEvDoyC,UAAaz6C,MAAQA,KAAKy6C,WAAc,SAAUjK,EAASkK,EAAYC,EAAGC,GAC1E,MAAO,KAAKD,IAAMA,EAAIliC,UAAU,SAAUC,EAASC,GAC/C,QAASkiC,GAAU3gD,GAAS,IAAM4gD,EAAKF,EAAU7/B,KAAK7gB,IAAW,MAAOgL,GAAKyT,EAAOzT,IACpF,QAAS61C,GAAS7gD,GAAS,IAAM4gD,EAAKF,EAAiB,MAAE1gD,IAAW,MAAOgL,GAAKyT,EAAOzT,IACvF,QAAS41C,GAAKvwC,GAAUA,EAAO+3B,KAAO5pB,EAAQnO,EAAOrQ,OAAS,GAAIygD,GAAE,SAAUjiC,GAAWA,EAAQnO,EAAOrQ,SAAWwa,KAAKmmC,EAAWE,GACnID,GAAMF,EAAYA,EAAU/4C,MAAM2uC,EAASkK,QAAmB3/B,WAGlEigC,YAAeh7C,MAAQA,KAAKg7C,aAAgB,SAAUxK,EAASrzB,GAG/D,QAAS89B,GAAKnqC,GAAK,MAAO,UAAU5I,GAAK,MAAO4yC,IAAMhqC,EAAG5I,KACzD,QAAS4yC,GAAKI,GACV,GAAI9hB,EAAG,KAAM,IAAIzL,WAAU,kCAC3B,MAAOwtB,GAAG,IACN,GAAI/hB,EAAI,EAAGt2B,IAAM+N,EAAI/N,EAAU,EAARo4C,EAAG,GAAS,SAAWA,EAAG,GAAK,QAAU,YAAcrqC,EAAIA,EAAE1N,KAAKL,EAAGo4C,EAAG,KAAK5Y,KAAM,MAAOzxB,EAEjH,QADI/N,EAAI,EAAG+N,IAAGqqC,GAAM,EAAGrqC,EAAE3W,QACjBghD,EAAG,IACP,IAAK,GAAG,IAAK,GAAGrqC,EAAIqqC,CAAI,MACxB,KAAK,GAAc,MAAXC,GAAEC,SAAkBlhD,MAAOghD,EAAG,GAAI5Y,MAAM,EAChD,KAAK,GAAG6Y,EAAEC,QAASt4C,EAAIo4C,EAAG,GAAIA,GAAM,EAAI,SACxC,KAAK,GAAGA,EAAKC,EAAEE,IAAIC,MAAOH,EAAEI,KAAKD,KAAO,SACxC,SACI,GAAMzqC,EAAIsqC,EAAEI,OAAM1qC,EAAIA,EAAEtR,OAAS,GAAKsR,EAAEA,EAAEtR,OAAS,MAAkB,IAAV27C,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEC,EAAI,CAAG,UACjG,GAAc,IAAVD,EAAG,MAAcrqC,GAAMqqC,EAAG,GAAKrqC,EAAE,IAAMqqC,EAAG,GAAKrqC,EAAE,IAAM,CAAEsqC,EAAEC,MAAQF,EAAG,EAAI,OAC9E,GAAc,IAAVA,EAAG,IAAYC,EAAEC,MAAQvqC,EAAE,GAAI,CAAEsqC,EAAEC,MAAQvqC,EAAE,GAAIA,EAAIqqC,CAAI,OAC7D,GAAIrqC,GAAKsqC,EAAEC,MAAQvqC,EAAE,GAAI,CAAEsqC,EAAEC,MAAQvqC,EAAE,GAAIsqC,EAAEE,IAAIp5C,KAAKi5C,EAAK,OACvDrqC,EAAE,IAAIsqC,EAAEE,IAAIC,MAChBH,EAAEI,KAAKD,KAAO,UAEtBJ,EAAK/9B,EAAKha,KAAKqtC,EAAS2K,GAC1B,MAAOj2C,GAAKg2C,GAAM,EAAGh2C,GAAIpC,EAAI,EAAK,QAAUs2B,EAAIvoB,EAAI,EACtD,GAAY,EAARqqC,EAAG,GAAQ,KAAMA,GAAG,EAAI,QAAShhD,MAAOghD,EAAG,GAAKA,EAAG,OAAK,GAAQ5Y,MAAM,GAvB9E,GAAsGlJ,GAAGt2B,EAAG+N,EAAGyP,EAA3G66B,GAAMC,MAAO,EAAGI,KAAM,WAAa,GAAW,EAAP3qC,EAAE,GAAQ,KAAMA,GAAE,EAAI,OAAOA,GAAE,IAAO0qC,QAAUF,OAC3F,OAAO/6B,IAAMvF,KAAMkgC,EAAK,GAAIQ,MAASR,EAAK,GAAIS,OAAUT,EAAK,IAAwB,kBAAXx+C,UAA0B6jB,EAAE7jB,OAAOszC,UAAY,WAAa,MAAO/vC,QAAUsgB,EAyB3JvmB,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3BgrC,yBAA2B,mBAAAhrC,CAAQ,IACnCyhB,UAAY,mBAAAzhB,CAAQ,GA2BpBuhD,aAA8B,WAC9B,QAASA,GAAa51B,EAAc61B,EAAgB5yC,EAAQqQ,EAAQgD,GAChErc,KAAK+lB,aAAeA,EACpB/lB,KAAK47C,eAAiBA,EACtB57C,KAAKgJ,OAASA,EACdhJ,KAAKqZ,OAASA,EACdrZ,KAAKqc,QAAUA,EACfrc,KAAK67C,aACL77C,KAAK87C,aAaL97C,KAAK+7C,YACL/7C,KAAKg8C,eAAiBvjC,QAAQC,SAC1BpX,KAAMykB,EAAa3X,WAAWyY,iBAAiB7X,YAC/CitC,eAAY98C,GACZ+8C,cAAW/8C,GACXg9C,aAAa,EACbC,mBAAmB,EACnBC,cAAc,IAqTtB,MAlTAtiD,QAAOC,eAAe2hD,EAAal7C,UAAW,gBAC1CK,IAAK,WACD,MAAOd,MAAKg8C,eAAetnC,KAAK,SAAU+S,GAAS,MAAOA,GAAMnmB,QAEpEF,YAAY,EACZC,cAAc,IAElBs6C,EAAal7C,UAAU67C,WAAa,SAAUC,GAC1C,GAAI36C,GAAQ5B,IAKZ,OAJAu8C,GAASh6C,QAAQ,SAAUqG,GACvBhH,EAAMoH,OAAOoQ,IAAIxX,EAAO,YAAagH,GACrChH,EAAM46C,cAAc5zC,EAASA,EAAQwW,QAASxd,EAAM66C,eAEjDz8C,KAAK08C,cAEhBf,EAAal7C,UAAU2e,QAAU,SAAUxW,GAGvC,MAFA5I,MAAKgJ,OAAOoQ,IAAIpZ,KAAM,YAAa4I,GACnC5I,KAAKw8C,cAAc5zC,EAASA,EAAQwW,QAASpf,KAAKy8C,aAC3Cz8C,KAAK08C,cAEhBf,EAAal7C,UAAUsI,KAAO,WAC1B,GAAInH,GAAQ5B,IACZA,MAAK28C,6BACL38C,KAAK48C,8BACL,IAAIh0C,GAAU5I,KAAK67C,UAAUP,KAO7B,YANgBn8C,KAAZyJ,IACA5I,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,UAAW4I,GACjC5I,KAAKw8C,cAAc5zC,EAASA,EAAQG,KAAM,SAAUnB,EAAGiB,GACnDjH,EAAMk6C,UAAU75C,KAAK2F,MAGtB5H,KAAK08C,cAEhBf,EAAal7C,UAAUyI,KAAO,WAC1B,GAAItH,GAAQ5B,IACZA,MAAK28C,4BACL,IAAI/zC,GAAU5I,KAAK87C,UAAUR,KAQ7B,YAPgBn8C,KAAZyJ,IACA5I,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,UAAW4I,GACjC5I,KAAKw8C,cAAc5zC,EAASA,EAAQM,KAAM,SAAUtB,EAAGiB,GACnDjH,EAAMi7C,gBAAgBj1C,MAG9B5H,KAAK88C,8BACE98C,KAAK08C,cAUhBf,EAAal7C,UAAU+7C,cAAgB,SAAU5zC,EAASm0C,EAAWC,GACjE,GAAIp7C,GAAQ5B,IACZA,MAAKg8C,eAAiBh8C,KAAKg8C,eAAetnC,KAAK,SAAU+S,GACrD,MAAO,IAAIhP,SAAQ,SAAUC,EAASC,GAClC,GACIskC,GADAp0C,EAAUjH,EAAMs7C,cAAcz1B,EAAMnmB,KAExC,KACI27C,EAAYF,EAAU55C,KAAKyF,EAASC,GAExC,MAAOI,GACHrH,EAAMoH,OAAOC,MAAMrH,EAAO,6BAA8BqH,GACxDg0C,EAAYx1B,EAAMnmB,KAElBsH,YAAmBiT,WAAU/S,cAC7B4P,EAAQvI,YAAasX,GACjBw0B,WAAYgB,EACZb,mBAAmB,KAGlBxzC,YAAmBiT,WAAU1S,aAClCuP,EAAQvI,YAAasX,GACjBy0B,UAAWe,EACXZ,cAAc,KAGbY,YAAqBxkC,SAC1BwkC,EAAUvoC,KAAK,SAAUyoC,GACrBH,EAAc75C,KAAKvB,EAAOgH,EAASC,GACnC6P,EAAQvI,YAAasX,GACjBnmB,KAAM67C,EACNhB,aAAa,QAKrBa,EAAc75C,KAAKvB,EAAOgH,EAASC,GACnC6P,EAAQvI,YAAasX,GACjBnmB,KAAM27C,EACNd,aAAa,WAMjCR,EAAal7C,UAAUo8C,gBAAkB,SAAUj0C,GAC/C5I,KAAK67C,UAAU55C,KAAK2G,GAChB5I,KAAKqc,QAAQ+gC,kBAAoB,GAAKp9C,KAAK67C,UAAUt8C,OAASS,KAAKqc,QAAQ+gC,kBAC3Ep9C,KAAK67C,UAAU35C,OAAO,EAAGlC,KAAK67C,UAAUt8C,OAASS,KAAKqc,QAAQ+gC,mBAMtEzB,EAAal7C,UAAUi8C,WAAa,WAChC,GAAI96C,GAAQ5B,IAiCZ,OAhCAA,MAAKg8C,eAAiBh8C,KAAKg8C,eAAetnC,KAAK,SAAU+S,GAAS,MAAOgzB,WAAU74C,MAAO,OAAQ,GAAQ,WACtG,MAAOo5C,aAAYh7C,KAAM,SAAU4D,GAC/B,OAAQA,EAAGw3C,OACP,IAAK,GACD,MAAM3zB,GAAM20B,uBAA0Cj9C,KAArBsoB,EAAMw0B,YAC/B,EAAaj8C,KAAKq9C,aAAa51B,EAAMw0B,cAD6B,EAAa,EAE3F,KAAK,GACDr4C,EAAG43C,OACH53C,EAAGw3C,MAAQ,CACf,KAAK,GACD,MAAK3zB,GAAM00B,aACH,EAAan8C,KAAKmZ,OAAOsO,EAAMnmB,QADP,EAAa,EAEjD,KAAK,GACDsC,EAAG43C,OACH53C,EAAGw3C,MAAQ,CACf,KAAK,GACD,MAAM3zB,GAAM40B,kBAAoCl9C,KAApBsoB,EAAMy0B,WAC1B,EAAal8C,KAAKs9C,YAAY71B,EAAMy0B,aADwB,EAAa,EAErF,KAAK,GACDt4C,EAAG43C,OACH53C,EAAGw3C,MAAQ,CACf,KAAK,GAAG,OAAQ,GACR95C,KAAMmmB,EAAMnmB,KACZ26C,eAAY98C,GACZ+8C,cAAW/8C,GACXg9C,aAAa,EACbC,mBAAmB,EACnBC,cAAc,WAK3Br8C,KAAKu9C,cAKhB5B,EAAal7C,UAAU0Y,OAAS,SAAUvF,GACtC,MAAO6mC,WAAUz6C,SAAM,OAAQ,GAAQ,WACnC,GAAI4D,EACJ,OAAOo3C,aAAYh7C,KAAM,SAAU2tC,GAC/B,OAAQA,EAAGyN,OACP,IAAK,GACD,WAAsBj8C,KAAhBa,KAAKw9C,QAA+B,EAAa,IACvD55C,EAAK5D,MACG,EAAaA,KAAK47C,kBAC9B,KAAK,GACDh4C,EAAG45C,OAAS7P,EAAG6N,OACf7N,EAAGyN,MAAQ,CACf,KAAK,GAED,MADAp7C,MAAKw9C,OAAOrkC,OAAOvF,IACX,SAQ5B+nC,EAAal7C,UAAU48C,aAAe,SAAUzpC,GAC5C,MAAO6mC,WAAUz6C,SAAM,OAAQ,GAAQ,WACnC,GAAI4D,EACJ,OAAOo3C,aAAYh7C,KAAM,SAAU2tC,GAC/B,OAAQA,EAAGyN,OACP,IAAK,GACD,WAAsBj8C,KAAhBa,KAAKw9C,QAA+B,EAAa,IACvD55C,EAAK5D,MACG,EAAaA,KAAK47C,kBAC9B,KAAK,GACDh4C,EAAG45C,OAAS7P,EAAG6N,OACf7N,EAAGyN,MAAQ,CACf,KAAK,GAED,MADAp7C,MAAKw9C,OAAOH,aAAazpC,IACjB,SAQ5B+nC,EAAal7C,UAAU68C,YAAc,SAAU1pC,GAC3C,MAAO6mC,WAAUz6C,SAAM,OAAQ,GAAQ,WACnC,GAAI4D,EACJ,OAAOo3C,aAAYh7C,KAAM,SAAU2tC,GAC/B,OAAQA,EAAGyN,OACP,IAAK,GACD,WAAsBj8C,KAAhBa,KAAKw9C,QAA+B,EAAa,IACvD55C,EAAK5D,MACG,EAAaA,KAAK47C,kBAC9B,KAAK,GACDh4C,EAAG45C,OAAS7P,EAAG6N,OACf7N,EAAGyN,MAAQ,CACf,KAAK,GAED,MADAp7C,MAAKw9C,OAAOF,YAAY1pC,IAChB,SAgB5B+nC,EAAal7C,UAAUg8C,YAAc,SAAU7zC,EAASC,GACpD,GAAIjH,GAAQ5B,IACZ,MAAI4I,YAAmBiT,WAAU/S,eAEjC,GAAIF,YAAmBiT,WAAUzS,eAAiBpJ,KAAK87C,UAAUv8C,OAAS,EACtES,KAAK+7C,SAAS95C,KAAK2G,OAElB,CAID,GAHA5I,KAAK+7C,SAASx5C,QAAQ,SAAUqF,GAAK,MAAOhG,GAAMi6C,UAAU55C,KAAK2F,KACjE5H,KAAK+7C,YACL/7C,KAAK87C,aACD97C,KAAK67C,UAAUt8C,OAAS,EAAG,CAC3B,GAAIk+C,GAAcz9C,KAAK67C,UAAU77C,KAAK67C,UAAUt8C,OAAS,EACzD,IAAIk+C,YAAuB5hC,WAAUnT,kBAAoB+0C,EAAY90C,MAAMC,EAASC,GAChF,OAER7I,KAAK68C,gBAAgBj0C,KAM7B+yC,EAAal7C,UAAUk8C,2BAA6B,WAEhD,IADA,GAAI/zC,GAAU5I,KAAK+7C,SAAST,UACTn8C,KAAZyJ,GACH5I,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,oBAAqB4I,GAC3C5I,KAAKw8C,cAAc5zC,EAASA,EAAQG,KAAM,cAC1CH,EAAU5I,KAAK+7C,SAAST,OAQhCK,EAAal7C,UAAUm8C,6BAA+B,WAGlD,IAFA,GAAIh7C,GAAQ5B,KACR4I,EAAU5I,KAAK67C,UAAU77C,KAAK67C,UAAUt8C,OAAS,OAClCJ,KAAZyJ,GAAyBA,YAAmBiT,WAAUzS,eACzDpJ,KAAK67C,UAAUP,MACft7C,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,UAAW4I,GACjC5I,KAAKw8C,cAAc5zC,EAASA,EAAQG,KAAM,SAAUnB,EAAGiB,GACnDjH,EAAMk6C,UAAU75C,KAAK2F,KAEzBgB,EAAU5I,KAAK67C,UAAU77C,KAAK67C,UAAUt8C,OAAS,IAQzDo8C,EAAal7C,UAAUq8C,4BAA8B,WAGjD,IAFA,GAAIl7C,GAAQ5B,KACR4I,EAAU5I,KAAK87C,UAAU97C,KAAK87C,UAAUv8C,OAAS,OAClCJ,KAAZyJ,GAAyBA,YAAmBiT,WAAUzS,eACzDpJ,KAAK87C,UAAUR,MACft7C,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,WAAY4I,GAClC5I,KAAKw8C,cAAc5zC,EAASA,EAAQM,KAAM,SAAUtB,EAAGiB,GACnDjH,EAAMi7C,gBAAgBj1C,KAE1BgB,EAAU5I,KAAK87C,UAAU97C,KAAK87C,UAAUv8C,OAAS,IAMzDo8C,EAAal7C,UAAUy8C,cAAgB,SAAUK,GAC7C,OACIj8C,KAAMi8C,EACNrkC,aAAclZ,KACd+lB,aAAc/lB,KAAK+lB,aACnB/M,SAAUhZ,KAAKqc,QAAQqhC,gBACvB10C,OAAQhJ,KAAKgJ,OACbqQ,OAAQrZ,KAAKqZ,SAGrBsiC,EAAep0C,YACXgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoB,gBAC5CyK,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMqC,kBAC5CwJ,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkB,UAC5C2K,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMM,uBAC5CuL,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMO,sBAC5CkL,WAAW,qBAAsBjO,OAAQ2Y,SAAU3Y,OAAQqrC,yBAAyBvoC,qBAAsB9C,UAC3G4hD,KAGP1hD,SAAQ0hD,aAAeA,a;;;;;;;ACjWvB,QAASgC,SAAQpuC,GACb,MAAO,SAAWA,GA1EtBxV,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0jD,YAAa,mBAAAxjD,CAAQ,IAKrByjD,UAA2B,WAC3B,QAASA,MA+DT,MA7DAA,GAAUp9C,UAAU8W,OAAS,SAAU3D,EAAO/K,GAC1C,GAAIjH,GAAQ5B,IACZ,OAAO49C,YAAW5Y,EAAEhlC,KAAK6W,SAASjD,IAC9BlM,IAAKkM,EAAMpU,GACXi4C,MACIT,KAAMh3C,KAAKg3C,KAAKvhC,KAAKzV,MACrB+5C,SAAU/5C,KAAK+5C,SAAStkC,KAAKzV,OAEjCmxC,GAAI,WAAc,MAAOvvC,GAAMk8C,kBAAkBlqC,EAAO/K,IACxDkZ,KAAM/hB,KAAK+9C,YAAYnqC,GACvB4mC,OAAO,KAGfqD,EAAUp9C,UAAUq9C,kBAAoB,SAAUlqC,EAAO/K,GACrD,GAAI0G,GAAQvP,KAAKg+C,SAASpqC,EAAO/K,EAEjC,OADAA,GAAQ9M,SAASwT,EAAOqE,GACjBrE,GAEXsuC,EAAUp9C,UAAUw9C,YAAc,SAAU1uC,EAAOirC,GAC/CA,EAAMtgB,IAAM3qB,EAAM2qB,IAClB3qB,EAAMkB,KAAK0gC,GAAKqJ,EAAM/pC,KAAK0gC,GAC3B5hC,EAAMkB,KAAKsR,KAAOy4B,EAAM/pC,KAAKsR,KAC7By4B,EAAM/pC,KAAOlB,EAAMkB,KACnB+pC,EAAMt7C,SAAWqQ,EAAMrQ,SACvBs7C,EAAMrjC,KAAO5H,EAAM4H,KACnBqjC,EAAMtgB,IAAM3qB,EAAM2qB,KAEtB2jB,EAAUp9C,UAAUu2C,KAAO,SAAUwD,GACjC,GAAI0D,GAAM1D,EAAM/pC,KACZlB,EAAQ2uC,EAAI/M,GAAGtvC,UAAM1C,GAAW++C,EAAIn8B,KACxC/hB,MAAKi+C,YAAY1uC,EAAOirC,IAE5BqD,EAAUp9C,UAAUs5C,SAAW,SAAUD,EAAUU,GAC/C,GAAI2D,GAAMrE,EAASrpC,KAAMytC,EAAM1D,EAAM/pC,IAChCzQ,MAAKi1B,OAAOkpB,EAAIp8B,KAAMm8B,EAAIn8B,MAG3B/hB,KAAKi+C,YAAYnE,EAAUU,GAF3Bx6C,KAAKi+C,YAAYC,EAAI/M,GAAGtvC,UAAM1C,GAAW++C,EAAIn8B,MAAOy4B,IAI5DqD,EAAUp9C,UAAUw0B,OAAS,SAAUmpB,EAAQC,GAC3C,GAAIh/C,MAAMwS,QAAQusC,IAAW/+C,MAAMwS,QAAQwsC,GAAS,CAChD,GAAID,EAAO7+C,SAAW8+C,EAAO9+C,OACzB,OAAO,CACX,KAAK,GAAIE,GAAI,EAAGA,EAAI4+C,EAAO9+C,SAAUE,EACjC,IAAKO,KAAKi1B,OAAOmpB,EAAO3+C,GAAI4+C,EAAO5+C,IAC/B,OAAO,MAGd,IAAsB,gBAAX2+C,IAAyC,gBAAXC,GAAqB,CAC/D,GAAItkD,OAAOw/B,KAAK6kB,GAAQ7+C,SAAWxF,OAAOw/B,KAAK8kB,GAAQ9+C,OACnD,OAAO,CACX,KAAK,GAAImI,KAAO02C,GACZ,KAAY,WAAR12C,GAA4B,SAARA,GAAqBA,IAAO22C,IAAYr+C,KAAKi1B,OAAOmpB,EAAO12C,GAAM22C,EAAO32C,KAC5F,OAAO,MAGd,IAAI02C,IAAWC,EAChB,OAAO,CAEX,QAAO,GAEJR,IAEX5jD,SAAQ4jD,UAAYA,UAIpB5jD,QAAQ0jD,QAAUA,Q;;;;;;;AClBlB,QAASW,uBAAsBz1C,EAASoB,EAAMs0C,EAAaC,GACvD31C,EAAQ4M,KAAKjN,QAAQjM,MAAM8B,2BAA2BogD,iBAClDx0C,KAAMA,EACNmF,OAAQmvC,IAEZ11C,EAAQ4M,KAAKjN,QAAQjM,MAAMsC,kBAAkB4/C,iBACzCx0C,KAAMA,EACNmF,OAAQovC,IAjEhB,GAAIz+C,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwkD,UAAW,mBAAAtkD,CAAQ,IACnBmO,YAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3B0T,WAAa,mBAAA1T,CAAQ,IACrBuG,WAAa,mBAAAvG,CAAQ,GACrB2d,KAAQ/J,cAAe0wC,SAAStmC,KAIhCtZ,aAA8B,SAAU6C,GAExC,QAAS7C,GAAamQ,GAClB,GAAIrN,GAAQD,EAAOwB,KAAKnD,OAASA,IAGjC,OAFA4B,GAAM+8C,mBACN1vC,EAAc1M,QAAQ,SAAU2M,GAAgB,MAAOtN,GAAMuN,SAASD,EAAajF,KAAMiF,EAAaE,UAC/FxN,EAaX,MAlBA7B,WAAUjB,EAAc6C,GAOxB7C,EAAa2B,UAAUk+C,iBAAmB,WACtC3+C,KAAKmP,SAAS0X,iBAAiB7X,WAAW/E,KAAM20C,YAEpD9/C,EAAa2B,UAAUsf,QAAU,SAAUrY,GACvC,MAAO,IAAIm3C,cAEf//C,EAAeyI,YACXgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAMsC,mBAAoBuJ,QAAQ,EAAGG,YAAYtN,YAC5F+M,WAAW,qBAAsB3I,SAClCP,IAELgP,WAAWuB,iBACbpV,SAAQ6E,aAAeA,aAcvB7E,QAAQqkD,sBAAwBA,qBAIhC,IAAIM,WAA2B,WAC3B,QAASA,MAKT,MAHAA,GAAUn+C,UAAU8W,OAAS,SAAU3D,EAAO/K,GAC1C,MAAOkP,KAAI/J,cAAc,OAAS8wC,uBAAuB,KAEtDF,IAEX3kD,SAAQ2kD,UAAYA,SAIpB,IAAIC,aAA6B,WAC7B,QAASA,MAST,MAPAA,GAAYp+C,UAAU8W,OAAS,SAAU3D,EAAO/K,GAC5C,GAAIiD,GAAW8H,EAAM9H,UAAYnL,WAAW6F,YAC5C,OAAOuR,KAAI/J,cAAc,QAAU+wC,yBAAyB,EAAMl8C,EAAGiJ,EAASjJ,EAAGC,EAAGgJ,EAAShJ,GACzF,IACA8Q,EAAMpU,GACN,MAEDq/C,IAEX5kD,SAAQ4kD,YAAcA,Y;;;;;;;AChGtB,GAAIt3C,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBgrC,yBAA2B,mBAAAhrC,CAAQ,IAOnC4kD,YAA6B,WAC7B,QAASA,GAAYC,EAAU5lC,GAC3BrZ,KAAKi/C,SAAWA,EAChBj/C,KAAKqZ,OAASA,EAkDlB,MAhDA2lC,GAAYv+C,UAAUy+C,aAAe,WACjC,WAAgC//C,KAAzBa,KAAKm/C,qBAAgEhgD,KAA/Ba,KAAKo/C,2BACzBjgD,KAArBa,KAAKq/C,aAEbL,EAAYv+C,UAAU68C,YAAc,SAAU1pC,GAC1C,GAAIsrC,GAAel/C,KAAKk/C,cACxBl/C,MAAKq/C,YAAczrC,EACfsrC,GACAl/C,KAAKs/C,kBAEbN,EAAYv+C,UAAU0Y,OAAS,SAAUvF,GACrC,GAAIsrC,GAAel/C,KAAKk/C,cACxBl/C,MAAKm/C,gBAAkBvrC,EACnBsrC,GACAl/C,KAAKs/C,kBAEbN,EAAYv+C,UAAU48C,aAAe,SAAUkC,GAC3C,GAAIL,GAAel/C,KAAKk/C,cACxBl/C,MAAKo/C,sBAAwBG,EACzBL,GACAl/C,KAAKs/C,kBAEbN,EAAYv+C,UAAU6+C,eAAiB,WACnC,GAAI19C,GAAQ5B,IACZA,MAAKqZ,OAAOmM,iBAAiB,WACzB,GAAI5jB,EAAMw9C,sBAAuB,CAC7B,GAAII,GAAsB59C,EAAMw9C,qBAChCx9C,GAAMq9C,SAAS5B,aAAamC,GAC5B59C,EAAMw9C,0BAAwBjgD,GAElC,GAAIyC,EAAMu9C,gBAAiB,CACvB,GAAIM,GAAgB79C,EAAMu9C,eAC1Bv9C,GAAMq9C,SAAS9lC,OAAOsmC,GACtB79C,EAAMu9C,oBAAkBhgD,GAE5B,GAAIyC,EAAMy9C,YAAa,CACnB,GAAII,GAAgB79C,EAAMy9C,WAC1Bz9C,GAAMq9C,SAAS3B,YAAYmC,GAC3B79C,EAAMy9C,gBAAclgD,OAIhC6/C,EAAcz3C,YACVgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMmC,UAAW0J,QAAQ,EAAGG,YAAY1N,MAAM,aACpFuN,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMM,uBAC5CmL,WAAW,qBAAsBjO,OAAQqrC,yBAAyBvoC,wBACnEmiD,KAGP/kD,SAAQ+kD,YAAcA,Y;;;;;;;AClDtB,QAASU,wBAAuB72C,EAASwT,GACrC,GAAIsjC,GAAMxvC,YAAalW,QAAQ2lD,uBAAwBvjC,EACnDxT,GAAQg3C,QAAQr3C,QAAQjM,MAAMoC,eAC9BkK,EAAQi3C,OAAOt3C,QAAQjM,MAAMoC,eAAe8/C,gBAAgBkB,GAE5D92C,EAAQ4M,KAAKjN,QAAQjM,MAAMoC,eAAe8/C,gBAAgBkB,GAMlE,QAASI,uBAAsBx8B,EAAWlH,GACtC,GAAIsjC,GAAMp8B,EAAUziB,IAAI0H,QAAQjM,MAAMoC,cACtC,KAAK,GAAI2B,KAAK+b,GACNA,EAAQ9b,eAAeD,KACvBq/C,EAAIr/C,GAAK+b,EAAQ/b,GAEzB,OAAOq/C,GA5CX,GAAIxvC,UAAYnQ,MAAQA,KAAKmQ,UAAapW,OAAO6W,QAAU,SAASC,GAChE,IAAK,GAAI5L,GAAGxF,EAAI,EAAGqR,EAAIhP,UAAUvC,OAAQE,EAAIqR,EAAGrR,IAAK,CACjDwF,EAAInD,UAAUrC,EACd,KAAK,GAAIa,KAAK2E,GAAOlL,OAAO0G,UAAUF,eAAe4C,KAAK8B,EAAG3E,KACzDuQ,EAAEvQ,GAAK2E,EAAE3E,IAEjB,MAAOuQ,GAEX9W,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIsO,SAAU,mBAAApO,CAAQ,EACtBH,SAAQ2lD,qBAAuB,WAAc,OACzC3Y,QAAS,UACT+Y,UAAW,UACXxjC,UAAW,iBACXyjC,YAAa,iBACbC,SAAU,gBACVC,WAAY,gBACZC,iBAAkB,uBAClBC,mBAAmB,EACnBC,mBAAmB,EACnBh3B,eAAgB,IAChBvB,gBAAiB,MAarB9tB,QAAQylD,uBAAyBA,uBAYjCzlD,QAAQ8lD,sBAAwBA,sB;;;;;;;AC9ChC,GAAIx4C,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwkD,UAAW,mBAAAtkD,CAAQ,IACnBwjD,WAAa,mBAAAxjD,CAAQ,IACrBmmD,QAAU,mBAAAnmD,CAAQ,KAClBomD,aAAe,mBAAApmD,CAAQ,KACvBqmD,QAAU,mBAAArmD,CAAQ,KAClBsmD,iBAAmB,mBAAAtmD,CAAQ,KAC3BumD,QAAU,mBAAAvmD,CAAQ,KAClBmO,YAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBuG,WAAa,mBAAAvG,CAAQ,GACrBqrB,oBAAsB,mBAAArrB,CAAQ,IAC9B+Y,cAAgB,mBAAA/Y,CAAQ,IACxBwmD,aAAe,mBAAAxmD,CAAQ,IACvBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3B2d,KAAQ/J,cAAe0wC,SAASvmC,MAChC0oC,cAA+B,WAC/B,QAASA,GAAcC,EAAct5C,GACjCxH,KAAK8gD,aAAeA,EACpB9gD,KAAKwH,WAAaA,EAkBtB,MAhBAq5C,GAAcpgD,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAChD,MAAI2hD,cAAajD,QAAQpuC,GACdA,EACJvP,KAAKwH,WAAW2M,OAAO,SAAUrD,EAAGxI,GAAa,MAAOA,GAAUvM,SAAS+U,EAAG7R,IAAasQ,IAEtGsxC,EAAcpgD,UAAUsgD,cAAgB,SAAU9hD,EAAS8iB,GACvD,GAAIi/B,GAAQhhD,KAAK8gD,aAAahgD,IAAI7B,EAAQgL,SAAM9K,IAAWoY,OAAOtY,EAASe,KAAM+hB,EACjF,OAAO/hB,MAAKjE,SAASilD,EAAO/hD,IAEhC4hD,EAAcpgD,UAAUwgD,eAAiB,SAAUhiD,EAAS8iB,GACxD,GAAIngB,GAAQ5B,IACZ,OAAOf,GAAQC,SAASsP,IAAI,SAAUxM,GAAS,MAAOJ,GAAMm/C,cAAc/+C,EAAO+f,MAErF8+B,EAAcpgD,UAAUiV,WAAa,WACjC1V,KAAKwH,WAAWjF,QAAQ,SAAU+F,GAAa,MAAOA,GAAUoN,gBAE7DmrC,IAEX5mD,SAAQ4mD,cAAgBA,aAKxB,IAAIK,QAAwB,WACxB,QAASA,GAAOC,EAAsB35C,EAAY45C,EAAkBC,EAAiBhlC,EAASrT,EAAQs4C,GAClG,GAAI1/C,GAAQ5B,IACZA,MAAKwH,WAAaA,EAClBxH,KAAKohD,iBAAmBA,EACxBphD,KAAKqhD,gBAAkBA,EACvBrhD,KAAKqc,QAAUA,EACfrc,KAAKgJ,OAASA,EACdhJ,KAAKshD,iBAAmBA,EACxBthD,KAAKuhD,eAAiB,SAAUC,GAC5B,GAAIva,GAAUtyB,SAASE,eAAejT,EAAMya,QAAQ4qB,QACpD,IAAgB,OAAZA,EAAkB,CAClB,GAAIj7B,GAAYpK,EAAMu4B,gBAAgB8M,EACtCrlC,GAAM0/C,iBAAiB7sC,SAAS,GAAIgR,qBAAoB2U,6BAA6BpuB,MAG7FhM,KAAKyhD,QAAUzhD,KAAK0hD,gBACpB1hD,KAAK2hD,SAAWR,EAAqB35C,GACrCxH,KAAK4hD,eAAiBT,EAAqBC,GAC3CphD,KAAK6hD,cAAgBV,EAAqBE,GAoJ9C,MAlJAH,GAAOzgD,UAAUqhD,cAAgB,WAC7B,OACIvB,QAAQwB,YACRvB,aAAawB,iBACbrB,QAAQsB,YACRxB,QAAQyB,YACRxB,iBAAiByB,uBAGzBjB,EAAOzgD,UAAUihD,cAAgB,WAC7B,MAAO9D,YAAW5G,KAAKh3C,KAAK8hD,kBAEhCZ,EAAOzgD,UAAU05B,gBAAkB,SAAUl7B,GACzC,GAAI0M,GAAS1M,EAAQo7B,wBACjB/a,EAA2B,mBAAXkB,SAA2B3d,EAAG2d,OAAO8Z,QAASx3B,EAAG0d,OAAO+Z,SAAY55B,WAAW6F,YACnG,QACI3D,EAAG8I,EAAO6uB,KAAOlb,EAAOzc,EACxBC,EAAG6I,EAAO8uB,IAAMnb,EAAOxc,EACvBC,MAAO4I,EAAO5I,MACdC,OAAQ2I,EAAO3I,SAGvBk+C,EAAOzgD,UAAU0Y,OAAS,SAAUvF,GAChC,GAAIhS,GAAQ5B,IACZA,MAAKgJ,OAAOoQ,IAAIpZ,KAAM,YAAa4T,EACnC,IAAIwuC,GAAUrqC,IAAI/J,cAAc,OAASxO,GAAIQ,KAAKqc,QAAQ4qB,SAAWjnC,KAAK2hD,SAASZ,cAAcntC,GACjG,QAAsBzU,KAAlBa,KAAKqiD,SAAwB,CAC7B,GAAIC,GAAWtiD,KAAKuiD,UACpBpvC,eAAcvD,qBAAqB5P,KAAKqiD,SAAUD,GAClDpiD,KAAKqiD,SAAWriD,KAAKyhD,QAAQt+C,KAAKnD,KAAMA,KAAKqiD,SAAUD,GACvDpiD,KAAKwiD,aAAaF,OAEjB,IAAwB,mBAAb3tC,UAA0B,CACtC,GAAI8tC,GAAc9tC,SAASE,eAAe7U,KAAKqc,QAAQ4qB,QACnC,QAAhBwb,GACsB,mBAAXjiC,SACPA,OAAOkiC,iBAAiB,SAAU,WAC9B9gD,EAAM2/C,eAAea,KAG7BjvC,cAAcrD,uBAAuB2yC,EAAaL,GAClDjvC,cAAczD,SAAS0yC,EAASpiD,KAAKqc,QAAQ2jC,WAAW,GACxDhgD,KAAKqiD,SAAWriD,KAAKyhD,QAAQt+C,KAAKnD,KAAMyiD,EAAaL,IAGrDpiD,KAAKgJ,OAAOC,MAAMjJ,KAAM,sBAAuBA,KAAKqc,QAAQ4qB,SAGpEjnC,KAAK2hD,SAASjsC,cAElBwrC,EAAOzgD,UAAU8hD,SAAW,WACxB,GAAwB,mBAAb5tC,WAA4BA,SAASguC,eAAiB3iD,KAAKqiD,SAASnjD,UAAYc,KAAKqiD,SAASnjD,SAASK,OAAS,EAAG,CAC1H,GAAIqjD,GAAgB5iD,KAAKqiD,SAASnjD,SAAS,EAC3C,IAA6B,gBAAlB0jD,GAA4B,CACnC,GAAIC,GAAcD,EAAc1oB,GAChC,OAAOvlB,UAASguC,gBAAkBE,GAG1C,OAAO,GAEX3B,EAAOzgD,UAAU+hD,aAAe,SAAUztC,GACtC,GAAIA,GAAS/U,KAAKqiD,SAASnjD,UAAYc,KAAKqiD,SAASnjD,SAASK,OAAS,EAAG,CACtE,GAAIqjD,GAAgB5iD,KAAKqiD,SAASnjD,SAAS,EAC3C,IAA6B,gBAAlB0jD,GAA4B,CACnC,GAAIC,GAAcD,EAAc1oB,GAC5B2oB,IAA4C,kBAAtBA,GAAY9tC,OAClC8tC,EAAY9tC,WAI5BmsC,EAAOzgD,UAAU48C,aAAe,SAAUkC,GACtCv/C,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,mBACtB,IAAIoiD,EACJ,IAAI7C,EAAYt1C,OAAS4c,iBAAiB7X,WAAW/E,KACjDm4C,EAAUrqC,IAAI/J,cAAc,OAASxO,GAAIQ,KAAKqc,QAAQG,gBAErD,CACD,GAAIsmC,GAAc9iD,KAAK4hD,eAAeb,cAAcxB,EACpDpsC,eAAc7D,QAAQwzC,EAAa,UAAW,GAC9CV,EAAUrqC,IAAI/J,cAAc,OAASxO,GAAIQ,KAAKqc,QAAQG,WAAasmC,GAEvE,OAA4B3jD,KAAxBa,KAAK+iD,eACL5vC,cAAcvD,qBAAqB5P,KAAK+iD,eAAgBX,GACxDpiD,KAAK+iD,eAAiB/iD,KAAKyhD,QAAQt+C,KAAKnD,KAAMA,KAAK+iD,eAAgBX,OAElE,CACD,GAAIK,GAAc9tC,SAASE,eAAe7U,KAAKqc,QAAQG,UACnC,QAAhBimC,GACAA,EAAc9tC,SAAS3G,cAAc,OACrC2G,SAASwI,KAAKC,YAAYqlC,IAG1BtvC,cAAcrD,uBAAuB2yC,EAAaL,GAEtDjvC,cAAczD,SAAS0yC,EAASpiD,KAAKqc,QAAQ2jC,WAAW,GACxD7sC,cAAczD,SAAS0yC,EAASpiD,KAAKqc,QAAQ4jC,aAAa,GAC1DjgD,KAAK+iD,eAAiB/iD,KAAKyhD,QAAQt+C,KAAKnD,KAAMyiD,EAAaL,GAE/DpiD,KAAK4hD,eAAelsC,cAExBwrC,EAAOzgD,UAAU68C,YAAc,SAAU1pC,GACrC5T,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,kBAAmB4T,EACzC,IACIwuC,GADAY,EAAcpvC,EAAM3J,OAAS4c,iBAAiB7X,WAAW/E,IAE7D,IAAI+4C,EACAZ,EAAUrqC,IAAI/J,cAAc,OAASxO,GAAIQ,KAAKqc,QAAQ6jC,eAErD,CACD,GAAIp0C,GAAW8H,EAAMxQ,aACjB6/C,GACAxoB,IAAK3uB,EAAShJ,EAAI,KAClB03B,KAAM1uB,EAASjJ,EAAI,KAEvBu/C,GAAUrqC,IAAI/J,cAAc,OAASxO,GAAIQ,KAAKqc,QAAQ6jC,SAAUjwC,MAAOgzC,GAAejjD,KAAK6hD,cAAcd,cAAcntC,IAE3H,OAA2BzU,KAAvBa,KAAKkjD,cACL/vC,cAAcvD,qBAAqB5P,KAAKkjD,cAAed,GACvDjvC,cAAczD,SAAS0yC,EAASpiD,KAAKqc,QAAQ+jC,iBAAkB4C,GAC/DhjD,KAAKkjD,cAAgBljD,KAAKyhD,QAAQt+C,KAAKnD,KAAMA,KAAKkjD,cAAed,OAEhE,IAAwB,mBAAbztC,UAA0B,CACtC,GAAI8tC,GAAc9tC,SAASE,eAAe7U,KAAKqc,QAAQ6jC,SACnC,QAAhBuC,GACAA,EAAc9tC,SAAS3G,cAAc,OACrC2G,SAASwI,KAAKC,YAAYqlC,IAG1BtvC,cAAcrD,uBAAuB2yC,EAAaL,GAEtDjvC,cAAczD,SAAS0yC,EAASpiD,KAAKqc,QAAQ8jC,YAAY,GACzDhtC,cAAczD,SAAS0yC,EAASpiD,KAAKqc,QAAQ+jC,iBAAkB4C,GAC/DhjD,KAAKkjD,cAAgBljD,KAAKyhD,QAAQt+C,KAAKnD,KAAMyiD,EAAaL,GAE9DpiD,KAAK6hD,cAAcnsC,cAEvBwrC,EAAS35C,YACLgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMsB,uBAC5CuK,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAMwC,kBAAmBqJ,QAAQ,EAAGG,YAAYtN,YAC3FmN,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAMa,uBAAwBgL,QAAQ,EAAGG,YAAYtN,YAChGmN,QAAQ,EAAGG,YAAYlN,YAAYmN,QAAQjM,MAAM6B,sBAAuBgK,QAAQ,EAAGG,YAAYtN,YAC/FmN,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CyJ,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkB,UAC5C2K,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5CwL,WAAW,qBAAsB0K,SAAUrT,MAAOA,MAAOA,MAAOtF,OAAQA,OAAQA,UACjFmnD,KAGPjnD,SAAQinD,OAASA,O;;;;;;;ACjOjB,GAAI35C,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtB+Y,cAAgB,mBAAA/Y,CAAQ,IACxB+oD,kBAAmC,WACnC,QAASA,MAeT,MAbAC,GAAsBD,EACtBA,EAAkB1iD,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAIpD,MAHIsQ,GAAM2H,KAAO3H,EAAM2H,IAAIy4B,WAAW,QAElCx8B,cAAc7D,QAAQC,EAAO,aAAc6zC,EAAoBC,UAC5D9zC,GAEX4zC,EAAkB1iD,UAAUiV,WAAa,aAEzCytC,EAAkBE,SAAW,IAC7BF,EAAoBC,EAAsB77C,YACtCgB,YAAY9N,cACb0oD,EAEH,IAAIC,KAERnpD,SAAQkpD,kBAAoBA,kB;;;;;;;AC5B5B,GAAIpjD,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF2P,SAAYnQ,MAAQA,KAAKmQ,UAAapW,OAAO6W,QAAU,SAASC,GAChE,IAAK,GAAI5L,GAAGxF,EAAI,EAAGqR,EAAIhP,UAAUvC,OAAQE,EAAIqR,EAAGrR,IAAK,CACjDwF,EAAInD,UAAUrC,EACd,KAAK,GAAIa,KAAK2E,GAAOlL,OAAO0G,UAAUF,eAAe4C,KAAK8B,EAAG3E,KACzDuQ,EAAEvQ,GAAK2E,EAAE3E,IAEjB,MAAOuQ,GAEX9W,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBkpD,kBAAoB,mBAAAlpD,CAAQ,IAI5BsvC,aAA8B,SAAU/nC,GAExC,QAAS+nC,KACL,MAAkB,QAAX/nC,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAoD/D,MAtDAD,WAAU2pC,EAAc/nC,GAIxB+nC,EAAajpC,UAAUinC,gBAAkB,SAAUnkB,EAAWmlB,EAAkBrB,GAC5E,GAAIM,GAAW,EACXM,GAAa,EACbsb,GAAU,CAYd,OAXAhgC,GAAUrkB,SAASqD,QAAQ,SAAUP,GACjC,GAAI2J,GAAS07B,EAASE,cAAcvlC,GAAO2J,WAC5BxM,KAAXwM,GAAwBhL,WAAW2D,iBAAiBqH,KAChD43C,EACAA,GAAU,EAEV5b,GAAYe,EAAiB8a,KACjC7b,GAAYh8B,EAAO5I,MACnBklC,EAAYroC,KAAKiF,IAAIojC,EAAWt8B,EAAO3I,YAI3CD,MAAO4kC,EACP3kC,OAAQilC,IAGhByB,EAAajpC,UAAUqoC,YAAc,SAAU9mC,EAAOslC,EAAY37B,EAAQi9B,EAAcF,EAAkBC,EAAehB,EAAUM,GAC/H,GAAIziC,GAAKxF,KAAKipC,MAAML,EAAaM,OAAQv9B,EAAQs8B,EAQjD,OAPAX,GAAW37B,QACP9I,EAAG8lC,EAAc9lC,EAAIb,EAAM2J,OAAO9I,EAAI8I,EAAO9I,EAC7CC,EAAG4lC,EAAiBR,WAAalmC,EAAM2J,OAAO7I,EAAI6I,EAAO7I,EAAI0C,EAC7DzC,MAAO4I,EAAO5I,MACdC,OAAQ2I,EAAO3I,QAEnBskC,EAAWgB,eAAgB,GAEvBzlC,EAAG8lC,EAAc9lC,EAAI8I,EAAO5I,MAAQ2lC,EAAiB8a,KACrD1gD,EAAG6lC,EAAc7lC,IAGzB4mC,EAAajpC,UAAU4oC,wBAA0B,WAC7C,OACIxB,iBAAiB,EACjBK,WAAY,EACZC,cAAe,EACfJ,YAAa,EACbC,aAAc,EACdJ,cAAe,EACf4b,KAAM,EACNta,OAAQ,WAGhBQ,EAAajpC,UAAU0oC,OAAS,SAAU7jC,EAAGjF,GACzC,MAAO8P,aAAa7K,EAAGjF,IAE3BqpC,EAAaztB,KAAO,OACbytB,GACT4Z,kBAAkBnc,eACpBltC,SAAQyvC,aAAeA,a;;;;;;;ACjFvB,GAAI3pC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF2P,SAAYnQ,MAAQA,KAAKmQ,UAAapW,OAAO6W,QAAU,SAASC,GAChE,IAAK,GAAI5L,GAAGxF,EAAI,EAAGqR,EAAIhP,UAAUvC,OAAQE,EAAIqR,EAAGrR,IAAK,CACjDwF,EAAInD,UAAUrC,EACd,KAAK,GAAIa,KAAK2E,GAAOlL,OAAO0G,UAAUF,eAAe4C,KAAK8B,EAAG3E,KACzDuQ,EAAEvQ,GAAK2E,EAAE3E,IAEjB,MAAOuQ,GAEX9W,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBkpD,kBAAoB,mBAAAlpD,CAAQ,IAC5BuvC,cAA+B,SAAUhoC,GAEzC,QAASgoC,KACL,MAAkB,QAAXhoC,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KA6C/D,MA/CAD,WAAU4pC,EAAehoC,GAIzBgoC,EAAclpC,UAAUinC,gBAAkB,SAAUnkB,EAAWlH,EAASgrB,GACpE,GAAIM,IAAY,EACZM,GAAa,CAQjB,OAPA1kB,GAAUrkB,SAASqD,QAAQ,SAAUP,GACjC,GAAI2J,GAAS07B,EAASE,cAAcvlC,GAAO2J,WAC5BxM,KAAXwM,GAAwBhL,WAAW2D,iBAAiBqH,KACpDg8B,EAAW/nC,KAAKiF,IAAI8iC,EAAUh8B,EAAO5I,OACrCklC,EAAYroC,KAAKiF,IAAIojC,EAAWt8B,EAAO3I,YAI3CD,MAAO4kC,EACP3kC,OAAQilC,IAGhB0B,EAAclpC,UAAUqoC,YAAc,SAAU9mC,EAAOslC,EAAY37B,EAAQi9B,EAAcF,EAAkBC,EAAehB,EAAUM,GAChI,GAAI1iC,GAAKvF,KAAK+oC,MAAMH,EAAaI,OAAQr9B,EAAQg8B,GAC7CniC,EAAKxF,KAAKipC,MAAML,EAAaM,OAAQv9B,EAAQs8B,EAQjD,OAPAX,GAAW37B,QACP9I,EAAG6lC,EAAiBX,YAAc/lC,EAAM2J,OAAO9I,EAAI8I,EAAO9I,EAAI0C,EAC9DzC,EAAG4lC,EAAiBR,WAAalmC,EAAM2J,OAAO7I,EAAI6I,EAAO7I,EAAI0C,EAC7DzC,MAAO4I,EAAO5I,MACdC,OAAQ2I,EAAO3I,QAEnBskC,EAAWgB,eAAgB,EACpBK,GAEXgB,EAAclpC,UAAU4oC,wBAA0B,WAC9C,OACIxB,iBAAiB,EACjBK,WAAY,EACZC,cAAe,EACfJ,YAAa,EACbC,aAAc,EACdJ,cAAe,EACfoB,OAAQ,SACRE,OAAQ,WAGhBS,EAAclpC,UAAU0oC,OAAS,SAAU7jC,EAAGjF,GAC1C,MAAO8P,aAAa7K,EAAGjF,IAE3BspC,EAAc1tB,KAAO,QACd0tB,GACT2Z,kBAAkBnc,eACpBltC,SAAQ0vC,cAAgBA,c;;;;;;;ACvExB,GAAI5pC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF2P,SAAYnQ,MAAQA,KAAKmQ,UAAapW,OAAO6W,QAAU,SAASC,GAChE,IAAK,GAAI5L,GAAGxF,EAAI,EAAGqR,EAAIhP,UAAUvC,OAAQE,EAAIqR,EAAGrR,IAAK,CACjDwF,EAAInD,UAAUrC,EACd,KAAK,GAAIa,KAAK2E,GAAOlL,OAAO0G,UAAUF,eAAe4C,KAAK8B,EAAG3E,KACzDuQ,EAAEvQ,GAAK2E,EAAE3E,IAEjB,MAAOuQ,GAEX9W,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,GACrBkpD,kBAAoB,mBAAAlpD,CAAQ,IAI5BqvC,aAA8B,SAAU9nC,GAExC,QAAS8nC,KACL,MAAkB,QAAX9nC,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAoD/D,MAtDAD,WAAU0pC,EAAc9nC,GAIxB8nC,EAAahpC,UAAUinC,gBAAkB,SAAUnkB,EAAWmlB,EAAkBrB,GAC5E,GAAIM,IAAY,EACZM,EAAY,EACZsb,GAAU,CAYd,OAXAhgC,GAAUrkB,SAASqD,QAAQ,SAAUP,GACjC,GAAI2J,GAAS07B,EAASE,cAAcvlC,GAAO2J,WAC5BxM,KAAXwM,GAAwBhL,WAAW2D,iBAAiBqH,KACpDs8B,GAAat8B,EAAO3I,OAChBugD,EACAA,GAAU,EAEVtb,GAAaS,EAAiB+a,KAClC9b,EAAW/nC,KAAKiF,IAAI8iC,EAAUh8B,EAAO5I,WAIzCA,MAAO4kC,EACP3kC,OAAQilC,IAGhBwB,EAAahpC,UAAUqoC,YAAc,SAAU9mC,EAAOslC,EAAY37B,EAAQi9B,EAAcF,EAAkBC,EAAehB,EAAUM,GAC/H,GAAI1iC,GAAKvF,KAAK+oC,MAAMH,EAAaI,OAAQr9B,EAAQg8B,EAQjD,OAPAL,GAAW37B,QACP9I,EAAG6lC,EAAiBX,YAAc/lC,EAAM2J,OAAO9I,EAAI8I,EAAO9I,EAAI0C,EAC9DzC,EAAG6lC,EAAc7lC,EAAId,EAAM2J,OAAO7I,EAAI6I,EAAO7I,EAC7CC,MAAO4I,EAAO5I,MACdC,OAAQ2I,EAAO3I,QAEnBskC,EAAWgB,eAAgB,GAEvBzlC,EAAG8lC,EAAc9lC,EACjBC,EAAG6lC,EAAc7lC,EAAI6I,EAAO3I,OAAS0lC,EAAiB+a,OAG9Dha,EAAahpC,UAAU4oC,wBAA0B,WAC7C,OACIxB,iBAAiB,EACjBK,WAAY,EACZC,cAAe,EACfJ,YAAa,EACbC,aAAc,EACdJ,cAAe,EACf6b,KAAM,EACNza,OAAQ,WAGhBS,EAAahpC,UAAU0oC,OAAS,SAAU7jC,EAAGjF,GACzC,MAAO8P,aAAa7K,EAAGjF,IAE3BopC,EAAaxtB,KAAO,OACbwtB,GACT6Z,kBAAkBnc,eACpBltC,SAAQwvC,aAAeA,a;;;;;;;ACjFvB,GAAI1pC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtByhB,UAAY,mBAAAzhB,CAAQ,GACpBghB,QAAU,mBAAAhhB,CAAQ,IAClBsQ,SAAW,mBAAAtQ,CAAQ,GACnB0sB,WAAa,mBAAA1sB,CAAQ,IACrBusB,WAAa,mBAAAvsB,CAAQ,IACrBihB,QAAU,mBAAAjhB,CAAQ,IAClB60C,eAAiB,mBAAA70C,CAAQ,IACzBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3BkhB,QAAU,mBAAAlhB,CAAQ,IAClBsjC,QAAU,mBAAAtjC,CAAQ,IAClBoO,QAAU,mBAAApO,CAAQ,GAClBspD,qBAAsC,SAAU/hD,GAEhD,QAAS+hD,KACL,MAAkB,QAAX/hD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAW/D,MAbAD,WAAU2jD,EAAsB/hD,GAIhC+hD,EAAqBjjD,UAAUwZ,QAAU,SAAUhb,EAASoR,GACxD,MAAIsW,YAAWkD,iBAAiBxZ,EAAO,OAAQ,UAAW,UAC9C,GAAIszC,6BAIpBD,EAAuBn8C,YACnBgB,YAAY9N,cACbipD,IAEL58B,WAAWxpB,YACbrD,SAAQypD,qBAAuBA,oBAC/B,IAAIC,wBAAwC,WACxC,QAASA,KACL3jD,KAAK4a,KAAOgpC,iBAAiB3nC,KAEjC,MAAO0nC,KAEX1pD,SAAQ0pD,uBAAyBA,sBACjC,IAAIC,kBAAkC,SAAUjiD,GAE5C,QAASiiD,KACL,MAAkB,QAAXjiD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KA0B/D,MA5BAD,WAAU6jD,EAAkBjiD,GAI5BiiD,EAAiBnjD,UAAU2e,QAAU,SAAUvW,GAC3C,GAAIwS,QAAQkiB,aAAa10B,EAAQvH,MAAO,CACpC,GAAIA,GAAOuH,EAAQkd,aAAa3X,WAAWvF,EAAQkd,aAAazX,aAAazF,EAAQvH,MACrF,IAAI+Z,QAAQkiB,aAAaj8B,GAerB,MAdAA,GAAKgb,QAAS,EACVhB,QAAQ1F,WAAWtU,KACnBA,EAAKie,KAAO,EACZje,EAAKge,QACDzc,EAAG,EACHC,EAAG,IAGXxB,EAAKC,MAAM0C,MAAM1B,QAAQ,SAAUtD,GAC3Bmc,QAAQrK,aAAa9R,IAAYA,EAAQuc,WACzCvc,EAAQuc,UAAW,GACnBkiB,QAAQtW,YAAYnoB,IAAYA,EAAQsc,gBACxCtc,EAAQsc,eAAgB,KAEzBja,EAGf,MAAOuH,GAAQkd,aAAa3X,WAAWyY,iBAAiB7X,aAE5D40C,EAAiB3nC,KAAO,mBACjB2nC,GACT/nC,UAAU/S,cACZ7O,SAAQ2pD,iBAAmBA,gBAC3B,IAAIC,oBAAoC,WACpC,QAASA,GAAmBC,GACxB9jD,KAAK8jD,YAAcA,EAgBvB,MAdAD,GAAmBpjD,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAGrD,MAFIA,aAAmByL,UAAS1J,aAC5BhB,KAAKsB,KAAOrC,GACTsQ,GAEXs0C,EAAmBpjD,UAAUiV,WAAa,WAClC1V,KAAKsB,MAAQ+Z,QAAQkiB,aAAav9B,KAAKsB,OAAStB,KAAKsB,KAAKgb,QAC1Dtc,KAAK8jD,YAAYxnC,OAAOtc,KAAKsB,OAErCuiD,EAAqBt8C,YACjBgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkC,cAC5CuJ,WAAW,qBAAsBinC,eAAexwC,eACjDolD,KAGP5pD,SAAQ4pD,mBAAqBA,mB;;;;;;;AC7G7B,QAAS7Y,YAAW/rC,GAChB,MAAOA,GAAQuC,WAAWvH,QAAQ8pD,aAHtChqD,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IACtDD,QAAQ8pD,YAActnD,OAAO,eAI7BxC,QAAQ+wC,WAAaA,W;;;;;;;ACLrB,GAAIjrC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtB8vB,UAAY,mBAAA9vB,CAAQ,IACpBusB,WAAa,mBAAAvsB,CAAQ,IACrBwG,WAAa,mBAAAxG,CAAQ,IACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnBsR,eAAiB,mBAAAtR,CAAQ,GACzByhB,UAAY,mBAAAzhB,CAAQ,GACpBwsB,aAAe,mBAAAxsB,CAAQ,IACvB0sB,WAAa,mBAAA1sB,CAAQ,IACrB+Y,cAAgB,mBAAA/Y,CAAQ,IACxB4pD,iBAAmB,mBAAA5pD,CAAQ,IAC3BghB,QAAU,mBAAAhhB,CAAQ,IAClBihB,QAAU,mBAAAjhB,CAAQ,IAClBujC,eAAiB,mBAAAvjC,CAAQ,IACzBkhB,QAAU,mBAAAlhB,CAAQ,IAOlB6pD,aAA8B,WAC9B,QAASA,GAAaC,EAAqBC,OACX,KAAxBD,IAAkCA,UACR,KAA1BC,IAAoCA,MACxCnkD,KAAKkkD,oBAAsBA,EAC3BlkD,KAAKmkD,sBAAwBA,EAC7BnkD,KAAK4a,KAAOwpC,cAAcnoC,KAE9B,MAAOgoC,KAEXhqD,SAAQgqD,aAAeA,YAIvB,IAAII,iBAAiC,WAIjC,QAASA,GAAgBC,OACN,KAAXA,IAAqBA,GAAS,GAClCtkD,KAAKskD,OAASA,EACdtkD,KAAK4a,KAAO2pC,iBAAiBtoC,KAEjC,MAAOooC,KAEXpqD,SAAQoqD,gBAAkBA,eAC1B,IAAID,eAA+B,SAAUziD,GAEzC,QAASyiD,GAAc56C,GACnB,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAIjC,OAHA4B,GAAM4H,OAASA,EACf5H,EAAM4Z,YACN5Z,EAAM4iD,cACC5iD,EA2DX,MAjEA7B,WAAUqkD,EAAeziD,GAQzByiD,EAAc3jD,UAAU2e,QAAU,SAAUvW,GACxC,GAAIjH,GAAQ5B,KACR4T,EAAQ/K,EAAQvH,IAqBpB,OApBAtB,MAAKwJ,OAAO06C,oBAAoB3hD,QAAQ,SAAU/C,GAC9C,GAAIP,GAAU2U,EAAMrS,MAAMwC,QAAQvE,EAC9BP,aAAmByL,UAASzJ,eAAiBqa,QAAQvK,aAAa9R,IAClE2C,EAAM4Z,SAASvZ,MACXhD,QAASA,EACTiC,OAAQjC,EAAQiC,OAChBK,MAAOtC,EAAQiC,OAAOhC,SAASkD,QAAQnD,OAInDe,KAAKwJ,OAAO26C,sBAAsB5hD,QAAQ,SAAU/C,GAChD,GAAIP,GAAU2U,EAAMrS,MAAMwC,QAAQvE,EAC9BP,aAAmByL,UAASzJ,eAAiBqa,QAAQvK,aAAa9R,IAClE2C,EAAM4iD,WAAWviD,MACbhD,QAASA,EACTiC,OAAQjC,EAAQiC,OAChBK,MAAOtC,EAAQiC,OAAOhC,SAASkD,QAAQnD,OAI5Ce,KAAKkJ,KAAKL,IAErBu7C,EAAc3jD,UAAUsI,KAAO,SAAUF,GACrC,IAAK,GAAIpJ,GAAIO,KAAKwb,SAASjc,OAAS,EAAGE,GAAK,IAAKA,EAAG,CAChD,GAAIglD,GAAYzkD,KAAKwb,SAAS/b,GAC1BR,EAAUwlD,EAAUxlD,OACpBqc,SAAQvK,aAAa9R,KACrBA,EAAQuc,UAAW,GACvBipC,EAAUvjD,OAAOsB,KAAKvD,EAASwlD,EAAUljD,OAM7C,MAJAvB,MAAKwkD,WAAWhoB,UAAUj6B,QAAQ,SAAUkiD,GACpCnpC,QAAQvK,aAAa0zC,EAAUxlD,WAC/BwlD,EAAUxlD,QAAQuc,UAAW,KAE9B3S,EAAQvH,MAEnB8iD,EAAc3jD,UAAUyI,KAAO,SAAUL,GACrC,IAAK,GAAIpJ,GAAI,EAAGA,EAAIO,KAAKwb,SAASjc,SAAUE,EAAG,CAC3C,GAAIglD,GAAYzkD,KAAKwb,SAAS/b,GAC1BR,EAAUwlD,EAAUxlD,QACpBylD,EAAiBD,EAAUvjD,OAAOhC,SAASK,MAC/CklD,GAAUvjD,OAAOsB,KAAKvD,EAASylD,EAAiB,GAUpD,MARA1kD,MAAKwkD,WAAWjiD,QAAQ,SAAUkiD,GAC1BnpC,QAAQvK,aAAa0zC,EAAUxlD,WAC/BwlD,EAAUxlD,QAAQuc,UAAW,KAErCxb,KAAKwb,SAASjZ,QAAQ,SAAUkiD,GACxBnpC,QAAQvK,aAAa0zC,EAAUxlD,WAC/BwlD,EAAUxlD,QAAQuc,UAAW,KAE9B3S,EAAQvH,MAEnB8iD,EAAcnoC,KAAO,kBACdmoC,GACTvoC,UAAUpT,QACZxO,SAAQmqD,cAAgBA,aACxB,IAAIG,kBAAkC,SAAU5iD,GAE5C,QAAS4iD,GAAiB/6C,GACtB,GAAI5H,GAAQD,EAAOwB,KAAKnD,OAASA,IAGjC,OAFA4B,GAAM4H,OAASA,EACf5H,EAAM+iD,qBACC/iD,EAgCX,MArCA7B,WAAUwkD,EAAkB5iD,GAO5B4iD,EAAiB9jD,UAAU2e,QAAU,SAAUvW,GAE3C,MADA7I,MAAK4kD,UAAU/7C,EAAQvH,KAAMtB,KAAKwJ,OAAO86C,QAClCz7C,EAAQvH,MAEnBijD,EAAiB9jD,UAAUmkD,UAAY,SAAU3lD,EAAS4lD,GAClDvpC,QAAQvK,aAAa9R,KACrBe,KAAK2kD,kBAAkB1lD,EAAQO,IAAMP,EAAQuc,SAC7Cvc,EAAQuc,SAAWqpC,EAEvB,KAAK,GAAIlhD,GAAK,EAAGC,EAAK3E,EAAQC,SAAUyE,EAAKC,EAAGrE,OAAQoE,IAAM,CAC1D,GAAI3B,GAAQ4B,EAAGD,EACf3D,MAAK4kD,UAAU5iD,EAAO6iD,KAG9BN,EAAiB9jD,UAAUsI,KAAO,SAAUF,GACxC,GAAItH,GAAQsH,EAAQvH,KAAKC,KACzB,KAAK,GAAI/B,KAAMQ,MAAK2kD,kBAChB,GAAI3kD,KAAK2kD,kBAAkBpkD,eAAef,GAAK,CAC3C,GAAIP,GAAUsC,EAAMwC,QAAQvE,OACZL,KAAZF,GAAyBqc,QAAQvK,aAAa9R,KAC9CA,EAAQuc,SAAWxb,KAAK2kD,kBAAkBnlD,IAGtD,MAAOqJ,GAAQvH,MAEnBijD,EAAiB9jD,UAAUyI,KAAO,SAAUL,GAExC,MADA7I,MAAK4kD,UAAU/7C,EAAQvH,KAAMtB,KAAKwJ,OAAO86C,QAClCz7C,EAAQvH,MAEnBijD,EAAiBtoC,KAAO,cACjBsoC,GACT1oC,UAAUpT,QACZxO,SAAQsqD,iBAAmBA,gBAC3B,IAAIO,qBAAqC,SAAUnjD,GAE/C,QAASmjD,GAAoBC,GACzB,GAAInjD,GAAQD,EAAOwB,KAAKnD,OAASA,IAIjC,OAHA4B,GAAMmjD,sBAAwBA,EAC9BnjD,EAAMojD,aAAc,EACpBpjD,EAAMu9B,YAAa,EACZv9B,EA4EX,MAlFA7B,WAAU+kD,EAAqBnjD,GAQ/BmjD,EAAoBrkD,UAAU2U,UAAY,SAAU3N,EAAQ4I,GACxD,GAAI9F,KACJ,IAAqB,IAAjB8F,EAAM6sB,OAAc,CACpB,OAAmC/9B,KAA/Ba,KAAK+kD,uBAAuCt9C,YAAkB2T,SAAQivB,SAAW5iC,EAAO6iC,QAAS,CACjG,GAAI2a,GAAgBjlD,KAAK+kD,sBAAsBjkD,IAAI2G,EAAOwC,KAC1D,QAAsB9K,KAAlB8lD,EACA,MAAOA,GAAchoB,cAAcx1B,GAE3C,GAAIy9C,GAAqBx5C,eAAef,oBAAoBlD,EAAQ6T,QAAQvK,aAC5E,QAA2B5R,KAAvB+lD,GAAoCz9C,YAAkBiD,UAAS1J,WAAY,CAC3EhB,KAAKm/B,YAAa,CAClB,IAAIgmB,KAOJ,IALKj7B,UAAUglB,YAAY7+B,KACvB80C,EAAWvkD,WAAWgvC,QAAQnoC,EAAOnG,KAAKC,MAAM0C,MAC3C3B,OAAO,SAAUrD,GAAW,MAAOqc,SAAQvK,aAAa9R,IAAYA,EAAQuc,YACxE0pC,YAA8B7pC,SAAQV,gBAAkB1b,IAAYimD,EAAmBhkD,gBAEzE/B,KAAvB+lD,EACA,GAAKA,EAAmB1pC,SASf0O,UAAUglB,YAAY7+B,IAC3BrQ,KAAKglD,aAAc,EACnBz6C,EAAOtI,KAAK,GAAIgiD,kBAAkBiB,EAAmB1lD,MACjD6b,QAAQnB,WAAWgrC,IACnB36C,EAAOtI,KAAK,GAAI07B,gBAAe1C,yBAA0BiqB,EAAmB1lD,OAGhFQ,KAAKglD,aAAc,MAhBW,CAC9BhlD,KAAKglD,aAAc,EACnBz6C,EAAOtI,KAAK,GAAIgiD,eAAciB,EAAmB1lD,IAAK2lD,EAAS32C,IAAI,SAAUtJ,GAAK,MAAOA,GAAE1F,MAC3F,IAAI4lD,GAAmBD,EAAS7iD,OAAO,SAAU4C,GAAK,MAAOmW,SAAQnB,WAAWhV,KAAOsJ,IAAI,SAAUtJ,GAAK,MAAOA,GAAE1F,IAC/G6b,SAAQnB,WAAWgrC,GACnB36C,EAAOtI,KAAK,GAAI07B,gBAAe1C,sBAAsBiqB,EAAmB1lD,IAAK4lD,IACxEA,EAAiB7lD,OAAS,GAC/BgL,EAAOtI,KAAK,GAAI07B,gBAAe1C,wBAAyBmqB,QAY/D,CACD76C,EAAOtI,KAAK,GAAIgiD,iBAAiBkB,EAAS32C,IAAI,SAAUtJ,GAAK,MAAOA,GAAE1F,MACtE,IAAI4lD,GAAmBD,EAAS7iD,OAAO,SAAU4C,GAAK,MAAOmW,SAAQnB,WAAWhV,KAAOsJ,IAAI,SAAUtJ,GAAK,MAAOA,GAAE1F,IAC/G4lD,GAAiB7lD,OAAS,GAC1BgL,EAAOtI,KAAK,GAAI07B,gBAAe1C,wBAAyBmqB,MAIxE,MAAO76C,IAEXu6C,EAAoBrkD,UAAU4U,UAAY,SAAU5N,EAAQ4I,GAExD,MADArQ,MAAKm/B,YAAa,MAGtB2lB,EAAoBrkD,UAAU6U,QAAU,SAAU7N,EAAQ4I,GACtD,GAAqB,IAAjBA,EAAM6sB,SACDl9B,KAAKm/B,WAAY,CAClB,GAAIkmB,GAAmB35C,eAAef,oBAAoBlD,EAAQ6T,QAAQvK,aAC1E,QAAyB5R,KAArBkmD,GAAkCrlD,KAAKglD,YACvC,OAAQ,GAAIf,eAAcoB,EAAiB7lD,SAKvD,MADAQ,MAAKm/B,YAAa,MAGtB2lB,EAAoBrkD,UAAU1E,SAAW,SAAUwT,EAAOtQ,GACtD,GAAIomD,GAAmB35C,eAAef,oBAAoB1L,EAASqc,QAAQvK,aAG3E,YAFyB5R,KAArBkmD,GACAlyC,cAAczD,SAASH,EAAO,WAAY81C,EAAiB7pC,UACxDjM,GAEXu1C,EAAsBv9C,YAClBa,QAAQ,EAAGG,YAAYxN,OAAOipD,iBAAiB9Z,wBAAyB9hC,QAAQ,EAAGG,YAAYtN,YAC/F+M,WAAW,qBAAsBg8C,iBAAiB9Z,yBACnD4a,IAELl+B,aAAa5oB,cACf/D,SAAQ6qD,oBAAsBA,mBAC9B,IAAIQ,wBAAwC,SAAU3jD,GAElD,QAAS2jD,KACL,MAAkB,QAAX3jD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAS/D,MAXAD,WAAUulD,EAAwB3jD,GAIlC2jD,EAAuB7kD,UAAUwZ,QAAU,SAAUhb,EAASoR,GAC1D,GAAIsW,WAAWkD,iBAAiBxZ,EAAO,OAAQ,WAAY,CACvD,GAAImL,GAAW5a,WAAWgvC,QAAQ3wC,EAAQqC,KAAKC,MAAM0C,MAAM3B,OAAO,SAAU4C,GAAK,MAAOoW,SAAQvK,aAAa7L,KAAOsJ,IAAI,SAAUtJ,GAAK,MAAOA,GAAE1F,KAChJ,QAAQ,GAAIykD,cAAazoC,OAE7B,UAEG8pC,GACTx+B,WAAWxpB,YACbrD,SAAQqrD,uBAAyBA,uB;;;;;;;ACtQjC,QAASC,cAAatmD,GAClB,MAAO,UAAYA,GAnBvB,GAAIc,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwQ,UAAW,mBAAAtQ,CAAQ,GACnBwsB,aAAe,mBAAAxsB,CAAQ,IACvBsR,eAAiB,mBAAAtR,CAAQ,GACzB2zC,WAAa,mBAAA3zC,CAAQ,IACrBghB,QAAU,mBAAAhhB,CAAQ,IAClBihB,QAAU,mBAAAjhB,CAAQ,IAClBkhB,QAAU,mBAAAlhB,CAAQ,GAItBH,SAAQsrD,aAAeA,YACvB,IAAIC,qBAAqC,SAAU7jD,GAE/C,QAAS6jD,KACL,MAAkB,QAAX7jD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KA2C/D,MA7CAD,WAAUylD,EAAqB7jD,GAI/B6jD,EAAoB/kD,UAAU2U,UAAY,SAAU3N,EAAQ4I,GAExD,OAAiBlR,KADFuM,eAAef,oBAAoBlD,EAAQ4T,QAAQO,eAClCnU,YAAkB6T,SAAQX,gBAAiB,CACvE,GAAI6kB,GAAW9zB,eAAef,oBAAoBlD,EAAQ2T,QAAQxF,WAE9D5V,MAAKylD,mBADLjmB,GAC4B38B,EAAGwN,EAAM+Y,MAAOtmB,EAAGuN,EAAMgZ,WAE3BlqB,GAElC,UAEJqmD,EAAoB/kD,UAAU4U,UAAY,SAAU5N,EAAQ4I,GACxD,GAAsB,IAAlBA,EAAMkvB,QACNv/B,KAAKsV,QAAQ7N,EAAQ4I,OACpB,IAAIrQ,KAAKylD,mBAAoB,CAC9B,GAAIjmB,GAAW9zB,eAAef,oBAAoBlD,EAAQ2T,QAAQxF,WAClE,IAAI4pB,EAAU,CACV,GAAIj6B,IAAM8K,EAAM+Y,MAAQppB,KAAKylD,mBAAmB5iD,GAAK28B,EAASjgB,KAC1D/Z,GAAM6K,EAAMgZ,MAAQrpB,KAAKylD,mBAAmB3iD,GAAK08B,EAASjgB,KAC1DN,GACAK,QACIzc,EAAG28B,EAASlgB,OAAOzc,EAAI0C,EACvBzC,EAAG08B,EAASlgB,OAAOxc,EAAI0C,GAE3B+Z,KAAMigB,EAASjgB,KAGnB,OADAvf,MAAKylD,oBAAuB5iD,EAAGwN,EAAM+Y,MAAOtmB,EAAGuN,EAAMgZ,QAC7C,GAAI0kB,YAAW/uB,eAAewgB,EAAShgC,GAAIyf,GAAa,KAGxE,UAEJumC,EAAoB/kD,UAAUyU,WAAa,SAAUzN,EAAQ4I,GAGzD,MAFI5I,aAAkBiD,UAAS1J,YAAgC,IAAlBqP,EAAMkvB,SAC/Cv/B,KAAKsV,QAAQ7N,EAAQ4I,OAG7Bm1C,EAAoB/kD,UAAU6U,QAAU,SAAU7N,EAAQ4I,GAEtD,MADArQ,MAAKylD,uBAAqBtmD,OAGvBqmD,GACT5+B,aAAa5oB,cACf/D,SAAQurD,oBAAsBA,oB;;;;;;;ACvD9B,QAASE,YAAWzmD,GAChB,MAAO,QAAUA,GAhBrB,GAAIc,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0sB,cAAe,mBAAAxsB,CAAQ,IACvBsR,eAAiB,mBAAAtR,CAAQ,GACzB2zC,WAAa,mBAAA3zC,CAAQ,IACrBghB,QAAU,mBAAAhhB,CAAQ,GAItBH,SAAQyrD,WAAaA,UACrB,IAAIC,mBAAmC,SAAUhkD,GAE7C,QAASgkD,KACL,MAAkB,QAAXhkD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAkB/D,MApBAD,WAAU4lD,EAAmBhkD,GAI7BgkD,EAAkBllD,UAAU8U,MAAQ,SAAU9N,EAAQ4I,GAClD,GAAImvB,GAAW9zB,eAAef,oBAAoBlD,EAAQ2T,QAAQxF,WAClE,IAAI4pB,EAAU,CACV,GAAIomB,GAAUhmD,KAAK8f,IAAoB,MAAfrP,EAAMw1C,QAC1BC,EAAS,GAAMF,EAAUpmB,EAASjgB,MAAQ,EAAKigB,EAASjgB,KACxDN,GACAK,QACIzc,IAAKijD,EAASz1C,EAAM01C,QAAUvmB,EAASlgB,OAAOzc,GAC9CC,IAAKgjD,EAASz1C,EAAM21C,QAAUxmB,EAASlgB,OAAOxc,IAElDyc,KAAMigB,EAASjgB,KAAOqmC,EAE1B,QAAQ,GAAI7X,YAAW/uB,eAAewgB,EAAShgC,GAAIyf,GAAa,IAEpE,UAEG0mC,GACT/+B,aAAa5oB,cACf/D,SAAQ0rD,kBAAoBA,kB;;;;;;;ACL5B,QAASM,iBAAgB5f,GACrB,WAAkBlnC,KAAXknC,GAAwBA,EAAO9lC,eAAe,aAAe8lC,EAAO9lC,eAAe,UAtC9F,GAAIR,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBsQ,SAAW,mBAAAtQ,CAAQ,GACnB8rD,iBAAmB,mBAAA9rD,CAAQ,IAC3BmrC,iBAAmB,mBAAAnrC,CAAQ,IAC3BirC,YAAc,mBAAAjrC,CAAQ,IACtB+rD,eAAiB,mBAAA/rD,CAAQ,IACzBgsD,sBAAwB,mBAAAhsD,CAAQ,IAChCisD,QAAU,mBAAAjsD,CAAQ,IAClBksD,eAAiB,mBAAAlsD,CAAQ,IACzB60C,eAAiB,mBAAA70C,CAAQ,IACzBmsD,aAAe,mBAAAnsD,CAAQ,IACvBosD,SAAW,mBAAApsD,CAAQ,IACnBqsD,OAAS,mBAAArsD,CAAQ,GAIrBH,SAAQgsD,gBAAkBA,eAI1B,IAAIS,oBAAoC,WACpC,QAASA,KACL1mD,KAAK4a,KAAO8rC,EAAmBzqC,KAGnC,MADAyqC,GAAmBzqC,KAAO,eACnByqC,IAEXzsD,SAAQysD,mBAAqBA,kBAC7B,IAAIC,4BAA6B,uBAQ7BC,cAA+B,SAAUjlD,GAEzC,QAASilD,GAActzC,EAAkBkyB,EAAuBwB,EAAe6f,EAAS79C,GACpF,GAAIpH,GAAQD,EAAOwB,KAAKnD,KAAMsT,EAAkBkyB,EAAuBwB,IAAkBhnC,IAQzF,OAPA4B,GAAMilD,QAAUA,EAChBjlD,EAAMoH,OAASA,EACfpH,EAAMklD,aACF78C,KAAM,OACNzK,GAAI,QAERoC,EAAMmlD,SAAWnlD,EAAMolC,cAAcC,QAC9BrlC,EA2IX,MArJA7B,WAAU6mD,EAAejlD,GAYzBilD,EAAcnmD,UAAUkJ,WAAa,SAAUC,GAC3CjI,EAAOlB,UAAUkJ,WAAWxG,KAAKnD,KAAM4J,GAEvCA,EAASE,gBAAgBq8C,eAAe9Z,oBAExCziC,EAASuF,SAASi3C,sBAAsB//B,qBAAqBpK,KAAMjc,MACnE4J,EAASuF,SAASi3C,sBAAsBhgC,qBAAqBnK,KAAMjc,MACnE4J,EAASuF,SAASk3C,QAAQh/B,wBAAwBpL,KAAMjc,MACxD4J,EAASuF,SAASq3C,SAAS7pB,qBAAqB1gB,KAAMjc,MACtD4J,EAASuF,SAASq3C,SAAS1pB,wBAAwB7gB,KAAMjc,MACzD4J,EAASuF,SAASs3C,OAAO5b,WAAW5uB,KAAMjc,MAC1C4J,EAASuF,SAASu3C,mBAAmBzqC,KAAMjc,OAE/C4mD,EAAcnmD,UAAU8I,OAAS,SAAUC,GAEvC,GADsBxJ,KAAKgnD,cAAcx9C,GACpB,CACjB,GAAIinC,IACAsW,SAAU/mD,KAAK+mD,SACfv9C,OAAQA,EAEZxJ,MAAKgJ,OAAOoQ,IAAIpZ,KAAM,UAAWywC,GACjCzwC,KAAKinD,YAAYxW,KAGzBmW,EAAcnmD,UAAUymD,gBAAkB,SAAUz2C,GAChD,GAAI7O,GAAQ5B,KACRqmC,EAA2B,gBAAX,GAAsBM,KAAKI,MAAMt2B,GAAQA,CACzDw1C,iBAAgB5f,IAAWA,EAAO78B,OAC7B68B,EAAO0gB,UAAY1gB,EAAO0gB,WAAa/mD,KAAK+mD,WAC7C1gB,EAAO78B,OAAOm9C,6BAA8B,EAC5C3mD,KAAKgJ,OAAOoQ,IAAIpZ,KAAM,YAAaqmC,GACnCrmC,KAAKsT,iBAAiBmB,SAAS4xB,EAAO78B,QAAQkL,KAAK,WAC/C9S,EAAMulD,cAAc9gB,EAAO78B,WAKnCxJ,KAAKgJ,OAAOC,MAAMjJ,KAAM,yCAA0CqmC,IAO1EugB,EAAcnmD,UAAUumD,cAAgB,SAAUx9C,GAE9C,OADAxJ,KAAKmnD,cAAc39C,GACXA,EAAOoR,MACX,IAAKwrC,uBAAsB//B,qBAAqBpK,KAC5C,MAAOjc,MAAKonD,qBAAqB59C,EACrC,KAAK48C,uBAAsBhgC,qBAAqBnK,KAC5C,OAAO,CACX,KAAKgzB,gBAAe7yB,gBAAgBH,KAChC,MAAOjc,MAAKqnD,sBAAsB79C,EACtC,KAAKk9C,oBAAmBzqC,KACpB,MAAOjc,MAAKsnD,wBAAwB99C,GAE5C,OAAQA,EAAOm9C,6BAKnBC,EAAcnmD,UAAU0mD,cAAgB,SAAU39C,GAC9C,GAAIA,EAAOoR,OAASyqB,YAAYxf,gBAAgB5J,MACzCzS,EAAOoR,OAASurC,eAAe9Z,mBAAmBpwB,MAClDzS,EAAOoR,OAASwrC,sBAAsBhgC,qBAAqBnK,KAAM,CACpE,GAAI2J,GAAUpc,EAAOoc,OACjBA,KACA5lB,KAAK8mD,YAAclhC,EACfpc,EAAOoR,OAASyqB,YAAYxf,gBAAgB5J,MAAQzS,EAAOoR,OAASurC,eAAe9Z,mBAAmBpwB,OACtGjc,KAAKunD,uBAAyB3hC,EAAQ3b,MAE1CjK,KAAK6mD,QAAQtgB,MAAMvmC,KAAK8mD,gBAQpCF,EAAcnmD,UAAU2mD,qBAAuB,SAAU59C,GACrD,GAAIxJ,KAAKgnC,cAAcsZ,kBACnB,OAAO,CAGP,IAAI/+C,GAAQ,GAAImJ,UAASxH,YACrB5B,EAAOtB,KAAK8mD,WAChBvlD,GAAMQ,IAAIT,EACV,KAAK,GAAIqC,GAAK,EAAGC,EAAK4F,EAAOmC,OAAQhI,EAAKC,EAAGrE,OAAQoE,IAAM,CACvD,GAAItD,GAAIuD,EAAGD,GACP1E,EAAUsC,EAAMwC,QAAQ1D,EAAEiK,eACdnL,KAAZF,GACAe,KAAKwnD,YAAYvoD,EAASoB,EAAE2L,WAEpC,OAA0B7M,KAAtBqK,EAAO+c,WACP,IAAK,GAAIonB,GAAK,EAAGC,EAAKpkC,EAAO+c,WAAYonB,EAAKC,EAAGruC,OAAQouC,IAAM,CAC3D,GAAIroC,GAAIsoC,EAAGD,GACP1uC,EAAUsC,EAAMwC,QAAQuB,EAAEgF,eACdnL,KAAZF,GACAe,KAAKynD,eAAexoD,EAASqG,EAAEoiD,cAU3C,MAPIpmD,GAAK2I,OAASjK,KAAKunD,uBACnBvnD,KAAKsT,iBAAiBmB,SAAS,GAAI0xC,gBAAeha,kBAAkB7qC,IAGpEtB,KAAKsT,iBAAiBmB,SAAS,GAAI4wB,aAAY1f,eAAerkB,IAElEtB,KAAKunD,uBAAyBjmD,EAAK2I,MAC5B,GAGf28C,EAAcnmD,UAAU+mD,YAAc,SAAUvoD,EAAS+M,GACrD,GAAI9G,GAAIjG,CACRiG,GAAE4G,UAAajJ,EAAGmJ,EAAUnJ,EAAGC,EAAGkJ,EAAUlJ,GAC5CoC,EAAE6G,MAAShJ,MAAOiJ,EAAUjJ,MAAOC,OAAQgJ,EAAUhJ,SAEzD4jD,EAAcnmD,UAAUgnD,eAAiB,SAAUxoD,EAASyoD,GAChDzoD,EACNkhC,WAAct9B,EAAG6kD,EAAa7kD,EAAGC,EAAG4kD,EAAa5kD,IAEvD8jD,EAAcnmD,UAAU4mD,sBAAwB,SAAU79C,GACtD,GAAI0pC,GAAO,GAAIC,OAAM3pC,EAAO4O,MAAQnO,KAAM,4BAE1C,OADAs8C,cAAahV,OAAO2B,EAAM,gBACnB,GAEX0T,EAAcnmD,UAAU6mD,wBAA0B,SAAU99C,GACxD,OAAO,GAEXo9C,EAAgBr/C,YACZgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5C4L,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMK,wBAC5CwL,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CyJ,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMgC,gBAC5C6J,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkB,UAC5CuK,WAAW,qBAAsBjO,OAAQwrC,iBAAiB3oC,sBAAuB7C,OAAQmsD,iBAAiB3nD,cAAexE,UAC1H6sD,IAELN,eAAexoD,YACjB7D,SAAQ2sD,cAAgBA,c;;;;;;;ACpNxB7sD,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIytD,gBAAgC,WAChC,QAASA,GAAermD,GACpBtB,KAAK4nD,sBACL5nD,KAAK2J,WAAWrI,GAwBpB,MAtBAqmD,GAAelnD,UAAUkJ,WAAa,SAAU1K,GAC5C,GAAI2C,GAAQ5B,IACRf,GAAQo+B,UACRr9B,KAAK4nD,mBAAmB3lD,KAAKhD,EAAQO,QAChBL,KAArBF,EAAQC,UACRD,EAAQC,SAASqD,QAAQ,SAAUP,GAAS,MAAOJ,GAAM+H,WAAW3H,MAE5E2lD,EAAelnD,UAAUoB,MAAQ,SAAU2H,GACvC,IAAK,GAAI7F,GAAK,EAAGC,EAAK4F,EAAOqzB,YAAal5B,EAAKC,EAAGrE,OAAQoE,IAAM,CAC5D,GAAIkkD,GAAYjkD,EAAGD,GACfpC,EAAQvB,KAAK4nD,mBAAmBxlD,QAAQylD,IAC7B,IAAXtmD,GACAvB,KAAK4nD,mBAAmB1lD,OAAOX,EAAO,GAE9C,IAAK,GAAIosC,GAAK,EAAGC,EAAKpkC,EAAOozB,UAAW+Q,EAAKC,EAAGruC,OAAQouC,IAAM,CAC1D,GAAItQ,GAAWuQ,EAAGD,EAClB3tC,MAAK4nD,mBAAmB3lD,KAAKo7B,KAGrCsqB,EAAelnD,UAAUqnD,YAAc,WACnC9nD,KAAK4nD,uBAEFD,IAEX1tD,SAAQ0tD,eAAiBA,e;;;;;;;AC5BzB,QAASI,qBAAoBj8C,EAAUk8C,EAAQ/mB,EAAU5Y,OACtC,KAAXA,IAAqBA,EAAS,EAClC,IAAI4/B,GAAKn8C,EAASjJ,EAAImlD,EAClBE,EAAKp8C,EAAShJ,EAAIklD,EAClBziD,EAAK0iD,EAAKhnB,EAASp+B,EACnB2C,EAAK0iD,EAAKjnB,EAASn+B,EACnBmmB,EAAWrpB,KAAK6F,KAAKF,EAAKA,EAAKC,EAAKA,EAGxC,QACI3C,EAAGolD,GAHM1iD,EAAK0jB,GAAa,IAGV++B,EAAS3/B,GAC1BvlB,EAAGolD,GAHM1iD,EAAKyjB,GAAa,IAGV++B,EAAS3/B,IAIlC,QAAS8/B,kBAAiBC,EAAeC,EAAa1lD,GAClD,GAAIkO,IAAKu3C,EAAgBC,EAAYvlD,IAAMH,EAAMG,EAAIulD,EAAYvlD,EACjE,QAAQH,EAAME,EAAIwlD,EAAYxlD,GAAKgO,EAAIw3C,EAAYxlD,EAEvD,QAASylD,kBAAiBC,EAAeF,EAAa1lD,GAClD,GAAIkO,IAAK03C,EAAgBF,EAAYxlD,IAAMF,EAAME,EAAIwlD,EAAYxlD,EACjE,QAAQF,EAAMG,EAAIulD,EAAYvlD,GAAK+N,EAAIw3C,EAAYvlD,EAgCvD,QAAS0lD,wBAAuB78C,EAAQs1B,EAAU5Y,GAC9C,GAAIzgB,GAAIjH,WAAWoE,OAAO4G,GACtB88C,EAAS,GAAIC,oBAAmB9gD,EAAGq5B,EACvC,KAAKtgC,WAAW4F,aAAaqB,EAAE9E,EAAGm+B,EAASn+B,GAAI,CAC3C,GAAI6lD,GAAOR,iBAAiBx8C,EAAO7I,EAAG8E,EAAGq5B,EACrC0nB,IAAQh9C,EAAO9I,GAAK8lD,GAAQh9C,EAAO9I,EAAI8I,EAAO5I,OAC9C0lD,EAAOG,aAAaD,EAAMh9C,EAAO7I,EAAIulB,EACzC,IAAIwgC,GAAUV,iBAAiBx8C,EAAO7I,EAAI6I,EAAO3I,OAAQ4E,EAAGq5B,EACxD4nB,IAAWl9C,EAAO9I,GAAKgmD,GAAWl9C,EAAO9I,EAAI8I,EAAO5I,OACpD0lD,EAAOG,aAAaC,EAASl9C,EAAO7I,EAAI6I,EAAO3I,OAASqlB,GAEhE,IAAK1nB,WAAW4F,aAAaqB,EAAE/E,EAAGo+B,EAASp+B,GAAI,CAC3C,GAAIimD,GAAQR,iBAAiB38C,EAAO9I,EAAG+E,EAAGq5B,EACtC6nB,IAASn9C,EAAO7I,GAAKgmD,GAASn9C,EAAO7I,EAAI6I,EAAO3I,QAChDylD,EAAOG,aAAaj9C,EAAO9I,EAAIwlB,EAAQygC,EAC3C,IAAIC,GAAST,iBAAiB38C,EAAO9I,EAAI8I,EAAO5I,MAAO6E,EAAGq5B,EACtD8nB,IAAUp9C,EAAO7I,GAAKimD,GAAUp9C,EAAO7I,EAAI6I,EAAO3I,QAClDylD,EAAOG,aAAaj9C,EAAO9I,EAAI8I,EAAO5I,MAAQslB,EAAQ0gC,GAE9D,MAAON,GAAOO,KA1ElBjvD,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyG,YAAa,mBAAAvG,CAAQ,EAezBH,SAAQ8tD,oBAAsBA,mBAS9B,IAAIW,oBAAoC,WACpC,QAASA,GAAmBL,EAAapnB,GACrCjhC,KAAKqoD,YAAcA,EACnBroD,KAAKihC,SAAWA,EAChBjhC,KAAKipD,aAAe,EAwBxB,MAtBAP,GAAmBjoD,UAAUmoD,aAAe,SAAU/lD,EAAGC,GACrD,GAAIyC,GAAKvF,KAAKihC,SAASp+B,EAAIA,EACvB2C,EAAKxF,KAAKihC,SAASn+B,EAAIA,EACvBomD,EAAO3jD,EAAKA,EAAKC,EAAKA,GACtBxF,KAAKipD,YAAc,GAAKC,EAAOlpD,KAAKipD,eACpCjpD,KAAKmpD,aACDtmD,EAAGA,EACHC,EAAGA,GAEP9C,KAAKipD,YAAcC,IAG3BnvD,OAAOC,eAAe0uD,EAAmBjoD,UAAW,QAChDK,IAAK,WACD,WAAyB3B,KAArBa,KAAKmpD,YACEnpD,KAAKqoD,YAELroD,KAAKmpD,aAEpB/nD,YAAY,EACZC,cAAc,IAEXqnD,IAuBXzuD,SAAQuuD,uBAAyBA,uB;;;;;;ACnFjC;AACA;;;;;;;;ACIA,QAASY,WAAWl1B,EAAKC,GACvB,IAAK,GAAIzsB,KAAOwsB,GACdC,EAAIzsB,GAAOwsB,EAAIxsB,GAWnB,QAAS2hD,YAAYxpC,EAAK2N,EAAkBjuB,GAC1C,MAAO4tB,QAAOtN,EAAK2N,EAAkBjuB,GAlBvC,GAAIqvB,QAAS,mBAAAx0B,CAAQ,IACjB+yB,OAASyB,OAAOzB,MAQhBA,QAAOO,MAAQP,OAAOc,OAASd,OAAOM,aAAeN,OAAOsH,gBAC9Dvc,OAAOje,QAAU20B,QAGjBw6B,UAAUx6B,OAAQ30B,SAClBA,QAAQkzB,OAASk8B,YAQnBD,UAAUj8B,OAAQk8B,YAElBA,WAAW37B,KAAO,SAAU7N,EAAK2N,EAAkBjuB,GACjD,GAAmB,gBAARsgB,GACT,KAAM,IAAI8N,WAAU,gCAEtB,OAAOR,QAAOtN,EAAK2N,EAAkBjuB,IAGvC8pD,WAAWp7B,MAAQ,SAAUliB,EAAMmiB,EAAMC,GACvC,GAAoB,gBAATpiB,GACT,KAAM,IAAI4hB,WAAU,4BAEtB,IAAIsC,GAAM9C,OAAOphB,EAUjB,YATa5M,KAAT+uB,EACsB,gBAAbC,GACT8B,EAAI/B,KAAKA,EAAMC,GAEf8B,EAAI/B,KAAKA,GAGX+B,EAAI/B,KAAK,GAEJ+B,GAGTo5B,WAAW57B,YAAc,SAAU1hB,GACjC,GAAoB,gBAATA,GACT,KAAM,IAAI4hB,WAAU,4BAEtB,OAAOR,QAAOphB,IAGhBs9C,WAAW50B,gBAAkB,SAAU1oB,GACrC,GAAoB,gBAATA,GACT,KAAM,IAAI4hB,WAAU,4BAEtB,OAAOiB,QAAOE,WAAW/iB,I;;;;;;ACvC3B,QAASu9C,gBACPtpD,KAAKupD,QAAUvpD,KAAKupD,YACpBvpD,KAAKwpD,cAAgBxpD,KAAKwpD,mBAAiBrqD,GAwQ7C,QAASikC,YAAWvjB,GAClB,MAAsB,kBAARA,GAGhB,QAAS8iB,UAAS9iB,GAChB,MAAsB,gBAARA,GAGhB,QAASojB,UAASpjB,GAChB,MAAsB,gBAARA,IAA4B,OAARA,EAGpC,QAASijB,aAAYjjB,GACnB,WAAe,KAARA,EAnRT3H,OAAOje,QAAUqvD,aAGjBA,aAAaA,aAAeA,aAE5BA,aAAa7oD,UAAU8oD,YAAUpqD,GACjCmqD,aAAa7oD,UAAU+oD,kBAAgBrqD,GAIvCmqD,aAAaG,oBAAsB,GAInCH,aAAa7oD,UAAUipD,gBAAkB,SAAS54C,GAChD,IAAK6xB,SAAS7xB,IAAMA,EAAI,GAAK9K,MAAM8K,GACjC,KAAM6c,WAAU,8BAElB,OADA3tB,MAAKwpD,cAAgB14C,EACd9Q,MAGTspD,aAAa7oD,UAAUkiB,KAAO,SAAS1Y,GACrC,GAAI0/C,GAAIjmB,EAASntB,EAAKwL,EAAMtiB,EAAGqjB,CAM/B,IAJK9iB,KAAKupD,UACRvpD,KAAKupD,YAGM,UAATt/C,KACGjK,KAAKupD,QAAQtgD,OACbg6B,SAASjjC,KAAKupD,QAAQtgD,SAAWjJ,KAAKupD,QAAQtgD,MAAM1J,QAAS,CAEhE,IADAoqD,EAAK7nD,UAAU,aACGX,OAChB,KAAMwoD,EAGN,IAAI7vB,GAAM,GAAI34B,OAAM,yCAA2CwoD,EAAK,IAEpE,MADA7vB,GAAIjxB,QAAU8gD,EACR7vB,EAOZ,GAFA4J,EAAU1jC,KAAKupD,QAAQt/C,GAEnB64B,YAAYY,GACd,OAAO,CAET,IAAIN,WAAWM,GACb,OAAQ5hC,UAAUvC,QAEhB,IAAK,GACHmkC,EAAQvgC,KAAKnD,KACb,MACF,KAAK,GACH0jC,EAAQvgC,KAAKnD,KAAM8B,UAAU,GAC7B,MACF,KAAK,GACH4hC,EAAQvgC,KAAKnD,KAAM8B,UAAU,GAAIA,UAAU,GAC3C,MAEF,SACEigB,EAAO1iB,MAAMoB,UAAUiW,MAAMvT,KAAKrB,UAAW,GAC7C4hC,EAAQ7hC,MAAM7B,KAAM+hB,OAEnB,IAAIkhB,SAASS,GAIlB,IAHA3hB,EAAO1iB,MAAMoB,UAAUiW,MAAMvT,KAAKrB,UAAW,GAC7CghB,EAAY4gB,EAAQhtB,QACpBH,EAAMuM,EAAUvjB,OACXE,EAAI,EAAGA,EAAI8W,EAAK9W,IACnBqjB,EAAUrjB,GAAGoC,MAAM7B,KAAM+hB,EAG7B,QAAO,GAGTunC,aAAa7oD,UAAU6hB,YAAc,SAASrY,EAAMqG,GAClD,GAAIwB,EAEJ,KAAKsxB,WAAW9yB,GACd,KAAMqd,WAAU,8BA2ClB,OAzCK3tB,MAAKupD,UACRvpD,KAAKupD,YAIHvpD,KAAKupD,QAAQK,aACf5pD,KAAK2iB,KAAK,cAAe1Y,EACfm5B,WAAW9yB,EAASA,UACpBA,EAASA,SAAWA,GAE3BtQ,KAAKupD,QAAQt/C,GAGTg5B,SAASjjC,KAAKupD,QAAQt/C,IAE7BjK,KAAKupD,QAAQt/C,GAAMhI,KAAKqO,GAGxBtQ,KAAKupD,QAAQt/C,IAASjK,KAAKupD,QAAQt/C,GAAOqG,GAN1CtQ,KAAKupD,QAAQt/C,GAAQqG,EASnB2yB,SAASjjC,KAAKupD,QAAQt/C,MAAWjK,KAAKupD,QAAQt/C,GAAM4/C,SAIpD/3C,EAHGgxB,YAAY9iC,KAAKwpD,eAGhBF,aAAaG,oBAFbzpD,KAAKwpD,gBAKF13C,EAAI,GAAK9R,KAAKupD,QAAQt/C,GAAM1K,OAASuS,IAC5C9R,KAAKupD,QAAQt/C,GAAM4/C,QAAS,EAC5B/Y,QAAQ7nC,MAAM,mIAGAjJ,KAAKupD,QAAQt/C,GAAM1K,QACJ,kBAAlBuxC,SAAQgZ,OAEjBhZ,QAAQgZ,SAKP9pD,MAGTspD,aAAa7oD,UAAU2P,GAAKk5C,aAAa7oD,UAAU6hB,YAEnDgnC,aAAa7oD,UAAU8hB,KAAO,SAAStY,EAAMqG,GAM3C,QAASgQ,KACPtgB,KAAKyiB,eAAexY,EAAMqW,GAErBypC,IACHA,GAAQ,EACRz5C,EAASzO,MAAM7B,KAAM8B,YAVzB,IAAKshC,WAAW9yB,GACd,KAAMqd,WAAU,8BAElB,IAAIo8B,IAAQ,CAcZ,OAHAzpC,GAAEhQ,SAAWA,EACbtQ,KAAKoQ,GAAGnG,EAAMqW,GAEPtgB,MAITspD,aAAa7oD,UAAUgiB,eAAiB,SAASxY,EAAMqG,GACrD,GAAIskB,GAAM9oB,EAAUvM,EAAQE,CAE5B,KAAK2jC,WAAW9yB,GACd,KAAMqd,WAAU,8BAElB,KAAK3tB,KAAKupD,UAAYvpD,KAAKupD,QAAQt/C,GACjC,MAAOjK,KAMT,IAJA40B,EAAO50B,KAAKupD,QAAQt/C,GACpB1K,EAASq1B,EAAKr1B,OACduM,GAAY,EAER8oB,IAAStkB,GACR8yB,WAAWxO,EAAKtkB,WAAaskB,EAAKtkB,WAAaA,QAC3CtQ,MAAKupD,QAAQt/C,GAChBjK,KAAKupD,QAAQ9mC,gBACfziB,KAAK2iB,KAAK,iBAAkB1Y,EAAMqG,OAE/B,IAAI2yB,SAASrO,GAAO,CACzB,IAAKn1B,EAAIF,EAAQE,KAAM,GACrB,GAAIm1B,EAAKn1B,KAAO6Q,GACXskB,EAAKn1B,GAAG6Q,UAAYskB,EAAKn1B,GAAG6Q,WAAaA,EAAW,CACvDxE,EAAWrM,CACX,OAIJ,GAAIqM,EAAW,EACb,MAAO9L,KAEW,KAAhB40B,EAAKr1B,QACPq1B,EAAKr1B,OAAS,QACPS,MAAKupD,QAAQt/C,IAEpB2qB,EAAK1yB,OAAO4J,EAAU,GAGpB9L,KAAKupD,QAAQ9mC,gBACfziB,KAAK2iB,KAAK,iBAAkB1Y,EAAMqG,GAGtC,MAAOtQ,OAGTspD,aAAa7oD,UAAUiiB,mBAAqB,SAASzY,GACnD,GAAIvC,GAAKob,CAET,KAAK9iB,KAAKupD,QACR,MAAOvpD,KAGT,KAAKA,KAAKupD,QAAQ9mC,eAKhB,MAJyB,KAArB3gB,UAAUvC,OACZS,KAAKupD,WACEvpD,KAAKupD,QAAQt/C,UACbjK,MAAKupD,QAAQt/C,GACfjK,IAIT,IAAyB,IAArB8B,UAAUvC,OAAc,CAC1B,IAAKmI,IAAO1H,MAAKupD,QACH,mBAAR7hD,GACJ1H,KAAK0iB,mBAAmBhb,EAI1B,OAFA1H,MAAK0iB,mBAAmB,kBACxB1iB,KAAKupD,WACEvpD,KAKT,GAFA8iB,EAAY9iB,KAAKupD,QAAQt/C,GAErBm5B,WAAWtgB,GACb9iB,KAAKyiB,eAAexY,EAAM6Y,OACrB,IAAIA,EAET,KAAOA,EAAUvjB,QACfS,KAAKyiB,eAAexY,EAAM6Y,EAAUA,EAAUvjB,OAAS,GAI3D,cAFOS,MAAKupD,QAAQt/C,GAEbjK,MAGTspD,aAAa7oD,UAAUqiB,UAAY,SAAS7Y,GAQ1C,MANKjK,MAAKupD,SAAYvpD,KAAKupD,QAAQt/C,GAE1Bm5B,WAAWpjC,KAAKupD,QAAQt/C,KACxBjK,KAAKupD,QAAQt/C,IAEdjK,KAAKupD,QAAQt/C,GAAMyM,YAI7B4yC,aAAa7oD,UAAUupD,cAAgB,SAAS//C,GAC9C,GAAIjK,KAAKupD,QAAS,CAChB,GAAIU,GAAajqD,KAAKupD,QAAQt/C,EAE9B,IAAIm5B,WAAW6mB,GACb,MAAO,EACJ,IAAIA,EACP,MAAOA,GAAW1qD,OAEtB,MAAO,IAGT+pD,aAAaU,cAAgB,SAASE,EAASjgD,GAC7C,MAAOigD,GAAQF,cAAc//C,I;;;;;;;qECzP/B,QAASkgD,UAASC,EAAOj8B,EAAU4L,GACjC/5B,KAAKoqD,MAAQA,EACbpqD,KAAKmuB,SAAWA,EAChBnuB,KAAKorC,SAAWrR,EAChB/5B,KAAK+a,KAAO,KAKd,QAASsvC,eAAc5iC,GACrB,GAAI7lB,GAAQ5B,IAEZA,MAAK+a,KAAO,KACZ/a,KAAKw7B,MAAQ,KACbx7B,KAAKsqD,OAAS,WACZC,eAAe3oD,EAAO6lB,IAiC1B,QAAS+iC,qBAAoBJ,GAC3B,MAAOj9B,QAAOO,KAAK08B,GAErB,QAASK,eAAc97C,GACrB,MAAOwe,QAAOuB,SAAS/f,IAAQA,YAAe+7C,eAQhD,QAASC,QAET,QAASC,eAAcvuC,EAASwuC,GAC9BryB,OAASA,QAAU,mBAAAp+B,CAAQ,IAE3BiiB,EAAUA,MAIVrc,KAAK8qD,aAAezuC,EAAQyuC,WAExBD,YAAkBryB,UAAQx4B,KAAK8qD,WAAa9qD,KAAK8qD,cAAgBzuC,EAAQ0uC,mBAK7E,IAAIC,GAAM3uC,EAAQ4uC,cACdC,EAAalrD,KAAK8qD,WAAa,GAAK,KACxC9qD,MAAKirD,cAAgBD,GAAe,IAARA,EAAYA,EAAME,EAG9ClrD,KAAKirD,cAAgBrrD,KAAKC,MAAMG,KAAKirD,eAGrCjrD,KAAKmrD,aAAc,EAGnBnrD,KAAKorD,WAAY,EAEjBprD,KAAKqrD,QAAS,EAEdrrD,KAAK+4B,OAAQ,EAEb/4B,KAAKsrD,UAAW,EAGhBtrD,KAAK45B,WAAY,CAKjB,IAAI2xB,IAAqC,IAA1BlvC,EAAQmvC,aACvBxrD,MAAKwrD,eAAiBD,EAKtBvrD,KAAKyrD,gBAAkBpvC,EAAQovC,iBAAmB,OAKlDzrD,KAAKT,OAAS,EAGdS,KAAK0rD,SAAU,EAGf1rD,KAAK2rD,OAAS,EAMd3rD,KAAK4rD,MAAO,EAKZ5rD,KAAK6rD,kBAAmB,EAGxB7rD,KAAK00C,QAAU,SAAUiV,GACvBjV,QAAQmW,EAAQlB,IAIlB3pD,KAAK8rD,QAAU,KAGf9rD,KAAK+rD,SAAW,EAEhB/rD,KAAKgsD,gBAAkB,KACvBhsD,KAAKisD,oBAAsB,KAI3BjsD,KAAKksD,UAAY,EAIjBlsD,KAAKmsD,aAAc,EAGnBnsD,KAAKosD,cAAe,EAGpBpsD,KAAKqsD,qBAAuB,EAI5BrsD,KAAKssD,mBAAqB,GAAIjC,eAAcrqD,MAyC9C,QAAS04B,UAASrc,GAUhB,GATAmc,OAASA,QAAU,mBAAAp+B,CAAQ,MAStBmyD,gBAAgBppD,KAAKu1B,SAAU14B,OAAWA,eAAgBw4B,SAC7D,MAAO,IAAIE,UAASrc,EAGtBrc,MAAK84B,eAAiB,GAAI8xB,eAAcvuC,EAASrc,MAGjDA,KAAKsD,UAAW,EAEZ+Y,IAC2B,kBAAlBA,GAAQmB,QAAsBxd,KAAKwsD,OAASnwC,EAAQmB,OAEjC,kBAAnBnB,GAAQowC,SAAuBzsD,KAAK0sD,QAAUrwC,EAAQowC,QAElC,kBAApBpwC,GAAQq8B,UAAwB14C,KAAK65B,SAAWxd,EAAQq8B,SAEtC,kBAAlBr8B,GAAQswC,QAAsB3sD,KAAK4sD,OAASvwC,EAAQswC,QAGjEE,OAAO1pD,KAAKnD,MAQd,QAAS8sD,eAAcjC,EAAQ9wB,GAC7B,GAAI4vB,GAAK,GAAIxoD,OAAM,kBAEnB0pD,GAAOloC,KAAK,QAASgnC,GACrB3wB,gBAAgBe,EAAI4vB,GAMtB,QAASoD,YAAWlC,EAAQpjC,EAAO2iC,EAAOrwB,GACxC,GAAIizB,IAAQ,EACRrD,GAAK,CAYT,OAVc,QAAVS,EACFT,EAAK,GAAIh8B,WAAU,uCACO,gBAAVy8B,QAAgCjrD,KAAVirD,GAAwB3iC,EAAMqjC,aACpEnB,EAAK,GAAIh8B,WAAU,oCAEjBg8B,IACFkB,EAAOloC,KAAK,QAASgnC,GACrB3wB,gBAAgBe,EAAI4vB,GACpBqD,GAAQ,GAEHA,EAqDT,QAASC,aAAYxlC,EAAO2iC,EAAOj8B,GAIjC,MAHK1G,GAAMqjC,aAAsC,IAAxBrjC,EAAM+jC,eAA4C,gBAAVpB,KAC/DA,EAAQj9B,OAAOO,KAAK08B,EAAOj8B,IAEtBi8B,EAMT,QAAS8C,eAAcrC,EAAQpjC,EAAO0lC,EAAO/C,EAAOj8B,EAAU4L,GAC5D,IAAKozB,EAAO,CACV,GAAIC,GAAWH,YAAYxlC,EAAO2iC,EAAOj8B,EACrCi8B,KAAUgD,IACZD,GAAQ,EACRh/B,EAAW,SACXi8B,EAAQgD,GAGZ,GAAI72C,GAAMkR,EAAMqjC,WAAa,EAAIV,EAAM7qD,MAEvCkoB,GAAMloB,QAAUgX,CAEhB,IAAI+b,GAAM7K,EAAMloB,OAASkoB,EAAMwjC,aAI/B,IAFK34B,IAAK7K,EAAM2jC,WAAY,GAExB3jC,EAAMikC,SAAWjkC,EAAMkkC,OAAQ,CACjC,GAAI0B,GAAO5lC,EAAMwkC,mBACjBxkC,GAAMwkC,qBACJ7B,MAAOA,EACPj8B,SAAUA,EACVg/B,MAAOA,EACP/hB,SAAUrR,EACVhf,KAAM,MAEJsyC,EACFA,EAAKtyC,KAAO0M,EAAMwkC,oBAElBxkC,EAAMukC,gBAAkBvkC,EAAMwkC,oBAEhCxkC,EAAM4kC,sBAAwB,MAE9BiB,SAAQzC,EAAQpjC,GAAO,EAAOlR,EAAK6zC,EAAOj8B,EAAU4L,EAGtD,OAAOzH,GAGT,QAASg7B,SAAQzC,EAAQpjC,EAAOglC,EAAQl2C,EAAK6zC,EAAOj8B,EAAU4L,GAC5DtS,EAAMskC,SAAWx1C,EACjBkR,EAAMqkC,QAAU/xB,EAChBtS,EAAMikC,SAAU,EAChBjkC,EAAMmkC,MAAO,EACTa,EAAQ5B,EAAO6B,QAAQtC,EAAO3iC,EAAMitB,SAAcmW,EAAO2B,OAAOpC,EAAOj8B,EAAU1G,EAAMitB,SAC3FjtB,EAAMmkC,MAAO,EAGf,QAAS2B,cAAa1C,EAAQpjC,EAAOmkC,EAAMjC,EAAI5vB,KAC3CtS,EAAMykC,UAEJN,GAGF5yB,gBAAgBe,EAAI4vB,GAGpB3wB,gBAAgBw0B,YAAa3C,EAAQpjC,GACrCojC,EAAO/xB,eAAeszB,cAAe,EACrCvB,EAAOloC,KAAK,QAASgnC,KAIrB5vB,EAAG4vB,GACHkB,EAAO/xB,eAAeszB,cAAe,EACrCvB,EAAOloC,KAAK,QAASgnC,GAGrB6D,YAAY3C,EAAQpjC,IAIxB,QAASgmC,oBAAmBhmC,GAC1BA,EAAMikC,SAAU,EAChBjkC,EAAMqkC,QAAU,KAChBrkC,EAAMloB,QAAUkoB,EAAMskC,SACtBtkC,EAAMskC,SAAW,EAGnB,QAASrX,SAAQmW,EAAQlB,GACvB,GAAIliC,GAAQojC,EAAO/xB,eACf8yB,EAAOnkC,EAAMmkC,KACb7xB,EAAKtS,EAAMqkC,OAIf,IAFA2B,mBAAmBhmC,GAEfkiC,EAAI4D,aAAa1C,EAAQpjC,EAAOmkC,EAAMjC,EAAI5vB,OAAS,CAErD,GAAIuxB,GAAWoC,WAAWjmC,EAErB6jC,IAAa7jC,EAAMkkC,QAAWlkC,EAAMokC,mBAAoBpkC,EAAMukC,iBACjE2B,YAAY9C,EAAQpjC,GAGlBmkC,EAEFgC,WAAWC,WAAYhD,EAAQpjC,EAAO6jC,EAAUvxB,GAGhD8zB,WAAWhD,EAAQpjC,EAAO6jC,EAAUvxB,IAK1C,QAAS8zB,YAAWhD,EAAQpjC,EAAO6jC,EAAUvxB,GACtCuxB,GAAUwC,aAAajD,EAAQpjC,GACpCA,EAAMykC,YACNnyB,IACAyzB,YAAY3C,EAAQpjC,GAMtB,QAASqmC,cAAajD,EAAQpjC,GACP,IAAjBA,EAAMloB,QAAgBkoB,EAAM2jC,YAC9B3jC,EAAM2jC,WAAY,EAClBP,EAAOloC,KAAK,UAKhB,QAASgrC,aAAY9C,EAAQpjC,GAC3BA,EAAMokC,kBAAmB,CACzB,IAAIrwB,GAAQ/T,EAAMukC,eAElB,IAAInB,EAAO6B,SAAWlxB,GAASA,EAAMzgB,KAAM,CAEzC,GAAIse,GAAI5R,EAAM4kC,qBACVz9B,EAAS,GAAIvvB,OAAMg6B,GACnB00B,EAAStmC,EAAM6kC,kBACnByB,GAAOvyB,MAAQA,CAIf,KAFA,GAAIwyB,GAAQ,EACRC,GAAa,EACVzyB,GACL5M,EAAOo/B,GAASxyB,EACXA,EAAM2xB,QAAOc,GAAa,GAC/BzyB,EAAQA,EAAMzgB,KACdizC,GAAS,CAEXp/B,GAAOq/B,WAAaA,EAEpBX,QAAQzC,EAAQpjC,GAAO,EAAMA,EAAMloB,OAAQqvB,EAAQ,GAAIm/B,EAAOzD,QAI9D7iC,EAAMykC,YACNzkC,EAAMwkC,oBAAsB,KACxB8B,EAAOhzC,MACT0M,EAAM6kC,mBAAqByB,EAAOhzC,KAClCgzC,EAAOhzC,KAAO,MAEd0M,EAAM6kC,mBAAqB,GAAIjC,eAAc5iC,OAE1C,CAEL,KAAO+T,GAAO,CACZ,GAAI4uB,GAAQ5uB,EAAM4uB,MACdj8B,EAAWqN,EAAMrN,SACjB4L,EAAKyB,EAAM4P,QASf,IANAkiB,QAAQzC,EAAQpjC,GAAO,EAFbA,EAAMqjC,WAAa,EAAIV,EAAM7qD,OAEJ6qD,EAAOj8B,EAAU4L,GACpDyB,EAAQA,EAAMzgB,KAKV0M,EAAMikC,QACR,MAIU,OAAVlwB,IAAgB/T,EAAMwkC,oBAAsB,MAGlDxkC,EAAM4kC,qBAAuB,EAC7B5kC,EAAMukC,gBAAkBxwB,EACxB/T,EAAMokC,kBAAmB,EAiC3B,QAAS6B,YAAWjmC,GAClB,MAAOA,GAAM4jC,QAA2B,IAAjB5jC,EAAMloB,QAA0C,OAA1BkoB,EAAMukC,kBAA6BvkC,EAAM6jC,WAAa7jC,EAAMikC,QAE3G,QAASwC,WAAUrD,EAAQpjC,GACzBojC,EAAO+B,OAAO,SAAU9yB,GACtBrS,EAAMykC,YACFpyB,GACF+wB,EAAOloC,KAAK,QAASmX,GAEvBrS,EAAM0kC,aAAc,EACpBtB,EAAOloC,KAAK,aACZ6qC,YAAY3C,EAAQpjC,KAGxB,QAAS0mC,WAAUtD,EAAQpjC,GACpBA,EAAM0kC,aAAgB1kC,EAAM0jC,cACF,kBAAlBN,GAAO+B,QAChBnlC,EAAMykC,YACNzkC,EAAM0jC,aAAc,EACpBnyB,gBAAgBk1B,UAAWrD,EAAQpjC,KAEnCA,EAAM0kC,aAAc,EACpBtB,EAAOloC,KAAK,eAKlB,QAAS6qC,aAAY3C,EAAQpjC,GAC3B,GAAI2mC,GAAOV,WAAWjmC,EAQtB,OAPI2mC,KACFD,UAAUtD,EAAQpjC,GACM,IAApBA,EAAMykC,YACRzkC,EAAM6jC,UAAW,EACjBT,EAAOloC,KAAK,YAGTyrC,EAGT,QAASC,aAAYxD,EAAQpjC,EAAOsS,GAClCtS,EAAM4jC,QAAS,EACfmC,YAAY3C,EAAQpjC,GAChBsS,IACEtS,EAAM6jC,SAAUtyB,gBAAgBe,GAAS8wB,EAAOtoC,KAAK,SAAUwX,IAErEtS,EAAMsR,OAAQ,EACd8xB,EAAOvnD,UAAW,EAGpB,QAASinD,gBAAe+D,EAAS7mC,EAAOqS,GACtC,GAAI0B,GAAQ8yB,EAAQ9yB,KAEpB,KADA8yB,EAAQ9yB,MAAQ,KACTA,GAAO,CACZ,GAAIzB,GAAKyB,EAAM4P,QACf3jB,GAAMykC,YACNnyB,EAAGD,GACH0B,EAAQA,EAAMzgB,KAEZ0M,EAAM6kC,mBACR7kC,EAAM6kC,mBAAmBvxC,KAAOuzC,EAEhC7mC,EAAM6kC,mBAAqBgC,EA7lB/B,GAAIt1B,iBAAkB,mBAAA5+B,CAAQ,GAG9B8d,QAAOje,QAAUy+B,QAwBjB,IAAIk1B,aAAc/rC,QAAQI,UAAY,QAAS,SAAS7f,QAAQyf,QAAQO,QAAQ1L,MAAM,EAAG,KAAO,EAAIg8B,aAAe1Z,gBAI/GR,MAGJE,UAASkyB,cAAgBA,aAGzB,IAAIpxB,MAAO,mBAAAp/B,CAAQ,GACnBo/B,MAAKC,SAAW,mBAAAr/B,CAAQ,GAIxB,IAAIm0D,eACFC,UAAW,mBAAAp0D,CAAQ,MAKjByyD,OAAS,mBAAAzyD,CAAQ,KAIjB+yB,OAAS,mBAAA/yB,CAAQ,KAAe+yB,OAChCu9B,cAAgBr2B,OAAOvH,YAAc,aASrC2hC,YAAc,mBAAAr0D,CAAQ,IAE1Bo/B,MAAKC,SAASf,SAAUm0B,QA0GxBjC,cAAcnqD,UAAUiuD,UAAY,WAGlC,IAFA,GAAI3tD,GAAUf,KAAKgsD,gBACfz5B,KACGxxB,GACLwxB,EAAItwB,KAAKlB,GACTA,EAAUA,EAAQga,IAEpB,OAAOwX,IAGT,WACE,IACEx4B,OAAOC,eAAe4wD,cAAcnqD,UAAW,UAC7CK,IAAKytD,aAAaC,UAAU,WAC1B,MAAOxuD,MAAK0uD,aACX,6EAAmF,aAExF,MAAOvT,OAKX,IAAIoR,gBACkB,mBAAX9vD,SAAyBA,OAAOkyD,aAAiE,kBAA3Cj8C,UAASjS,UAAUhE,OAAOkyD,cACzFpC,gBAAkB75C,SAASjS,UAAUhE,OAAOkyD,aAC5C50D,OAAOC,eAAe0+B,SAAUj8B,OAAOkyD,aACrCz0D,MAAO,SAAUmsC,GACf,QAAIkmB,gBAAgBppD,KAAKnD,KAAMqmC,IAExBA,GAAUA,EAAOvN,yBAA0B8xB,mBAItD2B,gBAAkB,SAAUlmB,GAC1B,MAAOA,aAAkBrmC,OAqC7B04B,SAASj4B,UAAUmuD,KAAO,WACxB5uD,KAAK2iB,KAAK,QAAS,GAAIxhB,OAAM,+BA8B/Bu3B,SAASj4B,UAAU+c,MAAQ,SAAU4sC,EAAOj8B,EAAU4L,GACpD,GAAItS,GAAQznB,KAAK84B,eACbxG,GAAM,EACN66B,EAAQ1C,cAAcL,KAAW3iC,EAAMqjC,UAoB3C,OAlBIqC,KAAUhgC,OAAOuB,SAAS07B,KAC5BA,EAAQI,oBAAoBJ,IAGN,kBAAbj8B,KACT4L,EAAK5L,EACLA,EAAW,MAGTg/B,EAAOh/B,EAAW,SAAmBA,IAAUA,EAAW1G,EAAMgkC,iBAElD,kBAAP1xB,KAAmBA,EAAK4wB,KAE/BljC,EAAMsR,MAAO+zB,cAAc9sD,KAAM+5B,IAAaozB,GAASJ,WAAW/sD,KAAMynB,EAAO2iC,EAAOrwB,MACxFtS,EAAMykC,YACN55B,EAAM46B,cAAcltD,KAAMynB,EAAO0lC,EAAO/C,EAAOj8B,EAAU4L,IAGpDzH,GAGToG,SAASj4B,UAAUouD,KAAO,WACZ7uD,KAAK84B,eAEX6yB,UAGRjzB,SAASj4B,UAAUquD,OAAS,WAC1B,GAAIrnC,GAAQznB,KAAK84B,cAEbrR,GAAMkkC,SACRlkC,EAAMkkC,SAEDlkC,EAAMikC,SAAYjkC,EAAMkkC,QAAWlkC,EAAM6jC,UAAa7jC,EAAMokC,mBAAoBpkC,EAAMukC,iBAAiB2B,YAAY3tD,KAAMynB,KAIlIiR,SAASj4B,UAAUsuD,mBAAqB,SAA4B5gC,GAGlE,GADwB,gBAAbA,KAAuBA,EAAWA,EAASgB,kBAC/C,MAAO,OAAQ,QAAS,QAAS,SAAU,SAAU,OAAQ,QAAS,UAAW,WAAY,OAAO/sB,SAAS+rB,EAAW,IAAIgB,gBAAkB,GAAI,KAAM,IAAIxB,WAAU,qBAAuBQ,EAEpM,OADAnuB,MAAK84B,eAAe2yB,gBAAkBt9B,EAC/BnuB,MAmMT04B,SAASj4B,UAAU+rD,OAAS,SAAUpC,EAAOj8B,EAAU4L,GACrDA,EAAG,GAAI54B,OAAM,iCAGfu3B,SAASj4B,UAAUisD,QAAU,KAE7Bh0B,SAASj4B,UAAU4uB,IAAM,SAAU+6B,EAAOj8B,EAAU4L,GAClD,GAAItS,GAAQznB,KAAK84B,cAEI,mBAAVsxB,IACTrwB,EAAKqwB,EACLA,EAAQ,KACRj8B,EAAW,MACkB,kBAAbA,KAChB4L,EAAK5L,EACLA,EAAW,MAGC,OAAVi8B,OAA4BjrD,KAAVirD,GAAqBpqD,KAAKwd,MAAM4sC,EAAOj8B,GAGzD1G,EAAMkkC,SACRlkC,EAAMkkC,OAAS,EACf3rD,KAAK8uD,UAIFrnC,EAAM4jC,QAAW5jC,EAAM6jC,UAAU+C,YAAYruD,KAAMynB,EAAOsS,IAoEjEhgC,OAAOC,eAAe0+B,SAASj4B,UAAW,aACxCK,IAAK,WACH,WAA4B3B,KAAxBa,KAAK84B,gBAGF94B,KAAK84B,eAAec,WAE7Bl2B,IAAK,SAAUxJ,GAGR8F,KAAK84B,iBAMV94B,KAAK84B,eAAec,UAAY1/B,MAIpCw+B,SAASj4B,UAAUi4C,QAAU+V,YAAY/V,QACzChgB,SAASj4B,UAAUuuD,WAAaP,YAAYQ,UAC5Cv2B,SAASj4B,UAAUo5B,SAAW,SAAUC,EAAKC,GAC3C/5B,KAAKqvB,MACL0K,EAAGD,I;;;;;;;ACtpBL7/B,QAAUie,OAAOje,QAAU,mBAAAG,CAAQ,KACnCH,QAAQ4yD,OAAS5yD,QACjBA,QAAQw+B,SAAWx+B,QACnBA,QAAQy+B,SAAW,mBAAAt+B,CAAQ,KAC3BH,QAAQu+B,OAAS,mBAAAp+B,CAAQ,IACzBH,QAAQi1D,UAAY,mBAAA90D,CAAQ,KAC5BH,QAAQk1D,YAAc,mBAAA/0D,CAAQ,K;;;;;;;ACL9B,GAAI2F,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GAQtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBg1D,MAAQ,mBAAAh1D,CAAQ,IAChBi1D,QAAU,mBAAAj1D,CAAQ,KAClBk1D,gBAAkB,mBAAAl1D,CAAQ,KAC1Bm1D,qBAAsC,SAAU5tD,GAEhD,QAAS4tD,KACL,MAAkB,QAAX5tD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAK/D,MAPAD,WAAUwvD,EAAsB5tD,GAIhC4tD,EAAqB9uD,UAAU+uD,WAAa,SAAUC,GAClD,MAA2B,QAApBA,EAAW5b,OAAkB4b,EAAW5b,KAAK6b,SAAS,gBAAkBD,EAAW5b,KAAK6b,SAAS,iBAErGH,GACTH,MAAM3wD,YACRxE,SAAQgxB,QAAU,WACd,GAAI0kC,GAAiB,GAAIpnD,aAAYhO,gBAAgB,SAAUkb,EAAMm6C,EAAQ/P,EAASC,GAClFA,EAAOsP,MAAM7yD,MAAMkB,SAASoyD,GAAGT,MAAMxe,eAAekf,mBACpDhQ,EAAOsP,MAAM7yD,MAAMmB,UAAU+gD,gBAAgB2Q,MAAM1xD,SAAS0oC,MAC5D0Z,EAAOsP,MAAM7yD,MAAMoB,eAAekyD,GAAGT,MAAMW,eAAeD,mBAC1DhQ,EAAOsP,MAAM7yD,MAAMkC,aAAaoxD,GAAGN,sBAAsBO,kBACzD,IAAIjnD,IAAY4M,KAAMA,EAAMm6C,OAAQA,EAAQ/P,QAASA,EAASC,OAAQA,EACtEsP,OAAM9Q,sBAAsBz1C,EAAS,QAASumD,MAAM5uB,OAAQ4uB,MAAMY,YAClEZ,MAAM9Q,sBAAsBz1C,EAAS,OAAQymD,gBAAgBW,QAASZ,QAAQa,aAC9Ed,MAAM9Q,sBAAsBz1C,EAAS,OAAQymD,gBAAgBa,QAASd,QAAQe,aAC9EhB,MAAM9Q,sBAAsBz1C,EAAS,OAAQymD,gBAAgBe,QAAShB,QAAQiB,aAC9ElB,MAAM9Q,sBAAsBz1C,EAAS,QAASumD,MAAMvtB,OAAQwtB,QAAQkB,cACpEnB,MAAM9Q,sBAAsBz1C,EAAS,WAAYymD,gBAAgBkB,YAAanB,QAAQoB,cACtFrB,MAAM1P,uBAAuB72C,GACzBw3C,mBAAmB,MAGvB98B,EAAY,GAAIhb,aAAYlO,SAEhC,OADAkpB,GAAUsjB,KAAKuoB,MAAMpkC,cAAeokC,MAAM3jC,aAAc2jC,MAAM/jC,aAAc+jC,MAAMjkC,WAAYikC,MAAM7jC,WAAY6jC,MAAMrjC,YAAaqjC,MAAMvjC,eAAgBujC,MAAMjjC,aAAcijC,MAAMnjC,eAAgB0jC,GAC5LpsC,G;;;;;;;AC3CX,QAASmtC,iBAGL,IAFA,GAAIC,GAASnwC,OAAO+uB,SAASohB,OAAOxmD,UAAU,GAC1CI,KACGomD,EAAOpxD,OAAS,GAAG,CACtB,GAAIqxD,GAAiBD,EAAOvuD,QAAQ,KAChCyuD,MAAQ,EACRD,GAAiB,GACjBC,EAAQF,EACRA,EAAS,KAGTE,EAAQF,EAAOxmD,UAAU,EAAGymD,GAC5BD,EAASA,EAAOxmD,UAAUymD,EAAiB,GAE/C,IAAIE,GAAaD,EAAMzuD,QAAQ,IAC3B0uD,GAAa,GAAKA,EAAaD,EAAMtxD,OAAS,IAC9CgL,EAAOsmD,EAAM1mD,UAAU,EAAG2mD,IAAeD,EAAM1mD,UAAU2mD,EAAa,IAG9E,MAAOvmD,GAGX,QAASwmD,gBAAeC,EAAQN,GAC5B,GAAIO,GACA3gD,EAAW,SAAUD,OACQlR,KAAzB8xD,GACAzwC,OAAOU,aAAa+vC,GAExBA,EAAuBzwC,OAAOM,WAAW,WACrC,GAAIugB,GAAS1sB,SAASE,eAAe,aACrC,IAAe,OAAXwsB,EAAiB,CACjB,GAAI6vB,GAAaR,EAAcrgD,GAC3B8gD,EAAUC,aAAaF,EAC3B7vB,GAAOxjB,aAAa,OAAQszC,KAEjC,KAEPH,GAAOK,wBAAwB/gD,GAC/BA,MAGJ,QAAS8gD,cAAaF,GAClB,GAAIC,GAAU3wC,OAAO+uB,SAASsE,KAC1Byd,EAAaH,EAAQ/uD,QAAQ,IAIjC,OAHIkvD,GAAa,IACbH,EAAUA,EAAQhnD,UAAU,EAAGmnD,IACnCH,GAAWI,kBAAkBL,GAIjC,QAASK,mBAAkBL,GACvB,GAAI3mD,GAAS,GACT9K,EAAI,CACR,KAAK,GAAIoxD,KAASK,GACd3mD,IAAsB,IAAN9K,EAAU,IAAM,KAAOoxD,EAAQ,IAAMK,EAAWL,GAChEpxD,GAEJ,OAAO8K,GA1DXxQ,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAsBtDD,QAAQy2D,cAAgBA,cAmBxBz2D,QAAQ82D,eAAiBA,eASzB92D,QAAQm3D,aAAeA,aAUvBn3D,QAAQs3D,kBAAoBA,kB;;;;;;ACtD5B,0DAAIxpD,UACJ,SAAWA,GACP,YAwEA,SAAShM,GAASyL,EAAYC,EAAQ+pD,EAAaC,GAC/C,GAAKC,EAAYF,GAYZ,CACD,IAAKG,EAAQnqD,GACT,KAAM,IAAImmB,UACd,KAAKikC,EAAcnqD,GACf,KAAM,IAAIkmB,UACd,OAAOkkC,GAAoBrqD,EAAYC,GAhBvC,IAAKkqD,EAAQnqD,GACT,KAAM,IAAImmB,UACd,KAAKmkC,EAASrqD,GACV,KAAM,IAAIkmB,UACd,KAAKmkC,EAASL,KAAgBC,EAAYD,KAAgBM,EAAON,GAC7D,KAAM,IAAI9jC,UAId,OAHIokC,GAAON,KACPA,MAAatyD,IACjBqyD,EAAcQ,EAAcR,GACrBS,EAAiBzqD,EAAYC,EAAQ+pD,EAAaC,GAqDjE,QAAStpD,GAASmJ,EAAa4gD,GAC3B,QAAS5pD,GAAUb,EAAQ+pD,GACvB,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UACd,KAAK+jC,EAAYF,KAAiBW,EAAcX,GAC5C,KAAM,IAAI7jC,UACdykC,GAA0B9gD,EAAa4gD,EAAezqD,EAAQ+pD,GAElE,MAAOlpD,GA0CX,QAASyJ,GAAeT,EAAa4gD,EAAezqD,EAAQ+pD,GACxD,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UAGd,OAFK+jC,GAAYF,KACbA,EAAcQ,EAAcR,IACzBY,EAA0B9gD,EAAa4gD,EAAezqD,EAAQ+pD,GAqCzE,QAASa,GAAY/gD,EAAa7J,EAAQ+pD,GACtC,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UAGd,OAFK+jC,GAAYF,KACbA,EAAcQ,EAAcR,IACzBc,EAAoBhhD,EAAa7J,EAAQ+pD,GAqCpD,QAAS9/C,GAAeJ,EAAa7J,EAAQ+pD,GACzC,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UAGd,OAFK+jC,GAAYF,KACbA,EAAcQ,EAAcR,IACzBe,EAAuBjhD,EAAa7J,EAAQ+pD,GAqCvD,QAAS7/C,GAAYL,EAAa7J,EAAQ+pD,GACtC,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UAGd,OAFK+jC,GAAYF,KACbA,EAAcQ,EAAcR,IACzBgB,EAAoBlhD,EAAa7J,EAAQ+pD,GAqCpD,QAASiB,GAAenhD,EAAa7J,EAAQ+pD,GACzC,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UAGd,OAFK+jC,GAAYF,KACbA,EAAcQ,EAAcR,IACzBkB,EAAuBphD,EAAa7J,EAAQ+pD,GAoCvD,QAASmB,GAAgBlrD,EAAQ+pD,GAC7B,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UAGd,OAFK+jC,GAAYF,KACbA,EAAcQ,EAAcR,IACzBoB,EAAqBnrD,EAAQ+pD,GAoCxC,QAASqB,GAAmBprD,EAAQ+pD,GAChC,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UAGd,OAFK+jC,GAAYF,KACbA,EAAcQ,EAAcR,IACzBsB,EAAwBrrD,EAAQ+pD,GAqC3C,QAASuB,GAAezhD,EAAa7J,EAAQ+pD,GACzC,IAAKM,EAASrqD,GACV,KAAM,IAAIkmB,UACT+jC,GAAYF,KACbA,EAAcQ,EAAcR,GAChC,IAAIwB,GAAcC,EAAuBxrD,EAAQ+pD,GAAwB,EACzE,IAAIE,EAAYsB,GACZ,OAAO,CACX,KAAKA,EAAYnvD,OAAOyN,GACpB,OAAO,CACX,IAAI0hD,EAAYjnD,KAAO,EACnB,OAAO,CACX,IAAImnD,GAAiBtlD,EAAS9M,IAAI2G,EAElC,OADAyrD,GAAervD,OAAO2tD,GAClB0B,EAAennD,KAAO,IAE1B6B,EAAS/J,OAAO4D,IACT,GAGX,QAASoqD,GAAoBrqD,EAAYC,GACrC,IAAK,GAAIhI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,IAAKA,EAAG,CAC7C,GAAI6I,GAAYd,EAAW/H,GACvB0zD,EAAY7qD,EAAUb,EAC1B,KAAKiqD,EAAYyB,KAAepB,EAAOoB,GAAY,CAC/C,IAAKvB,EAAcuB,GACf,KAAM,IAAIxlC,UACdlmB,GAAS0rD,GAGjB,MAAO1rD,GAEX,QAASwqD,GAAiBzqD,EAAYC,EAAQ+pD,EAAa5iD,GACvD,IAAK,GAAInP,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,IAAKA,EAAG,CAC7C,GAAI6I,GAAYd,EAAW/H,GACvB0zD,EAAY7qD,EAAUb,EAAQ+pD,EAAa5iD,EAC/C,KAAK8iD,EAAYyB,KAAepB,EAAOoB,GAAY,CAC/C,IAAKrB,EAASqB,GACV,KAAM,IAAIxlC,UACd/e,GAAaukD,GAGrB,MAAOvkD,GAEX,QAASqkD,GAAuBG,EAAGzY,EAAG0Y,GAClC,GAAIH,GAAiBtlD,EAAS9M,IAAIsyD,EAClC,IAAI1B,EAAYwB,GAAiB,CAC7B,IAAKG,EACD,MACJH,GAAiB,GAAII,GACrB1lD,EAASlK,IAAI0vD,EAAGF,GAEpB,GAAIF,GAAcE,EAAepyD,IAAI65C,EACrC,IAAI+W,EAAYsB,GAAc,CAC1B,IAAKK,EACD,MACJL,GAAc,GAAIM,GAClBJ,EAAexvD,IAAIi3C,EAAGqY,GAE1B,MAAOA,GAIX,QAASV,GAAoBiB,EAAaH,EAAGzY,GAEzC,GADa4X,EAAuBgB,EAAaH,EAAGzY,GAEhD,OAAO,CACX,IAAIz5C,GAASsyD,EAAuBJ,EACpC,QAAKrB,EAAO7wD,IACDoxD,EAAoBiB,EAAaryD,EAAQy5C,GAKxD,QAAS4X,GAAuBgB,EAAaH,EAAGzY,GAC5C,GAAIqY,GAAcC,EAAuBG,EAAGzY,GAAc,EAC1D,QAAI+W,EAAYsB,IAETS,EAAUT,EAAYlvD,IAAIyvD,IAIrC,QAASf,GAAoBe,EAAaH,EAAGzY,GAEzC,GADa4X,EAAuBgB,EAAaH,EAAGzY,GAEhD,MAAO+X,GAAuBa,EAAaH,EAAGzY,EAClD,IAAIz5C,GAASsyD,EAAuBJ,EACpC,OAAKrB,GAAO7wD,OAAZ,GACWsxD,EAAoBe,EAAaryD,EAAQy5C,GAKxD,QAAS+X,GAAuBa,EAAaH,EAAGzY,GAC5C,GAAIqY,GAAcC,EAAuBG,EAAGzY,GAAc,EAC1D,KAAI+W,EAAYsB,GAEhB,MAAOA,GAAYlyD,IAAIyyD,GAI3B,QAASnB,GAA0BmB,EAAaG,EAAeN,EAAGzY,GAC5CsY,EAAuBG,EAAGzY,GAAc,GAC9Cj3C,IAAI6vD,EAAaG,GAIjC,QAASd,GAAqBQ,EAAGzY,GAC7B,GAAIgZ,GAAUb,EAAwBM,EAAGzY,GACrCz5C,EAASsyD,EAAuBJ,EACpC,IAAe,OAAXlyD,EACA,MAAOyyD,EACX,IAAIC,GAAahB,EAAqB1xD,EAAQy5C,EAC9C,IAAIiZ,EAAWr0D,QAAU,EACrB,MAAOo0D,EACX,IAAIA,EAAQp0D,QAAU,EAClB,MAAOq0D,EAGX,KAAK,GAFDlwD,GAAM,GAAImwD,GACVt6B,KACK51B,EAAK,EAAGmwD,EAAYH,EAAShwD,EAAKmwD,EAAUv0D,OAAQoE,IAAM,CAC/D,GAAI+D,GAAMosD,EAAUnwD,GAChBsK,EAASvK,EAAII,IAAI4D,EAChBuG,KACDvK,EAAI3B,IAAI2F,GACR6xB,EAAKt3B,KAAKyF,IAGlB,IAAK,GAAI9D,GAAK,EAAGmwD,EAAeH,EAAYhwD,EAAKmwD,EAAax0D,OAAQqE,IAAM,CACxE,GAAI8D,GAAMqsD,EAAanwD,GACnBqK,EAASvK,EAAII,IAAI4D,EAChBuG,KACDvK,EAAI3B,IAAI2F,GACR6xB,EAAKt3B,KAAKyF,IAGlB,MAAO6xB,GAIX,QAASu5B,GAAwBM,EAAGzY,GAChC,GAAIphB,MACAy5B,EAAcC,EAAuBG,EAAGzY,GAAc,EAC1D,IAAI+W,EAAYsB,GACZ,MAAOz5B,EAIX,KAHA,GAAIy6B,GAAUhB,EAAYz5B,OACtBwW,EAAWkkB,EAAYD,GACvB/rD,EAAI,IACK,CACT,GAAI8S,GAAOm5C,EAAankB,EACxB,KAAKh1B,EAED,MADAwe,GAAKh6B,OAAS0I,EACPsxB,CAEX,IAAI46B,GAAYC,EAAcr5C,EAC9B,KACIwe,EAAKtxB,GAAKksD,EAEd,MAAOjvD,GACH,IACImvD,EAActkB,GAElB,QACI,KAAM7qC,IAGd+C,KAKR,QAASqsD,GAAKzxD,GACV,GAAU,OAANA,EACA,MAAO,EACX,cAAeA,IACX,IAAK,YAAa,MAAO,EACzB,KAAK,UAAW,MAAO,EACvB,KAAK,SAAU,MAAO,EACtB,KAAK,SAAU,MAAO,EACtB,KAAK,SAAU,MAAO,EACtB,KAAK,SAAU,MAAa,QAANA,EAAa,EAAe,CAClD,SAAS,MAAO,IAKxB,QAAS6uD,GAAY7uD,GACjB,WAAa1D,KAAN0D,EAIX,QAASkvD,GAAOlvD,GACZ,MAAa,QAANA,EAIX,QAAS0xD,GAAS1xD,GACd,MAAoB,gBAANA,GAIlB,QAASivD,GAASjvD,GACd,MAAoB,gBAANA,GAAuB,OAANA,EAA0B,kBAANA,GAMvD,QAAS2xD,GAAYpoB,EAAOqoB,GACxB,OAAQH,EAAKloB,IACT,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GAAgB,MAAOA,GAEhC,GAAIsoB,GAAyB,IAAlBD,EAAmC,SAA6B,IAAlBA,EAAmC,SAAW,UACnGE,EAAeC,EAAUxoB,EAAOyoB,EACpC,QAAqB11D,KAAjBw1D,EAA4B,CAC5B,GAAIpqD,GAASoqD,EAAaxxD,KAAKipC,EAAOsoB,EACtC,IAAI5C,EAASvnD,GACT,KAAM,IAAIojB,UACd,OAAOpjB,GAEX,MAAOuqD,GAAoB1oB,EAAgB,YAATsoB,EAAqB,SAAWA,GAItE,QAASI,GAAoB1B,EAAGsB,GAC5B,GAAa,WAATA,EAAmB,CACnB,GAAIK,GAAa3B,EAAEvlD,QACnB,IAAImnD,EAAWD,GAAa,CACxB,GAAIxqD,GAASwqD,EAAW5xD,KAAKiwD,EAC7B,KAAKtB,EAASvnD,GACV,MAAOA,GAEf,GAAI0qD,GAAU7B,EAAE6B,OAChB,IAAID,EAAWC,GAAU,CACrB,GAAI1qD,GAAS0qD,EAAQ9xD,KAAKiwD,EAC1B,KAAKtB,EAASvnD,GACV,MAAOA,QAGd,CACD,GAAI0qD,GAAU7B,EAAE6B,OAChB,IAAID,EAAWC,GAAU,CACrB,GAAI1qD,GAAS0qD,EAAQ9xD,KAAKiwD,EAC1B,KAAKtB,EAASvnD,GACV,MAAOA,GAEf,GAAI2qD,GAAa9B,EAAEvlD,QACnB,IAAImnD,EAAWE,GAAa,CACxB,GAAI3qD,GAAS2qD,EAAW/xD,KAAKiwD,EAC7B,KAAKtB,EAASvnD,GACV,MAAOA,IAGnB,KAAM,IAAIojB,WAId,QAAS8lC,GAAU0B,GACf,QAASA,EAIb,QAASC,GAASD,GACd,MAAO,GAAKA,EAIhB,QAASnD,GAAcmD,GACnB,GAAIztD,GAAM8sD,EAAYW,EAAU,EAChC,OAAIZ,GAAS7sD,GACFA,EACJ0tD,EAAS1tD,GAMpB,QAASiqD,GAAQwD,GACb,MAAO91D,OAAMwS,QACPxS,MAAMwS,QAAQsjD,GACdA,YAAoBp7D,QAChBo7D,YAAoB91D,OACyB,mBAA7CtF,OAAO0G,UAAUoN,SAAS1K,KAAKgyD,GAI7C,QAASH,GAAWG,GAEhB,MAA2B,kBAAbA,GAIlB,QAASvD,GAAcuD,GAEnB,MAA2B,kBAAbA,GAIlB,QAAShD,GAAcgD,GACnB,OAAQb,EAAKa,IACT,IAAK,GACL,IAAK,GAAgB,OAAO,CAC5B,SAAS,OAAO,GAOxB,QAASP,GAAUS,EAAG1a,GAClB,GAAI2a,GAAOD,EAAE1a,EACb,QAAax7C,KAATm2D,GAA+B,OAATA,EAA1B,CAEA,IAAKN,EAAWM,GACZ,KAAM,IAAI3nC,UACd,OAAO2nC,IAIX,QAASrB,GAAYtlD,GACjB,GAAI+qB,GAASk7B,EAAUjmD,EAAK4mD,EAC5B,KAAKP,EAAWt7B,GACZ,KAAM,IAAI/L,UACd,IAAIoiB,GAAWrW,EAAOv2B,KAAKwL,EAC3B,KAAKmjD,EAAS/hB,GACV,KAAM,IAAIpiB,UACd,OAAOoiB,GAIX,QAASqkB,GAAcoB,GACnB,MAAOA,GAAWt7D,MAItB,QAASg6D,GAAankB,GAClB,GAAIxlC,GAASwlC,EAASh1B,MACtB,QAAOxQ,EAAO+3B,MAAe/3B,EAIjC,QAAS8pD,GAActkB,GACnB,GAAI3W,GAAI2W,EAAiB,MACrB3W,IACAA,EAAEj2B,KAAK4sC,GAMf,QAASyjB,GAAuBJ,GAC5B,GAAIqC,GAAQ17D,OAAO8U,eAAeukD,EAClC,IAAiB,kBAANA,IAAoBA,IAAMsC,EACjC,MAAOD,EAQX,IAAIA,IAAUC,EACV,MAAOD,EAEX,IAAIh1D,GAAY2yD,EAAE3yD,UACdk1D,EAAiBl1D,GAAa1G,OAAO8U,eAAepO,EACxD,IAAsB,MAAlBk1D,GAA0BA,IAAmB57D,OAAO0G,UACpD,MAAOg1D,EAEX,IAAIr2D,GAAcu2D,EAAev2D,WACjC,OAA2B,kBAAhBA,GACAq2D,EAEPr2D,IAAgBg0D,EACTqC,EAEJr2D,EAmOX,QAASw2D,GAAejnD,GAGpB,MAFAA,GAAInO,OAAKrB,SACFwP,GAAInO,GACJmO,EA/jCX,GAKIknD,GALAC,EAAS/7D,OAAO0G,UAAUF,eAE1Bw1D,EAAmC,kBAAXt5D,QACxBo4D,EAAoBkB,OAAgD,KAAvBt5D,OAAOu5D,YAA8Bv5D,OAAOu5D,YAAc,gBACvGT,EAAiBQ,OAA6C,KAApBt5D,OAAOszC,SAA2BtzC,OAAOszC,SAAW,cAElG,SAAW8lB,GACP,GAAII,GAA0C,kBAAlBl8D,QAAO2G,OAC/Bw1D,GAAkB/1D,uBAA2Bd,OAC7C82D,GAAaF,IAAmBC,CAEpCL,GAAQn1D,OAASu1D,EACX,WAAc,MAAOL,GAAe77D,OAAO2G,OAAO,QAClDw1D,EACI,WAAc,MAAON,IAAiBz1D,UAAW,QACjD,WAAc,MAAOy1D,QAC/BC,EAAQ/xD,IAAMqyD,EACR,SAAU3nD,EAAK9G,GAAO,MAAOouD,GAAO3yD,KAAKqL,EAAK9G,IAC9C,SAAU8G,EAAK9G,GAAO,MAAOA,KAAO8G,IAC1CqnD,EAAQ/0D,IAAMq1D,EACR,SAAU3nD,EAAK9G,GAAO,MAAOouD,GAAO3yD,KAAKqL,EAAK9G,GAAO8G,EAAI9G,OAAOvI,IAChE,SAAUqP,EAAK9G,GAAO,MAAO8G,GAAI9G,KACxCmuD,IAAYA,MAEf,IAAIH,GAAoB37D,OAAO8U,eAAe6D,UAC1C0jD,EAAiC,gBAAZv0C,UAAwBA,QAAQK,KAA4D,SAArDL,QAAQK,IAAuC,kCAC3GoxC,EAAQ8C,GAA8B,kBAAR5yD,MAAuD,kBAA1BA,KAAI/C,UAAU41D,QAk0B7E,WA8GI,QAASC,GAAO5uD,EAAKyzC,GACjB,MAAOzzC,GAEX,QAAS6uD,GAASpb,EAAGjhD,GACjB,MAAOA,GAEX,QAASs8D,GAAS9uD,EAAKxN,GACnB,OAAQwN,EAAKxN,GApHjB,GAAIu8D,MACAC,KACAC,EAAe,WACf,QAASA,GAAYp9B,EAAMq9B,EAAQ//C,GAC/B7W,KAAK62D,OAAS,EACd72D,KAAK82D,MAAQv9B,EACbv5B,KAAK+2D,QAAUH,EACf52D,KAAKg3D,UAAYngD,EAoCrB,MAlCA8/C,GAAYl2D,UAAU,cAAgB,WAAc,MAAOT,OAC3D22D,EAAYl2D,UAAU80D,GAAkB,WAAc,MAAOv1D,OAC7D22D,EAAYl2D,UAAUsa,KAAO,WACzB,GAAIxZ,GAAQvB,KAAK62D,MACjB,IAAIt1D,GAAS,GAAKA,EAAQvB,KAAK82D,MAAMv3D,OAAQ,CACzC,GAAIgL,GAASvK,KAAKg3D,UAAUh3D,KAAK82D,MAAMv1D,GAAQvB,KAAK+2D,QAAQx1D,GAS5D,OARIA,GAAQ,GAAKvB,KAAK82D,MAAMv3D,QACxBS,KAAK62D,QAAU,EACf72D,KAAK82D,MAAQJ,EACb12D,KAAK+2D,QAAUL,GAGf12D,KAAK62D,UAEA38D,MAAOqQ,EAAQ+3B,MAAM,GAElC,OAASpoC,UAAOiF,GAAWmjC,MAAM,IAErCq0B,EAAYl2D,UAAUg7C,MAAQ,SAAUxyC,GAMpC,KALIjJ,MAAK62D,QAAU,IACf72D,KAAK62D,QAAU,EACf72D,KAAK82D,MAAQJ,EACb12D,KAAK+2D,QAAUL,GAEbztD,GAEV0tD,EAAYl2D,UAAUi7C,OAAS,SAAUxhD,GAMrC,MALI8F,MAAK62D,QAAU,IACf72D,KAAK62D,QAAU,EACf72D,KAAK82D,MAAQJ,EACb12D,KAAK+2D,QAAUL,IAEVx8D,MAAOA,EAAOooC,MAAM,IAE1Bq0B,IAEX,OAAQ,YACJ,QAASnzD,KACLxD,KAAK82D,SACL92D,KAAK+2D,WACL/2D,KAAKi3D,UAAYR,EACjBz2D,KAAKk3D,aAAe,EAyDxB,MAvDAn9D,QAAOC,eAAewJ,EAAI/C,UAAW,QACjCK,IAAK,WAAc,MAAOd,MAAK82D,MAAMv3D,QACrC6B,YAAY,EACZC,cAAc,IAElBmC,EAAI/C,UAAUqD,IAAM,SAAU4D,GAAO,MAAO1H,MAAKm3D,MAAMzvD,GAAgB,IAAU,GACjFlE,EAAI/C,UAAUK,IAAM,SAAU4G,GAC1B,GAAInG,GAAQvB,KAAKm3D,MAAMzvD,GAAgB,EACvC,OAAOnG,IAAS,EAAIvB,KAAK+2D,QAAQx1D,OAASpC,IAE9CqE,EAAI/C,UAAUiD,IAAM,SAAUgE,EAAKxN,GAC/B,GAAIqH,GAAQvB,KAAKm3D,MAAMzvD,GAAgB,EAEvC,OADA1H,MAAK+2D,QAAQx1D,GAASrH,EACf8F,MAEXwD,EAAI/C,UAAUoD,OAAS,SAAU6D,GAC7B,GAAInG,GAAQvB,KAAKm3D,MAAMzvD,GAAgB,EACvC,IAAInG,GAAS,EAAG,CAEZ,IAAK,GADDwK,GAAO/L,KAAK82D,MAAMv3D,OACbE,EAAI8B,EAAQ,EAAG9B,EAAIsM,EAAMtM,IAC9BO,KAAK82D,MAAMr3D,EAAI,GAAKO,KAAK82D,MAAMr3D,GAC/BO,KAAK+2D,QAAQt3D,EAAI,GAAKO,KAAK+2D,QAAQt3D,EAQvC,OANAO,MAAK82D,MAAMv3D,SACXS,KAAK+2D,QAAQx3D,SACTmI,IAAQ1H,KAAKi3D,YACbj3D,KAAKi3D,UAAYR,EACjBz2D,KAAKk3D,aAAe,IAEjB,EAEX,OAAO,GAEX1zD,EAAI/C,UAAU22D,MAAQ,WAClBp3D,KAAK82D,MAAMv3D,OAAS,EACpBS,KAAK+2D,QAAQx3D,OAAS,EACtBS,KAAKi3D,UAAYR,EACjBz2D,KAAKk3D,aAAe,GAExB1zD,EAAI/C,UAAU84B,KAAO,WAAc,MAAO,IAAIo9B,GAAY32D,KAAK82D,MAAO92D,KAAK+2D,QAAST,IACpF9yD,EAAI/C,UAAUm2D,OAAS,WAAc,MAAO,IAAID,GAAY32D,KAAK82D,MAAO92D,KAAK+2D,QAASR,IACtF/yD,EAAI/C,UAAU41D,QAAU,WAAc,MAAO,IAAIM,GAAY32D,KAAK82D,MAAO92D,KAAK+2D,QAASP,IACvFhzD,EAAI/C,UAAU,cAAgB,WAAc,MAAOT,MAAKq2D,WACxD7yD,EAAI/C,UAAU80D,GAAkB,WAAc,MAAOv1D,MAAKq2D,WAC1D7yD,EAAI/C,UAAU02D,MAAQ,SAAUzvD,EAAKwwC,GASjC,MARIl4C,MAAKi3D,YAAcvvD,IACnB1H,KAAKk3D,YAAcl3D,KAAK82D,MAAM10D,QAAQpC,KAAKi3D,UAAYvvD,IAEvD1H,KAAKk3D,YAAc,GAAKhf,IACxBl4C,KAAKk3D,YAAcl3D,KAAK82D,MAAMv3D,OAC9BS,KAAK82D,MAAM70D,KAAKyF,GAChB1H,KAAK+2D,QAAQ90D,SAAK9C,KAEfa,KAAKk3D,aAET1zD,QA96BuFA,IAClGqwD,EAAQuC,GAA8B,kBAARn4B,MAAuD,kBAA1BA,KAAIx9B,UAAU41D,QA07B7E,WACI,MAAQ,YACJ,QAASp4B,KACLj+B,KAAKq3D,KAAO,GAAI/D,GAgBpB,MAdAv5D,QAAOC,eAAeikC,EAAIx9B,UAAW,QACjCK,IAAK,WAAc,MAAOd,MAAKq3D,KAAKtrD,MACpC3K,YAAY,EACZC,cAAc,IAElB48B,EAAIx9B,UAAUqD,IAAM,SAAU5J,GAAS,MAAO8F,MAAKq3D,KAAKvzD,IAAI5J,IAC5D+jC,EAAIx9B,UAAUsB,IAAM,SAAU7H,GAAS,MAAO8F,MAAKq3D,KAAK3zD,IAAIxJ,EAAOA,GAAQ8F,MAC3Ei+B,EAAIx9B,UAAUoD,OAAS,SAAU3J,GAAS,MAAO8F,MAAKq3D,KAAKxzD,OAAO3J,IAClE+jC,EAAIx9B,UAAU22D,MAAQ,WAAcp3D,KAAKq3D,KAAKD,SAC9Cn5B,EAAIx9B,UAAU84B,KAAO,WAAc,MAAOv5B,MAAKq3D,KAAK99B,QACpD0E,EAAIx9B,UAAUm2D,OAAS,WAAc,MAAO52D,MAAKq3D,KAAKT,UACtD34B,EAAIx9B,UAAU41D,QAAU,WAAc,MAAOr2D,MAAKq3D,KAAKhB,WACvDp4B,EAAIx9B,UAAU,cAAgB,WAAc,MAAOT,MAAKu5B,QACxD0E,EAAIx9B,UAAU80D,GAAkB,WAAc,MAAOv1D,MAAKu5B,QACnD0E,QA78BuFA,IAClGq5B,EAAYlB,GAAkC,kBAAZmB,SAg9BtC,WA+BI,QAASC,KACL,GAAI9vD,EACJ,IACIA,EAAM,cAAgB+vD,UACnB5B,EAAQ/xD,IAAIy1B,EAAM7xB,GAEzB,OADA6xB,GAAK7xB,IAAO,EACLA,EAEX,QAASgwD,GAAwBjwD,EAAQ/G,GACrC,IAAKo1D,EAAO3yD,KAAKsE,EAAQkwD,GAAU,CAC/B,IAAKj3D,EACD,MACJ3G,QAAOC,eAAeyN,EAAQkwD,GAAWz9D,MAAO27D,EAAQn1D,WAE5D,MAAO+G,GAAOkwD,GAElB,QAASC,GAAgBhpC,EAAQ7iB,GAC7B,IAAK,GAAItM,GAAI,EAAGA,EAAIsM,IAAQtM,EACxBmvB,EAAOnvB,GAAqB,IAAhBG,KAAKE,SAAkB,CACvC,OAAO8uB,GAEX,QAASipC,GAAe9rD,GACpB,MAA0B,kBAAf+gB,YACe,mBAAXgrC,QACAA,OAAOC,gBAAgB,GAAIjrC,YAAW/gB,IACzB,mBAAbisD,UACAA,SAASD,gBAAgB,GAAIjrC,YAAW/gB,IAC5C6rD,EAAgB,GAAI9qC,YAAW/gB,GAAOA,GAE1C6rD,EAAgB,GAAIv4D,OAAM0M,GAAOA,GAE5C,QAAS0rD,KACL,GAAIhnD,GAAOonD,EAAeI,EAE1BxnD,GAAK,GAAe,GAAVA,EAAK,GAAY,GAC3BA,EAAK,GAAe,IAAVA,EAAK,GAAY,GAE3B,KAAK,GADDlG,GAAS,GACJ8d,EAAS,EAAGA,EAAS4vC,IAAa5vC,EAAQ,CAC/C,GAAI6vC,GAAOznD,EAAK4X,EACD,KAAXA,GAA2B,IAAXA,GAA2B,IAAXA,IAChC9d,GAAU,KACV2tD,EAAO,KACP3tD,GAAU,KACdA,GAAU2tD,EAAKrqD,SAAS,IAAIshB,cAEhC,MAAO5kB,GA3EX,GAAI0tD,GAAY,GACZ1+B,EAAOs8B,EAAQn1D,SACfi3D,EAAUH,GACd,OAAQ,YACJ,QAASD,KACLv3D,KAAKm4D,KAAOX,IAuBhB,MArBAD,GAAQ92D,UAAUqD,IAAM,SAAU2D,GAC9B,GAAI2wD,GAAQV,EAAwBjwD,GAAmB,EACvD,YAAiBtI,KAAVi5D,GAAsBvC,EAAQ/xD,IAAIs0D,EAAOp4D,KAAKm4D,OAEzDZ,EAAQ92D,UAAUK,IAAM,SAAU2G,GAC9B,GAAI2wD,GAAQV,EAAwBjwD,GAAmB,EACvD,YAAiBtI,KAAVi5D,EAAsBvC,EAAQ/0D,IAAIs3D,EAAOp4D,KAAKm4D,UAAQh5D,IAEjEo4D,EAAQ92D,UAAUiD,IAAM,SAAU+D,EAAQvN,GAGtC,MAFYw9D,GAAwBjwD,GAAmB,GACjDzH,KAAKm4D,MAAQj+D,EACZ8F,MAEXu3D,EAAQ92D,UAAUoD,OAAS,SAAU4D,GACjC,GAAI2wD,GAAQV,EAAwBjwD,GAAmB,EACvD,YAAiBtI,KAAVi5D,SAA6BA,GAAMp4D,KAAKm4D,OAEnDZ,EAAQ92D,UAAU22D,MAAQ,WAEtBp3D,KAAKm4D,KAAOX,KAETD,QA7+BgDA,QAG3D3pD,EAAW,GAAI0pD,EA6DnBvvD,GAAQhM,SAAWA,EAqDnBgM,EAAQI,SAAWA,EA+CnBJ,EAAQgK,eAAiBA,EA0CzBhK,EAAQsqD,YAAcA,EA0CtBtqD,EAAQ2J,eAAiBA,EA0CzB3J,EAAQ4J,YAAcA,EA0CtB5J,EAAQ0qD,eAAiBA,EAyCzB1qD,EAAQ4qD,gBAAkBA,EAyC1B5qD,EAAQ8qD,mBAAqBA,EAsD7B9qD,EAAQgrD,eAAiBA,EAklBzB,SAAWsF,GACP,OAAgC,KAArBA,EAAStwD,SAChB,GAAIswD,EAAStwD,UAAYA,EACrB,IAAK,GAAIzH,KAAKyH,GACN+tD,EAAO3yD,KAAK4E,EAASzH,KACrB+3D,EAAStwD,QAAQzH,GAAKyH,EAAQzH,QAM1C+3D,GAAStwD,QAAUA,GAEN,mBAAXssB,QAAyBA,OACf,mBAAT6E,MAAuBA,KAC1BxmB,SAAS,oBAClB3K,UAAYA,a;;;;;;;;AClmCf,GAAIhI,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GAQtD,IAAIk1D,OAAQ,mBAAAh1D,CAAQ,IAChB61D,QAAyB,SAAUtuD,GAEnC,QAASsuD,KACL,MAAkB,QAAXtuD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAQ/D,MAVAD,WAAUkwD,EAAStuD,GAInBsuD,EAAQxvD,UAAUe,WAAa,SAAUC,GACrC,MAAIA,KAAY2tD,MAAM3zC,aAGX9Z,EAAOlB,UAAUe,WAAW2B,KAAKnD,KAAMyB,IAE/CwuD,GACTb,MAAMkJ,gBACRr+D,SAAQg2D,QAAUA,OAClB,IAAIE,SAAyB,SAAUxuD,GAEnC,QAASwuD,KACL,MAAkB,QAAXxuD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAQ/D,MAVAD,WAAUowD,EAASxuD,GAInBwuD,EAAQ1vD,UAAUe,WAAa,SAAUC,GACrC,MAAIA,KAAY2tD,MAAM3zC,aAGX9Z,EAAOlB,UAAUe,WAAW2B,KAAKnD,KAAMyB,IAE/C0uD,GACTf,MAAMmJ,gBACRt+D,SAAQk2D,QAAUA,OAClB,IAAIE,SAAyB,SAAU1uD,GAEnC,QAAS0uD,KACL,MAAkB,QAAX1uD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAQ/D,MAVAD,WAAUswD,EAAS1uD,GAInB0uD,EAAQ5vD,UAAUe,WAAa,SAAUC,GACrC,MAAIA,KAAY2tD,MAAM/0C,aAGX1Y,EAAOlB,UAAUe,WAAW2B,KAAKnD,KAAMyB,IAE/C4uD,GACTjB,MAAM3tB,MACRxnC,SAAQo2D,QAAUA,OAClB,IAAIG,aAA6B,SAAU7uD,GAEvC,QAAS6uD,KACL,MAAkB,QAAX7uD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAQ/D,MAVAD,WAAUywD,EAAa7uD,GAIvB6uD,EAAY/vD,UAAUe,WAAa,SAAUC,GACzC,MAAIA,KAAY2tD,MAAM3zC,aAAeha,IAAY2tD,MAAMp+C,eAAiBvP,IAAY2tD,MAAM1zC,sBAG/E/Z,EAAOlB,UAAUe,WAAW2B,KAAKnD,KAAMyB,IAE/C+uD,GACTpB,MAAM9tB,MACRrnC,SAAQu2D,YAAcA,Y;;;;;;;AC1EtB,GAAIzwD,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GAQtD,IAAIwkD,UAAW,mBAAAtkD,CAAQ,IACnBg1D,MAAQ,mBAAAh1D,CAAQ,IAChB2d,KAAQ/J,cAAe0wC,SAAStmC,KAChC83C,YAA6B,SAAUvuD,GAEvC,QAASuuD,KACL,MAAkB,QAAXvuD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAO/D,MATAD,WAAUmwD,EAAavuD,GAIvBuuD,EAAYzvD,UAAU8W,OAAS,SAAU06B,EAAMppC,GAC3C,MAAOkP,KAAI/J,cAAc,IAAK,KAC1B+J,IAAI/J,cAAc,QAAUwqD,iBAAiB,EAAMC,kBAAmBxmB,EAAK12B,cAAem9C,iBAAkBzmB,EAAKz2B,SAAU3Y,EAAG,IAAKC,EAAG,IAAKC,MAAOkvC,EAAKtmC,OAAO5I,MAAOC,OAAQivC,EAAKtmC,OAAO3I,SACzL6F,EAAQo4C,eAAehP,KAExBie,GACTd,MAAMuJ,oBACR1+D,SAAQi2D,YAAcA,WACtB,IAAIE,aAA6B,SAAUzuD,GAEvC,QAASyuD,KACL,MAAkB,QAAXzuD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAO/D,MATAD,WAAUqwD,EAAazuD,GAIvByuD,EAAY3vD,UAAU8W,OAAS,SAAUqhD,EAAM/vD,GAC3C,MAAOkP,KAAI/J,cAAc,IAAK,KAC1B+J,IAAI/J,cAAc,QAAU6qD,iBAAiB,EAAMJ,kBAAmBG,EAAKr9C,cAAem9C,iBAAkBE,EAAKp9C,SAAU3Y,EAAG,IAAKC,EAAG,IAAKC,MAAO61D,EAAKjtD,OAAO5I,MAAOC,OAAQ41D,EAAKjtD,OAAO3I,SACzL6F,EAAQo4C,eAAe2X,KAExBxI,GACThB,MAAMuJ,oBACR1+D,SAAQm2D,YAAcA,WACtB,IAAIE,aAA6B,SAAU3uD,GAEvC,QAAS2uD,KACL,MAAkB,QAAX3uD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAkB/D,MApBAD,WAAUuwD,EAAa3uD,GAIvB2uD,EAAY7vD,UAAUq4D,WAAa,SAAU33B,EAAM43B,EAAUlwD,GAGzD,IAAK,GAFDmwD,GAAaD,EAAS,GACtBE,EAAO,KAAOD,EAAWn2D,EAAI,IAAMm2D,EAAWl2D,EACzCrD,EAAI,EAAGA,EAAIs5D,EAASx5D,OAAQE,IAAK,CACtC,GAAIa,GAAIy4D,EAASt5D,EACjBw5D,IAAQ,MAAQ34D,EAAEuC,EAAI,IAAMvC,EAAEwC,EAElC,MAAOiV,KAAI/J,cAAc,QAAUkrD,iBAAiB,EAAM94D,EAAG64D,KAEjE3I,EAAY7vD,UAAU04D,kBAAoB,SAAUh4B,EAAM43B,EAAUlwD,GAChE,GAAI1E,GAAK40D,EAASA,EAASx5D,OAAS,GAChC6E,EAAK20D,EAASA,EAASx5D,OAAS,EACpC,QACIwY,IAAI/J,cAAc,QAAUorD,cAAc,EAAMC,eAAe,EAAMj5D,EAAG,uBAAwBk5D,UAAW,UAAYlK,MAAMhpD,UAAUgpD,MAAMxpD,cAAe/C,EAAGsB,EAAGtB,EAAIuB,EAAGvB,EAAGC,EAAGqB,EAAGrB,EAAIsB,EAAGtB,KAAQ,IAAMsB,EAAGvB,EAAI,IAAMuB,EAAGtB,EAAI,eAAiBsB,EAAGvB,EAAI,IAAMuB,EAAGtB,EAAI,QAGjQwtD,GACTlB,MAAMmK,iBACRt/D,SAAQq2D,YAAcA,WACtB,IAAIC,cAA8B,WAC9B,QAASA,MAKT,MAHAA,GAAa9vD,UAAU8W,OAAS,SAAU6jC,EAAOvyC,GAC7C,MAAOkP,KAAI/J,cAAc,QAAUwrD,kBAAkB,GAAQpe,EAAMjkC,OAEhEo5C,IAEXt2D,SAAQs2D,aAAeA,YACvB,IAAIE,cAA8B,SAAU9uD,GAExC,QAAS8uD,KACL,MAAkB,QAAX9uD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAU/D,MAZAD,WAAU0wD,EAAc9uD,GAIxB8uD,EAAahwD,UAAU8W,OAAS,SAAU06B,EAAMppC,GAC5C,GAAIm/C,GAAShoD,KAAKy5D,UAAUxnB,EAC5B,OAAOl6B,KAAI/J,cAAc,IAAK,KAC1B+J,IAAI/J,cAAc,UAAY0rD,qBAAqB,EAAM7xD,EAAGmgD,MAEpEyI,EAAahwD,UAAUg5D,UAAY,SAAUxnB,GACzC,MAAO,IAEJwe,GACTrB,MAAMuK,iBACR1/D,SAAQw2D,aAAeA,a;;;;;;AChGvB,GAAImJ,QAAS,kCACTC,aAAe,mBAAAz/D,CAAQ,IAE3B8d,QAAOje,QAAU,SAAU2c,GACvB,GACIlP,GADAjI,EAAI,EAEJq6D,GAA4B,EAC5BziD,GACApN,KAAM,MACNuF,KAAM,GACNuqD,aAAa,EACbrpD,SACAxR,YA8BJ,OA3BA0X,GAAIK,QAAQ2iD,OAAQ,SAAU30C,GAC1B,GAAc,MAAVA,EAGA,MAFA60C,IAA4B,MAC5Br6D,IAICq6D,GAMS,IAANr6D,IACIo6D,aAAa50C,IAAyC,MAA/BrO,EAAIjX,OAAOiX,EAAIrX,OAAS,MAC/C8X,EAAI0iD,aAAc,GAEtB1iD,EAAI7H,KAAOyV,IAEX5N,EAAI3G,MAAMhJ,GAAOud,EAAMhO,QAAQ,eAAgB,IAC/CvP,MAAIvI,KAZJuI,IACA2P,EAAI3G,MAAMhJ,GAAOA,GAErBA,EAAIud,GAYRxlB,IACAq6D,GAA4B,IAGzBziD,G;;;;;;ACpCX,QAAS2iD,cAAaplC,EAAMzc,EAAM8hD,EAAOviD,EAAOwiD,GAG5C,GAAI7qC,GAAMlX,EAAK/V,QAAQ,IAAKsV,GACxBo9B,EAAU38B,EAAKzB,MAAMgB,GAAgB,IAAT2X,MAAalwB,GAAYkwB,EAGrD,SAAQmiB,KAAKsD,KACbA,EAAU,OAMRolB,GAAoB7qC,GAAO,GAAK4qC,EAAQrlC,EAAKr1B,QAAU,GAAkB,MAAZu1C,IAC/DlgB,EAAK3yB,MACDgI,KAAM,OACN6qC,QAASA,IAtBrB,GAAIqlB,OAAQ,+DACRC,SAAW,mBAAAhgE,CAAQ,KAEnBigE,MAAQtgE,OAAO2G,OAAS3G,OAAO2G,OAAO,QAwB1CwX,QAAOje,QAAU,SAAeke,EAAMkE,GAClCA,IAAYA,MACZA,EAAQ3C,aAAe2C,EAAQ3C,WAAa2gD,MAC5C,IACIt5D,GADAwJ,KAEA0vD,GAAS,EACTptC,KACAytC,KACAC,GAAc,CAiElB,OA/DApiD,GAAKlB,QAAQkjD,MAAO,SAAUvjD,EAAKrV,GAC/B,GAAIg5D,EAAa,CACb,GAAI3jD,IAAS,KAAO7V,EAAQyO,KAAO,IAC/B,MAEA+qD,IAAc,EAItB,GAIIr5D,GAJAs5D,EAA2B,MAAlB5jD,EAAIjX,OAAO,GACpB86D,EAAoC,IAAxB7jD,EAAIxU,QAAQ,WACxBsV,EAAQnW,EAAQqV,EAAIrX,OACpBm7D,EAAWviD,EAAKxY,OAAO+X,EAGvB8iD,KAAWC,IACXR,IAEAl5D,EAAUq5D,SAASxjD,GACE,QAAjB7V,EAAQkJ,MAAkBoS,EAAQ3C,WAAW3Y,EAAQyO,QACrDzO,EAAQkJ,KAAO,YACfswD,GAAc,GAGbx5D,EAAQg5D,aAAgBQ,IAAeG,GAAyB,MAAbA,GACpDV,aAAaj5D,EAAQ7B,SAAUiZ,EAAM8hD,EAAOviD,EAAO2E,EAAQ69C,kBAG/DI,EAAMv5D,EAAQ2b,SAAW3b,EAGX,IAAVk5D,GACA1vD,EAAOtI,KAAKlB,GAGhBG,EAAS2rB,EAAIotC,EAAQ,GAEjB/4D,GACAA,EAAOhC,SAAS+C,KAAKlB,GAGzB8rB,EAAIotC,GAASl5D,IAGb05D,IAAcD,GAAUz5D,EAAQg5D,eAC3BU,GACDR,KAECM,GAA4B,MAAbG,GAAoBA,IAIpCx5D,GAAoB,IAAX+4D,EAAe1vD,EAASsiB,EAAIotC,GAAO/6D,SAC5C86D,aAAa94D,EAAQiX,EAAM8hD,EAAOviD,EAAO2E,EAAQ69C,uBAMxD3vD,EAAOhL,QAAU4Y,EAAK5Y,QACvBy6D,aAAazvD,EAAQ4N,EAAM,EAAG,EAAGkE,EAAQ69C,kBAGtC3vD,G;;;;;;;AChGX,QAASxP,QAAOqoB,GACZ,MAAO,UAAU3b,EAAQkzD,EAAWp5D,GAChC,GAAI4G,GAAW,GAAImtC,YAAW1nC,SAASD,aAAa3G,WAAYoc,EAC3C,iBAAV7hB,GACPzF,kBAAkBmV,aAAaxJ,EAAQkzD,EAAWp5D,EAAO4G,GAGzDrM,kBAAkBuV,YAAY5J,EAAQkzD,EAAWxyD,IAX7DpO,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrB0B,kBAAoB,mBAAA1B,CAAQ,IAC5BuT,aAAe,mBAAAvT,CAAQ,EAY3BH,SAAQc,OAASA,O;;;;;;;ACZjB,QAASN,cACL,MAAO,UAAUgN,GACb,IAAiE,IAA7DM,QAAQ2J,eAAe/D,aAAavG,YAAaK,GACjD,KAAM,IAAItG,OAAMy5D,YAAY1uD,gCAEhC,IAAI2uD,GAAQ9yD,QAAQ4J,YAAYhE,aAAatG,mBAAoBI,MAEjE,OADAM,SAAQgK,eAAepE,aAAavG,YAAayzD,EAAOpzD,GACjDA,GAVf1N,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyT,cAAe,mBAAAvT,CAAQ,GACvBwgE,YAAc,mBAAAxgE,CAAQ,EAW1BH,SAAQQ,WAAaA,W;;;;;;;ACTrB,QAASY,aAAY+nB,GACjB,MAAO,UAAU3b,EAAQkzD,EAAWp5D,GAChC,GAAI4G,GAAW,GAAImtC,YAAW1nC,SAASD,aAAa1G,iBAAkBmc,EACjD,iBAAV7hB,GACPzF,kBAAkBmV,aAAaxJ,EAAQkzD,EAAWp5D,EAAO4G,GAGzDrM,kBAAkBuV,YAAY5J,EAAQkzD,EAAWxyD,IAX7DpO,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrB0B,kBAAoB,mBAAA1B,CAAQ,IAC5BuT,aAAe,mBAAAvT,CAAQ,EAY3BH,SAAQoB,YAAcA,Y;;;;;;;ACXtB,QAASR,OAAM2U,GACX,MAAO,UAAU/H,EAAQkzD,EAAWp5D,GAChC,GAAI4G,GAAW,GAAImtC,YAAW1nC,SAASD,aAAa/G,UAAW4I,EAC1C,iBAAVjO,GACPzF,kBAAkBmV,aAAaxJ,EAAQkzD,EAAWp5D,EAAO4G,GAGzDrM,kBAAkBuV,YAAY5J,EAAQkzD,EAAWxyD,IAX7DpO,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrB0B,kBAAoB,mBAAA1B,CAAQ,IAC5BuT,aAAe,mBAAAvT,CAAQ,EAY3BH,SAAQY,MAAQA,M;;;;;;;ACXhB,QAASI,YACL,MAAO,UAAUwM,EAAQkzD,EAAWp5D,GAChC,GAAI4G,GAAW,GAAImtC,YAAW1nC,SAASD,aAAa5G,cAAc,EAC7C,iBAAVxF,GACPzF,kBAAkBmV,aAAaxJ,EAAQkzD,EAAWp5D,EAAO4G,GAGzDrM,kBAAkBuV,YAAY5J,EAAQkzD,EAAWxyD,IAX7DpO,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrB0B,kBAAoB,mBAAA1B,CAAQ,IAC5BuT,aAAe,mBAAAvT,CAAQ,EAY3BH,SAAQgB,SAAWA,S;;;;;;;ACXnB,QAASQ,iBACL,MAAO,UAAUgM,EAAQ+pD,EAAa5iD,GAClC,GAAIzG,GAAW,GAAImtC,YAAW1nC,SAASD,aAAarG,eAAgBkqD,EACpE,IAAIzpD,QAAQ2J,eAAe/D,aAAarG,eAAgBG,EAAOrI,aAC3D,KAAM,IAAI+B,OAAMy5D,YAAYrtD,gCAEhCxF,SAAQgK,eAAepE,aAAarG,eAAgBa,EAAUV,EAAOrI,cAV7ErF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrBuT,aAAe,mBAAAvT,CAAQ,GACvBwgE,YAAc,mBAAAxgE,CAAQ,EAU1BH,SAAQwB,cAAgBA,c;;;;;;;ACVxB,QAASd,QAAO2W,EAAa4gD,GACzB,MAAO,UAAUzqD,EAAQkzD,EAAWp5D,GAChC,GAAI4G,GAAW,GAAImtC,YAAW1nC,SAAS0D,EAAa4gD,EAC/B,iBAAV3wD,GACPzF,kBAAkBmV,aAAaxJ,EAAQkzD,EAAWp5D,EAAO4G,GAGzDrM,kBAAkBuV,YAAY5J,EAAQkzD,EAAWxyD,IAV7DpO,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrB0B,kBAAoB,mBAAA1B,CAAQ,GAYhCH,SAAQU,OAASA,O;;;;;;;ACVjB,QAASY,YAAWiU,GAChB,MAAO,UAAU/H,EAAQkzD,EAAWp5D,GAChC,GAAI4G,GAAW,GAAImtC,YAAW1nC,SAASD,aAAa9G,SAAU2I,EAC9D1T,mBAAkBmV,aAAaxJ,EAAQkzD,EAAWp5D,EAAO4G,IAPjEpO,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrB0B,kBAAoB,mBAAA1B,CAAQ,IAC5BuT,aAAe,mBAAAvT,CAAQ,EAO3BH,SAAQsB,WAAaA,W;;;;;;;ACNrB,QAASJ,aACL,MAAO,UAAUsM,EAAQkzD,EAAWp5D,GAChC,GAAI4G,GAAW,GAAImtC,YAAW1nC,SAASD,aAAa7G,eAAe,EACnEhL,mBAAkBmV,aAAaxJ,EAAQkzD,EAAWp5D,EAAO4G,IAPjEpO,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIo7C,YAAa,mBAAAl7C,CAAQ,GACrB0B,kBAAoB,mBAAA1B,CAAQ,IAC5BuT,aAAe,mBAAAvT,CAAQ,EAO3BH,SAAQkB,UAAYA,U;;;;;;;ACVpBpB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0B,QAAS,mBAAAxB,CAAQ,IACjB0gE,gBAAkB,mBAAA1gE,CAAQ,IAC1B2gE,QAAW,WACX,QAASA,GAAQ33C,EAAmB43C,GAChCh7D,KAAKnE,KAAOD,OAAOC,OACnBmE,KAAKi7D,WAAY,EACjBj7D,KAAKojB,kBAAoBA,EACzBpjB,KAAKk7D,MAAQF,EACbh7D,KAAKiK,KAAO6wD,gBAAgBzoD,gBAAgBO,QAC5C5S,KAAK6jB,WAAa,SAAUG,GAAW,OAAO,GAC9ChkB,KAAK2jB,mBAAqB,KAC1B3jB,KAAKm7D,MAAQ,KACbn7D,KAAKoqC,QAAU,KACfpqC,KAAKo7D,SAAW,KAChBp7D,KAAKyjC,aAAe,KACpBzjC,KAAKq7D,aAAe,KAgBxB,MAdAN,GAAQt6D,UAAU66D,MAAQ,WACtB,GAAIA,GAAQ,GAAIP,GAAQ/6D,KAAKojB,kBAAmBpjB,KAAKk7D,MAWrD,OAVAI,GAAML,WAAY,EAClBK,EAAM33C,mBAAqB3jB,KAAK2jB,mBAChC23C,EAAMD,aAAer7D,KAAKq7D,aAC1BC,EAAMJ,MAAQl7D,KAAKk7D,MACnBI,EAAMrxD,KAAOjK,KAAKiK,KAClBqxD,EAAMlxB,QAAUpqC,KAAKoqC,QACrBkxB,EAAMF,SAAWp7D,KAAKo7D,SACtBE,EAAMz3C,WAAa7jB,KAAK6jB,WACxBy3C,EAAM73B,aAAezjC,KAAKyjC,aAC1B63B,EAAMH,MAAQn7D,KAAKm7D,MACZG,GAEJP,IAEX9gE,SAAQ8gE,QAAUA,Q;;;;;;;AClClBhhE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqhE,eACAC,0BAA2B,EAC3BC,oBAAqB,EACrBC,wBAAyB,EAE7BzhE,SAAQshE,aAAeA,a;;;;;;;ACNvBxhE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyhE,WAAY,mBAAAvhE,CAAQ,KACpBwhE,SAAW,mBAAAxhE,CAAQ,KACnByhE,UAAY,mBAAAzhE,CAAQ,KACpB0hE,WAAa,mBAAA1hE,CAAQ,KACrB2hE,oBAAsB,mBAAA3hE,CAAQ,KAC9BiC,gBAAkB,mBAAAjC,CAAQ,IAC1B4hE,qBAAuB,mBAAA5hE,CAAQ,KAC/BwB,OAAS,mBAAAxB,CAAQ,IACjBqX,WAAa,mBAAArX,CAAQ,GACrBuT,aAAe,mBAAAvT,CAAQ,GACvB0gE,gBAAkB,mBAAA1gE,CAAQ,IAC1BsB,kBAAoB,mBAAAtB,CAAQ,IAC5BC,UAAa,WACb,QAASA,GAAUquC,GACf,OAAyBvpC,KAArBupC,EAAgC,CAChC,GAAgC,gBAArBA,GACP,KAAM,IAAIvnC,OAAM,GAAKsQ,WAAWpE,oCAE/B,QAAsClO,KAAlCupC,EAAiBsyB,aACtB,KAAM,IAAI75D,OAAM,GAAKsQ,WAAWnE,wCAE/B,IAAIo7B,EAAiBsyB,eAAiBF,gBAAgB5oD,iBAAiBC,WACxEu2B,EAAiBsyB,eAAiBF,gBAAgB5oD,iBAAiBE,UACnE,KAAM,IAAIjR,OAAM,GAAKsQ,WAAWnE,wCAEpCtN,MAAKqc,SACD2+C,aAActyB,EAAiBsyB,kBAInCh7D,MAAKqc,SACD2+C,aAAcF,gBAAgB5oD,iBAAiBE,UAGvDpS,MAAKnE,KAAOD,OAAOC,OACnBmE,KAAKi8D,mBAAqB,GAAIL,UAASM,OACvCl8D,KAAKm8D,cACLn8D,KAAKo8D,YAAc,KACnBp8D,KAAKkB,OAAS,KACdlB,KAAKq8D,gBAAkB,GAAI3gE,mBAAkBC,eA2MjD,MAzMAtB,GAAUsO,MAAQ,SAAU2zD,EAAYC,GAKpC,QAASC,GAAeC,EAAQC,GAC5BD,EAAOE,SAAS,SAAUj1D,EAAKxN,GAC3BA,EAAMqI,QAAQ,SAAUwgB,GACpB25C,EAAY36D,IAAIghB,EAAQK,kBAAmBL,EAAQu4C,aAP/D,GAAI/3C,GAAY,GAAIlpB,GAChBuiE,EAAoBf,UAAUgB,qBAAqBt5C,GACnDu5C,EAAqBjB,UAAUgB,qBAAqBP,GACpDS,EAAqBlB,UAAUgB,qBAAqBN,EAUxD,OAFAC,GAAeM,EAAoBF,GACnCJ,EAAeO,EAAoBH,GAC5Br5C,GAEXlpB,EAAUoG,UAAUomC,KAAO,WAGvB,IAAK,GAFDjlC,GAAQ5B,KACRmW,KACKxS,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpCwS,EAAQxS,GAAM7B,UAAU6B,EAE5B,IAAIq5D,GAAc,SAAUC,EAAiBC,GACzCD,EAAgBz5B,SAAS05B,SAAWA,GAEpCC,EAAkB,SAAUD,GAC5B,MAAO,UAAU95C,GACb,GAAI65C,GAAkBr7D,EAAM6T,KAAKtS,KAAKvB,EAAOwhB,EAE7C,OADA45C,GAAYC,EAAiBC,GACtBD,IAGXG,EAAoB,SAAUF,GAC9B,MAAO,UAAU95C,GACCxhB,EAAMguD,OAAOn6C,KAAK7T,GACxBwhB,KAGZi6C,EAAqB,SAAUH,GAC/B,MAAO,UAAU95C,GAEb,MADexhB,GAAMi+C,QAAQpqC,KAAK7T,GAClBwhB,KAGpBk6C,EAAoB,SAAUJ,GAC9B,MAAO,UAAU95C,GACb,GAAI65C,GAAkBr7D,EAAMk+C,OAAO38C,KAAKvB,EAAOwhB,EAE/C,OADA45C,GAAYC,EAAiBC,GACtBD,GAGf9mD,GAAQ5T,QAAQ,SAAU2V,GACtB,GAAIqlD,GAAeJ,EAAgBjlD,EAAOrc,MACtC2hE,EAAiBJ,EAAkBllD,EAAOrc,MAC1C4hE,EAAkBJ,EAAmBnlD,EAAOrc,MAC5C6hE,EAAiBJ,EAAkBplD,EAAOrc,KAC9Cqc,GAAOtO,SAAS2zD,EAAcC,EAAgBC,EAAiBC,MAGvErjE,EAAUoG,UAAUk9D,OAAS,WAGzB,IAAK,GAFD/7D,GAAQ5B,KACRmW,KACKxS,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpCwS,EAAQxS,GAAM7B,UAAU6B,EAE5B,IAAIi6D,GAAmB,SAAUC,GAAY,MAAO,UAAU9tD,GAC1D,MAAOA,GAAKmtD,WAAaW,GAE7B1nD,GAAQ5T,QAAQ,SAAU2V,GACtB,GAAI4lD,GAAYF,EAAiB1lD,EAAOrc,KACxC+F,GAAMq6D,mBAAmB8B,kBAAkBD,MAGnDzjE,EAAUoG,UAAUgV,KAAO,SAAU2N,GACjC,GAAI43C,GAAeF,gBAAgB5oD,iBAAiBE,SACpD4oD,GAAgBh7D,KAAKqc,QAAQ2+C,eAAiBA,EAAgBA,EAAeF,gBAAgB5oD,iBAAiBC,SAC9G,IAAI4Q,GAAU,GAAI44C,WAAUZ,QAAQ33C,EAAmB43C,EAEvD,OADAh7D,MAAKi8D,mBAAmBl6D,IAAIqhB,EAAmBL,GACxC,GAAIg5C,qBAAoBiC,gBAAgBj7C,IAEnD1oB,EAAUoG,UAAUq/C,OAAS,SAAU18B,GAEnC,MADApjB,MAAK4vD,OAAOxsC,GACLpjB,KAAKyV,KAAK2N,IAErB/oB,EAAUoG,UAAUmvD,OAAS,SAAUxsC,GACnC,IACIpjB,KAAKi8D,mBAAmB95D,OAAOihB,GAEnC,MAAOle,GACH,KAAM,IAAI/D,OAAMsQ,WAAWlF,cAAgB,IAAMlQ,gBAAgBC,6BAA6B8mB,MAGtG/oB,EAAUoG,UAAUw9D,UAAY,WAC5Bj+D,KAAKi8D,mBAAqB,GAAIL,UAASM,QAE3C7hE,EAAUoG,UAAUo/C,QAAU,SAAUz8B,GACpC,GAAI86C,GAAQl+D,KAAKi8D,mBAAmBhuD,OAAOmV,EAI3C,QAHK86C,GAASl+D,KAAKkB,SACfg9D,EAAQl+D,KAAKkB,OAAO2+C,QAAQz8B,IAEzB86C,GAEX7jE,EAAUoG,UAAU09D,aAAe,SAAU/6C,EAAmBvoB,GAC5D,MAAOmF,MAAKo+D,cAAch7C,EAAmBzV,aAAa/G,UAAW/L,IAEzER,EAAUoG,UAAU29D,cAAgB,SAAUh7C,EAAmB1b,EAAKxN,GAClE,GAAIgkE,IAAQ,CACZ,IAAIl+D,KAAKi8D,mBAAmBhuD,OAAOmV,GAAoB,CACnD,GAAIizB,GAAWr2C,KAAKi8D,mBAAmBn7D,IAAIsiB,GACvCi7C,EAAYxC,UAAUyC,kBAAkBt+D,KAAMojB,EAAmB1b,EAAKxN,EAC1EgkE,GAAQ7nB,EAASN,KAAK,SAAU11C,GAAK,MAAOA,GAAEwjB,WAAWw6C,KAK7D,OAHKH,GAASl+D,KAAKkB,SACfg9D,EAAQl+D,KAAKkB,OAAOk9D,cAAch7C,EAAmB1b,EAAKxN,IAEvDgkE,GAEX7jE,EAAUoG,UAAU89D,SAAW,WAC3Bv+D,KAAKm8D,WAAWl6D,KAAK+5D,qBAAqBwC,kBAAkBC,GAAGz+D,KAAKi8D,mBAAmBX,QAASt7D,KAAKo8D,eAEzG/hE,EAAUoG,UAAUi+D,QAAU,WAC1B,GAAIH,GAAWv+D,KAAKm8D,WAAW7gB,KAC/B,QAAiBn8C,KAAbo/D,EACA,KAAM,IAAIp9D,OAAMsQ,WAAW3E,4BAE/B9M,MAAKi8D,mBAAqBsC,EAASloB,SACnCr2C,KAAKo8D,YAAcmC,EAASI,YAEhCtkE,EAAUoG,UAAUm+D,YAAc,WAC9B,GAAI58D,GAAQ,GAAI3H,EAEhB,OADA2H,GAAMd,OAASlB,KACRgC,GAEX3H,EAAUoG,UAAUo+D,gBAAkB,WAElC,IAAK,GADDC,MACKn7D,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpCm7D,EAAYn7D,GAAM7B,UAAU6B,EAEhC,IAAIo7D,GAAW/+D,KAAgB,YAAIA,KAAKo8D,YAAcp8D,KAAKg/D,iBAC3Dh/D,MAAKo8D,YAAc0C,EAAY3qD,OAAO,SAAU2G,EAAMN,GAClD,MAAOA,GAAKM,IACbikD,IAEP1kE,EAAUoG,UAAUw+D,0BAA4B,SAAUC,GACtDl/D,KAAKq8D,gBAAkB6C,GAE3B7kE,EAAUoG,UAAUK,IAAM,SAAUsiB,GAChC,MAAOpjB,MAAKm/D,MAAK,GAAO,EAAOrE,gBAAgBhoD,eAAeG,SAAUmQ,IAE5E/oB,EAAUoG,UAAU2+D,UAAY,SAAUh8C,EAAmB1b,EAAKxN,GAC9D,MAAO8F,MAAKm/D,MAAK,GAAO,EAAOrE,gBAAgBhoD,eAAeG,SAAUmQ,EAAmB1b,EAAKxN,IAEpGG,EAAUoG,UAAU4+D,SAAW,SAAUj8C,EAAmBvoB,GACxD,MAAOmF,MAAKo/D,UAAUh8C,EAAmBzV,aAAa/G,UAAW/L,IAErER,EAAUoG,UAAU6+D,OAAS,SAAUl8C,GACnC,MAAOpjB,MAAKm/D,MAAK,GAAM,EAAMrE,gBAAgBhoD,eAAeG,SAAUmQ,IAE1E/oB,EAAUoG,UAAU8+D,aAAe,SAAUn8C,EAAmB1b,EAAKxN,GACjE,MAAO8F,MAAKm/D,MAAK,GAAO,EAAMrE,gBAAgBhoD,eAAeG,SAAUmQ,EAAmB1b,EAAKxN,IAEnGG,EAAUoG,UAAU++D,YAAc,SAAUp8C,EAAmBvoB,GAC3D,MAAOmF,MAAKu/D,aAAan8C,EAAmBzV,aAAa/G,UAAW/L,IAExER,EAAUoG,UAAUiY,QAAU,SAAU+mD,GACpC,GAAIC,GAAgB,GAAIrlE,EAGxB,OAFAqlE,GAAcjqD,KAAKgqD,GAAqBE,SACxCD,EAAcx+D,OAASlB,KAChB0/D,EAAc5+D,IAAI2+D,IAE7BplE,EAAUoG,UAAU0+D,KAAO,SAAUS,EAAkBC,EAAeC,EAAY18C,EAAmB1b,EAAKxN,GACtG,GAAIqQ,GAAS,KACTw1D,GACAH,iBAAkBA,EAClBI,mBAAoB,SAAUn3D,GAAW,MAAOA,IAChDg3D,cAAeA,EACfn4D,IAAKA,EACL0b,kBAAmBA,EACnB08C,WAAYA,EACZ5lE,MAAOA,EAEX,IAAI8F,KAAKo8D,aAEL,OAAej9D,MADfoL,EAASvK,KAAKo8D,YAAY2D,KACa,OAAXx1D,EACxB,KAAM,IAAIpJ,OAAMsQ,WAAW1E,+BAI/BxC,GAASvK,KAAKg/D,kBAAkBe,EAEpC,OAAOx1D,IAEXlQ,EAAUoG,UAAUu+D,gBAAkB,WAClC,GAAIp9D,GAAQ5B,IACZ,OAAO,UAAU+hB,GACb,GAAIlZ,GAAUgzD,UAAUoE,KAAKr+D,EAAMy6D,gBAAiBz6D,EAAOmgB,EAAK89C,cAAe99C,EAAK+9C,WAAY/9C,EAAKqB,kBAAmBrB,EAAKra,IAAKqa,EAAK7nB,MAAO6nB,EAAK69C,iBAGnJ,OAFA/2D,GAAUkZ,EAAKi+C,mBAAmBn3D,GACrBizD,WAAWpjD,QAAQ7P,KAIjCxO,IAEXJ,SAAQI,UAAYA,U;;;;;;;ACrPpBN,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0B,QAAS,mBAAAxB,CAAQ,IACjBG,gBAAmB,WACnB,QAASA,GAAgBqP,GACrB5J,KAAKnE,KAAOD,OAAOC,OACnBmE,KAAK4J,SAAWA,EAEpB,MAAOrP,KAEXN,SAAQM,gBAAkBA,gB;;;;;;;ACT1BR,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIskE,mBAAqB,WACrB,QAASA,MAQT,MANAA,GAAkBC,GAAK,SAAUpoB,EAAUsoB,GACvC,GAAIJ,GAAW,GAAIC,EAGnB,OAFAD,GAASloB,SAAWA,EACpBkoB,EAASI,WAAaA,EACfJ,GAEJC,IAEXvkE,SAAQukE,kBAAoBA,kB;;;;;;;ACZ5BzkE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIuX,YAAa,mBAAArX,CAAQ,GACrB8hE,OAAU,WACV,QAASA,KACLl8D,KAAKq3D,KAAO,GAAI7zD,KAuEpB,MArEA04D,GAAOz7D,UAAUy/D,OAAS,WACtB,MAAOlgE,MAAKq3D,MAEhB6E,EAAOz7D,UAAUsB,IAAM,SAAUqhB,EAAmBlpB,GAChD,GAA0B,OAAtBkpB,OAAoDjkB,KAAtBikB,EAC9B,KAAM,IAAIjiB,OAAMsQ,WAAWrF,cAE/B,IAAc,OAAVlS,OAA4BiF,KAAVjF,EAClB,KAAM,IAAIiH,OAAMsQ,WAAWrF,cAE/B,IAAIovB,GAAQx7B,KAAKq3D,KAAKv2D,IAAIsiB,OACZjkB,KAAVq8B,GACAA,EAAMv5B,KAAK/H,GACX8F,KAAKq3D,KAAK3zD,IAAI0f,EAAmBoY,IAGjCx7B,KAAKq3D,KAAK3zD,IAAI0f,GAAoBlpB,KAG1CgiE,EAAOz7D,UAAUK,IAAM,SAAUsiB,GAC7B,GAA0B,OAAtBA,OAAoDjkB,KAAtBikB,EAC9B,KAAM,IAAIjiB,OAAMsQ,WAAWrF,cAE/B,IAAIovB,GAAQx7B,KAAKq3D,KAAKv2D,IAAIsiB,EAC1B,QAAcjkB,KAAVq8B,EACA,MAAOA,EAGP,MAAM,IAAIr6B,OAAMsQ,WAAWpF,gBAGnC6vD,EAAOz7D,UAAU0B,OAAS,SAAUihB,GAChC,GAA0B,OAAtBA,OAAoDjkB,KAAtBikB,EAC9B,KAAM,IAAIjiB,OAAMsQ,WAAWrF,cAE/B,KAAKpM,KAAKq3D,KAAKxzD,OAAOuf,GAClB,KAAM,IAAIjiB,OAAMsQ,WAAWpF,gBAGnC6vD,EAAOz7D,UAAUs9D,kBAAoB,SAAUD,GAC3C,GAAIl8D,GAAQ5B,IACZA,MAAKq3D,KAAK90D,QAAQ,SAAU8zD,EAAS3uD,GACjC,GAAIy4D,GAAiB9J,EAAQ/zD,OAAO,SAAUk5B,GAAS,OAAQsiC,EAAUtiC,IACrE2kC,GAAe5gE,OAAS,EACxBqC,EAAMy1D,KAAK3zD,IAAIgE,EAAKy4D,GAGpBv+D,EAAMy1D,KAAKxzD,OAAO6D,MAI9Bw0D,EAAOz7D,UAAUwN,OAAS,SAAUmV,GAChC,GAA0B,OAAtBA,OAAoDjkB,KAAtBikB,EAC9B,KAAM,IAAIjiB,OAAMsQ,WAAWrF,cAE/B,OAAOpM,MAAKq3D,KAAKvzD,IAAIsf,IAEzB84C,EAAOz7D,UAAU66D,MAAQ,WACrB,GAAI3sC,GAAO,GAAIutC,EAIf,OAHAl8D,MAAKq3D,KAAK90D,QAAQ,SAAUrI,EAAOwN,GAC/BxN,EAAMqI,QAAQ,SAAUlC,GAAK,MAAOsuB,GAAK5sB,IAAI2F,EAAKrH,EAAEi7D,aAEjD3sC,GAEXutC,EAAOz7D,UAAUk8D,SAAW,SAAUrH,GAClCt1D,KAAKq3D,KAAK90D,QAAQ,SAAUrI,EAAOwN,GAC/B4tD,EAAK5tD,EAAKxN,MAGXgiE,IAEXjiE,SAAQiiE,OAASA,O;;;;;;;AC7EjBniE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0B,QAAS,mBAAAxB,CAAQ,IACjBgmE,QAAW,WACX,QAASA,GAAQ78C,GACbvjB,KAAKnE,KAAOD,OAAOC,OACnBmE,KAAKujB,UAAYA,EAKrB,MAHA68C,GAAQ3/D,UAAU4/D,QAAU,SAAUJ,GAClCjgE,KAAKigE,KAAOA,GAETG,IAEXnmE,SAAQmmE,QAAUA,Q;;;;;;;ACZlBrmE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIomE,MAAQ,WACR,QAASA,GAAKC,EAAeC,GACzBxgE,KAAKugE,cAAgBA,EACrBvgE,KAAKwgE,YAAcA,EAEvB,MAAOF,KAEXrmE,SAAQqmE,KAAOA,K;;;;;;;ACIf,QAASzD,sBAAqB4D,GAC1B,MAAOA,GAAMxE,mBAGjB,QAASyE,eAAcb,EAAeC,EAAY18C,EAAmB5T,EAAM9H,EAAKxN,GAC5E,GAAIoX,GAAcuuD,EAAgBlyD,aAAa1G,iBAAmB0G,aAAa3G,WAC3E25D,EAAiB,GAAIrrB,YAAW1nC,SAAS0D,EAAa8R,GACtD3b,EAAS,GAAIm5D,UAASprB,OAAOsqB,EAAYtwD,EAAM4T,EAAmBu9C,EACtE,QAAYxhE,KAARuI,EAAmB,CACnB,GAAIm5D,GAAc,GAAIvrB,YAAW1nC,SAASlG,EAAKxN,EAC/CuN,GAAOU,SAASlG,KAAK4+D,GAEzB,MAAOp5D,GAEX,QAASq5D,oBAAmBlB,EAAkB/2D,EAASq7B,EAAez8B,GAClE,GAAI4uC,GAAW7yB,YAAY3a,EAAQ0a,UAAW9b,EAAO2b,mBACjD29C,IAWJ,OATIA,IADqB,IAArBnB,EACiBvpB,EAAS/zC,OAAO,SAAUygB,GACvC,GAAIiB,GAAU,GAAIq6C,WAAU2C,QAAQj+C,EAAQK,kBAAmBva,EAASq7B,EAAenhB,EAAStb,EAChG,OAAOsb,GAAQc,WAAWG,KAIbqyB,EAErB4qB,4BAA4Bx5D,EAAO2b,kBAAmB29C,EAAgBt5D,EAAQoB,EAAQ0a,WAC/Ew9C,EAEX,QAASE,6BAA4B79C,EAAmBizB,EAAU5uC,EAAQ8b,GACtE,OAAQ8yB,EAAS92C,QACb,IAAK2hE,iBAAgB3F,aAAaE,oBAC9B,IAA4B,IAAxBh0D,EAAOuuC,aACP,MAAOK,EAGP,IAAI7xB,GAA0BnoB,gBAAgBC,6BAA6B8mB,GACvE+9C,EAAM1vD,WAAWjF,cAGrB,MAFA20D,IAAO9kE,gBAAgBkoB,sBAAsBC,EAAyB/c,GACtE05D,GAAO9kE,gBAAgBinB,2CAA2CC,EAAWiB,EAAyBhB,aAChG,GAAIriB,OAAMggE,EAExB,KAAKD,iBAAgB3F,aAAaG,wBAC9B,IAAyB,IAArBj0D,EAAOoK,UACP,MAAOwkC,EAEf,KAAK6qB,iBAAgB3F,aAAaC,0BAClC,QACI,IAAyB,IAArB/zD,EAAOoK,UAAqB,CAC5B,GAAI2S,GAA0BnoB,gBAAgBC,6BAA6B8mB,GAAoB+9C,EAAM1vD,WAAWnF,gBAAkB,IAAMkY,CAExI,MADA28C,IAAO9kE,gBAAgBinB,2CAA2CC,EAAWiB,EAAyBhB,aAChG,GAAIriB,OAAMggE,GAGhB,MAAO9qB,IAIvB,QAAS+qB,oBAAmBlC,EAAgBU,EAAkBx8C,EAAmBva,EAASq7B,EAAez8B,GACrG,IACI,GACI45D,GADAN,MAAiB,EAErB,IAAsB,OAAlB78B,EAAwB,CACxB68B,EAAiBD,mBAAmBlB,EAAkB/2D,EAAS,KAAMpB,GACrE45D,EAAiB,GAAIhD,WAAU2C,QAAQ59C,EAAmBva,EAAS,KAAMk4D,EAAgBt5D,EACzF,IAAI65D,GAAU,GAAIC,QAAOjB,KAAKz3D,EAASw4D,EACvCx4D,GAAQw3D,QAAQiB,OAGhBP,GAAiBD,mBAAmBlB,EAAkB/2D,EAASq7B,EAAez8B,GAC9E45D,EAAiBn9B,EAAcs9B,gBAAgB/5D,EAAO2b,kBAAmB29C,EAAgBt5D,EAE7Fs5D,GAAex+D,QAAQ,SAAUwgB,GAC7B,GAAI0+C,GAAkB,IAOtB,IALIA,EADAh6D,EAAOoK,UACWwvD,EAAeG,gBAAgBz+C,EAAQK,kBAAmBL,EAAStb,GAGnE45D,EAElBt+C,EAAQ9Y,OAAS6wD,gBAAgBzoD,gBAAgBM,UAA2C,OAA/BoQ,EAAQY,mBAA6B,CAC/E+9C,mBAAmBC,gBAAgBzC,EAAgBn8C,EAAQY,oBACjEphB,QAAQ,SAAUq/D,GAC3BR,mBAAmBlC,GAAgB,EAAO0C,EAAWx+C,kBAAmBva,EAAS44D,EAAiBG,QAKlH,MAAO34D,GACH,KAAIA,YAAiBskB,aAAgC,OAAlB2W,GAI/B,KAAM,IAAI/iC,OAAM8H,EAAMwnC,QAHtBp0C,iBAAgB0nB,8BAA8BmgB,EAAcq8B,cAAcN,KAAKO,cAO3F,QAASh9C,aAAYD,EAAWH,GAC5B,GAAIizB,MACAumB,EAAoBC,qBAAqBt5C,EAO7C,OANIq5C,GAAkB3uD,OAAOmV,GACzBizB,EAAWumB,EAAkB97D,IAAIsiB,GAEP,OAArBG,EAAUriB,SACfm1C,EAAW7yB,YAAYD,EAAUriB,OAAQkiB,IAEtCizB,EAEX,QAAS4pB,MAAKf,EAAgB37C,EAAWs8C,EAAeC,EAAY18C,EAAmB1b,EAAKxN,EAAO0lE,OACtE,KAArBA,IAA+BA,GAAmB,EACtD,IAAI/2D,GAAU,GAAIg5D,WAAUzB,QAAQ78C,EAGpC,OADA69C,oBAAmBlC,EAAgBU,EAAkBx8C,EAAmBva,EAAS,KADpE63D,cAAcb,EAAeC,EAAY18C,EAAmB,GAAI1b,EAAKxN,IAE3E2O,EAGX,QAASy1D,mBAAkB/6C,EAAWH,EAAmB1b,EAAKxN,GAC1D,GAAIuN,GAAS,GAAIm5D,UAASprB,OAAOslB,gBAAgBhoD,eAAeG,SAAU,GAAImQ,EAAmB,GAAIkyB,YAAW1nC,SAASlG,EAAKxN,IAC1H2O,EAAU,GAAIg5D,WAAUzB,QAAQ78C,EAEpC,OADc,IAAI86C,WAAU2C,QAAQ59C,EAAmBva,EAAS,QAAUpB,GAnI9E1N,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqnE,QAAS,mBAAAnnE,CAAQ,KACjBynE,UAAY,mBAAAznE,CAAQ,KACpBikE,UAAY,mBAAAjkE,CAAQ,KACpBwmE,SAAW,mBAAAxmE,CAAQ,IACnB8mE,gBAAkB,mBAAA9mE,CAAQ,KAC1BsnE,mBAAqB,mBAAAtnE,CAAQ,KAC7Bk7C,WAAa,mBAAAl7C,CAAQ,GACrBqX,WAAa,mBAAArX,CAAQ,GACrBuT,aAAe,mBAAAvT,CAAQ,GACvB0gE,gBAAkB,mBAAA1gE,CAAQ,IAC1BiC,gBAAkB,mBAAAjC,CAAQ,GAI9BH,SAAQ4iE,qBAAuBA,qBAgH/B5iE,QAAQgmE,KAAOA,KAOfhmE,QAAQqkE,kBAAoBA,kB;;;;;;;ACtI5BvkE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIw7C,iBAAmB,WACnB,QAASA,GAAgBpiB,GACrBtzB,KAAKszB,IAAMA,EAoBf,MAlBAoiB,GAAgBj1C,UAAUkvC,WAAa,SAAUmyB,GAC7C,MAA0C,KAAnC9hE,KAAKszB,IAAIlxB,QAAQ0/D,IAE5BpsB,EAAgBj1C,UAAUivD,SAAW,SAAUoS,GAC3C,GAAIC,GAAgB,GAChBC,EAAsBF,EAAaruB,MAAM,IAAIjX,UAAUxlB,KAAK,GAEhE,OADA+qD,GAAgB/hE,KAAKszB,IAAImgB,MAAM,IAAIjX,UAAUxlB,KAAK,IAC3ChX,KAAK2vC,WAAWxsC,MAAOmwB,IAAKyuC,GAAiBC,IAExDtsB,EAAgBj1C,UAAUgD,SAAW,SAAUq+D,GAC3C,OAA4C,IAApC9hE,KAAKszB,IAAIlxB,QAAQ0/D,IAE7BpsB,EAAgBj1C,UAAUw0B,OAAS,SAAUgtC,GACzC,MAAOjiE,MAAKszB,MAAQ2uC,GAExBvsB,EAAgBj1C,UAAUvG,MAAQ,WAC9B,MAAO8F,MAAKszB,KAEToiB,IAEXz7C,SAAQy7C,gBAAkBA,gB;;;;;;;ACnB1B,QAASisB,iBAAgBzC,EAAgB5J,GAGrC,MADc4M,YAAWhD,EADH7iE,gBAAgBunB,gBAAgB0xC,GACIA,GAAM,GAIpE,QAAS4M,YAAWhD,EAAgBiD,EAAiB7M,EAAM8M,GACvD,GAAIj6D,GAAW+2D,EAAejqB,uBAAuBqgB,GACjD+M,EAAqBl6D,EAASgtC,yBAClC,QAA2Bh2C,KAAvBkjE,EAAkC,CAClC,GAAIlB,GAAM1vD,WAAWhF,8BAAgC,IAAM01D,EAAkB,GAC7E,MAAM,IAAIhhE,OAAMggE,GAEpB,GAAImB,GAA0Bn6D,EAASitC,sBACnC7b,EAAOx/B,OAAOw/B,KAAK+oC,GACnBC,EAAoD,IAAhBjN,EAAK/1D,QAAgBg6B,EAAKh6B,OAAS,EACvEijE,EAAa,EAAqCjpC,EAAKh6B,OAAS+1D,EAAK/1D,OACrEkjE,EAAqBC,4BAA4BN,EAAaD,EAAiBE,EAAoBC,EAAyBE,GAC5HG,EAAkBC,uBAAuB1D,EAAgB5J,GACzDuN,EAAUJ,EAAmBruD,OAAOuuD,GACpCG,EAA2BC,4BAA4B7D,EAAgB5J,EAC3E,IAAIuN,EAAQtjE,OAASujE,EAA0B,CAC3C,GAAI75D,GAAQwI,WAAWtE,4BACnBg1D,EAAkB1wD,WAAWrE,2BACjC,MAAM,IAAIjM,OAAM8H,GAEpB,MAAO45D,GAEX,QAASG,4BAA2BzhE,EAAO6gE,EAAaD,EAAiBE,EAAoBC,GACzF,GAAIpP,GAAiBoP,EAAwB/gE,EAAMsM,gBAC/C1F,EAAW86D,qBAAqB/P,GAChCgQ,GAAmC,IAAvB/6D,EAAShN,UACrBioB,EAAoBi/C,EAAmB9gE,GACvC4hE,EAAoBh7D,EAASpN,QAAUoN,EAAS9M,WAEpD,IADA+nB,EAAoB,GAA0CA,GAC5C,IAAd8/C,EAAoB,CACpB,GAAIjgC,GAAW7f,IAAsBrpB,OACjCqpC,EAAahgB,IAAsB1Q,SACnCowB,MAAoC3jC,KAAtBikB,EACdggD,EAAiBngC,GAAYG,GAAcN,CAC/C,KAAoB,IAAhBs/B,GAAyBgB,EAAe,CACxC,GAAIjC,GAAM1vD,WAAW/E,0BAA4B,aAAenL,EAAQ,aAAe4gE,EAAkB,GACzG,MAAM,IAAIhhE,OAAMggE,GAEpB,GAAI15D,GAAS,GAAIm5D,UAASprB,OAAOslB,gBAAgBhoD,eAAeE,oBAAqB7K,EAAS5M,WAAY6nB,EAE1G,OADA3b,GAAOU,SAAW+qD,EACXzrD,EAEX,MAAO,MAEX,QAASi7D,6BAA4BN,EAAaD,EAAiBE,EAAoBC,EAAyBE,GAE5G,IAAK,GADDK,MACKpjE,EAAI,EAAGA,EAAI+iE,EAAY/iE,IAAK,CACjC,GAAI8B,GAAQ9B,EACRgI,EAASu7D,2BAA2BzhE,EAAO6gE,EAAaD,EAAiBE,EAAoBC,EAClF,QAAX76D,GACAo7D,EAAQ5gE,KAAKwF,GAGrB,MAAOo7D,GAEX,QAASD,wBAAuB1D,EAAgBhqB,GAI5C,IAAK,GAHDmuB,GAAqBnE,EAAe7pB,sBAAsBH,GAC1D2tB,KACAtpC,EAAOx/B,OAAOw/B,KAAK8pC,GACd5jE,EAAI,EAAGA,EAAI85B,EAAKh6B,OAAQE,IAAK,CAClC,GAAIiI,GAAM6xB,EAAK95B,GACXyzD,EAAiBmQ,EAAmB37D,GACpCS,EAAW86D,qBAAqBI,EAAmB37D,IACnDnM,EAAa4M,EAAS5M,YAAcmM,EACpC0b,EAAqBjb,EAASpN,QAAUoN,EAAS9M,YACjDoM,EAAS,GAAIm5D,UAASprB,OAAOslB,gBAAgBhoD,eAAeC,cAAexX,EAAY6nB,EAC3F3b,GAAOU,SAAW+qD,EAClB2P,EAAQ5gE,KAAKwF,GAEjB,GAAI67D,GAAkBvpE,OAAO8U,eAAeqmC,EAAgBz0C,WAAWrB,WACvE,IAAIkkE,IAAoBvpE,OAAQ,CAC5B,GAAIwpE,GAAcX,uBAAuB1D,EAAgBoE,EACzDT,GAAUA,EAAQzuD,OAAOmvD,GAE7B,MAAOV,GAEX,QAASE,6BAA4B7D,EAAgB5J,GACjD,GAAIgO,GAAkBvpE,OAAO8U,eAAeymD,EAAK70D,WAAWrB,WAC5D,IAAIkkE,IAAoBvpE,OAAQ,CAC5B,GAAIypE,GAAsBnnE,gBAAgBunB,gBAAgB0/C,GACtDT,EAAUX,WAAWhD,EAAgBsE,EAAqBF,GAAiB,GAC3En7D,EAAW06D,EAAQr0D,IAAI,SAAUqC,GACjC,MAAOA,GAAE1I,SAAS7F,OAAO,SAAUwP,GAC/B,MAAOA,GAAEpK,MAAQiG,aAAa7G,kBAGlC28D,KAAoBrvD,OAAOvS,SAAUsG,GAAU5I,OAC/CmkE,EAAkBb,EAAQtjE,OAASkkE,CACvC,OAAIC,GAAkB,EACXA,EAGAX,4BAA4B7D,EAAgBoE,GAIvD,MAAO,GAGf,QAASL,sBAAqB/P,GAC1B,GAAIyQ,KAIJ,OAHAzQ,GAAe3wD,QAAQ,SAAUuP,GAC7B6xD,EAAkB7xD,EAAEpK,IAAImG,YAAciE,EAAE5X,SAGxCa,OAAQ4oE,EAAkBh2D,aAAa3G,YACvC3L,YAAasoE,EAAkBh2D,aAAa1G,kBAC5C1L,WAAYooE,EAAkBh2D,aAAa9G,UAC3C1L,UAAWwoE,EAAkBh2D,aAAa7G,gBAxHlD/M,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAImC,iBAAkB,mBAAAjC,CAAQ,IAC1BwmE,SAAW,mBAAAxmE,CAAQ,IACnBqX,WAAa,mBAAArX,CAAQ,GACrBuT,aAAe,mBAAAvT,CAAQ,GACvB0gE,gBAAkB,mBAAA1gE,CAAQ,GAM9BH,SAAQ0nE,gBAAkBA,gB;;;;;;;ACX1B5nE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0B,QAAS,mBAAAxB,CAAQ,IACjB4mE,QAAW,WACX,QAASA,GAAQ59C,EAAmBm9C,EAAer8B,EAAemS,EAAU5uC,GACxEzH,KAAKnE,KAAOD,OAAOC,OACnBmE,KAAKojB,kBAAoBA,EACzBpjB,KAAKugE,cAAgBA,EACrBvgE,KAAKkkC,cAAgBA,EACrBlkC,KAAKyH,OAASA,EACdzH,KAAKmkB,iBACLnkB,KAAKq2C,SAAYh3C,MAAMwS,QAAQwkC,GAAYA,GAAYA,GAO3D,MALA2qB,GAAQvgE,UAAU+gE,gBAAkB,SAAUp+C,EAAmBizB,EAAU5uC,GACvE,GAAIzF,GAAQ,GAAIg/D,GAAQ59C,EAAmBpjB,KAAKugE,cAAevgE,KAAMq2C,EAAU5uC,EAE/E,OADAzH,MAAKmkB,cAAcliB,KAAKD,GACjBA,GAEJg/D,IAEX/mE,SAAQ+mE,QAAUA,Q;;;;;;;ACflB,QAAS4C,mBAAkB3jD,EAAUkE,EAAe0/C,GAChD,GAAIC,GAA6B3/C,EAAc7hB,OAAO,SAAU8hB,GAC5D,MAAgC,QAAxBA,EAAa3c,QAAmB2c,EAAa3c,OAAOwC,OAAS6wD,gBAAgBhoD,eAAeC,gBAEpGgxD,EAAqBD,EAA2Bt1D,IAAI,SAAU4V,GAC9D,MAAOy/C,GAAez/C,IAQ1B,OANA0/C,GAA2BvhE,QAAQ,SAAUsF,EAAGtG,GAC5C,GAAImN,GAAe,EACnBA,GAAe7G,EAAEJ,OAAO+H,KAAKtV,OAC7B,IAAI8pE,GAAYD,EAAmBxiE,EACnC0e,GAASvR,GAAgBs1D,IAEtB/jD,EAEX,QAASgkD,iBAAgBC,EAAMC,GAC3B,MAAO,KAAKD,EAAKzuD,KAAK5T,MAAMqiE,OAAO,IAAQ9vD,OAAO+vD,KAEtD,QAASC,gBAAeh1D,EAAQ7E,GAC5B,GAAIxC,QAAQsqD,YAAY1kD,aAAarG,eAAgB8H,GAAS,CAC1D,GAAIqB,GAAO1I,QAAQ4J,YAAYhE,aAAarG,eAAgB8H,EAC5D,KACI7E,EAAOkG,EAAKvW,SAEhB,MAAOgL,GACH,KAAM,IAAI/D,OAAMkjE,aAAa72D,qBAAqB4B,EAAOI,KAAMtK,EAAEurC,YAI7E,QAAS6zB,iBAAgBl1D,EAAQ+U,EAAe0/C,GAC5C,GAAIt5D,GAAS,IACb,IAAI4Z,EAAc5kB,OAAS,EAAG,CAO1BgL,EAAS05D,gBAAgB70D,EANW+U,EAAc7hB,OAAO,SAAU8hB,GAC/D,MAAgC,QAAxBA,EAAa3c,QAAmB2c,EAAa3c,OAAOwC,OAAS6wD,gBAAgBhoD,eAAeE,sBAE9CxE,IAAI,SAAU4V,GACpE,MAAOy/C,GAAez/C,MAG1B7Z,EAASq5D,kBAAkBr5D,EAAQ4Z,EAAe0/C,OAGlDt5D,GAAS,GAAI6E,EAGjB,OADAg1D,gBAAeh1D,EAAQ7E,GAChBA,EAjDXxQ,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI4gE,iBAAkB,mBAAA1gE,CAAQ,IAC1BuT,aAAe,mBAAAvT,CAAQ,GACvBiqE,aAAe,mBAAAjqE,CAAQ,EAgD3BH,SAAQqqE,gBAAkBA,gB;;;;;;;AC9C1B,QAASC,iBAAgBvgD,GACrB,GAAIqyB,GAAWryB,EAAQqyB,SACnBlyB,EAAgBH,EAAQG,cACxBqgD,EAAkBxgD,EAAQvc,QAAUuc,EAAQvc,OAAOoK,UACnD4yD,IAA4BzgD,EAAQkgB,eACnClgB,EAAQkgB,cAAcz8B,QACtBuc,EAAQvc,QACRuc,EAAQkgB,cAAcz8B,OAAOouC,aAAa7xB,EAAQvc,OAAO2b,mBAC9D,IAAIohD,GAAmBC,EACnB,MAAOtgD,GAAc3V,IAAI,SAAU4V,GAC/B,MAAOmgD,iBAAgBngD,IAI3B,IAAI7Z,GAAS,IACb,KAAoC,IAAhCyZ,EAAQvc,OAAOuuC,cAA6C,IAApBK,EAAS92C,OAArD,CAGA,GAAIwjB,GAAUszB,EAAS,GACnBquB,EAAc3hD,EAAQm4C,QAAUJ,gBAAgB5oD,iBAAiBC,SACrE,IAAIuyD,IAAqC,IAAtB3hD,EAAQk4C,UACvB,MAAOl4C,GAAQo4C,KAEnB,IAAIp4C,EAAQ9Y,OAAS6wD,gBAAgBzoD,gBAAgBC,cACjD/H,EAASwY,EAAQo4C,UAEhB,IAAIp4C,EAAQ9Y,OAAS6wD,gBAAgBzoD,gBAAgBK,SACtDnI,EAASwY,EAAQo4C,UAEhB,IAAIp4C,EAAQ9Y,OAAS6wD,gBAAgBzoD,gBAAgBE,YACtDhI,EAASwY,EAAQY,uBAEhB,IAAIZ,EAAQ9Y,OAAS6wD,gBAAgBzoD,gBAAgBG,cAAyC,OAAzBuQ,EAAQs4C,aAC9E9wD,EAASwY,EAAQs4C,aAAar3C,EAAQu8C,mBAErC,IAAIx9C,EAAQ9Y,OAAS6wD,gBAAgBzoD,gBAAgBI,SAA+B,OAApBsQ,EAAQqnB,QACzE7/B,EAASwY,EAAQqnB,QAAQpmB,EAAQu8C,mBAEhC,IAAIx9C,EAAQ9Y,OAAS6wD,gBAAgBzoD,gBAAgBQ,UAAiC,OAArBkQ,EAAQq4C,SAC1E7wD,EAASwY,EAAQq4C,SAASp3C,EAAQu8C,mBAEjC,IAAIx9C,EAAQ9Y,OAAS6wD,gBAAgBzoD,gBAAgBM,UAA2C,OAA/BoQ,EAAQY,mBAGzE,CACD,GAAIP,GAAoB/mB,gBAAgBC,6BAA6B0nB,EAAQZ,kBAC7E,MAAM,IAAIjiB,OAAMsQ,WAAW5E,qBAAuB,IAAMuW,GAJxD7Y,EAASo6D,gBAAgBL,gBAAgBvhD,EAAQY,mBAAoBQ,EAAeogD,iBAaxF,MAPoC,kBAAzBxhD,GAAQ0gB,eACfl5B,EAASwY,EAAQ0gB,aAAazf,EAAQu8C,cAAeh2D,IAErDm6D,IACA3hD,EAAQo4C,MAAQ5wD,EAChBwY,EAAQk4C,WAAY,GAEjB1wD,GAGf,QAASmO,SAAQ7P,GACb,MAAO07D,iBAAgB17D,EAAQo3D,KAAKO,aAhExCzmE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI4gE,iBAAkB,mBAAA1gE,CAAQ,IAC1BiC,gBAAkB,mBAAAjC,CAAQ,IAC1BuqE,gBAAkB,mBAAAvqE,CAAQ,KAC1BqX,WAAa,mBAAArX,CAAQ,EA8DzBH,SAAQye,QAAUA,Q;;;;;;;AClElB3e,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI4gE,iBAAkB,mBAAA1gE,CAAQ,IAC1BwqE,yBAA2B,mBAAAxqE,CAAQ,IACnCyqE,gBAAmB,WACnB,QAASA,GAAgB9hD,GACrB/iB,KAAKwjC,SAAWzgB,EAUpB,MARA8hD,GAAgBpkE,UAAUqvD,iBAAmB,WAEzC,MADA9vD,MAAKwjC,SAAS03B,MAAQJ,gBAAgB5oD,iBAAiBC,UAChD,GAAIyyD,0BAAyB1uB,oBAAoBl2C,KAAKwjC,WAEjEqhC,EAAgBpkE,UAAUqkE,iBAAmB,WAEzC,MADA9kE,MAAKwjC,SAAS03B,MAAQJ,gBAAgB5oD,iBAAiBE,UAChD,GAAIwyD,0BAAyB1uB,oBAAoBl2C,KAAKwjC,WAE1DqhC,IAEX5qE,SAAQ4qE,gBAAkBA,gB;;;;;;;ACjB1B9qE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI6qE,qBAAsB,mBAAA3qE,CAAQ,KAC9BkpC,sBAAwB,mBAAAlpC,CAAQ,IAChCwpC,oBAAsB,mBAAAxpC,CAAQ,IAC9B4qE,sBAAyB,WACzB,QAASA,GAAsBjiD,GAC3B/iB,KAAKwjC,SAAWzgB,EAChB/iB,KAAKm2C,mBAAqB,GAAI7S,uBAAsBK,kBAAkB3jC,KAAKwjC,UAC3ExjC,KAAKo2C,iBAAmB,GAAIxS,qBAAoBL,gBAAgBvjC,KAAKwjC,UACrExjC,KAAKilE,iBAAmB,GAAIF,qBAAoBF,gBAAgB9hD,GAwDpE,MAtDAiiD,GAAsBvkE,UAAUqvD,iBAAmB,WAC/C,MAAO9vD,MAAKilE,iBAAiBnV,oBAEjCkV,EAAsBvkE,UAAUqkE,iBAAmB,WAC/C,MAAO9kE,MAAKilE,iBAAiBH,oBAEjCE,EAAsBvkE,UAAUojC,KAAO,SAAUhgB,GAC7C,MAAO7jB,MAAKm2C,mBAAmBtS,KAAKhgB,IAExCmhD,EAAsBvkE,UAAUqjC,gBAAkB,SAAUt0B,GACxD,MAAOxP,MAAKm2C,mBAAmBrS,gBAAgBt0B,IAEnDw1D,EAAsBvkE,UAAUsjC,oBAAsB,WAClD,MAAO/jC,MAAKm2C,mBAAmBpS,uBAEnCihC,EAAsBvkE,UAAUujC,iBAAmB,SAAUptB,EAAK1c,GAC9D,MAAO8F,MAAKm2C,mBAAmBnS,iBAAiBptB,EAAK1c,IAEzD8qE,EAAsBvkE,UAAUwjC,iBAAmB,SAAU/iC,GACzD,MAAOlB,MAAKm2C,mBAAmBlS,iBAAiB/iC,IAEpD8jE,EAAsBvkE,UAAU0jC,gBAAkB,SAAU30B,GACxD,MAAOxP,MAAKm2C,mBAAmBhS,gBAAgB30B,IAEnDw1D,EAAsBvkE,UAAU2jC,iBAAmB,SAAUxtB,EAAK1c,GAC9D,MAAO8F,MAAKm2C,mBAAmB/R,iBAAiBxtB,EAAK1c,IAEzD8qE,EAAsBvkE,UAAU4jC,kBAAoB,SAAUC,GAC1D,MAAOtkC,MAAKm2C,mBAAmB9R,kBAAkBC,IAErD0gC,EAAsBvkE,UAAU8jC,iBAAmB,SAAUD,GACzD,MAAOtkC,MAAKm2C,mBAAmB5R,iBAAiBD,IAEpD0gC,EAAsBvkE,UAAU+jC,qBAAuB,SAAUh1B,GAC7D,MAAOxP,MAAKm2C,mBAAmB3R,qBAAqBh1B,IAExDw1D,EAAsBvkE,UAAUikC,sBAAwB,SAAU9tB,EAAK1c,GACnE,MAAO8F,MAAKm2C,mBAAmBzR,sBAAsB9tB,EAAK1c,IAE9D8qE,EAAsBvkE,UAAUgkC,oBAAsB,SAAUj1B,GAC5D,MAAOxP,MAAKm2C,mBAAmB1R,oBAAoBj1B,IAEvDw1D,EAAsBvkE,UAAUkkC,qBAAuB,SAAU/tB,EAAK1c,GAClE,MAAO8F,MAAKm2C,mBAAmBxR,qBAAqB/tB,EAAK1c,IAE7D8qE,EAAsBvkE,UAAUmkC,uBAAyB,SAAU/gB,GAC/D,MAAO7jB,MAAKm2C,mBAAmBvR,uBAAuB/gB,IAE1DmhD,EAAsBvkE,UAAUokC,sBAAwB,SAAUhhB,GAC9D,MAAO7jB,MAAKm2C,mBAAmBtR,sBAAsBhhB,IAEzDmhD,EAAsBvkE,UAAUgjC,aAAe,SAAUC,GACrD,MAAO1jC,MAAKo2C,iBAAiB3S,aAAaC,IAEvCshC,IAEX/qE,SAAQ+qE,sBAAwBA,sB;;;;;;;ACnEhCjrE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIgrE,6BAA8B,mBAAA9qE,CAAQ,KACtCwqE,yBAA2B,mBAAAxqE,CAAQ,IACnC0gE,gBAAkB,mBAAA1gE,CAAQ,IAC1BqX,WAAa,mBAAArX,CAAQ,GACrB4jE,gBAAmB,WACnB,QAASA,GAAgBj7C,GACrB/iB,KAAKwjC,SAAWzgB,EA4DpB,MA1DAi7C,GAAgBv9D,UAAUovD,GAAK,SAAUzwD,GAGrC,MAFAY,MAAKwjC,SAASv5B,KAAO6wD,gBAAgBzoD,gBAAgBM,SACrD3S,KAAKwjC,SAAS7f,mBAAqBvkB,EAC5B,GAAI8lE,6BAA4BF,sBAAsBhlE,KAAKwjC,WAEtEw6B,EAAgBv9D,UAAUk/D,OAAS,WAC/B,GAA+C,kBAApC3/D,MAAKwjC,SAASpgB,kBACrB,KAAM,IAAIjiB,OAAM,GAAKsQ,WAAWxE,sBAEpC,IAAIisB,GAAOl5B,KAAKwjC,SAASpgB,iBACzB,OAAOpjB,MAAK6vD,GAAG32B,IAEnB8kC,EAAgBv9D,UAAUg+C,gBAAkB,SAAUvkD,GAKlD,MAJA8F,MAAKwjC,SAASv5B,KAAO6wD,gBAAgBzoD,gBAAgBC,cACrDtS,KAAKwjC,SAAS23B,MAAQjhE,EACtB8F,KAAKwjC,SAAS63B,aAAe,KAC7Br7D,KAAKwjC,SAAS7f,mBAAqB,KAC5B,GAAIihD,0BAAyB1uB,oBAAoBl2C,KAAKwjC,WAEjEw6B,EAAgBv9D,UAAU0kE,eAAiB,SAAU7P,GAKjD,MAJAt1D,MAAKwjC,SAASv5B,KAAO6wD,gBAAgBzoD,gBAAgBG,aACrDxS,KAAKwjC,SAAS23B,MAAQ,KACtBn7D,KAAKwjC,SAAS63B,aAAe/F,EAC7Bt1D,KAAKwjC,SAAS7f,mBAAqB,KAC5B,GAAIuhD,6BAA4BF,sBAAsBhlE,KAAKwjC,WAEtEw6B,EAAgBv9D,UAAU2kE,cAAgB,SAAUhmE,GAGhD,MAFAY,MAAKwjC,SAASv5B,KAAO6wD,gBAAgBzoD,gBAAgBE,YACrDvS,KAAKwjC,SAAS7f,mBAAqBvkB,EAC5B,GAAIwlE,0BAAyB1uB,oBAAoBl2C,KAAKwjC,WAEjEw6B,EAAgBv9D,UAAU4kE,UAAY,SAAUj7B,GAG5C,MAFApqC,MAAKwjC,SAASv5B,KAAO6wD,gBAAgBzoD,gBAAgBI,QACrDzS,KAAKwjC,SAAS4G,QAAUA,EACjB,GAAIw6B,0BAAyB1uB,oBAAoBl2C,KAAKwjC,WAEjEw6B,EAAgBv9D,UAAU6kE,WAAa,SAAUhQ,GAC7C,GAAoB,kBAATA,GACP,KAAM,IAAIn0D,OAAMsQ,WAAWzE,yBAE/B,IAAIu4D,GAAsBvlE,KAAKy+C,gBAAgB6W,EAE/C,OADAt1D,MAAKwjC,SAASv5B,KAAO6wD,gBAAgBzoD,gBAAgBK,SAC9C6yD,GAEXvH,EAAgBv9D,UAAU+kE,cAAgB,SAAUpiD,GAOhD,MANApjB,MAAKwjC,SAASv5B,KAAO6wD,gBAAgBzoD,gBAAgBI,QACrDzS,KAAKwjC,SAAS4G,QAAU,SAAUvhC,GAC9B,MAAO,YACH,MAAOA,GAAQ0a,UAAUziB,IAAIsiB,KAG9B,GAAIwhD,0BAAyB1uB,oBAAoBl2C,KAAKwjC,WAEjEw6B,EAAgBv9D,UAAUglE,WAAa,SAAUrK,GAG7C,MAFAp7D,MAAKwjC,SAASv5B,KAAO6wD,gBAAgBzoD,gBAAgBQ,SACrD7S,KAAKwjC,SAAS43B,SAAWA,EAClB,GAAIwJ,0BAAyB1uB,oBAAoBl2C,KAAKwjC,WAE1Dw6B,IAEX/jE,SAAQ+jE,gBAAkBA,gB;;;;;;;ACpE1B,QAAStwD,UAASg4D,GAEd,IAAK,GADDnsC,MACK51B,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC41B,EAAK51B,EAAK,GAAK7B,UAAU6B,EAE7B,OAAO,YAEH,IAAK,GADDizD,MACKjzD,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpCizD,EAAOjzD,GAAM7B,UAAU6B,EAE3B,IAAI4G,IAAUm7D,EAAQ,GAKtB,OAJAnsC,GAAKh3B,QAAQ,SAAUmF,EAAKjI,GACxB,GAAIvF,GAAQy2B,OAAOg1C,UAAUj+D,GAAOkvD,EAAOlvD,GAAOkvD,EAAOr9B,EAAKn3B,QAAQsF,GACtE6C,GAAOtI,KAAK/H,EAAOwrE,EAAQjmE,EAAI,MAE5B8K,EAAOyM,KAAK,KAhB3Bjd,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAmBtDD,QAAQyT,SAAWA,S;;;;;;ACpBnB,GAAIG,aAAcA,QAElBqK,QAAOje,QAAUoF,MAAMwS,SAAW,SAAUgb,GAC1C,MAA6B,kBAAtBhf,SAAS1K,KAAK0pB,I;;;;;;;uDCsDvB,QAAS29B,qBAAoBJ,GAC3B,MAAOj9B,QAAOO,KAAK08B,GAErB,QAASK,eAAc97C,GACrB,MAAOwe,QAAOuB,SAAS/f,IAAQA,YAAe+7C,eA2BhD,QAAS9nC,iBAAgBsnC,EAAS75C,EAAO8gC,GAGvC,GAAuC,kBAA5B+Y,GAAQtnC,gBACjB,MAAOsnC,GAAQtnC,gBAAgBvS,EAAO8gC,EAMjC+Y,GAAQX,SAAYW,EAAQX,QAAQl5C,GAAuCwB,QAAQq4C,EAAQX,QAAQl5C,IAAS65C,EAAQX,QAAQl5C,GAAOu1D,QAAQz0B,GAAS+Y,EAAQX,QAAQl5C,IAAU8gC,EAAI+Y,EAAQX,QAAQl5C,IAAtJ65C,EAAQ95C,GAAGC,EAAO8gC,GAIvE,QAAS00B,eAAcxpD,EAASwuC,GAC9BryB,OAASA,QAAU,mBAAAp+B,CAAQ,IAE3BiiB,EAAUA,MAIVrc,KAAK8qD,aAAezuC,EAAQyuC,WAExBD,YAAkBryB,UAAQx4B,KAAK8qD,WAAa9qD,KAAK8qD,cAAgBzuC,EAAQypD,mBAI7E,IAAI9a,GAAM3uC,EAAQ4uC,cACdC,EAAalrD,KAAK8qD,WAAa,GAAK,KACxC9qD,MAAKirD,cAAgBD,GAAe,IAARA,EAAYA,EAAME,EAG9ClrD,KAAKirD,cAAgBrrD,KAAKC,MAAMG,KAAKirD,eAKrCjrD,KAAK4uB,OAAS,GAAIm3C,YAClB/lE,KAAKT,OAAS,EACdS,KAAKgmE,MAAQ,KACbhmE,KAAKimE,WAAa,EAClBjmE,KAAKkmE,QAAU,KACflmE,KAAK+4B,OAAQ,EACb/4B,KAAKmmE,YAAa,EAClBnmE,KAAKomE,SAAU,EAMfpmE,KAAK4rD,MAAO,EAIZ5rD,KAAKqmE,cAAe,EACpBrmE,KAAKsmE,iBAAkB,EACvBtmE,KAAKumE,mBAAoB,EACzBvmE,KAAKwmE,iBAAkB,EAGvBxmE,KAAK45B,WAAY,EAKjB55B,KAAKyrD,gBAAkBpvC,EAAQovC,iBAAmB,OAGlDzrD,KAAKymE,WAAa,EAGlBzmE,KAAK0mE,aAAc,EAEnB1mE,KAAK2mE,QAAU,KACf3mE,KAAKmuB,SAAW,KACZ9R,EAAQ8R,WACLy4C,gBAAeA,cAAgB,mBAAAxsE,CAAQ,KAAmBwsE,eAC/D5mE,KAAK2mE,QAAU,GAAIC,eAAcvqD,EAAQ8R,UACzCnuB,KAAKmuB,SAAW9R,EAAQ8R,UAI5B,QAASsK,UAASpc,GAGhB,GAFAmc,OAASA,QAAU,mBAAAp+B,CAAQ,MAErB4F,eAAgBy4B,WAAW,MAAO,IAAIA,UAASpc,EAErDrc,MAAK25B,eAAiB,GAAIksC,eAAcxpD,EAASrc,MAGjDA,KAAK24B,UAAW,EAEZtc,IAC0B,kBAAjBA,GAAQ2T,OAAqBhwB,KAAK6mE,MAAQxqD,EAAQ2T,MAE9B,kBAApB3T,GAAQq8B,UAAwB14C,KAAK65B,SAAWxd,EAAQq8B,UAGrEmU,OAAO1pD,KAAKnD,MA2Dd,QAAS8mE,kBAAiBjc,EAAQT,EAAOj8B,EAAU44C,EAAYC,GAC7D,GAAIv/C,GAAQojC,EAAOlxB,cACnB,IAAc,OAAVywB,EACF3iC,EAAM2+C,SAAU,EAChBa,WAAWpc,EAAQpjC,OACd,CACL,GAAIkiC,EACCqd,KAAgBrd,EAAKud,aAAaz/C,EAAO2iC,IAC1CT,EACFkB,EAAOloC,KAAK,QAASgnC,GACZliC,EAAMqjC,YAAcV,GAASA,EAAM7qD,OAAS,GAChC,gBAAV6qD,IAAuB3iC,EAAMqjC,YAAc/wD,OAAO8U,eAAeu7C,KAAWj9B,OAAO1sB,YAC5F2pD,EAAQI,oBAAoBJ,IAG1B2c,EACEt/C,EAAM0+C,WAAYtb,EAAOloC,KAAK,QAAS,GAAIxhB,OAAM,qCAA0CgmE,SAAStc,EAAQpjC,EAAO2iC,GAAO,GACrH3iC,EAAMsR,MACf8xB,EAAOloC,KAAK,QAAS,GAAIxhB,OAAM,6BAE/BsmB,EAAM2+C,SAAU,EACZ3+C,EAAMk/C,UAAYx4C,GACpBi8B,EAAQ3iC,EAAMk/C,QAAQnpD,MAAM4sC,GACxB3iC,EAAMqjC,YAA+B,IAAjBV,EAAM7qD,OAAc4nE,SAAStc,EAAQpjC,EAAO2iC,GAAO,GAAYgd,cAAcvc,EAAQpjC,IAE7G0/C,SAAStc,EAAQpjC,EAAO2iC,GAAO,KAGzB2c,IACVt/C,EAAM2+C,SAAU,GAIpB,MAAOiB,cAAa5/C,GAGtB,QAAS0/C,UAAStc,EAAQpjC,EAAO2iC,EAAO2c,GAClCt/C,EAAMy+C,SAA4B,IAAjBz+C,EAAMloB,SAAiBkoB,EAAMmkC,MAChDf,EAAOloC,KAAK,OAAQynC,GACpBS,EAAO76B,KAAK,KAGZvI,EAAMloB,QAAUkoB,EAAMqjC,WAAa,EAAIV,EAAM7qD,OACzCwnE,EAAYt/C,EAAMmH,OAAOg3C,QAAQxb,GAAY3iC,EAAMmH,OAAO3sB,KAAKmoD,GAE/D3iC,EAAM4+C,cAAciB,aAAazc,IAEvCuc,cAAcvc,EAAQpjC,GAGxB,QAASy/C,cAAaz/C,EAAO2iC,GAC3B,GAAIT,EAIJ,OAHKc,eAAcL,IAA2B,gBAAVA,QAAgCjrD,KAAVirD,GAAwB3iC,EAAMqjC,aACtFnB,EAAK,GAAIh8B,WAAU,oCAEdg8B,EAUT,QAAS0d,cAAa5/C,GACpB,OAAQA,EAAMsR,QAAUtR,EAAM4+C,cAAgB5+C,EAAMloB,OAASkoB,EAAMwjC,eAAkC,IAAjBxjC,EAAMloB,QAiB5F,QAASgoE,yBAAwBz2D,GAc/B,MAbIA,IAAK02D,QACP12D,EAAI02D,SAIJ12D,IACAA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,EACXA,GAAKA,IAAM,GACXA,KAEKA,EAKT,QAAS22D,eAAc32D,EAAG2W,GACxB,MAAI3W,IAAK,GAAsB,IAAjB2W,EAAMloB,QAAgBkoB,EAAMsR,MAAc,EACpDtR,EAAMqjC,WAAmB,EACzBh6C,IAAMA,EAEJ2W,EAAMy+C,SAAWz+C,EAAMloB,OAAekoB,EAAMmH,OAAO84C,KAAKj3D,KAAKlR,OAAmBkoB,EAAMloB,QAGxFuR,EAAI2W,EAAMwjC,gBAAexjC,EAAMwjC,cAAgBsc,wBAAwBz2D,IACvEA,GAAK2W,EAAMloB,OAAeuR,EAEzB2W,EAAMsR,MAIJtR,EAAMloB,QAHXkoB,EAAM4+C,cAAe,EACd,IA0GX,QAASY,YAAWpc,EAAQpjC,GAC1B,IAAIA,EAAMsR,MAAV,CACA,GAAItR,EAAMk/C,QAAS,CACjB,GAAIvc,GAAQ3iC,EAAMk/C,QAAQt3C,KACtB+6B,IAASA,EAAM7qD,SACjBkoB,EAAMmH,OAAO3sB,KAAKmoD,GAClB3iC,EAAMloB,QAAUkoB,EAAMqjC,WAAa,EAAIV,EAAM7qD,QAGjDkoB,EAAMsR,OAAQ,EAGduuC,aAAazc,IAMf,QAASyc,cAAazc,GACpB,GAAIpjC,GAAQojC,EAAOlxB,cACnBlS,GAAM4+C,cAAe,EAChB5+C,EAAM6+C,kBACTqB,MAAM,eAAgBlgD,EAAMy+C,SAC5Bz+C,EAAM6+C,iBAAkB,EACpB7+C,EAAMmkC,KAAM5yB,gBAAgB4uC,cAAe/c,GAAa+c,cAAc/c,IAI9E,QAAS+c,eAAc/c,GACrB8c,MAAM,iBACN9c,EAAOloC,KAAK,YACZklD,KAAKhd,GASP,QAASuc,eAAcvc,EAAQpjC,GACxBA,EAAMi/C,cACTj/C,EAAMi/C,aAAc,EACpB1tC,gBAAgB8uC,eAAgBjd,EAAQpjC,IAI5C,QAASqgD,gBAAejd,EAAQpjC,GAE9B,IADA,GAAIlR,GAAMkR,EAAMloB,QACRkoB,EAAM2+C,UAAY3+C,EAAMy+C,UAAYz+C,EAAMsR,OAAStR,EAAMloB,OAASkoB,EAAMwjC,gBAC9E0c,MAAM,wBACN9c,EAAO76B,KAAK,GACRzZ,IAAQkR,EAAMloB,SAELgX,EAAMkR,EAAMloB,MAE3BkoB,GAAMi/C,aAAc,EAkJtB,QAASqB,aAAY7zC,GACnB,MAAO,YACL,GAAIzM,GAAQyM,EAAIyF,cAChBguC,OAAM,cAAelgD,EAAMg/C,YACvBh/C,EAAMg/C,YAAYh/C,EAAMg/C,aACH,IAArBh/C,EAAMg/C,YAAoBuB,gBAAgB9zC,EAAK,UACjDzM,EAAMy+C,SAAU,EAChB2B,KAAK3zC,KAgFX,QAAS+zC,kBAAiB/uC,GACxByuC,MAAM,4BACNzuC,EAAKlJ,KAAK,GAeZ,QAASk4C,QAAOrd,EAAQpjC,GACjBA,EAAM++C,kBACT/+C,EAAM++C,iBAAkB,EACxBxtC,gBAAgBmvC,QAAStd,EAAQpjC,IAIrC,QAAS0gD,SAAQtd,EAAQpjC,GAClBA,EAAM2+C,UACTuB,MAAM,iBACN9c,EAAO76B,KAAK,IAGdvI,EAAM++C,iBAAkB,EACxB/+C,EAAMg/C,WAAa,EACnB5b,EAAOloC,KAAK,UACZklD,KAAKhd,GACDpjC,EAAMy+C,UAAYz+C,EAAM2+C,SAASvb,EAAO76B,KAAK,GAanD,QAAS63C,MAAKhd,GACZ,GAAIpjC,GAAQojC,EAAOlxB,cAEnB,KADAguC,MAAM,OAAQlgD,EAAMy+C,SACbz+C,EAAMy+C,SAA6B,OAAlBrb,EAAO76B,UAwEjC,QAASo4C,UAASt3D,EAAG2W,GAEnB,GAAqB,IAAjBA,EAAMloB,OAAc,MAAO,KAE/B,IAAI+yB,EAUJ,OATI7K,GAAMqjC,WAAYx4B,EAAM7K,EAAMmH,OAAOy5C,SAAkBv3D,GAAKA,GAAK2W,EAAMloB,QAEtD+yB,EAAf7K,EAAMk/C,QAAel/C,EAAMmH,OAAO5X,KAAK,IAAqC,IAAxByQ,EAAMmH,OAAOrvB,OAAoBkoB,EAAMmH,OAAO84C,KAAKj3D,KAAgBgX,EAAMmH,OAAOxa,OAAOqT,EAAMloB,QACrJkoB,EAAMmH,OAAOwoC,SAGb9kC,EAAMg2C,gBAAgBx3D,EAAG2W,EAAMmH,OAAQnH,EAAMk/C,SAGxCr0C,EAMT,QAASg2C,iBAAgBx3D,EAAG8jB,EAAM2zC,GAChC,GAAIj2C,EAYJ,OAXIxhB,GAAI8jB,EAAK8yC,KAAKj3D,KAAKlR,QAErB+yB,EAAMsC,EAAK8yC,KAAKj3D,KAAKiG,MAAM,EAAG5F,GAC9B8jB,EAAK8yC,KAAKj3D,KAAOmkB,EAAK8yC,KAAKj3D,KAAKiG,MAAM5F,IAGtCwhB,EAFSxhB,IAAM8jB,EAAK8yC,KAAKj3D,KAAKlR,OAExBq1B,EAAKyzC,QAGLE,EAAaC,qBAAqB13D,EAAG8jB,GAAQ6zC,eAAe33D,EAAG8jB,GAEhEtC,EAOT,QAASk2C,sBAAqB13D,EAAG8jB,GAC/B,GAAIt0B,GAAIs0B,EAAK8yC,KACT9/D,EAAI,EACJ0qB,EAAMhyB,EAAEmQ,IAEZ,KADAK,GAAKwhB,EAAI/yB,OACFe,EAAIA,EAAEya,MAAM,CACjB,GAAIuY,GAAMhzB,EAAEmQ,KACRi4D,EAAK53D,EAAIwiB,EAAI/zB,OAAS+zB,EAAI/zB,OAASuR,CAGvC,IAFI43D,IAAOp1C,EAAI/zB,OAAQ+yB,GAAOgB,EAAShB,GAAOgB,EAAI5c,MAAM,EAAG5F,GAEjD,KADVA,GAAK43D,GACQ,CACPA,IAAOp1C,EAAI/zB,UACXqI,EACEtH,EAAEya,KAAM6Z,EAAK8yC,KAAOpnE,EAAEya,KAAU6Z,EAAK8yC,KAAO9yC,EAAK+zC,KAAO,OAE5D/zC,EAAK8yC,KAAOpnE,EACZA,EAAEmQ,KAAO6iB,EAAI5c,MAAMgyD,GAErB,SAEA9gE,EAGJ,MADAgtB,GAAKr1B,QAAUqI,EACR0qB,EAMT,QAASm2C,gBAAe33D,EAAG8jB,GACzB,GAAItC,GAAMnF,OAAOM,YAAY3c,GACzBxQ,EAAIs0B,EAAK8yC,KACT9/D,EAAI,CAGR,KAFAtH,EAAEmQ,KAAKke,KAAK2D,GACZxhB,GAAKxQ,EAAEmQ,KAAKlR,OACLe,EAAIA,EAAEya,MAAM,CACjB,GAAIkV,GAAM3vB,EAAEmQ,KACRi4D,EAAK53D,EAAImf,EAAI1wB,OAAS0wB,EAAI1wB,OAASuR,CAGvC,IAFAmf,EAAItB,KAAK2D,EAAKA,EAAI/yB,OAASuR,EAAG,EAAG43D,GAEvB,KADV53D,GAAK43D,GACQ,CACPA,IAAOz4C,EAAI1wB,UACXqI,EACEtH,EAAEya,KAAM6Z,EAAK8yC,KAAOpnE,EAAEya,KAAU6Z,EAAK8yC,KAAO9yC,EAAK+zC,KAAO,OAE5D/zC,EAAK8yC,KAAOpnE,EACZA,EAAEmQ,KAAOwf,EAAIvZ,MAAMgyD,GAErB,SAEA9gE,EAGJ,MADAgtB,GAAKr1B,QAAUqI,EACR0qB,EAGT,QAASs2C,aAAY/d,GACnB,GAAIpjC,GAAQojC,EAAOlxB,cAInB,IAAIlS,EAAMloB,OAAS,EAAG,KAAM,IAAI4B,OAAM,6CAEjCsmB,GAAM0+C,aACT1+C,EAAMsR,OAAQ,EACdC,gBAAgB6vC,cAAephD,EAAOojC,IAI1C,QAASge,eAAcphD,EAAOojC,GAEvBpjC,EAAM0+C,YAA+B,IAAjB1+C,EAAMloB,SAC7BkoB,EAAM0+C,YAAa,EACnBtb,EAAOlyB,UAAW,EAClBkyB,EAAOloC,KAAK,QAIhB,QAASpgB,SAAQ42B,EAAIC,GACnB,IAAK,GAAI35B,GAAI,EAAG45B,EAAIF,EAAG55B,OAAQE,EAAI45B,EAAG55B,IACpC25B,EAAED,EAAG15B,GAAIA,GAIb,QAAS2C,SAAQ+2B,EAAIt2B,GACnB,IAAK,GAAIpD,GAAI,EAAG45B,EAAIF,EAAG55B,OAAQE,EAAI45B,EAAG55B,IACpC,GAAI05B,EAAG15B,KAAOoD,EAAG,MAAOpD,EAE1B,QAAQ,EAp9BV,GAAIu5B,iBAAkB,mBAAA5+B,CAAQ,GAG9B8d,QAAOje,QAAUw+B,QAGjB,IAAI5mB,SAAU,mBAAAzX,CAAQ,KAIlBo+B,MAGJC,UAASotC,cAAgBA,aAGzB,IAAIiD,IAAK,mBAAA1uE,CAAQ,KAAUkvD,aAEvB0e,gBAAkB,SAAU9d,EAASjgD,GACvC,MAAOigD,GAAQpnC,UAAU7Y,GAAM1K,QAK7BstD,OAAS,mBAAAzyD,CAAQ,KAMjB+yB,OAAS,mBAAA/yB,CAAQ,KAAe+yB,OAChCu9B,cAAgBr2B,OAAOvH,YAAc,aAUrC0M,KAAO,mBAAAp/B,CAAQ,GACnBo/B,MAAKC,SAAW,mBAAAr/B,CAAQ,GAIxB,IAAI2uE,WAAY,mBAAA3uE,CAAQ,KACpButE,UAAQ,EAEVA,OADEoB,WAAaA,UAAUC,SACjBD,UAAUC,SAAS,UAEnB,YAIV,IAAIjD,YAAa,mBAAA3rE,CAAQ,KACrBq0D,YAAc,mBAAAr0D,CAAQ,KACtBwsE,aAEJptC,MAAKC,SAAShB,SAAUo0B,OAExB,IAAIoc,eAAgB,QAAS,QAAS,UAAW,QAAS,SAuG1DlvE,QAAOC,eAAey+B,SAASh4B,UAAW,aACxCK,IAAK,WACH,WAA4B3B,KAAxBa,KAAK25B,gBAGF35B,KAAK25B,eAAeC,WAE7Bl2B,IAAK,SAAUxJ,GAGR8F,KAAK25B,iBAMV35B,KAAK25B,eAAeC,UAAY1/B,MAIpCu+B,SAASh4B,UAAUi4C,QAAU+V,YAAY/V,QACzCjgB,SAASh4B,UAAUuuD,WAAaP,YAAYQ,UAC5Cx2B,SAASh4B,UAAUo5B,SAAW,SAAUC,EAAKC,GAC3C/5B,KAAKiC,KAAK,MACV83B,EAAGD,IAOLrB,SAASh4B,UAAUwB,KAAO,SAAUmoD,EAAOj8B,GACzC,GACI64C,GADAv/C,EAAQznB,KAAK25B,cAgBjB,OAbKlS,GAAMqjC,WAUTkc,GAAiB,EATI,gBAAV5c,KACTj8B,EAAWA,GAAY1G,EAAMgkC,gBACzBt9B,IAAa1G,EAAM0G,WACrBi8B,EAAQj9B,OAAOO,KAAK08B,EAAOj8B,GAC3BA,EAAW,IAEb64C,GAAiB,GAMdF,iBAAiB9mE,KAAMoqD,EAAOj8B,GAAU,EAAO64C,IAIxDvuC,SAASh4B,UAAUmlE,QAAU,SAAUxb,GACrC,MAAO0c,kBAAiB9mE,KAAMoqD,EAAO,MAAM,GAAM,IAwEnD3xB,SAASh4B,UAAUyoE,SAAW,WAC5B,OAAuC,IAAhClpE,KAAK25B,eAAeusC,SAI7BztC,SAASh4B,UAAU0oE,YAAc,SAAUC,GAIzC,MAHKxC,iBAAeA,cAAgB,mBAAAxsE,CAAQ,KAAmBwsE,eAC/D5mE,KAAK25B,eAAegtC,QAAU,GAAIC,eAAcwC,GAChDppE,KAAK25B,eAAexL,SAAWi7C,EACxBppE,KAIT,IAAIwnE,SAAU,OAuCd/uC,UAASh4B,UAAUuvB,KAAO,SAAUlf,GAClC62D,MAAM,OAAQ72D,GACdA,EAAIigB,SAASjgB,EAAG,GAChB,IAAI2W,GAAQznB,KAAK25B,eACb0vC,EAAQv4D,CAOZ,IALU,IAANA,IAAS2W,EAAM6+C,iBAAkB,GAK3B,IAANx1D,GAAW2W,EAAM4+C,eAAiB5+C,EAAMloB,QAAUkoB,EAAMwjC,eAAiBxjC,EAAMsR,OAGjF,MAFA4uC,OAAM,qBAAsBlgD,EAAMloB,OAAQkoB,EAAMsR,OAC3B,IAAjBtR,EAAMloB,QAAgBkoB,EAAMsR,MAAO6vC,YAAY5oE,MAAWsnE,aAAatnE,MACpE,IAMT,IAAU,KAHV8Q,EAAI22D,cAAc32D,EAAG2W,KAGNA,EAAMsR,MAEnB,MADqB,KAAjBtR,EAAMloB,QAAcqpE,YAAY5oE,MAC7B,IA0BT,IAAIspE,GAAS7hD,EAAM4+C,YACnBsB,OAAM,gBAAiB2B,IAGF,IAAjB7hD,EAAMloB,QAAgBkoB,EAAMloB,OAASuR,EAAI2W,EAAMwjC,iBACjDqe,GAAS,EACT3B,MAAM,6BAA8B2B,IAKlC7hD,EAAMsR,OAAStR,EAAM2+C,SACvBkD,GAAS,EACT3B,MAAM,mBAAoB2B,IACjBA,IACT3B,MAAM,WACNlgD,EAAM2+C,SAAU,EAChB3+C,EAAMmkC,MAAO,EAEQ,IAAjBnkC,EAAMloB,SAAckoB,EAAM4+C,cAAe,GAE7CrmE,KAAK6mE,MAAMp/C,EAAMwjC,eACjBxjC,EAAMmkC,MAAO,EAGRnkC,EAAM2+C,UAASt1D,EAAI22D,cAAc4B,EAAO5hD,IAG/C,IAAI6K,EAqBJ,OApBWA,GAAPxhB,EAAI,EAASs3D,SAASt3D,EAAG2W,GAAkB,KAEnC,OAAR6K,GACF7K,EAAM4+C,cAAe,EACrBv1D,EAAI,GAEJ2W,EAAMloB,QAAUuR,EAGG,IAAjB2W,EAAMloB,SAGHkoB,EAAMsR,QAAOtR,EAAM4+C,cAAe,GAGnCgD,IAAUv4D,GAAK2W,EAAMsR,OAAO6vC,YAAY5oE,OAGlC,OAARsyB,GAActyB,KAAK2iB,KAAK,OAAQ2P,GAE7BA,GAkETmG,SAASh4B,UAAUomE,MAAQ,SAAU/1D,GACnC9Q,KAAK2iB,KAAK,QAAS,GAAIxhB,OAAM,gCAG/Bs3B,SAASh4B,UAAUmuD,KAAO,SAAU2a,EAAMC,GAwBxC,QAASC,GAAS9wC,EAAU+wC,GAC1B/B,MAAM,YACFhvC,IAAazE,GACXw1C,IAAwC,IAA1BA,EAAWC,aAC3BD,EAAWC,YAAa,EACxBC,KAKN,QAAS/wC,KACP8uC,MAAM,SACN4B,EAAKl6C,MAWP,QAASu6C,KACPjC,MAAM,WAEN4B,EAAK9mD,eAAe,QAASonD,GAC7BN,EAAK9mD,eAAe,SAAUqnD,GAC9BP,EAAK9mD,eAAe,QAASsnD,GAC7BR,EAAK9mD,eAAe,QAASmyB,GAC7B20B,EAAK9mD,eAAe,SAAUgnD,GAC9Bv1C,EAAIzR,eAAe,MAAOoW,GAC1B3E,EAAIzR,eAAe,MAAOunD,GAC1B91C,EAAIzR,eAAe,OAAQwnD,GAE3BC,GAAY,GAORziD,EAAMg/C,YAAgB8C,EAAKzwC,iBAAkBywC,EAAKzwC,eAAesyB,WAAY2e,IASnF,QAASE,GAAO7f,GACdud,MAAM,UACNwC,GAAsB,GAElB,IADMZ,EAAK/rD,MAAM4sC,IACC+f,KAKM,IAArB1iD,EAAMw+C,YAAoBx+C,EAAMu+C,QAAUuD,GAAQ9hD,EAAMw+C,WAAa,IAAqC,IAAhC7jE,QAAQqlB,EAAMu+C,MAAOuD,MAAkBW,IACpHvC,MAAM,8BAA+BzzC,EAAIyF,eAAe8sC,YACxDvyC,EAAIyF,eAAe8sC,aACnB0D,GAAsB,GAExBj2C,EAAIk2C,SAMR,QAASx1B,GAAQ+U,GACfge,MAAM,UAAWhe,GACjBqgB,IACAT,EAAK9mD,eAAe,QAASmyB,GACU,IAAnCozB,gBAAgBuB,EAAM,UAAgBA,EAAK5mD,KAAK,QAASgnC,GAO/D,QAASkgB,KACPN,EAAK9mD,eAAe,SAAUqnD,GAC9BE,IAGF,QAASF,KACPnC,MAAM,YACN4B,EAAK9mD,eAAe,QAASonD,GAC7BG,IAIF,QAASA,KACPrC,MAAM,UACNzzC,EAAI81C,OAAOT,GAvHb,GAAIr1C,GAAMl0B,KACNynB,EAAQznB,KAAK25B,cAEjB,QAAQlS,EAAMw+C,YACZ,IAAK,GACHx+C,EAAMu+C,MAAQuD,CACd,MACF,KAAK,GACH9hD,EAAMu+C,OAASv+C,EAAMu+C,MAAOuD,EAC5B,MACF,SACE9hD,EAAMu+C,MAAM/jE,KAAKsnE,GAGrB9hD,EAAMw+C,YAAc,EACpB0B,MAAM,wBAAyBlgD,EAAMw+C,WAAYuD,EAEjD,IAAIa,KAAUb,IAA6B,IAAjBA,EAASn6C,MAAkBk6C,IAAS1nD,QAAQyoD,QAAUf,IAAS1nD,QAAQ0oD,OAE7FC,EAAQH,EAAQxxC,EAAQmxC,CACxBviD,GAAM0+C,WAAYntC,gBAAgBwxC,GAAYt2C,EAAI3R,KAAK,MAAOioD,GAElEjB,EAAKn5D,GAAG,SAAUq5D,EAoBlB,IAAIM,GAAUhC,YAAY7zC,EAC1Bq1C,GAAKn5D,GAAG,QAAS25D,EAEjB,IAAIG,IAAY,EA2BZC,GAAsB,CA2D1B,OA1DAj2C,GAAI9jB,GAAG,OAAQ65D,GA6BfrnD,gBAAgB2mD,EAAM,QAAS30B,GAO/B20B,EAAKhnD,KAAK,QAASsnD,GAMnBN,EAAKhnD,KAAK,SAAUunD,GAQpBP,EAAK5mD,KAAK,OAAQuR,GAGbzM,EAAMy+C,UACTyB,MAAM,eACNzzC,EAAIg0C,UAGCqB,GAeT9wC,SAASh4B,UAAUupE,OAAS,SAAUT,GACpC,GAAI9hD,GAAQznB,KAAK25B,eACb+vC,GAAeC,YAAY,EAG/B,IAAyB,IAArBliD,EAAMw+C,WAAkB,MAAOjmE,KAGnC,IAAyB,IAArBynB,EAAMw+C,WAER,MAAIsD,IAAQA,IAAS9hD,EAAMu+C,MAAchmE,MAEpCupE,IAAMA,EAAO9hD,EAAMu+C,OAGxBv+C,EAAMu+C,MAAQ,KACdv+C,EAAMw+C,WAAa,EACnBx+C,EAAMy+C,SAAU,EACZqD,GAAMA,EAAK5mD,KAAK,SAAU3iB,KAAM0pE,GAC7B1pE,KAKT,KAAKupE,EAAM,CAET,GAAIkB,GAAQhjD,EAAMu+C,MACdzvD,EAAMkR,EAAMw+C,UAChBx+C,GAAMu+C,MAAQ,KACdv+C,EAAMw+C,WAAa,EACnBx+C,EAAMy+C,SAAU,CAEhB,KAAK,GAAIzmE,GAAI,EAAGA,EAAI8W,EAAK9W,IACvBgrE,EAAMhrE,GAAGkjB,KAAK,SAAU3iB,KAAM0pE,EAC/B,OAAO1pE,MAIV,GAAIuB,GAAQa,QAAQqlB,EAAMu+C,MAAOuD,EACjC,QAAe,IAAXhoE,EAAqBvB,MAEzBynB,EAAMu+C,MAAM9jE,OAAOX,EAAO,GAC1BkmB,EAAMw+C,YAAc,EACK,IAArBx+C,EAAMw+C,aAAkBx+C,EAAMu+C,MAAQv+C,EAAMu+C,MAAM,IAEtDuD,EAAK5mD,KAAK,SAAU3iB,KAAM0pE,GAEnB1pE,OAKTy4B,SAASh4B,UAAU2P,GAAK,SAAUs6D,EAAIv5B,GACpC,GAAI95B,GAAMw1C,OAAOpsD,UAAU2P,GAAGjN,KAAKnD,KAAM0qE,EAAIv5B,EAE7C,IAAW,SAAPu5B,GAEkC,IAAhC1qE,KAAK25B,eAAeusC,SAAmBlmE,KAAKkoE,aAC3C,IAAW,aAAPwC,EAAmB,CAC5B,GAAIjjD,GAAQznB,KAAK25B,cACZlS,GAAM0+C,YAAe1+C,EAAM8+C,oBAC9B9+C,EAAM8+C,kBAAoB9+C,EAAM4+C,cAAe,EAC/C5+C,EAAM6+C,iBAAkB,EACnB7+C,EAAM2+C,QAEA3+C,EAAMloB,QACf+nE,aAAatnE,MAFbg5B,gBAAgBivC,iBAAkBjoE,OAOxC,MAAOqX,IAETohB,SAASh4B,UAAU6hB,YAAcmW,SAASh4B,UAAU2P,GASpDqoB,SAASh4B,UAAUynE,OAAS,WAC1B,GAAIzgD,GAAQznB,KAAK25B,cAMjB,OALKlS,GAAMy+C,UACTyB,MAAM,UACNlgD,EAAMy+C,SAAU,EAChBgC,OAAOloE,KAAMynB,IAERznB,MAuBTy4B,SAASh4B,UAAU2pE,MAAQ,WAOzB,MANAzC,OAAM,wBAAyB3nE,KAAK25B,eAAeusC,UAC/C,IAAUlmE,KAAK25B,eAAeusC,UAChCyB,MAAM,SACN3nE,KAAK25B,eAAeusC,SAAU,EAC9BlmE,KAAK2iB,KAAK,UAEL3iB,MAYTy4B,SAASh4B,UAAUkqE,KAAO,SAAU9f,GAClC,GAAIpjC,GAAQznB,KAAK25B,eACbixC,GAAS,EAET1xC,EAAOl5B,IACX6qD,GAAOz6C,GAAG,MAAO,WAEf,GADAu3D,MAAM,eACFlgD,EAAMk/C,UAAYl/C,EAAMsR,MAAO,CACjC,GAAIqxB,GAAQ3iC,EAAMk/C,QAAQt3C,KACtB+6B,IAASA,EAAM7qD,QAAQ25B,EAAKj3B,KAAKmoD,GAGvClxB,EAAKj3B,KAAK,QAGZ4oD,EAAOz6C,GAAG,OAAQ,SAAUg6C,GAK1B,GAJAud,MAAM,gBACFlgD,EAAMk/C,UAASvc,EAAQ3iC,EAAMk/C,QAAQnpD,MAAM4sC,MAG3C3iC,EAAMqjC,YAAyB,OAAVV,OAA4BjrD,KAAVirD,KAAuC3iC,EAAMqjC,YAAgBV,GAAUA,EAAM7qD,QAA3C,CAEnE25B,EAAKj3B,KAAKmoD,KAElBwgB,GAAS,EACT/f,EAAOuf,WAMX,KAAK,GAAI3qE,KAAKorD,OACI1rD,KAAZa,KAAKP,IAAyC,kBAAdorD,GAAOprD,KACzCO,KAAKP,GAAK,SAAUi6B,GAClB,MAAO,YACL,MAAOmxB,GAAOnxB,GAAQ73B,MAAMgpD,EAAQ/oD,aAEtCrC,GAKN,KAAK,GAAIqR,GAAI,EAAGA,EAAIm4D,aAAa1pE,OAAQuR,IACvC+5C,EAAOz6C,GAAG64D,aAAan4D,GAAIooB,EAAKvW,KAAKlN,KAAKyjB,EAAM+vC,aAAan4D,IAa/D,OARAooB,GAAK2tC,MAAQ,SAAU/1D,GACrB62D,MAAM,gBAAiB72D,GACnB85D,IACFA,GAAS,EACT/f,EAAOqd,WAIJhvC,GAITT,SAASoyC,UAAYzC,S;;;;;;;;AC3xBrB,QAAS0C,gBAAejgB,GACtB7qD,KAAK+qE,eAAiB,SAAUphB,EAAIl5C,GAClC,MAAOs6D,gBAAelgB,EAAQlB,EAAIl5C,IAGpCzQ,KAAKgrE,eAAgB,EACrBhrE,KAAKirE,cAAe,EACpBjrE,KAAK8rD,QAAU,KACf9rD,KAAKkrE,WAAa,KAClBlrE,KAAKmrE,cAAgB,KAGvB,QAASJ,gBAAelgB,EAAQlB,EAAIl5C,GAClC,GAAI26D,GAAKvgB,EAAOwgB,eAChBD,GAAGH,cAAe,CAElB,IAAIlxC,GAAKqxC,EAAGtf,OAEZ,KAAK/xB,EACH,MAAO8wB,GAAOloC,KAAK,QAAS,GAAIxhB,OAAM,wCAGxCiqE,GAAGF,WAAa,KAChBE,EAAGtf,QAAU,KAEA,OAATr7C,OAA0BtR,KAATsR,GAAoBo6C,EAAO5oD,KAAKwO,GAErDspB,EAAG4vB,EAEH,IAAI2hB,GAAKzgB,EAAOlxB,cAChB2xC,GAAGlF,SAAU,GACTkF,EAAGjF,cAAgBiF,EAAG/rE,OAAS+rE,EAAGrgB,gBACpCJ,EAAOgc,MAAMyE,EAAGrgB,eAIpB,QAASiE,WAAU7yC,GACjB,KAAMrc,eAAgBkvD,YAAY,MAAO,IAAIA,WAAU7yC,EAEvDmc,QAAOr1B,KAAKnD,KAAMqc,GAElBrc,KAAKqrE,gBAAkB,GAAIP,gBAAe9qE,KAE1C,IAAI6qD,GAAS7qD,IAGbA,MAAK25B,eAAe0sC,cAAe,EAKnCrmE,KAAK25B,eAAeiyB,MAAO,EAEvBvvC,IAC+B,kBAAtBA,GAAQi9C,YAA0Bt5D,KAAKurE,WAAalvD,EAAQi9C,WAE1C,kBAAlBj9C,GAAQmvD,QAAsBxrE,KAAKyrE,OAASpvD,EAAQmvD,QAIjExrE,KAAKuiB,KAAK,YAAa,WACM,kBAAhBviB,MAAKyrE,OAAuBzrE,KAAKyrE,OAAO,SAAU9hB,EAAIl5C,GAC/D6xB,KAAKuoB,EAAQlB,EAAIl5C,KACX6xB,KAAKuoB,KA2DjB,QAASvoB,MAAKuoB,EAAQlB,EAAIl5C,GACxB,GAAIk5C,EAAI,MAAOkB,GAAOloC,KAAK,QAASgnC,EAEvB,QAATl5C,OAA0BtR,KAATsR,GAAoBo6C,EAAO5oD,KAAKwO,EAIrD,IAAIi7D,GAAK7gB,EAAO/xB,eACZsyC,EAAKvgB,EAAOwgB,eAEhB,IAAIK,EAAGnsE,OAAQ,KAAM,IAAI4B,OAAM,6CAE/B,IAAIiqE,EAAGH,aAAc,KAAM,IAAI9pE,OAAM,iDAErC,OAAO0pD,GAAO5oD,KAAK,MAnJrBiW,OAAOje,QAAUi1D,SAEjB,IAAI12B,QAAS,mBAAAp+B,CAAQ,IAGjBo/B,KAAO,mBAAAp/B,CAAQ,GACnBo/B,MAAKC,SAAW,mBAAAr/B,CAAQ,IAGxBo/B,KAAKC,SAASy1B,UAAW12B,QAqEzB02B,UAAUzuD,UAAUwB,KAAO,SAAUmoD,EAAOj8B,GAE1C,MADAnuB,MAAKqrE,gBAAgBL,eAAgB,EAC9BxyC,OAAO/3B,UAAUwB,KAAKkB,KAAKnD,KAAMoqD,EAAOj8B,IAajD+gC,UAAUzuD,UAAU8qE,WAAa,SAAUnhB,EAAOj8B,EAAU4L,GAC1D,KAAM,IAAI54B,OAAM,oCAGlB+tD,UAAUzuD,UAAU+rD,OAAS,SAAUpC,EAAOj8B,EAAU4L,GACtD,GAAIqxC,GAAKprE,KAAKqrE,eAId,IAHAD,EAAGtf,QAAU/xB,EACbqxC,EAAGF,WAAa9gB,EAChBghB,EAAGD,cAAgBh9C,GACdi9C,EAAGH,aAAc,CACpB,GAAIK,GAAKtrE,KAAK25B,gBACVyxC,EAAGJ,eAAiBM,EAAGjF,cAAgBiF,EAAG/rE,OAAS+rE,EAAGrgB,gBAAejrD,KAAK6mE,MAAMyE,EAAGrgB,iBAO3FiE,UAAUzuD,UAAUomE,MAAQ,SAAU/1D,GACpC,GAAIs6D,GAAKprE,KAAKqrE,eAEQ,QAAlBD,EAAGF,YAAuBE,EAAGtf,UAAYsf,EAAGH,cAC9CG,EAAGH,cAAe,EAClBjrE,KAAKurE,WAAWH,EAAGF,WAAYE,EAAGD,cAAeC,EAAGL,iBAIpDK,EAAGJ,eAAgB,GAIvB9b,UAAUzuD,UAAUo5B,SAAW,SAAUC,EAAKC,GAC5C,GAAIn4B,GAAQ5B,IAEZw4B,QAAO/3B,UAAUo5B,SAAS12B,KAAKnD,KAAM85B,EAAK,SAAU6xC,GAClD5xC,EAAG4xC,GACH/pE,EAAM+gB,KAAK,Y;;;;;;;AC1Lf,QAAS+1B,SAAQ5e,EAAKC,GACpB,GAAIn4B,GAAQ5B,KAER4rE,EAAoB5rE,KAAK25B,gBAAkB35B,KAAK25B,eAAeC,UAC/DiyC,EAAoB7rE,KAAK84B,gBAAkB94B,KAAK84B,eAAec,SAEnE,IAAIgyC,GAAqBC,EAMvB,YALI9xC,EACFA,EAAGD,IACMA,GAAS95B,KAAK84B,gBAAmB94B,KAAK84B,eAAeszB,cAC9DpzB,gBAAgB8yC,YAAa9rE,KAAM85B,GAQnC95B,MAAK25B,iBACP35B,KAAK25B,eAAeC,WAAY,GAI9B55B,KAAK84B,iBACP94B,KAAK84B,eAAec,WAAY,GAGlC55B,KAAK65B,SAASC,GAAO,KAAM,SAAUA,IAC9BC,GAAMD,GACTd,gBAAgB8yC,YAAalqE,EAAOk4B,GAChCl4B,EAAMk3B,iBACRl3B,EAAMk3B,eAAeszB,cAAe,IAE7BryB,GACTA,EAAGD,KAKT,QAASm1B,aACHjvD,KAAK25B,iBACP35B,KAAK25B,eAAeC,WAAY,EAChC55B,KAAK25B,eAAeysC,SAAU,EAC9BpmE,KAAK25B,eAAeZ,OAAQ,EAC5B/4B,KAAK25B,eAAewsC,YAAa,GAG/BnmE,KAAK84B,iBACP94B,KAAK84B,eAAec,WAAY,EAChC55B,KAAK84B,eAAeC,OAAQ,EAC5B/4B,KAAK84B,eAAeuyB,QAAS,EAC7BrrD,KAAK84B,eAAewyB,UAAW,EAC/BtrD,KAAK84B,eAAeszB,cAAe,GAIvC,QAAS0f,aAAY5yC,EAAMY,GACzBZ,EAAKvW,KAAK,QAASmX,GA7DrB,GAAId,iBAAkB,mBAAA5+B,CAAQ,GAgE9B8d,QAAOje,SACLy+C,QAASA,QACTuW,UAAWA,W;;;;;;ACtEb/2C,OAAOje,QAAU,mBAAAG,CAAQ,KAAUkvD,a;;;;;;;ACsDnC,QAASyiB,wBAAuBp9D,GAAO,MAAOA,IAAOA,EAAIq9D,WAAar9D,GAAQsc,QAAStc,GAEvF,QAASs9D,iBAAgBt9D,EAAKjH,EAAKxN,GAAiK,MAApJwN,KAAOiH,GAAO5U,OAAOC,eAAe2U,EAAKjH,GAAOxN,MAAOA,EAAOkH,YAAY,EAAMC,cAAc,EAAMiC,UAAU,IAAkBqL,EAAIjH,GAAOxN,EAAgByU,EAE3M,QAASu9D,cAAaC,EAAOC,EAAevjE,GACxC,MAAIsjE,aAAiB9sE,QAAS8sE,EAAM5sE,OAAS,EAClC4sE,EAAM39D,IAAI,SAAUyjC,GACvB,MAAOo6B,SAAQp6B,EAAMm6B,EAAevjE,SAGxC,GAIR,QAASwjE,SAAQp6B,EAAMm6B,EAAevjE,GAClC,GAAIyjE,OAAU,EAOd,OALIA,GADc,SAAdr6B,EAAKhoC,MACK,EAAIsiE,OAAOC,iBAAiBv6B,EAAK6C,QAASjsC,IAE1C,EAAI4jE,IAAIxhD,SAASgnB,EAAKziC,KAAMk9D,eAAez6B,EAAMppC,GAAUqjE,aAAaj6B,EAAK/yC,SAAUktE,EAAevjE,IAEpHujE,EAAcnqE,KAAKqqE,GACZA,EAGX,QAASI,gBAAez6B,EAAMppC,GAC1B,GAAI4H,KACJ,KAAKwhC,EAAKvhC,MACN,MAAOD,EAGX,IAAIC,GAAQ3W,OAAOw/B,KAAK0Y,EAAKvhC,OAAOyD,OAAO,SAAUw4D,EAAMn9D,GACvD,GAAa,UAATA,GAA6B,UAATA,EAAkB,CACtC,GAAIe,IAAM,EAAIg8D,OAAOK,kBAAkB36B,EAAKvhC,MAAMlB,GAAO3G,EACzD8jE,GAAOA,EAAKn9D,GAAQe,EAAMo8D,EAAOV,mBAAoBz8D,EAAMe,GAE/D,MAAOo8D,IACR,KACCj8D,KACAD,EAAKC,MAAQA,EAGjB,IAAIT,GAAQ48D,WAAW56B,EACnBhiC,KACAQ,EAAKR,MAAQA,EAGjB,IAAI68D,GAAUC,WAAW96B,EAKzB,OAJI66B,KACAr8D,EAAKE,MAAQm8D,GAGVr8D,EAGX,QAASo8D,YAAW56B,GAChB,IACI,MAAOA,GAAKvhC,MAAMT,MAAMwjC,MAAM,KAAKt/B,OAAO,SAAUw4D,EAAMK,GACtD,GAAI31D,GAAM21D,EAAUv5B,MAAM,KACtBjkC,GAAO,EAAI+8D,OAAOU,eAAe51D,EAAI,GAAGoc,OAC5C,IAAIjkB,EAAM,CACN,GAAIe,GAAM8G,EAAI,GAAGJ,QAAQ,aAAc,IAAIwc,MAC3Ck5C,GAAOA,EAAKn9D,GAAQe,EAAMo8D,EAAOV,mBAAoBz8D,EAAMe,GAE/D,MAAOo8D,IACR,MACL,MAAOznE,GACL,MAAO,OAIf,QAAS6nE,YAAW96B,GAChB,IACI,MAAOA,GAAKvhC,MAAMC,MAAM8iC,MAAM,KAAKt/B,OAAO,SAAUw4D,EAAMx1B,GAKtD,MAJAA,GAAYA,EAAU1jB,OAClB0jB,IACAw1B,EAAOA,EAAKx1B,IAAa,EAAOw1B,EAAOV,mBAAoB90B,GAAW,IAEnEw1B,GACR,MACL,MAAOznE,GACL,MAAO,OArIfnL,OAAOC,eAAeC,QAAS,cAC3BC,OAAO,IAGXD,QAAQgxB,QAAU,SAAU9S,GACxB,GAAIkE,GAAUva,UAAUvC,QAAU,OAAsBJ,KAAjB2C,UAAU,MAAwBA,UAAU,GAG/E+G,EAAUwT,EAAQxT,SAAW8L,QAGjC,KAAKwD,EACD,MAAO,KAIX,IAAIi0D,MAGA9zB,EAAS4zB,cAAa,EAAIgB,QAAQjiD,SAAS9S,GAAOi0D,EAAevjE,GAEjEwO,MAAM,EAkBV,OAVIA,GAPCihC,EAKwB,IAAlBA,EAAO/4C,OAER+4C,EAAO,GAGPA,EANA+zB,SAAUpiE,KAAM,OAAQ6qC,QAAS38B,GAAQi0D,EAAevjE,GAUlEwT,EAAQ89B,OAAS99B,EAAQ89B,MAAMz5C,QAAU0rE,EAAc7pE,QAAQ,SAAU0vC,GACrE51B,EAAQ89B,MAAMz5C,OAAOuxC,KAElB56B,EAGX,IAAI81D,QAAS,mBAAA/yE,CAAQ,KAEjB8yE,QAAUnB,uBAAuBoB,QAEjCC,GAAK,mBAAAhzE,CAAQ,IAEbqyE,IAAMV,uBAAuBqB,IAE7Bb,OAAS,mBAAAnyE,CAAQ,K;;;;;;;ACvCrB,QAAS2xE,wBAAuBp9D,GAAO,MAAOA,IAAOA,EAAIq9D,WAAar9D,GAAQsc,QAAStc,GAEvF,QAAS69D,iBAAgBr1D,EAAMtO,GAC3B,OAAO,EAAIwkE,QAAQpiD,aAAS9rB,OAAWA,OAAWA,GAAWytE,iBAAiBz1D,EAAMtO,IAGxF,QAASokE,eAAcz9D,GAOnB,MALAA,GAAOA,EAAKyH,QAAQ,SAAU,SAAkBq2D,EAAIC,GAChD,MAAOA,GAAGC,gBAIP,GADSh+D,EAAK7P,OAAO,GAAGwvB,cACP3f,EAAKrF,UAAU,GAQ3C,QAASyiE,kBAAiBz1D,EAAMtO,GAK5B,MAHK4kE,MACDA,GAAK5kE,EAAQmF,cAAc,QAExBmJ,EAAKF,QAAQy2D,YAAa,SAAUC,GAEvC,MADAF,IAAGG,UAAYD,EACRF,GAAGI,cAvClB9zE,OAAOC,eAAeC,QAAS,cAC3BC,OAAO,IAEXD,QAAQuyE,gBAAkBA,gBAC1BvyE,QAAQgzE,cAAgBA,cACxBhzE,QAAQ2yE,iBAAmBA,gBAE3B,IAAIkB,QAAS,mBAAA1zE,CAAQ,IAEjBizE,QAAUtB,uBAAuB+B,QAmBjCJ,YAAc,GAAIK,QAAO,eAAgB,MAEzCN,GAAK,K;;;;;;AChCTv1D,OAAOje,QAAU,mBAAAG,CAAQ,K;;;;;;;ACEzB,QAAS4T,eAAc0O,GACnB,MAAO/H,UAAS3G,cAAc0O,GAElC,QAASo1B,iBAAgBk8B,EAAcC,GACnC,MAAOt5D,UAASm9B,gBAAgBk8B,EAAcC,GAElD,QAASh2B,gBAAe9gC,GACpB,MAAOxC,UAASsjC,eAAe9gC,GAEnC,QAASugC,eAAcvgC,GACnB,MAAOxC,UAAS+iC,cAAcvgC,GAElC,QAASqhC,cAAa1kC,EAAYw4D,EAAS4B,GACvCp6D,EAAW0kC,aAAa8zB,EAAS4B,GAErC,QAASlwD,aAAYi0B,EAAMjwC,GACvBiwC,EAAKj0B,YAAYhc,GAErB,QAASob,aAAY60B,EAAMjwC,GACvBiwC,EAAK70B,YAAYpb,GAErB,QAAS8R,YAAWm+B,GAChB,MAAOA,GAAKn+B,WAEhB,QAAS+lC,aAAY5H,GACjB,MAAOA,GAAK4H,YAEhB,QAASn9B,SAAQwd,GACb,MAAOA,GAAIxd,QAEf,QAASs9B,gBAAe/H,EAAM96B,GAC1B86B,EAAK47B,YAAc12D,EAEvB,QAASg3D,gBAAel8B,GACpB,MAAOA,GAAK47B,YAEhB,QAASO,WAAUn8B,GACf,MAAyB,KAAlBA,EAAKo8B,SAEhB,QAASC,QAAOr8B,GACZ,MAAyB,KAAlBA,EAAKo8B,SAEhB,QAAS5T,WAAUxoB,GACf,MAAyB,KAAlBA,EAAKo8B,SA5ChBt0E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IA8CtDD,QAAQs0E,YACJvgE,cAAeA,cACf8jC,gBAAiBA,gBACjBmG,eAAgBA,eAChBP,cAAeA,cACfc,aAAcA,aACdx6B,YAAaA,YACbZ,YAAaA,YACbtJ,WAAYA,WACZ+lC,YAAaA,YACbn9B,QAASA,QACTs9B,eAAgBA,eAChBm0B,eAAgBA,eAChBC,UAAWA,UACXE,OAAQA,OACR7T,UAAWA,WAEfxgE,QAAQgxB,QAAUhxB,QAAQs0E,W;;;;;;;AC1D1B,QAASC,aAAY10B,EAAUvqC,GAC3B,GAAI7H,GAAKwyB,EAAM3qB,EAAM2qB,IAAKu0C,EAAW30B,EAASrpC,KAAKC,MAAOA,EAAQnB,EAAMkB,KAAKC,KAC7E,KAAK+9D,GAAa/9D,IAEd+9D,IAAa/9D,EAAjB,CAEA+9D,EAAWA,MACX/9D,EAAQA,KAER,KAAKhJ,IAAOgJ,GAAO,CACf,GAAIwtC,GAAMxtC,EAAMhJ,EACN+mE,GAAS/mE,KACPw2C,KACI,IAARA,EACAhkB,EAAIrc,aAAanW,EAAK,KAET,IAARw2C,EACLhkB,EAAIvc,gBAAgBjW,GAGhBA,EAAImsB,WAAW,KAAO66C,MACtBx0C,EAAIrc,aAAanW,EAAKw2C,GAEjBx2C,EAAImsB,WAAW,KAAO86C,UAE3Bz0C,EAAI00C,eAAeC,MAAOnnE,EAAKw2C,GAE1Bx2C,EAAImsB,WAAW,KAAO86C,UAE3Bz0C,EAAI00C,eAAeE,QAASpnE,EAAKw2C,GAGjChkB,EAAIrc,aAAanW,EAAKw2C,IAQtC,IAAKx2C,IAAO+mE,GACF/mE,IAAOgJ,IACTwpB,EAAIvc,gBAAgBjW,IA/ChC3N,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI40E,SAAU,+BACVD,MAAQ,uCACRF,UAAY,GACZD,MAAQ,GA+CZz0E,SAAQ+nD,kBAAqBthD,OAAQ8tE,YAAar1D,OAAQq1D,aAC1Dv0E,QAAQgxB,QAAUhxB,QAAQ+nD,iB;;;;;;;ACnD1B,QAAS+sB,aAAYj1B,EAAUvqC,GAC3B,GAAI2uC,GAAK1uC,EAAM0qB,EAAM3qB,EAAM2qB,IAAK80C,EAAWl1B,EAASrpC,KAAKE,MAAOs+D,EAAQ1/D,EAAMkB,KAAKE,KACnF,KAAKq+D,GAAaC,IAEdD,IAAaC,EAAjB,CAEAD,EAAWA,MACXC,EAAQA,KACR,KAAKz/D,IAAQw/D,GACJC,EAAMz/D,IACP0qB,EAAIrqB,UAAU1N,OAAOqN,EAG7B,KAAKA,IAAQy/D,IACT/wB,EAAM+wB,EAAMz/D,MACAw/D,EAASx/D,IACjB0qB,EAAIrqB,UAAUquC,EAAM,MAAQ,UAAU1uC,IAjBlDzV,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAqBtDD,QAAQgoD,aAAgBvhD,OAAQquE,YAAa51D,OAAQ41D,aACrD90E,QAAQgxB,QAAUhxB,QAAQgoD,Y;;;;;;;ACrB1B,QAASitB,eAAcxrC,EAASn0B,EAAOc,GACnC,GAAuB,kBAAZqzB,GAEPA,EAAQvgC,KAAKoM,EAAOc,EAAOd,OAE1B,IAAuB,gBAAZm0B,GAEZ,GAA0B,kBAAfA,GAAQ,GAEf,GAAuB,IAAnBA,EAAQnkC,OACRmkC,EAAQ,GAAGvgC,KAAKoM,EAAOm0B,EAAQ,GAAIrzB,EAAOd,OAEzC,CACD,GAAIwS,GAAO2hB,EAAQhtB,MAAM,EACzBqL,GAAK9f,KAAKoO,GACV0R,EAAK9f,KAAKsN,GACVm0B,EAAQ,GAAG7hC,MAAM0N,EAAOwS,OAK5B,KAAK,GAAItiB,GAAI,EAAGA,EAAIikC,EAAQnkC,OAAQE,IAChCyvE,cAAcxrC,EAAQjkC,IAKtC,QAASsU,aAAY1D,EAAOd,GACxB,GAAIC,GAAOa,EAAMpG,KAAMmG,EAAKb,EAAMkB,KAAKL,EAEnCA,IAAMA,EAAGZ,IACT0/D,cAAc9+D,EAAGZ,GAAOD,EAAOc,GAGvC,QAAS8+D,kBACL,MAAO,SAASzrC,GAAQrzB,GACpB0D,YAAY1D,EAAOqzB,EAAQn0B,QAGnC,QAAS6/D,sBAAqBt1B,EAAUvqC,GACpC,GAA+IC,GAA3I6/D,EAAQv1B,EAASrpC,KAAKL,GAAIk/D,EAAcx1B,EAASxpC,SAAUi/D,EAASz1B,EAAS5f,IAAK9pB,EAAKb,GAASA,EAAMkB,KAAKL,GAAI8pB,EAAO3qB,GAASA,EAAM2qB,GAEzI,IAAIm1C,IAAUj/D,EAAd,CAIA,GAAIi/D,GAASC,EAET,GAAKl/D,EAOD,IAAKZ,IAAQ6/D,GAEJj/D,EAAGZ,IACJ+/D,EAAOC,oBAAoBhgE,EAAM8/D,GAAa,OATtD,KAAK9/D,IAAQ6/D,GAETE,EAAOC,oBAAoBhgE,EAAM8/D,GAAa,EAa1D,IAAIl/D,EAAI,CAEJ,GAAIE,GAAWf,EAAMe,SAAWwpC,EAASxpC,UAAY6+D,gBAIrD,IAFA7+D,EAASf,MAAQA,EAEZ8/D,EAOD,IAAK7/D,IAAQY,GAEJi/D,EAAM7/D,IACP0qB,EAAIwoB,iBAAiBlzC,EAAMc,GAAU,OAT7C,KAAKd,IAAQY,GAET8pB,EAAIwoB,iBAAiBlzC,EAAMc,GAAU,KA1ErDvW,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAuFtDD,QAAQkoD,sBACJzhD,OAAQ0uE,qBACRj2D,OAAQi2D,qBACR12B,QAAS02B,sBAEbn1E,QAAQgxB,QAAUhxB,QAAQkoD,qB;;;;;;;AC3F1B,QAASstB,aAAY31B,EAAUvqC,GAC3B,GAAI7H,GAAKw2C,EAAUhkB,EAAM3qB,EAAM2qB,IAAKw1C,EAAW51B,EAASrpC,KAAKk/D,MAAOA,EAAQpgE,EAAMkB,KAAKk/D,KACvF,KAAKD,GAAaC,IAEdD,IAAaC,EAAjB,CAEAD,EAAWA,MACXC,EAAQA,KACR,KAAKjoE,IAAOgoE,GACHC,EAAMjoE,UACAwyB,GAAIxyB,EAGnB,KAAKA,IAAOioE,GACRzxB,EAAMyxB,EAAMjoE,GACNgoE,EAAShoE,KACHw2C,GAAgB,UAARx2C,GAAmBwyB,EAAIxyB,KAASw2C,IAChDhkB,EAAIxyB,GAAOw2C,IAlBvBnkD,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAsBtDD,QAAQ8nD,aAAgBrhD,OAAQ+uE,YAAat2D,OAAQs2D,aACrDx1E,QAAQgxB,QAAUhxB,QAAQ8nD,Y;;;;;;;ACpB1B,QAAS6tB,cAAajhE,EAAKkhE,EAAMt/D,GAC7Bu/D,UAAU,WAAcnhE,EAAIkhE,GAAQt/D,IAExC,QAASw/D,aAAYj2B,EAAUvqC,GAC3B,GAAI2uC,GAAK1uC,EAAM0qB,EAAM3qB,EAAM2qB,IAAK81C,EAAWl2B,EAASrpC,KAAKR,MAAOA,EAAQV,EAAMkB,KAAKR,KACnF,KAAK+/D,GAAa//D,IAEd+/D,IAAa//D,EAAjB,CAEA+/D,EAAWA,MACX//D,EAAQA,KACR,IAAIggE,GAAY,WAAaD,EAC7B,KAAKxgE,IAAQwgE,GACJ//D,EAAMT,KACS,MAAZA,EAAK,IAA0B,MAAZA,EAAK,GACxB0qB,EAAIjqB,MAAMigE,eAAe1gE,GAGzB0qB,EAAIjqB,MAAMT,GAAQ,GAI9B,KAAKA,IAAQS,GAET,GADAiuC,EAAMjuC,EAAMT,GACC,YAATA,GAAsBS,EAAMkgE,QAC5B,IAAK,GAAIC,KAASngE,GAAMkgE,QACpBjyB,EAAMjuC,EAAMkgE,QAAQC,GACfH,GAAa/xB,IAAQ8xB,EAASG,QAAQC,IACvCR,aAAa11C,EAAIjqB,MAAOmgE,EAAOlyB,OAIzB,WAAT1uC,GAAqB0uC,IAAQ8xB,EAASxgE,KAC3B,MAAZA,EAAK,IAA0B,MAAZA,EAAK,GACxB0qB,EAAIjqB,MAAMogE,YAAY7gE,EAAM0uC,GAG5BhkB,EAAIjqB,MAAMT,GAAQ0uC,IAKlC,QAASoyB,mBAAkB/gE,GACvB,GAAIU,GAAOT,EAAM0qB,EAAM3qB,EAAM2qB,IAAKj1B,EAAIsK,EAAMkB,KAAKR,KACjD,IAAKhL,IAAOgL,EAAQhL,EAAEyzC,SAEtB,IAAKlpC,IAAQS,GACTiqB,EAAIjqB,MAAMT,GAAQS,EAAMT,GAGhC,QAAS+gE,kBAAiBhhE,EAAOspC,GAC7B,GAAI5zC,GAAIsK,EAAMkB,KAAKR,KACnB,KAAKhL,IAAMA,EAAE9C,OAET,WADA02C,IAGJ,IAAIrpC,GAA8BghE,EAAxBt2C,EAAM3qB,EAAM2qB,IAAKz6B,EAAI,EAAcwQ,EAAQhL,EAAE9C,OAAQsuE,EAAS,EAAGC,IAC3E,KAAKlhE,IAAQS,GACTygE,EAAQzuE,KAAKuN,GACb0qB,EAAIjqB,MAAMT,GAAQS,EAAMT,EAE5BghE,GAAYryD,iBAAiB+b,EAE7B,KADA,GAAIy1C,GAAQa,EAAU,uBAAuB/8B,MAAM,MAC5Ch0C,EAAIkwE,EAAMpwE,SAAUE,GACY,IAA/BixE,EAAQtuE,QAAQutE,EAAMlwE,KACtBgxE,GAERv2C,GAAIwoB,iBAAiB,gBAAiB,SAAUgoB,GACxCA,EAAGjjE,SAAWyyB,KACZu2C,EACS,IAAXA,GACA53B,MA1EZ9+C,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIy2E,KAAyB,mBAAXnwD,SAA0BA,OAAO6E,uBAA0BvE,WACzEgvD,UAAY,SAAU3+B,GAAMw/B,IAAI,WAAcA,IAAIx/B,KA2EtDl3C,SAAQioD,aACJxhD,OAAQqvE,YACR52D,OAAQ42D,YACRr3B,QAAS43B,kBACTnuE,OAAQouE,kBAEZt2E,QAAQgxB,QAAUhxB,QAAQioD,Y;;;;;;;ACjF1B,QAASjE,aAAY1uC,EAAOirC,GACxBA,EAAMtgB,IAAM3qB,EAAM2qB,IAClB3qB,EAAMkB,KAAK0gC,GAAKqJ,EAAM/pC,KAAK0gC,GAC3B5hC,EAAMkB,KAAKsR,KAAOy4B,EAAM/pC,KAAKsR,KAC7By4B,EAAM/pC,KAAOlB,EAAMkB,KACnB+pC,EAAMt7C,SAAWqQ,EAAMrQ,SACvBs7C,EAAMrjC,KAAO5H,EAAM4H,KACnBqjC,EAAMtgB,IAAM3qB,EAAM2qB,IAEtB,QAAS8c,MAAKwD,GACV,GAAI0D,GAAM1D,EAAM/pC,IAEhBwtC,aADYC,EAAI/M,GAAGtvC,UAAM1C,GAAW++C,EAAIn8B,MACrBy4B,GAEvB,QAAST,UAASD,EAAUU,GACxB,GAAI/6C,GAAG0+C,EAAMrE,EAASrpC,KAAMytC,EAAM1D,EAAM/pC,KACpCmgE,EAAUzyB,EAAIp8B,KAAMA,EAAOm8B,EAAIn8B,IACnC,IAAIo8B,EAAIhN,KAAO+M,EAAI/M,IAAMy/B,EAAQrxE,SAAWwiB,EAAKxiB,OAE7C,WADA0+C,aAAYC,EAAI/M,GAAGtvC,UAAM1C,GAAW4iB,GAAOy4B,EAG/C,KAAK/6C,EAAI,EAAGA,EAAIsiB,EAAKxiB,SAAUE,EAC3B,GAAImxE,EAAQnxE,KAAOsiB,EAAKtiB,GAEpB,WADAw+C,aAAYC,EAAI/M,GAAGtvC,UAAM1C,GAAW4iB,GAAOy4B,EAInDyD,aAAYnE,EAAUU,GA7B1BzgD,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIogD,KAAM,mBAAAlgD,CAAQ,GA8BlBH,SAAQugD,MAAQ,SAAetjC,EAAKxP,EAAKypC,EAAIpvB,GAMzC,WALa5iB,KAAT4iB,IACAA,EAAOovB,EACPA,EAAKzpC,EACLA,MAAMvI,IAEHm7C,IAAItV,EAAE9tB,GACTxP,IAAKA,EACL+vC,MAAQT,KAAMA,KAAM+C,SAAUA,UAC9B5I,GAAIA,EACJpvB,KAAMA,KAGd9nB,QAAQgxB,QAAUhxB,QAAQugD,M;;;;;;;ACpC1B,QAASq2B,6BAA4BttD,EAAWlH,GAC5C,GAAIy0D,GAAiBvtD,EAAUziB,IAAI0H,QAAQjM,MAAMO,oBACjD,KAAK,GAAIwD,KAAK+b,GACNA,EAAQ9b,eAAeD,KACvBwwE,EAAexwE,GAAK+b,EAAQ/b,GAEpC,OAAOwwE,GARX/2E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIsO,SAAU,mBAAApO,CAAQ,EAStBH,SAAQ42E,4BAA8BA,4B;;;;;;;ACVtC92E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtB8rD,iBAAmB,mBAAA9rD,CAAQ,IAC3BoO,QAAU,mBAAApO,CAAQ,GAClBqrB,oBAAsB,mBAAArrB,CAAQ,IAC9B22E,UAAY,mBAAA32E,CAAQ,IACpB+hB,oBAAsB,mBAAA/hB,CAAQ,IAC9BmrC,iBAAmB,mBAAAnrC,CAAQ,IAC3B42E,gBAAkB,mBAAA52E,CAAQ,IAC1BysB,iBAAmB,mBAAAzsB,CAAQ,IAC3BgrC,yBAA2B,mBAAAhrC,CAAQ,IACnC62E,SAAW,mBAAA72E,CAAQ,IACnB82E,iBAAmB,mBAAA92E,CAAQ,IAC3BwsB,aAAe,mBAAAxsB,CAAQ,IACvB0sB,WAAa,mBAAA1sB,CAAQ,IACrB+2E,mBAAqB,mBAAA/2E,CAAQ,IAC7Bg3E,OAAS,mBAAAh3E,CAAQ,IACjBi3E,eAAiB,mBAAAj3E,CAAQ,IACzBgZ,aAAe,mBAAAhZ,CAAQ,IACvBk3E,eAAiB,mBAAAl3E,CAAQ,KACzByhB,UAAY,mBAAAzhB,CAAQ,GACpBm3E,uBAAyB,GAAIhpE,aAAYhO,gBAAgB,SAAUkb,GAEnEA,EAAKjN,QAAQjM,MAAMkB,SAASoyD,GAAGkhB,UAAU1gC,YAAYyf,mBACrDr6C,EAAKjN,QAAQjM,MAAMmB,UAAU+gD,gBAAgBsyB,UAAUrzE,SAAS0oC,MAEhE3wB,EAAKjN,QAAQjM,MAAM+B,gBAAgBuxD,GAAGhpC,iBAAiBvoB,gBAAgBwxD,mBACvEr6C,EAAKjN,QAAQjM,MAAMK,uBAAuBizD,GAAGtqB,iBAAiB3oC,uBAAuBkzD,mBACrFr6C,EAAKjN,QAAQjM,MAAMuC,cAAc+wD,GAAGuhB,OAAOtyE,cAAcgxD,mBAEzDr6C,EAAKjN,QAAQjM,MAAMoB,eAAekyD,GAAGhpC,iBAAiB9Y,eAAe+hD,mBAErEr6C,EAAKjN,QAAQjM,MAAMC,mBAAmBqzD,GAAG1zC,oBAAoB2C,kBAAkBgxC,mBAC/Er6C,EAAKjN,QAAQjM,MAAMG,2BAA2B+oE,WAAW,SAAU58D,GAC/D,MAAO,YACH,MAAO,IAAI4P,SAAQ,SAAUC,GACzBA,EAAQ7P,EAAQ0a,UAAUziB,IAAI0H,QAAQjM,MAAMC,yBAKxDiZ,EAAKjN,QAAQjM,MAAMI,2BAA2BkzD,GAAGh0C,UAAUpS,iCAE3DgM,EAAKjN,QAAQjM,MAAMU,eAAe4yD,GAAGmhB,gBAAgBr1B,cAAcmU,mBACnEr6C,EAAKjN,QAAQjM,MAAMW,uBAAuBuoE,WAAW,SAAU58D,GAC3D,MAAO,YACH,MAAO,IAAI4P,SAAQ,SAAUC,GACzBA,EAAQ7P,EAAQ0a,UAAUziB,IAAI0H,QAAQjM,MAAMU,qBAIxDwY,EAAKjN,QAAQjM,MAAMO,qBAAqB2hD,iBACpCf,gBAAiB,IACjBN,iBAAkB,KAGtB3nC,EAAKw7D,SAAS/vB,QAAQye,SAAS7P,mBAC/Br6C,EAAKjN,QAAQjM,MAAMmC,SAASymE,eAAe,SAAUt8D,GACjD,MAAOA,GAAQ0a,UAAUziB,IAAImwE,SAAS/vB,UACvC4O,mBAAmBhsB,gBAAgB,YACtCruB,EAAK47D,eAAeryB,aAAa2gB,SAAS7P,mBAC1Cr6C,EAAKjN,QAAQjM,MAAMmC,SAASymE,eAAe,SAAUt8D,GACjD,MAAOA,GAAQ0a,UAAUziB,IAAIuwE,eAAeryB,eAC7C8Q,mBAAmB/rB,sBACtBtuB,EAAKjN,QAAQjM,MAAMqC,iBAAiB6mE,WAAW,SAAU58D,GACrD,MAAO,YACH,MAAO,IAAI4P,SAAQ,SAAUC,GACzBA,EAAQ7P,EAAQ0a,UAAUziB,IAAI0H,QAAQjM,MAAMmC,eAIxD+W,EAAKjN,QAAQjM,MAAMoC,eAAe8/C,gBAAgByyB,iBAAiBtxB,wBACnEnqC,EAAKjN,QAAQjM,MAAMY,WAAW0yD,GAAGz8C,aAAajW,WAAW2yD,mBACzDr6C,EAAKjN,QAAQjM,MAAMsB,sBAAsBwnE,UAAU,SAAUx8D,GACzD,MAAO,UAAUrB,GACb,GAAIs5C,GAAej4C,EAAQ0a,UAAUziB,IAAI0H,QAAQjM,MAAMuC,aACvD,OAAO,IAAImyE,UAASpwB,cAAcC,EAAct5C,MAIxDiO,EAAK67D,eAAeE,aAAa7R,SAAS7P,mBAC1Cr6C,EAAKjN,QAAQjM,MAAMwC,iBAAiBomE,eAAe,SAAUt8D,GACzD,MAAOA,GAAQ0a,UAAUziB,IAAIwwE,eAAeE,eAC7C1hB,mBACHr6C,EAAKmR,aAAavT,WAAWssD,SAAS7P,mBACtCr6C,EAAKjN,QAAQjM,MAAMwC,iBAAiBomE,eAAe,SAAUt8D,GACzD,MAAOA,GAAQ0a,UAAUziB,IAAI8lB,aAAavT,aAC3Cy8C,mBACHr6C,EAAKqR,WAAWjN,SAAS8lD,SAAS7P,mBAClCr6C,EAAKjN,QAAQjM,MAAMwC,iBAAiBomE,eAAe,SAAUt8D,GACzD,MAAOA,GAAQ0a,UAAUziB,IAAIgmB,WAAWjN,WACzCi2C,mBACHr6C,EAAK07D,mBAAmBhuB,mBAAmBwc,SAAS7P,mBACpDr6C,EAAKjN,QAAQjM,MAAMwC,iBAAiBomE,eAAe,SAAUt8D,GACzD,MAAOA,GAAQ0a,UAAUziB,IAAIqwE,mBAAmBhuB,qBACjD2M,mBACHr6C,EAAKjN,QAAQjM,MAAM6B,qBAAqB+mE,eAAe,SAAUt8D,GAC7D,MAAOA,GAAQ0a,UAAUziB,IAAIwwE,eAAeE,eAC7C1hB,mBACHr6C,EAAKmR,aAAajR,gBAAgBgqD,SAAS7P,mBAC3Cr6C,EAAKjN,QAAQjM,MAAM6B,qBAAqB+mE,eAAe,SAAUt8D,GAC7D,MAAOA,GAAQ0a,UAAUziB,IAAI8lB,aAAajR,kBAC3Cm6C,mBACHr6C,EAAKjN,QAAQjM,MAAMa,sBAAsB+nE,eAAe,SAAUt8D,GAC9D,MAAOA,GAAQ0a,UAAUziB,IAAIwwE,eAAeE,eAC7C1hB,mBAEHr6C,EAAKjN,QAAQjM,MAAMM,sBAAsBgzD,GAAGzqB,yBAAyBvoC,sBAAsBizD,mBAE3Fr6C,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAc3/C,oBAAoBO,+BAC/DvQ,EAAKgQ,oBAAoBuU,yBAAyB2lC,SAAS7P,mBAC3Dr6C,EAAKjN,QAAQjM,MAAMwC,iBAAiBomE,eAAe,SAAUt8D,GACzD,MAAOA,GAAQ0a,UAAUziB,IAAI2kB,oBAAoBuU,2BAClD81B,mBACHr6C,EAAKjN,QAAQjM,MAAMgC,eAAesxD,GAAG3J,iBAAiB3nD,eAAeuxD,oBAEzE71D,SAAQgxB,QAAUsmD,uB;;;;;;;ACpHlB,GAAIhqE,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBgZ,aAAe,mBAAAhZ,CAAQ,IACvB+Y,cAAgB,mBAAA/Y,CAAQ,IACxBo3E,YAA6B,WAC7B,QAASA,GAAYxoE,EAAQuK,GACzBvT,KAAKgJ,OAASA,EACdhJ,KAAKuT,UAAYA,EAmBrB,MAjBAi+D,GAAY/wE,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAC9C,GAAIyR,GAAQyC,cAAc1D,SAASF,EAMnC,YALiBpQ,KAAbuR,EAAMlR,IACNQ,KAAKgJ,OAAOo9B,KAAK72B,EAAO,2BAA6BmB,EAAMlR,GAAK,gDACpEkR,EAAMlR,GAAKQ,KAAKuT,UAAUuB,yBAAyB7V,GAC9CsQ,EAAM7H,MACP6H,EAAM7H,IAAMzI,EAAQO,IACjB+P,GAEXiiE,EAAY/wE,UAAUiV,WAAa,aAEnC87D,EAAcjqE,YACVgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkB,UAC5C2K,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMY,YAC5C6K,WAAW,qBAAsBjO,OAAQqZ,aAAajW,aACvDq0E,KAGPv3E,SAAQu3E,YAAcA,Y;;;;;;;ACzCtBz3E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBgsD,sBAAwB,mBAAAhsD,CAAQ,IAChCq3E,wBAA0B,mBAAAr3E,CAAQ,KAClCs3E,SAAW,mBAAAt3E,CAAQ,IACnBixB,aAAe,GAAI9iB,aAAYhO,gBAAgB,SAAUkb,GACzDA,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAchf,sBAAsBlgC,kBACjEzQ,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAchf,sBAAsBhgC,sBACjE3Q,EAAKjN,QAAQjM,MAAMa,sBAAsByyD,GAAG4hB,wBAAwBE,qBAAqB7hB,mBACzFr6C,EAAKjN,QAAQjM,MAAMgB,UAAUsyD,GAAG6hB,SAASn0E,UAAUuyD,mBACnDr6C,EAAKjN,QAAQjM,MAAMiB,gBAAgBqyD,GAAG6hB,SAASl0E,gBAAgBsyD,oBAEnE71D,SAAQgxB,QAAUI,a;;;;;;;ACblB,GAAI9jB,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBuG,WAAa,mBAAAvG,CAAQ,GACrBsQ,SAAW,mBAAAtQ,CAAQ,GACnBgsD,sBAAwB,mBAAAhsD,CAAQ,IAChCghB,QAAU,mBAAAhhB,CAAQ,GAClBs3E,SAAW,mBAAAt3E,CAAQ,IACnBihB,QAAU,mBAAAjhB,CAAQ,IAClBw3E,WAA4B,WAC5B,QAASA,MAET,MAAOA,KAEX33E,SAAQ23E,WAAaA,UAYrB,IAAID,qBAAqC,WACrC,QAASA,GAAoBr+D,EAAkB+zB,GAC3CrnC,KAAKsT,iBAAmBA,EACxBtT,KAAKqnC,SAAWA,EAChBrnC,KAAK6pC,mBAAqB,GAAIrmC,KAoFlC,MAlFAmuE,GAAoBlxE,UAAU1E,SAAW,SAAUwT,EAAOtQ,GAWtD,OAVImc,QAAQhQ,WAAWnM,IAAYmc,QAAQpQ,kBAAkB/L,KACzDe,KAAK6pC,mBAAmBnmC,IAAIzE,GACxBsQ,MAAOA,EACP5D,OAAQ1M,EAAQ0M,OAChB28B,eAAe,EACf2B,kBAAkB,IAGtBhrC,YAAmByL,UAAS1J,aAC5BhB,KAAKsB,KAAOrC,GACTsQ,GAEXoiE,EAAoBlxE,UAAUiV,WAAa,WACvC,OAAkBvW,KAAda,KAAKsB,OAAsB+Z,QAAQkiB,aAAav9B,KAAKsB,QAAStB,KAAKsB,KAAKgb,OAA5E,CAEAtc,KAAK6xE,mBACL7xE,KAAKqnC,SAASD,OAAOpnC,KAAK6pC,mBAC1B,IAAIyD,MACAwkC,IACJ9xE,MAAK6pC,mBAAmBtnC,QAAQ,SAAU+kC,EAAYroC,GAC9CqoC,EAAWgB,mBAAuCnpC,KAAtBmoC,EAAW37B,QACvC2hC,EAAQrrC,MACJqI,UAAWrL,EAAQO,GACnBwM,UAAWs7B,EAAW37B,SAE1B27B,EAAW2C,sBAA6C9qC,KAAzBmoC,EAAWnH,WAC1C2xC,EAAa7vE,MACTqI,UAAWrL,EAAQO,GACnBkoD,aAAcpgB,EAAWnH,aAGrC,IAAI7Z,OAA0BnnB,KAAda,KAAKsB,KAAsBtB,KAAKsB,KAAKglB,aAAWnnB,EAChEa,MAAKsT,iBAAiBmB,SAAS,GAAI2xC,uBAAsB//B,qBAAqBinB,EAAShnB,EAAUwrD,IACjG9xE,KAAK6pC,mBAAmButB,UAE5Bua,EAAoBlxE,UAAUoxE,iBAAmB,WAC7C,GAAIjwE,GAAQ5B,IACZA,MAAK6pC,mBAAmBtnC,QAAQ,SAAU+kC,EAAYroC,GAClD,GAAIqoC,EAAW37B,QAAUyP,QAAQhQ,WAAWnM,GAAU,CAClD,GAAIsQ,GAAQ+3B,EAAW/3B,KACvB,IAAIA,GAASA,EAAM2qB,IAAK,CACpB,GAAI63C,GAAcnwE,EAAMkc,UAAUvO,EAAM2qB,IAAKj7B,IACzCmc,QAAQ9P,YAAYrM,IAAc0B,WAAW4F,aAAawrE,EAAYlvE,EAAG,IAAMlC,WAAW4F,aAAawrE,EAAYjvE,EAAG,KACtHwkC,EAAWnH,WACPt9B,GAAIkvE,EAAYlvE,EAChBC,GAAIivE,EAAYjvE,GAEpBwkC,EAAW2C,kBAAmB,EAElC,IAAIj+B,IACAnJ,EAAG5D,EAAQ0M,OAAO9I,EAClBC,EAAG7D,EAAQ0M,OAAO7I,EAClBC,MAAOgvE,EAAYhvE,MACnBC,OAAQ+uE,EAAY/uE,OAElBrC,YAAW4F,aAAayF,EAAUnJ,EAAG5D,EAAQ0M,OAAO9I,IACnDlC,WAAW4F,aAAayF,EAAUlJ,EAAG7D,EAAQ0M,OAAO7I,IACpDnC,WAAW4F,aAAayF,EAAUjJ,MAAO9D,EAAQ0M,OAAO5I,QACxDpC,WAAW4F,aAAayF,EAAUhJ,OAAQ/D,EAAQ0M,OAAO3I,UAC5DskC,EAAW37B,OAASK,EACpBs7B,EAAWgB,eAAgB,QAM/CqpC,EAAoBlxE,UAAUqd,UAAY,SAAUoc,EAAKj7B,GACrD,GAAI0M,GAASuuB,EAAI83C,SACjB,QACInvE,EAAG8I,EAAO9I,EACVC,EAAG6I,EAAO7I,EACVC,MAAO4I,EAAO5I,MACdC,OAAQ2I,EAAO3I,SAGvB2uE,EAAsBpqE,YAClBgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5C4L,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMgB,WAC5CyK,WAAW,qBAAsBjO,OAAQ23E,SAASn0E,YACnDo0E,KAGP13E,SAAQ03E,oBAAsBA,oB;;;;;;;AChI9B,GAAI5xE,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI6kB,aAAc,mBAAA3kB,CAAQ,IACtB0zC,gBAAiC,SAAUnsC,GAE3C,QAASmsC,GAAgBl6B,EAAOq+D,EAAgBppE,EAAS2zB,OACrC,KAAZA,IAAsBA,GAAU,EACpC,IAAI56B,GAAQD,EAAOwB,KAAKnD,KAAM6I,IAAY7I,IAI1C,OAHA4B,GAAMgS,MAAQA,EACdhS,EAAMqwE,eAAiBA,EACvBrwE,EAAM46B,QAAUA,EACT56B,EAsBX,MA7BA7B,WAAU+tC,EAAiBnsC,GAS3BmsC,EAAgBrtC,UAAUwY,MAAQ,SAAUpI,GACxC,GAAIjP,GAAQ5B,IAiBZ,OAhBAA,MAAKiyE,eAAe1vE,QAAQ,SAAU2vE,GAClC,GAAIjzE,GAAUizE,EAAcjzE,QACxBkzE,EAAgBvwE,EAAa,SAC7BmB,OAAQ,EAAI8N,GAAKqhE,EAAc1kC,YAAYzqC,MAAQ8N,EAAIqhE,EAAc3kC,cAAcxqC,MACnFC,QAAS,EAAI6N,GAAKqhE,EAAc1kC,YAAYxqC,OAAS6N,EAAIqhE,EAAc3kC,cAAcvqC,SAErFD,OAAQ,EAAI8N,GAAKqhE,EAAc3kC,cAAcxqC,MAAQ8N,EAAIqhE,EAAc1kC,YAAYzqC,MACnFC,QAAS,EAAI6N,GAAKqhE,EAAc3kC,cAAcvqC,OAAS6N,EAAIqhE,EAAc1kC,YAAYxqC,OAEzF/D,GAAQ0M,QACJ9I,EAAG5D,EAAQ0M,OAAO9I,EAClBC,EAAG7D,EAAQ0M,OAAO7I,EAClBC,MAAOovE,EAAapvE,MACpBC,OAAQmvE,EAAanvE,UAGtBhD,KAAK4T,OAETk6B,GACT/uB,YAAYzG,UACdre,SAAQ6zC,gBAAkBA,gB;;;;;;;AC5C1B/zC,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtB4pD,iBAAmB,mBAAA5pD,CAAQ,IAC3BqyB,aAAe,GAAIlkB,aAAYhO,gBAAgB,SAAUkb,GACzDA,EAAKuuC,iBAAiB9Z,uBAAuBy1B,SAAS7P,oBAE1D71D,SAAQgxB,QAAUwB,a;;;;;;;ACNlB1yB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBujC,eAAiB,mBAAAvjC,CAAQ,IACzB6xB,eAAiB,GAAI1jB,aAAYhO,gBAAgB,SAAUkb,GAC3DA,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAcznC,eAAevC,uBAC1D3lB,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAcznC,eAAe/B,2BAE9D3hC,SAAQgxB,QAAUgB,e;;;;;;;ACRlBlyB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBosD,SAAW,mBAAApsD,CAAQ,IACnBiyB,aAAe,GAAI9jB,aAAYhO,gBAAgB,SAAUkb,GACzDA,EAAKjN,QAAQjM,MAAMQ,gBAAgBqoE,cAAc5e,SAASxpB,sBAE9D/iC,SAAQgxB,QAAUoB,a;;;;;;;ACPlBtyB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwkD,UAAW,mBAAAtkD,CAAQ,IACnBghB,QAAU,mBAAAhhB,CAAQ,IAClBsR,eAAiB,mBAAAtR,CAAQ,GACzB2d,KAAQ/J,cAAe0wC,SAAStmC,KAChCg6D,iBAAkC,WAClC,QAASA,MAWT,MATAA,GAAiB3xE,UAAU8W,OAAS,SAAU2lB,EAAQr0B,GAClD,GAAIs0B,GAAazxB,eAAef,oBAAoBuyB,EAAQ9hB,QAAQgiB,cAChE67B,MAAuB95D,KAAfg+B,GAA4BA,EAAWE,SAC7C,wBACA,sBACN,OAAOtlB,KAAI/J,cAAc,KAAOqkE,uBAAwB,SAAUC,gBAAiB,oBAC/Ev6D,IAAI/J,cAAc,QAAUnL,EAAG,EAAGC,EAAG,EAAGC,MAAO,GAAIC,OAAQ,GAAIu+B,QAAS,IACxExpB,IAAI/J,cAAc,QAAU5N,EAAG64D,MAEhCmZ,IAEXn4E,SAAQm4E,iBAAmBA,iB;;;;;;;ACnB3Br4E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBm4E,SAAW,mBAAAn4E,CAAQ,IACnB60C,eAAiB,mBAAA70C,CAAQ,IACzBo4E,gBAAkB,GAAIjqE,aAAYhO,gBAAgB,SAAUkb,GAC5DA,EAAKjN,QAAQjM,MAAMe,aAAauyD,GAAG0iB,SAAS7uB,sBAAsBoM,mBAClEr6C,EAAKjN,QAAQjM,MAAMa,sBAAsByyD,GAAG0iB,SAAS1uB,oBAAoBiM,mBACzEr6C,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAcmN,SAAS3uB,kBACpDnuC,EAAKjN,QAAQjM,MAAMkC,aAAaoxD,GAAG5gB,eAAexwC,aAAaqxD,oBAEnE71D,SAAQgxB,QAAUunD,gB;;;;;;;ACXlBz4E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClB2xC,OAAS,mBAAA3xC,CAAQ,IACjBmxB,WAAa,GAAIhjB,aAAYhO,gBAAgB,SAAUkb,GACvDA,EAAKjN,QAAQjM,MAAMwC,iBAAiB8wD,GAAG9jB,OAAOnB,cAAcklB,oBAEhE71D,SAAQgxB,QAAUM,W;;;;;;;ACPlBxxB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBisD,QAAU,mBAAAjsD,CAAQ,IAClBq4E,yBAA2B,mBAAAr4E,CAAQ,KACnCs4E,cAAgB,mBAAAt4E,CAAQ,KACxB2xB,YAAc,GAAIxjB,aAAYhO,gBAAgB,SAAUkb,GACxDA,EAAKjN,QAAQjM,MAAM6B,qBAAqByxD,GAAG4iB,yBAAyBE,sBAAsB7iB,mBAC1Fr6C,EAAKjN,QAAQjM,MAAMI,2BAA2BkzD,GAAG6iB,cAAcE,+BAC/Dn9D,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAc/e,QAAQn/B,sBACnDzR,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAc/e,QAAQ9+B,sBACnD9R,EAAKjN,QAAQjM,MAAMyB,eAAe6xD,GAAGxJ,QAAQn+B,oBAC7CzS,EAAKjN,QAAQjM,MAAM4B,oBAAoB0xD,GAAGxJ,QAAQ18B,yBAClDlU,EAAKjN,QAAQjM,MAAMe,aAAauyD,GAAGxJ,QAAQz8B,kBAC3CnU,EAAKjN,QAAQjM,MAAMc,YAAYohD,iBAC3Bx2B,mBAAgB9oB,GAChBwoB,kBAAexoB,GACf0oB,WAAW,EACXC,yBAAsB3oB,MAG9BlF,SAAQgxB,QAAUc,Y;;;;;;;ACrBlB,GAAIxkB,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBisD,QAAU,mBAAAjsD,CAAQ,IAClBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3By4E,aAAe,mBAAAz4E,CAAQ,IACvB2zC,WAAa,mBAAA3zC,CAAQ,IACrB4xC,OAAS,mBAAA5xC,CAAQ,IACjB04E,wBAAyC,WACzC,QAASA,KACL9yE,KAAK6nB,WAAY,EAUrB,MARAirD,GAAwBryE,UAAU8I,OAAS,SAAUC,GACjD,GAAIA,EAAOoR,OAASyrC,QAAQ9+B,qBAAqBtL,KAC7Cjc,KAAK6nB,UAAYre,EAAOoc,QAAQ3b,OAAS4c,iBAAiB7X,WAAW/E,SAEpE,IAAIjK,KAAK6nB,UACV,MAAO,IAAIw+B,SAAQ/+B,qBAAsB9nB,GAAIqnB,iBAAiB7X,WAAWxP,GAAIyK,KAAM4c,iBAAiB7X,WAAW/E,QAGhH6oE,KAEPF,8BAA+C,WAC/C,QAASA,MAaT,MAXAA,GAA8BnyE,UAAUkJ,WAAa,SAAUC,GAC3D,GAAImpE,GAA0B,GAAID,wBAClClpE,GAASuF,SAAS0jE,aAAavkC,mBAAmBryB,KAAM82D,GACxDnpE,EAASuF,SAAS0jE,aAAa3kC,cAAcjyB,KAAM82D,GACnDnpE,EAASuF,SAAS4+B,WAAW5uB,gBAAgBlD,KAAM82D,GACnDnpE,EAASuF,SAASk3C,QAAQ9+B,qBAAqBtL,KAAM82D,GACrDnpE,EAASuF,SAAS68B,OAAOlO,YAAY7hB,KAAM82D,IAE/CH,EAAgCrrE,YAC5BgB,YAAY9N,cACbm4E,KAGP34E,SAAQ24E,8BAAgCA,8B;;;;;;;AC3CxC,GAAIrrE,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBu4E,qBAAsC,WACtC,QAASA,GAAqBt2D,GAC1Brc,KAAKqc,QAAUA,EA4BnB,MA1BAs2D,GAAqBlyE,UAAU1E,SAAW,SAAUwT,EAAOtQ,GACvD,MAAOsQ,IAEXojE,EAAqBlyE,UAAUiV,WAAa,WACxC,GAAIwqC,GAAWvrC,SAASE,eAAe7U,KAAKqc,QAAQ6jC,SACpD,IAAiB,OAAbA,GAAuC,mBAAX1/B,QAAwB,CACpD,GAAIwyD,GAAqB9yB,EAAS7lB,uBAC9B7Z,QAAOyyD,YAAcD,EAAmBhwE,OAASgwE,EAAmBv4C,MACpEylB,EAASjwC,MAAMwqB,IAAOja,OAAO+Z,QAAU/Z,OAAOyyD,YAAcD,EAAmBhwE,OAAS,EAAK,MAE7Fwd,OAAO0yD,WAAaF,EAAmBx4C,KAAOw4C,EAAmBjwE,QACjEm9C,EAASjwC,MAAMuqB,KAAQha,OAAO8Z,QAAU9Z,OAAO0yD,WAAaF,EAAmBjwE,MAAQ,EAAK,MAE5FiwE,EAAmBx4C,KAAO,IAC1B0lB,EAASjwC,MAAMuqB,KAAO,OAEtBw4C,EAAmBv4C,IAAM,IACzBylB,EAASjwC,MAAMwqB,IAAM,SAIjCk4C,EAAuBprE,YACnBgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CqJ,WAAW,qBAAsBjO,UAClC44E,KAGP14E,SAAQ04E,qBAAuBA,qB;;;;;;;AC/C/B54E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClB4xC,OAAS,mBAAA5xC,CAAQ,IACjB+wB,WAAa,GAAI5iB,aAAYhO,gBAAgB,SAAUkb,GACvDA,EAAKjN,QAAQjM,MAAMyB,eAAe6xD,GAAG7jB,OAAO9M,mBAC5CzpB,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAcp5B,OAAOlO,aAClDroB,EAAKjN,QAAQjM,MAAMwC,iBAAiB8wD,GAAG7jB,OAAO9L,mBAC9CzqB,EAAKjN,QAAQjM,MAAMa,sBAAsByyD,GAAG7jB,OAAO9L,oBAEvDjmC,SAAQgxB,QAAUE,W;;;;;;;ACVlBpxB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBqsD,OAAS,mBAAArsD,CAAQ,IACjBmyB,WAAa,GAAIhkB,aAAYhO,gBAAgB,SAAUkb,GACvDA,EAAKjN,QAAQjM,MAAMyB,eAAe6xD,GAAGpJ,OAAO3b,oBAEhD7wC,SAAQgxB,QAAUsB,W;;;;;;;ACPlBxyB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClB+4E,SAAW,mBAAA/4E,CAAQ,IACnBqxB,aAAe,GAAIljB,aAAYhO,gBAAgB,SAAUkb,GACzDA,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAc+N,SAAS/uB,eACpD3uC,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAc+N,SAAS5uB,kBACpD9uC,EAAKjN,QAAQjM,MAAMe,aAAauyD,GAAGsjB,SAAS7tB,wBAC5C7vC,EAAKjN,QAAQjM,MAAMyB,eAAe6xD,GAAGsjB,SAASruB,sBAElD7qD,SAAQgxB,QAAUQ,a;;;;;;;ACVlB1xB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBkrC,YAAc,mBAAAlrC,CAAQ,IACtBuxB,eAAiB,GAAIpjB,aAAYhO,gBAAgB,SAAUkb,GAC3DA,EAAKjN,QAAQjM,MAAMe,aAAauyD,GAAGvqB,YAAY2F,sBAEnDhxC,SAAQgxB,QAAUU,e;;;;;;;ACPlB5xB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAClBy4E,aAAe,mBAAAz4E,CAAQ,IACvB2zC,WAAa,mBAAA3zC,CAAQ,IACrBg5E,SAAW,mBAAAh5E,CAAQ,IACnBi5E,OAAS,mBAAAj5E,CAAQ,IACjByxB,eAAiB,GAAItjB,aAAYhO,gBAAgB,SAAUkb,GAC3DA,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAcyN,aAAa3kC,eACxDz4B,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAcyN,aAAavkC,oBACxD74B,EAAKjN,QAAQjM,MAAMS,UAAUooE,cAAcr3B,WAAW5uB,iBACtD1J,EAAKjN,QAAQjM,MAAMe,aAAauyD,GAAGgjB,aAAa7jC,wBAChDv5B,EAAKjN,QAAQjM,MAAMyB,eAAe6xD,GAAGujB,SAAS5tB,qBAC9C/vC,EAAKjN,QAAQjM,MAAMyB,eAAe6xD,GAAGwjB,OAAO1tB,oBAEhD1rD,SAAQgxB,QAAUY,e;;;;;;;ACflB,GAAItkB,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBuG,WAAa,mBAAAvG,CAAQ,GACrBwnC,iBAAkC,WAClC,QAASA,MA4CT,MA1CAA,GAAiBnhC,UAAU8Z,MAAQ,SAAU4mB,EAAM9kB,OAC/B,KAAZA,IAAsBA,GAAYi3D,qBAAsB,GAC5D,IAAIzoE,GAASs2B,EAAKt2B,OACdpD,EAAS05B,EAAK15B,MAClB,QAAetI,KAAX0L,OAAmC1L,KAAXsI,EACxB,QAEJ,IAAI8rE,GACAC,EACAz4C,MAAiC57B,KAAvBgiC,EAAKhnB,cAA8BgnB,EAAKhnB,cAAc5a,OAAS,CAC7E,IAAIw7B,GAAW,EAAG,CAEd,GAAI04C,GAAKtyC,EAAKhnB,cAAc,EAC5Bo5D,GAAe1oE,EAAOm2B,oBAAoByyC,EAAItyC,EAAKjgC,OAAQigC,EAAMA,EAAKuyC,uBAEtE,IAAIC,GAAKxyC,EAAKhnB,cAAc4gB,EAAU,EACtCy4C,GAAe/rE,EAAOu5B,oBAAoB2yC,EAAIxyC,EAAKjgC,OAAQigC,EAAMA,EAAKyyC,4BAErE,CAED,GAAIC,GAAWlzE,WAAWoE,OAAO0C,EAAOkE,OACxC4nE,GAAe1oE,EAAOm2B,oBAAoB6yC,EAAUpsE,EAAOvG,OAAQigC,EAAMA,EAAKuyC,uBAE9E,IAAII,GAASnzE,WAAWoE,OAAO8F,EAAOc,OACtC6nE,GAAe/rE,EAAOu5B,oBAAoB8yC,EAAQjpE,EAAO3J,OAAQigC,EAAMA,EAAKyyC,wBAEhF,GAAIrpE,KACJA,GAAOtI,MAAO2Y,KAAM,SAAU/X,EAAG0wE,EAAa1wE,EAAGC,EAAGywE,EAAazwE,GACjE,KAAK,GAAIrD,GAAI,EAAGA,EAAIs7B,EAASt7B,IAAK,CAC9B,GAAIa,GAAI6gC,EAAKhnB,cAAc1a,IACvBA,EAAI,GAAKA,EAAIs7B,EAAU,GACd,IAANt7B,GAAWkB,WAAWgF,YAAY4tE,EAAcjzE,IAAM+b,EAAQi3D,sBAAwBnyC,EAAKuyC,wBAA0B,IACrHj0E,IAAMs7B,EAAU,GAAKp6B,WAAWgF,YAAYrF,EAAGkzE,IAAiBn3D,EAAQi3D,sBAAwBnyC,EAAKyyC,wBAA0B,KAClIrpE,EAAOtI,MAAO2Y,KAAM,SAAU/X,EAAGvC,EAAEuC,EAAGC,EAAGxC,EAAEwC,EAAG2X,WAAYhb,IAIlE,MADA8K,GAAOtI,MAAO2Y,KAAM,SAAU/X,EAAG2wE,EAAa3wE,EAAGC,EAAG0wE,EAAa1wE,IAC1DyH,GAEXq3B,EAAmBr6B,YACfgB,YAAY9N,cACbmnC,KAGP3nC,SAAQ2nC,iBAAmBA,iB;;;;;;;ACxD3B,GAAI7hC,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBysB,iBAAmB,mBAAAzsB,CAAQ,IAC3BsQ,SAAW,mBAAAtQ,CAAQ,GACnBsR,eAAiB,mBAAAtR,CAAQ,GACzB25E,SAAW,mBAAA35E,CAAQ,IACnBghB,QAAU,mBAAAhhB,CAAQ,IAClB21D,cAA+B,SAAUpuD,GAEzC,QAASouD,KACL,MAAkB,QAAXpuD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAyE/D,MA3EAD,WAAUgwD,EAAepuD,GAIzBouD,EAActvD,UAAUuN,cAAgB,SAAUhE,EAAQ9I,GACtD,GAAIc,EACJ,IAAIhC,KAAK4J,SAASqE,OAAOjE,EAAOC,MAAO,CACnC,GAAIiE,GAAalO,KAAK4J,SAAS9I,IAAIkJ,EAAOC,SAAM9K,GAChD,MAAM+O,YAAsBxD,UAASzJ,eACjC,KAAM,IAAIE,OAAM,qBAAuB6I,EAAOC,KAAO,wCACzDjI,GAAQkM,MAGRlM,GADKhC,KAAKg0E,aAAahqE,GACf,GAAI+pE,UAASzyC,MAEhBthC,KAAKi0E,aAAajqE,GACf,GAAI+pE,UAASvyC,MAEhBxhC,KAAKk0E,aAAalqE,GACf,GAAI+pE,UAAStyC,MAEhBzhC,KAAKm0E,cAAcnqE,GAChB,GAAI+pE,UAASlyC,OAEhB7hC,KAAKo0E,oBAAoBpqE,GACtB,GAAI+pE,UAASjyC,aAEhB9hC,KAAKq0E,eAAerqE,GACjB,GAAIoR,SAAQivB,QAGZ,GAAI3/B,UAASzJ,aAEzB,OAAOjB,MAAKmO,gBAAgBnM,EAAOgI,EAAQ9I,IAE/C6uD,EAActvD,UAAU2N,WAAa,SAAUpE,GAC3C,GAAI1I,EACJ,IAAItB,KAAK4J,SAASqE,OAAOjE,EAAOC,MAAO,CACnC,GAAIiE,GAAalO,KAAK4J,SAAS9I,IAAIkJ,EAAOC,SAAM9K,GAChD,MAAM+O,YAAsBxD,UAAS1J,YACjC,KAAM,IAAIG,OAAM,qBAAuB6I,EAAOC,KAAO,qCACzD3I,GAAO4M,MAGP5M,GADKtB,KAAKs0E,cAActqE,GACjB,GAAI+pE,UAASvzC,OAGb,GAAI91B,UAAS1J,UAExB,OAAOhB,MAAKqO,eAAe/M,EAAM0I,IAErC+lD,EAActvD,UAAU6zE,cAAgB,SAAUtqE,GAC9C,MAA+C,UAAxC0B,eAAe3B,aAAaC,IAEvC+lD,EAActvD,UAAUuzE,aAAe,SAAUhqE,GAC7C,MAA+C,SAAxC0B,eAAe3B,aAAaC,IAEvC+lD,EAActvD,UAAUwzE,aAAe,SAAUjqE,GAC7C,MAA+C,SAAxC0B,eAAe3B,aAAaC,IAEvC+lD,EAActvD,UAAUyzE,aAAe,SAAUlqE,GAC7C,MAA+C,SAAxC0B,eAAe3B,aAAaC,IAEvC+lD,EAActvD,UAAU0zE,cAAgB,SAAUnqE,GAC9C,MAA+C,UAAxC0B,eAAe3B,aAAaC,IAEvC+lD,EAActvD,UAAU2zE,oBAAsB,SAAUpqE,GACpD,MAA+C,SAAxC0B,eAAe3B,aAAaC,IAEvC+lD,EAActvD,UAAU4zE,eAAiB,SAAUrqE,GAC/C,MAA+C,WAAxC0B,eAAe3B,aAAaC,IAEvC+lD,EAAgBxoD,YACZgB,YAAY9N,cACbs1D,IAELlpC,iBAAiB9Y,cACnB9T,SAAQ81D,cAAgBA,c;;;;;;;ACrGxBh2D,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwkD,UAAW,mBAAAtkD,CAAQ,IACnBuG,WAAa,mBAAAvG,CAAQ,GACrB+Y,cAAgB,mBAAA/Y,CAAQ,IACxBsR,eAAiB,mBAAAtR,CAAQ,GACzBghB,QAAU,mBAAAhhB,CAAQ,IAClB2d,KAAQ/J,cAAe0wC,SAAStmC,KAIhC43C,WAA4B,WAC5B,QAASA,MAOT,MALAA,GAAWvvD,UAAU8W,OAAS,SAAU3D,EAAO/K,GAC3C,GAAIywD,GAAY,SAAW1lD,EAAM2L,KAAO,gBAAkB3L,EAAM0L,OAAOzc,EAAI,KAAO+Q,EAAM0L,OAAOxc,EAAI,GACnG,OAAOiV,KAAI/J,cAAc,OAASumE,uBAAuB,GACrDx8D,IAAI/J,cAAc,KAAOsrD,UAAWA,GAAazwD,EAAQo4C,eAAertC,MAEzEo8C,IAEX/1D,SAAQ+1D,WAAaA,UACrB,IAAIuJ,kBAAkC,WAClC,QAASA,MA0BT,MAxBAA,GAAiB94D,UAAU8W,OAAS,SAAU4pB,EAAMt4B,GAChD,GAAI0R,GAAQ4mB,EAAK5mB,OACjB,OAAqB,KAAjBA,EAAMhb,OACCS,KAAKw0E,mBAAmB,uBAAwBrzC,EAAMt4B,GAC1DkP,IAAI/J,cAAc,KAAOymE,sBAAsB,EAAMhc,kBAAmBt3B,EAAK5lB,eAChFvb,KAAK84D,WAAW33B,EAAM5mB,EAAO1R,GAC7B7I,KAAKm5D,kBAAkBh4B,EAAM5mB,EAAO1R,GACpCA,EAAQo4C,eAAe9f,GAAQ5mB,MAAOA,MAE9Cg/C,EAAiB94D,UAAUq4D,WAAa,SAAU33B,EAAM43B,EAAUlwD,GAG9D,IAAK,GAFDmwD,GAAaD,EAAS,GACtBE,EAAO,KAAOD,EAAWn2D,EAAI,IAAMm2D,EAAWl2D,EACzCrD,EAAI,EAAGA,EAAIs5D,EAASx5D,OAAQE,IAAK,CACtC,GAAIa,GAAIy4D,EAASt5D,EACjBw5D,IAAQ,MAAQ34D,EAAEuC,EAAI,IAAMvC,EAAEwC,EAElC,MAAOiV,KAAI/J,cAAc,QAAU5N,EAAG64D,KAE1CM,EAAiB94D,UAAU04D,kBAAoB,SAAUh4B,EAAM43B,EAAUlwD,GACrE,UAEJ0wD,EAAiB94D,UAAU+zE,mBAAqB,SAAU/jC,EAAStP,EAAMt4B,GACrE,MAAOkP,KAAI/J,cAAc,QAAU0mE,+BAA+B,EAAM1yD,MAAOyuB,GAAW,MAEvF8oB,IAEXt/D,SAAQs/D,iBAAmBA,gBAC3B,IAAIob,oBAAoC,WACpC,QAASA,KACL30E,KAAKszE,qBAAuB,GAgEhC,MA9DAqB,GAAmBl0E,UAAU8W,OAAS,SAAUhO,EAAQV,EAASkZ,GAC7D,GAAIA,GAAQA,EAAKxH,MAAO,CACpB,GAAIzO,GAAW9L,KAAK40E,YAAYrrE,EAAQwY,EAAKxH,MAC7C,QAAiBpb,KAAb2M,EAAwB,CACxB,GAAImmC,GAAOl6B,IAAI/J,cAAc,UAAY6mE,gCAAgC,EAAMnc,iBAAkBnvD,EAAOiS,SAAUi9C,kBAAmBlvD,EAAOgS,cAAe0sC,GAAIn8C,EAASjJ,EAAGqlD,GAAIp8C,EAAShJ,GAExL,OADAqQ,eAAc7D,QAAQ2iC,EAAM,YAAa1oC,EAAOqR,MACzCq3B,GAIf,MAAOl6B,KAAI/J,cAAc,IAAK,OAElC2mE,EAAmBl0E,UAAUm0E,YAAc,SAAUrrE,EAAQgR,GACzD,MAAoB,SAAhBhR,EAAOqR,KACA5a,KAAK80E,gBAAgBvrE,EAAQgR,GAG7Bva,KAAK+0E,oBAAoBxrE,EAAQgR,IAGhDo6D,EAAmBl0E,UAAUs0E,oBAAsB,SAAUxrE,EAAQgR,GACjE,MAAOA,GAAMG,KAAK,SAAU+gB,GAAM,MAAOA,GAAGhhB,aAAelR,EAAOkR,cAEtEk6D,EAAmBl0E,UAAUq0E,gBAAkB,SAAUvrE,EAAQgR,GAC7D,GAAIrZ,GAASqI,EAAOrI,MACpB,IAAIka,QAAQlB,WAAWhZ,GAAS,CAU5B,IAAK,GATD4+B,GAAW,SAAUrE,GACrB,WAAsBt8B,KAAlBs8B,EAAGhhB,WACIghB,EAAGhhB,WACO,WAAZghB,EAAG7gB,KACD1Z,EAAOiZ,cAAc5a,QAEpB,GAEZwgC,MAAM,GAAQC,MAAM,GACfr8B,EAAK,EAAGs8B,EAAU1lB,EAAO5W,EAAKs8B,EAAQ1gC,OAAQoE,IAAM,CACzD,GAAI83B,GAAKwE,EAAQt8B,GACblE,EAAIqgC,EAASrE,EACbh8B,IAAK8J,EAAOkR,iBAAuBtb,KAAR4gC,GAAqBtgC,EAAIqgC,EAASC,MAC7DA,EAAMtE,GACNh8B,EAAI8J,EAAOkR,iBAAuBtb,KAAR6gC,GAAqBvgC,EAAIqgC,EAASE,MAC5DA,EAAMvE,GAEd,OAAYt8B,KAAR4gC,OAA6B5gC,KAAR6gC,EAAmB,CAExC,GAAIF,EAASC,KAASx2B,EAAOkR,YAAclR,EAAOkR,YAAc,EAAG,CAC/D,GAAI9X,GAAQzB,EAAOiZ,cAAc5Q,EAAOkR,WACxC,IAAI9Z,WAAWgF,YAAYhD,EAAOo9B,IAAQp/B,WAAWgF,YAAYhD,EAAOq9B,GACpE,OAER,GAAIF,EAASE,KAASz2B,EAAOkR,WAAa,GAAKlR,EAAOkR,WAAa,EAAIvZ,EAAOiZ,cAAc5a,OAAQ,CAChG,GAAIoD,GAAQzB,EAAOiZ,cAAc5Q,EAAOkR,WAAa,EACrD,IAAI9Z,WAAWgF,YAAYhD,EAAOo9B,GAAOp/B,WAAWgF,YAAYhD,EAAOq9B,GACnE,OAGR,GAAIr/B,WAAWgF,YAAYo6B,EAAKC,IAAQhgC,KAAKszE,qBACzC,MAAO3yE,YAAWqE,aAAa+6B,EAAKC,MAK7C20C,IAEX16E,SAAQ06E,mBAAqBA,kBAC7B,IAAIK,YAA4B,WAC5B,QAASA,MAST,MAPAA,GAAWv0E,UAAU8W,OAAS,SAAU6jC,EAAOvyC,GAC3C,GAAI0G,GAAQwI,IAAI/J,cAAc,QAAUinE,uBAAuB,GAAQ75B,EAAMjkC,MACzE+9D,EAAUxpE,eAAetB,WAAWgxC,EAGxC,OAFI85B,IACA/hE,cAAc7D,QAAQC,EAAO,QAAS2lE,GACnC3lE,GAEJylE,IAEX/6E,SAAQ+6E,WAAaA,UACrB,IAAIG,kBAAkC,WAClC,QAASA,MAUT,MARAA,GAAiB10E,UAAU8W,OAAS,SAAU3D,EAAO/K,GACjD,GAAI/D,GAAY,aAAe8O,EAAMjI,OAAO9I,EAAI,KAAO+Q,EAAMjI,OAAO7I,EAAI,IACpEyM,EAAQwI,IAAI/J,cAAc,KAAOsrD,UAAWx0D,EAAWswE,qBAAsB,UAAYvsE,EAAQo4C,eAAertC,IAChHshE,EAAUxpE,eAAetB,WAAWwJ,EAGxC,OAFIshE,IACA/hE,cAAc7D,QAAQC,EAAO,QAAS2lE,GACnC3lE,GAEJ4lE,IAEXl7E,SAAQk7E,iBAAmBA,iB;;;;;;;AClJ3Bp7E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIm7E,WAAY,mBAAAj7E,CAAQ,KACpBk7E,gBAAiC,WACjC,QAASA,MAwBT,MAtBAA,GAAgB70E,UAAU8W,OAAS,SAAU3D,EAAO/K,GAChD,GAAIopC,GAAOojC,UAAUpqD,QAAQrX,EAAMmW,KAEnC,OADA/pB,MAAKu1E,iBAAiBtjC,GACfA,GAEXqjC,EAAgB70E,UAAU80E,iBAAmB,SAAUtjC,GAClC,QAAbA,EAAK/6B,KAA8B,MAAb+6B,EAAK/6B,KAC3BlX,KAAKw1E,aAAavjC,EAAM,+BAEhCqjC,EAAgB70E,UAAU+0E,aAAe,SAAUvjC,EAAM37B,OACnCnX,KAAd8yC,EAAKxhC,OACLwhC,EAAKxhC,SACTwhC,EAAKxhC,KAAK6F,GAAKA,CACf,IAAIpX,GAAW+yC,EAAK/yC,QACpB,QAAiBC,KAAbD,EACA,IAAK,GAAIO,GAAI,EAAGA,EAAIP,EAASK,OAAQE,IAAK,CACtC,GAAIuC,GAAQ9C,EAASO,EACA,iBAAVuC,IACPhC,KAAKw1E,aAAaxzE,EAAOsU,KAIlCg/D,IAEXr7E,SAAQq7E,gBAAkBA,gB;;;;;;;AC7B1Bv7E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwkD,UAAW,mBAAAtkD,CAAQ,IACnB+Y,cAAgB,mBAAA/Y,CAAQ,IACxB2d,KAAQ/J,cAAe0wC,SAASvmC,MAChCs9D,aAA8B,WAC9B,QAASA,MAUT,MARAA,GAAah1E,UAAU8W,OAAS,SAAU3D,EAAO/K,GAE7C,IAAK,GADDvH,GAAOyW,IAAI/J,cAAc,MAAO,KAAMnF,EAAQo4C,eAAertC,IACxDjQ,EAAK,EAAGC,EAAKgQ,EAAMk5D,QAASnpE,EAAKC,EAAGrE,OAAQoE,IAAM,CACvD,GAAIiE,GAAIhE,EAAGD,EACXwP,eAAczD,SAASpO,EAAMsG,GAAG,GAEpC,MAAOtG,IAEJm0E,IAEXx7E,SAAQw7E,aAAeA,a;;;;;;;ACjBvB,GAAI11E,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwQ,UAAW,mBAAAtQ,CAAQ,GACnBuG,WAAa,mBAAAvG,CAAQ,GACrBs7E,UAAY,mBAAAt7E,CAAQ,IACpBghB,QAAU,mBAAAhhB,CAAQ,GAClBihB,QAAU,mBAAAjhB,CAAQ,IAClBkhB,QAAU,mBAAAlhB,CAAQ,IAClB25E,SAAW,mBAAA35E,CAAQ,IAInBu7E,aAA8B,SAAUh0E,GAExC,QAASg0E,KACL,GAAI/zE,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAMg0E,YAAc,EACbh0E,EAeX,MAnBA7B,WAAU41E,EAAch0E,GAMxB5H,OAAOC,eAAe27E,EAAal1E,UAAW,UAC1CK,IAAK,WACD,GAAIV,GAAIR,KAAK+E,IAAI3E,KAAK+L,KAAKhJ,MAAO/C,KAAK+L,KAAK/I,OAC5C,OAAO5C,GAAI,EAAIA,EAAI,EAAI,GAE3BgB,YAAY,EACZC,cAAc,IAElBs0E,EAAal1E,UAAUqgC,UAAY,SAAUG,EAAU5Y,OACpC,KAAXA,IAAqBA,EAAS,EAClC,IAAIwtD,GAAmB,GAAM71E,KAAK41E,WAClC,OAAOF,WAAU3tB,oBAAoB/nD,KAAK8L,SAAU9L,KAAKgoD,OAAQ/mB,EAAU5Y,EAASwtD,IAEjFF,GACT5B,SAASzyC,MACXrnC,SAAQ07E,aAAeA,YAIvB,IAAIrd,iBAAiC,SAAU32D,GAE3C,QAAS22D,KACL,GAAI12D,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAMg0E,YAAc,EACbh0E,EAOX,MAXA7B,WAAUu4D,EAAiB32D,GAM3B22D,EAAgB73D,UAAUqgC,UAAY,SAAUG,EAAU5Y,OACvC,KAAXA,IAAqBA,EAAS,EAClC,IAAIwtD,GAAmB,GAAM71E,KAAK41E,WAClC,OAAOF,WAAUltB,uBAAuBxoD,KAAK2L,OAAQs1B,EAAU5Y,EAASwtD,IAErEvd,GACTyb,SAASzyC,MACXrnC,SAAQq+D,gBAAkBA,eAI1B,IAAIwd,cAA8B,SAAUn0E,GAExC,QAASm0E,KACL,GAAIl0E,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAMg0E,YAAc,EACbh0E,EAeX,MAnBA7B,WAAU+1E,EAAcn0E,GAMxB5H,OAAOC,eAAe87E,EAAar1E,UAAW,UAC1CK,IAAK,WACD,GAAIV,GAAIR,KAAK+E,IAAI3E,KAAK+L,KAAKhJ,MAAO/C,KAAK+L,KAAK/I,OAC5C,OAAO5C,GAAI,EAAIA,EAAI,EAAI,GAE3BgB,YAAY,EACZC,cAAc,IAElBy0E,EAAar1E,UAAUqgC,UAAY,SAAUG,EAAU5Y,OACpC,KAAXA,IAAqBA,EAAS,EAClC,IAAIwtD,GAAmB,GAAM71E,KAAK41E,WAClC,OAAOF,WAAU3tB,oBAAoB/nD,KAAK8L,SAAU9L,KAAKgoD,OAAQ/mB,EAAU5Y,EAASwtD,IAEjFC,GACT/B,SAASvyC,MACXvnC,SAAQ67E,aAAeA,YAIvB,IAAIvd,iBAAiC,SAAU52D,GAE3C,QAAS42D,KACL,GAAI32D,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAMg0E,YAAc,EACbh0E,EAOX,MAXA7B,WAAUw4D,EAAiB52D,GAM3B42D,EAAgB93D,UAAUqgC,UAAY,SAAUG,EAAU5Y,OACvC,KAAXA,IAAqBA,EAAS,EAClC,IAAIwtD,GAAmB,GAAM71E,KAAK41E,WAClC,OAAOF,WAAUltB,uBAAuBxoD,KAAK2L,OAAQs1B,EAAU5Y,EAASwtD,IAErEtd,GACTwb,SAASvyC,MACXvnC,SAAQs+D,gBAAkBA,eAI1B,IAAIwd,UAA0B,SAAUp0E,GAEpC,QAASo0E,KACL,GAAIn0E,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAEhE,OADA4B,GAAMkrE,WACClrE,EAEX,MANA7B,WAAUg2E,EAAUp0E,GAMbo0E,GACTrrE,SAAS1J,WACX/G,SAAQ87E,SAAWA,QAKnB,IAAIC,oBAAoC,SAAUr0E,GAE9C,QAASq0E,KACL,MAAkB,QAAXr0E,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAE/D,MAJAD,WAAUi2E,EAAoBr0E,GAIvBq0E,GACTtrE,SAASzJ,cACXhH,SAAQ+7E,mBAAqBA,kBAI7B,IAAIC,0BAA0C,SAAUt0E,GAEpD,QAASs0E,KACL,GAAIr0E,GAAmB,OAAXD,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,IAKhE,OAJA4B,GAAMkK,SAAWnL,WAAW6F,aAC5B5E,EAAMmK,KAAOpL,WAAW+F,gBACxB9E,EAAM4Z,UAAW,EACjB5Z,EAAMu+B,UAAYx/B,WAAW6F,aACtB5E,EA2BX,MAlCA7B,WAAUk2E,EAA0Bt0E,GASpC5H,OAAOC,eAAei8E,EAAyBx1E,UAAW,UACtDK,IAAK,WACD,OACI+B,EAAG7C,KAAK8L,SAASjJ,EACjBC,EAAG9C,KAAK8L,SAAShJ,EACjBC,MAAO/C,KAAK+L,KAAKhJ,MACjBC,OAAQhD,KAAK+L,KAAK/I,SAG1BU,IAAK,SAAUsI,GACXhM,KAAK8L,UACDjJ,EAAGmJ,EAAUnJ,EACbC,EAAGkJ,EAAUlJ,GAEjB9C,KAAK+L,MACDhJ,MAAOiJ,EAAUjJ,MACjBC,OAAQgJ,EAAUhJ,SAG1B5B,YAAY,EACZC,cAAc,IAElB40E,EAAyBx1E,UAAUe,WAAa,SAAUC,GACtD,MAAOA,KAAY4Z,QAAQI,aAAeha,IAAY2Z,QAAQ/P,eAAiB5J,IAAY6Z,QAAQtK,eAAiBvP,IAAY2Z,QAAQ7P,cAErI0qE,GACTD,mBACF/7E,SAAQg8E,yBAA2BA,yB;;;;;;;AC3KnCl8E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIwkD,UAAW,mBAAAtkD,CAAQ,IACnB25E,SAAW,mBAAA35E,CAAQ,IACnB2d,KAAQ/J,cAAe0wC,SAAStmC,KAChC89D,gBAAiC,WACjC,QAASA,MAOT,MALAA,GAAgBz1E,UAAU8W,OAAS,SAAU3D,EAAO/K,GAChD,GAAIywD,GAAY,SAAW1lD,EAAM2L,KAAO,gBAAkB3L,EAAM0L,OAAOzc,EAAI,KAAO+Q,EAAM0L,OAAOxc,EAAI,GACnG,OAAOiV,KAAI/J,cAAc,MAAO,KAC5B+J,IAAI/J,cAAc,KAAOsrD,UAAWA,GAAazwD,EAAQo4C,eAAertC,MAEzEsiE,IAEXj8E,SAAQi8E,gBAAkBA,eAC1B,IAAIvc,kBAAkC,WAClC,QAASA,MAYT,MAVAA,GAAiBl5D,UAAU8W,OAAS,SAAU06B,EAAMppC,GAChD,GAAIm/C,GAAShoD,KAAKy5D,UAAUxnB,EAC5B,OAAOl6B,KAAI/J,cAAc,IAAK,KAC1B+J,IAAI/J,cAAc,UAAYmoE,qBAAsBlkC,YAAgB8hC,UAASzyC,MAAO80C,qBAAsBnkC,YAAgB8hC,UAASvyC,MAAOi3B,kBAAmBxmB,EAAK12B,cAAem9C,iBAAkBzmB,EAAKz2B,SAAU3T,EAAGmgD,EAAQC,GAAID,EAAQE,GAAIF,IAC7On/C,EAAQo4C,eAAehP,KAE/B0nB,EAAiBl5D,UAAUg5D,UAAY,SAAUxnB,GAC7C,GAAI7xC,GAAIR,KAAK+E,IAAIstC,EAAKlmC,KAAKhJ,MAAOkvC,EAAKlmC,KAAK/I,OAC5C,OAAO5C,GAAI,EAAIA,EAAI,EAAI,GAEpBu5D,IAEX1/D,SAAQ0/D,iBAAmBA,gBAC3B,IAAIhB,qBAAqC,WACrC,QAASA,MAOT,MALAA,GAAoBl4D,UAAU8W,OAAS,SAAU06B,EAAMppC,GACnD,MAAOkP,KAAI/J,cAAc,IAAK,KAC1B+J,IAAI/J,cAAc,QAAUmoE,qBAAsBlkC,YAAgB8hC,UAASzyC,MAAO80C,qBAAsBnkC,YAAgB8hC,UAASvyC,MAAOi3B,kBAAmBxmB,EAAK12B,cAAem9C,iBAAkBzmB,EAAKz2B,SAAU3Y,EAAG,IAAKC,EAAG,IAAKC,MAAOnD,KAAKiF,IAAIotC,EAAKlmC,KAAKhJ,MAAO,GAAIC,OAAQpD,KAAKiF,IAAIotC,EAAKlmC,KAAK/I,OAAQ,KACxS6F,EAAQo4C,eAAehP,KAExB0mB,IAEX1+D,SAAQ0+D,oBAAsBA,oB;;;;;;;ACzC9B5+D,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBoO,QAAU,mBAAApO,CAAQ,GAMlBuyB,kBAAoB,GAAIpkB,aAAYhO,gBAAgB,SAAUkb,GAC9DA,EAAKjN,QAAQjM,MAAMwB,qBAAqB0nE,WAAW,SAAU58D,GACzD,MAAO,YACH,MAAO,IAAI4P,SAAQ,SAAUC,GACzBA,EAAQ7P,EAAQ0a,UAAUziB,IAAI0H,QAAQjM,MAAMuB,oBAK5D7D,SAAQgxB,QAAU0B,kB;;;;;;;ACjBlB,GAAI5sB,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,KAEvDoyC,UAAaz6C,MAAQA,KAAKy6C,WAAc,SAAUjK,EAASkK,EAAYC,EAAGC,GAC1E,MAAO,KAAKD,IAAMA,EAAIliC,UAAU,SAAUC,EAASC,GAC/C,QAASkiC,GAAU3gD,GAAS,IAAM4gD,EAAKF,EAAU7/B,KAAK7gB,IAAW,MAAOgL,GAAKyT,EAAOzT,IACpF,QAAS61C,GAAS7gD,GAAS,IAAM4gD,EAAKF,EAAiB,MAAE1gD,IAAW,MAAOgL,GAAKyT,EAAOzT,IACvF,QAAS41C,GAAKvwC,GAAUA,EAAO+3B,KAAO5pB,EAAQnO,EAAOrQ,OAAS,GAAIygD,GAAE,SAAUjiC,GAAWA,EAAQnO,EAAOrQ,SAAWwa,KAAKmmC,EAAWE,GACnID,GAAMF,EAAYA,EAAU/4C,MAAM2uC,EAASkK,QAAmB3/B,WAGlEigC,YAAeh7C,MAAQA,KAAKg7C,aAAgB,SAAUxK,EAASrzB,GAG/D,QAAS89B,GAAKnqC,GAAK,MAAO,UAAU5I,GAAK,MAAO4yC,IAAMhqC,EAAG5I,KACzD,QAAS4yC,GAAKI,GACV,GAAI9hB,EAAG,KAAM,IAAIzL,WAAU,kCAC3B,MAAOwtB,GAAG,IACN,GAAI/hB,EAAI,EAAGt2B,IAAM+N,EAAI/N,EAAU,EAARo4C,EAAG,GAAS,SAAWA,EAAG,GAAK,QAAU,YAAcrqC,EAAIA,EAAE1N,KAAKL,EAAGo4C,EAAG,KAAK5Y,KAAM,MAAOzxB,EAEjH,QADI/N,EAAI,EAAG+N,IAAGqqC,GAAM,EAAGrqC,EAAE3W,QACjBghD,EAAG,IACP,IAAK,GAAG,IAAK,GAAGrqC,EAAIqqC,CAAI,MACxB,KAAK,GAAc,MAAXC,GAAEC,SAAkBlhD,MAAOghD,EAAG,GAAI5Y,MAAM,EAChD,KAAK,GAAG6Y,EAAEC,QAASt4C,EAAIo4C,EAAG,GAAIA,GAAM,EAAI,SACxC,KAAK,GAAGA,EAAKC,EAAEE,IAAIC,MAAOH,EAAEI,KAAKD,KAAO,SACxC,SACI,GAAMzqC,EAAIsqC,EAAEI,OAAM1qC,EAAIA,EAAEtR,OAAS,GAAKsR,EAAEA,EAAEtR,OAAS,MAAkB,IAAV27C,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEC,EAAI,CAAG,UACjG,GAAc,IAAVD,EAAG,MAAcrqC,GAAMqqC,EAAG,GAAKrqC,EAAE,IAAMqqC,EAAG,GAAKrqC,EAAE,IAAM,CAAEsqC,EAAEC,MAAQF,EAAG,EAAI,OAC9E,GAAc,IAAVA,EAAG,IAAYC,EAAEC,MAAQvqC,EAAE,GAAI,CAAEsqC,EAAEC,MAAQvqC,EAAE,GAAIA,EAAIqqC,CAAI,OAC7D,GAAIrqC,GAAKsqC,EAAEC,MAAQvqC,EAAE,GAAI,CAAEsqC,EAAEC,MAAQvqC,EAAE,GAAIsqC,EAAEE,IAAIp5C,KAAKi5C,EAAK,OACvDrqC,EAAE,IAAIsqC,EAAEE,IAAIC,MAChBH,EAAEI,KAAKD,KAAO,UAEtBJ,EAAK/9B,EAAKha,KAAKqtC,EAAS2K,GAC1B,MAAOj2C,GAAKg2C,GAAM,EAAGh2C,GAAIpC,EAAI,EAAK,QAAUs2B,EAAIvoB,EAAI,EACtD,GAAY,EAARqqC,EAAG,GAAQ,KAAMA,GAAG,EAAI,QAAShhD,MAAOghD,EAAG,GAAKA,EAAG,OAAK,GAAQ5Y,MAAM,GAvB9E,GAAsGlJ,GAAGt2B,EAAG+N,EAAGyP,EAA3G66B,GAAMC,MAAO,EAAGI,KAAM,WAAa,GAAW,EAAP3qC,EAAE,GAAQ,KAAMA,GAAE,EAAI,OAAOA,GAAE,IAAO0qC,QAAUF,OAC3F,OAAO/6B,IAAMvF,KAAMkgC,EAAK,GAAIQ,MAASR,EAAK,GAAIS,OAAUT,EAAK,IAAwB,kBAAXx+C,UAA0B6jB,EAAE7jB,OAAOszC,UAAY,WAAa,MAAO/vC,QAAUsgB,EAyB3JvmB,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBi8E,QAAU,mBAAAj8E,CAAQ,KAClBoO,QAAU,mBAAApO,CAAQ,GAClBmrC,iBAAmB,mBAAAnrC,CAAQ,IAC3BsR,eAAiB,mBAAAtR,CAAQ,GACzBirC,YAAc,mBAAAjrC,CAAQ,IACtBsQ,SAAW,mBAAAtQ,CAAQ,GACnBgsD,sBAAwB,mBAAAhsD,CAAQ,IAChC6xC,iBAAmB,mBAAA7xC,CAAQ,IAC3B+rD,eAAiB,mBAAA/rD,CAAQ,IACzBisD,QAAU,mBAAAjsD,CAAQ,IAClBksD,eAAiB,mBAAAlsD,CAAQ,IACzB60C,eAAiB,mBAAA70C,CAAQ,IACzBmsD,aAAe,mBAAAnsD,CAAQ,IACvBosD,SAAW,mBAAApsD,CAAQ,IACnBk8E,gBAAkB,mBAAAl8E,CAAQ,IAM1Bm8E,iBAAkC,SAAU50E,GAE5C,QAAS40E,GAAiBjjE,EAAkBkyB,EAAuBwB,EAAeh+B,EAAQwtE,EAAeC,EAAoBC,GACzH,GAAI90E,GAAQD,EAAOwB,KAAKnD,KAAMsT,EAAkBkyB,EAAuBwB,IAAkBhnC,IAmBzF,OAlBA4B,GAAMoH,OAASA,EACfpH,EAAM40E,cAAgBA,EACtB50E,EAAM60E,mBAAqBA,EAC3B70E,EAAM80E,aAAeA,EACrB90E,EAAMklD,aACF78C,KAAM,OACNzK,GAAI,QAERoC,EAAM+0E,cACFC,eAAgB,GAAIN,iBAAgB3uB,eAAe/lD,EAAMklD,cAQ7DllD,EAAMi1E,kBACCj1E,EAmRX,MAxSA7B,WAAUw2E,EAAkB50E,GAuB5B5H,OAAOC,eAAeu8E,EAAiB91E,UAAW,SAC9CK,IAAK,WACD,MAAOd,MAAK8mD,aAEhBpjD,IAAK,SAAUpC,GACXtB,KAAK82E,SAASx1E,IAElBF,YAAY,EACZC,cAAc,IAElBk1E,EAAiB91E,UAAUkJ,WAAa,SAAUC,GAC9CjI,EAAOlB,UAAUkJ,WAAWxG,KAAKnD,KAAM4J,GAEvCA,EAASE,gBAAgBq8C,eAAe9Z,oBAExCziC,EAASuF,SAASi3C,sBAAsB//B,qBAAqBpK,KAAMjc,MACnE4J,EAASuF,SAASk3C,QAAQh/B,wBAAwBpL,KAAMjc,MACxD4J,EAASuF,SAASq3C,SAAS7pB,qBAAqB1gB,KAAMjc,MACtD4J,EAASuF,SAASq3C,SAAS1pB,wBAAwB7gB,KAAMjc,OAK7Du2E,EAAiB91E,UAAUq2E,SAAW,SAAUlxD,GAK5C,MAJA5lB,MAAK8mD,YAAclhC,EACnB5lB,KAAK22E,cACDC,eAAgB,GAAIN,iBAAgB3uB,eAAe/hC,IAEhD5lB,KAAK+2E,YAAYnxD,GAAS,IAOrC2wD,EAAiB91E,UAAUu2E,YAAc,SAAUpxD,GAC/C,WAAgBzmB,KAAZymB,EACO5lB,KAAK+2E,YAAY/2E,KAAK8mD,aAAa,IAG1C9mD,KAAK8mD,YAAclhC,EACZ5lB,KAAK+2E,YAAYnxD,GAAS,KAOzC2wD,EAAiB91E,UAAUs2E,YAAc,SAAUnxD,EAASzM,GACxD,GAAInZ,KAAKgnC,cAAcqZ,kBAAmB,CACtC,GAAI42B,GAAW,GAAIZ,SAAQa,QAG3B,OAFAl3E,MAAK62E,eAAe50E,KAAKg1E,GACzBj3E,KAAKsT,iBAAiBmB,SAAS,GAAI2xC,uBAAsBjgC,oBAAoBP,IACtEqxD,EAASE,QAGhB,MAAOn3E,MAAKo3E,cAAcxxD,EAASzM,IAO3Co9D,EAAiB91E,UAAU22E,cAAgB,SAAUxxD,EAASzM,EAAQ5X,GAClE,MAAOk5C,WAAUz6C,SAAM,OAAQ,GAAQ,WACnC,GAAIq3E,GAAcC,EAAS/vB,EAAwBgwB,EAASnrC,CAC5D,OAAO4O,aAAYh7C,KAAM,SAAU4D,GAC/B,OAAQA,EAAGw3C,OACP,IAAK,GACD,OAA4Bj8C,KAAtBa,KAAK02E,aAA6B,OAAQ,EAAa,EAC7D9yE,GAAGw3C,MAAQ,CACf,KAAK,GAGD,MAFAx3C,GAAG23C,KAAKt5C,MAAM,EAAG,EAAG,CAAE,IACtBo1E,EAAer3E,KAAK02E,aAAatvC,OAAOxhB,EAASrkB,GAC3C81E,YAAwB5+D,UACtB,EAAa4+D,IAD2B,EAAa,EAEjE,KAAK,GAED,MADAzxD,GAAUhiB,EAAG43C,QACL,EAAa,EACzB,KAAK,OACoBr8C,KAAjBk4E,IACAzxD,EAAUyxD,GACdzzE,EAAGw3C,MAAQ,CACf,KAAK,GAAG,OAAQ,EAAa,EAC7B,KAAK,GAGD,MAFAk8B,GAAU1zE,EAAG43C,OACbx7C,KAAKgJ,OAAOC,MAAMjJ,KAAMs3E,EAAQzpE,WAAYypE,EAAQE,QAC5C,EAAa,EACzB,KAAK,GAKD,MAJAjwB,GAAyBvnD,KAAKunD,wBAC9BvnD,KAAKunD,uBAAyB3hC,EAAQ3b,KACtCstE,EAAUv3E,KAAK62E,eACf72E,KAAK62E,kBACC19D,GAAUyM,EAAQ3b,OAASs9C,IACjCnb,EAAQ/sC,MAAMwS,QAAQsH,GAAUA,EAASyM,GACjC,EAAa5lB,KAAKsT,iBAAiBmB,SAAS,GAAI0xC,gBAAeha,kBAAkBC,OAFvB,EAAa,EAGnF,KAAK,GAED,MADAxoC,GAAG43C,QACK,EAAa,GACzB,KAAK,GAAG,OAAQ,EAAax7C,KAAKsT,iBAAiBmB,SAAS,GAAI4wB,aAAY1f,eAAeC,IAC3F,KAAK,GACDhiB,EAAG43C,OACH53C,EAAGw3C,MAAQ,EACf,KAAK,IAED,MADAm8B,GAAQh1E,QAAQ,SAAUnC,GAAK,MAAOA,GAAEsY,aAChC,SAQ5B69D,EAAiB91E,UAAU4qC,aAAe,SAAUC,GAChD,GAAIhqC,GAAOtB,KAAK8mD,WAEhB,OADA7a,kBAAiBZ,aAAa/pC,EAAMgqC,GAC7BtrC,KAAK+2E,YAAYz1E,EAAMgqC,IAKlCirC,EAAiB91E,UAAUg3E,YAAc,SAAU93D,GAE/C,IAAK,GADD2rB,MACK3nC,EAAK,EAAG+zE,EAAa/3D,EAAUhc,EAAK+zE,EAAWn4E,OAAQoE,IAAM,CAClE,GAAIuB,GAAIwyE,EAAW/zE,GACfg0E,EAAOzyE,MACU/F,KAAjBw4E,EAAK14E,aAA2CE,KAAlBw4E,EAAK/8C,SACnC0Q,EAAQrpC,MACJypC,MAAOisC,EAAK14E,QACZ0sC,cAAegsC,EAAK/8C,eAGPz7B,KAAZw4E,EAAKn4E,IACV8rC,EAAQrpC,MACJypC,MAAOisC,EACPhsC,cAAe3rC,KAAK8mD,YAAYtnD,KAI5C,MAAOQ,MAAKqrC,aAAaC,IAK7BirC,EAAiB91E,UAAUm3E,eAAiB,SAAUj4D,GAClD,GAAI2rB,MACA/pC,EAAQ,GAAImJ,UAASxH,WACzB3B,GAAMQ,IAAI/B,KAAK8mD,YACf,KAAK,GAAInjD,GAAK,EAAGk0E,EAAal4D,EAAUhc,EAAKk0E,EAAWt4E,OAAQoE,IAAM,CAClE,GAAIuB,GAAI2yE,EAAWl0E,GACfg0E,EAAOzyE,CACX,QAAuB/F,KAAnBw4E,EAAKrtE,eAA6CnL,KAAlBw4E,EAAK/8C,SAAwB,CAC7D,GAAI37B,GAAUsC,EAAMwC,QAAQ4zE,EAAKrtE,eACjBnL,KAAZF,GACAqsC,EAAQrpC,MACJu4B,KAAMv7B,EACNwsC,aAAcksC,EAAK/8C,eAI1B,CACD,GAAI37B,GAAUsC,EAAMwC,QAAQ4zE,OACZx4E,KAAZF,GACAqsC,EAAQrpC,MACJu4B,KAAMv7B,EACNwsC,aAAczrC,KAAK8mD,YAAYtnD,MAK/C,MAAOQ,MAAKqrC,aAAaC,IAG7BirC,EAAiB91E,UAAU8I,OAAS,SAAUC,GAC1C,OAAQA,EAAOoR,MACX,IAAKyqB,aAAY3f,mBAAmBzJ,KAChCjc,KAAK83E,mBAAmBtuE,EACxB,MACJ,KAAK48C,uBAAsB//B,qBAAqBpK,KAC5Cjc,KAAKonD,qBAAqB59C,EAC1B,MACJ,KAAK68C,SAAQh/B,wBAAwBpL,KACjCjc,KAAK+3E,wBAAwBvuE,EAC7B,MACJ,KAAKylC,gBAAe7yB,gBAAgBH,KAChCjc,KAAKqnD,sBAAsB79C,EAC3B,MACJ,KAAKg9C,UAAS7pB,qBAAqB1gB,KAC/Bjc,KAAKg4E,2BAA2BxuE,EAChC,MACJ,KAAKg9C,UAAS1pB,wBAAwB7gB,KAClCjc,KAAKi4E,8BAA8BzuE,KAI/C+sE,EAAiB91E,UAAUq3E,mBAAqB,SAAUtuE,GAClDxJ,KAAKw2E,gBACLx2E,KAAK8mD,YAAc9mD,KAAKw2E,cAAc0B,SAASl4E,KAAK22E,aAAc32E,KAAK8mD,cAC3E9mD,KAAK+2E,YAAY/2E,KAAK8mD,aAAa,IAEvCyvB,EAAiB91E,UAAU2mD,qBAAuB,SAAU59C,GACxD,GAAIlI,GAAOtB,KAAK8mD,YACZvlD,EAAQ,GAAImJ,UAASxH,WACzB3B,GAAMQ,IAAIT,EACV,KAAK,GAAIqC,GAAK,EAAGC,EAAK4F,EAAOmC,OAAQhI,EAAKC,EAAGrE,OAAQoE,IAAM,CACvD,GAAItD,GAAIuD,EAAGD,GACP1E,EAAUsC,EAAMwC,QAAQ1D,EAAEiK,eACdnL,KAAZF,GACAe,KAAKwnD,YAAYvoD,EAASoB,EAAE2L,WAEpC,OAA0B7M,KAAtBqK,EAAO+c,WACP,IAAK,GAAIonB,GAAK,EAAGC,EAAKpkC,EAAO+c,WAAYonB,EAAKC,EAAGruC,OAAQouC,IAAM,CAC3D,GAAIroC,GAAIsoC,EAAGD,GACP1uC,EAAUsC,EAAMwC,QAAQuB,EAAEgF,eACdnL,KAAZF,GACAe,KAAKynD,eAAexoD,EAASqG,EAAEoiD,cAG3C1nD,KAAKo3E,cAAc91E,GAAM,EAAMC,IAEnCg1E,EAAiB91E,UAAU+mD,YAAc,SAAUvoD,EAAS+M,GACxD,GAAI9G,GAAIjG,CACRiG,GAAE4G,UAAajJ,EAAGmJ,EAAUnJ,EAAGC,EAAGkJ,EAAUlJ,GAC5CoC,EAAE6G,MAAShJ,MAAOiJ,EAAUjJ,MAAOC,OAAQgJ,EAAUhJ,SAEzDuzE,EAAiB91E,UAAUgnD,eAAiB,SAAUxoD,EAASyoD,GACnDzoD,EACNkhC,WAAct9B,EAAG6kD,EAAa7kD,EAAGC,EAAG4kD,EAAa5kD,IAEvDyzE,EAAiB91E,UAAUs3E,wBAA0B,SAAUvuE,GAC3D,OAAgCrK,KAA5Ba,KAAKy2E,mBAAkC,CACvC,GAAIx3E,GAAUyM,eAAerB,YAAYrK,KAAK8mD,YAAat9C,EAAOc,WAC9D4xC,EAAYl8C,KAAKy2E,mBAAmB0B,cAAc3uE,EAAQvK,OAC5CE,KAAd+8C,IACAA,EAAU94C,aAAeoG,EAAOmC,OAChC3L,KAAKsT,iBAAiBmB,SAAS,GAAI4xC,SAAQ/+B,oBAAoB40B,OAI3Eq6B,EAAiB91E,UAAU4mD,sBAAwB,SAAU79C,GACzD,GAAI0pC,GAAO,GAAIC,OAAM3pC,EAAO4O,MAAQnO,KAAM,4BAC1Cs8C,cAAahV,OAAO2B,EAAM,gBAE9BqjC,EAAiB91E,UAAUu3E,2BAA6B,SAAUxuE,GAC9D,OAA2BrK,KAAvBa,KAAKw2E,cAA6B,CAClCx2E,KAAK22E,aAAaC,eAAe/0E,MAAM2H,EACvC,IAAI4uE,GAAgBp4E,KAAKw2E,cAAc0B,SAASl4E,KAAK22E,aAAc32E,KAAK8mD,YACxE9mD,MAAKg3E,YAAYoB,KAGzB7B,EAAiB91E,UAAUw3E,8BAAgC,SAAUzuE,GACjE,OAA2BrK,KAAvBa,KAAKw2E,cAA6B,CAC9BhtE,EAAOuzB,QAIP/8B,KAAK22E,aAAaC,eAAe9uB,aAErC,IAAIswB,GAAgBp4E,KAAKw2E,cAAc0B,SAASl4E,KAAK22E,aAAc32E,KAAK8mD,YACxE9mD,MAAKg3E,YAAYoB,KAGzB7B,EAAmBhvE,YACfgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMC,oBAC5C4L,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMK,wBAC5CwL,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMoC,gBAC5CyJ,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMkB,UAC5C2K,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMiC,0BAA2B4J,QAAQ,EAAGG,YAAYtN,YAC9FmN,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAM2B,sBAAuBkK,QAAQ,EAAGG,YAAYtN,YAC1FmN,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMqB,qBAAsBwK,QAAQ,EAAGG,YAAYtN,YACzF+M,WAAW,qBAAsBjO,OAAQwrC,iBAAiB3oC,sBAAuB7C,OAAQA,OAAQA,OAAQA,OAAQA,UAClHw8E,IAELjwB,eAAexoD,YACjB7D,SAAQs8E,iBAAmBA,iB;;;;;;;AC1X3B,GAAIhvE,YAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,GAE5DG,WAAchI,MAAQA,KAAKgI,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZH,UAAoD,kBAArBA,SAAQI,SAAyB,MAAOJ,SAAQI,SAASF,EAAGC,IAEtGE,QAAWpI,MAAQA,KAAKoI,SAAY,SAAUC,EAAYC,GAC1D,MAAO,UAAUb,EAAQC,GAAOY,EAAUb,EAAQC,EAAKW,IAE3DtO,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtB22E,UAAY,mBAAA32E,CAAQ,IACpBoO,QAAU,mBAAApO,CAAQ,GAClBi+E,cAA+B,WAC/B,QAASA,GAAcC,EAAUx/D,EAAMk4B,EAAQP,EAASC,GACpD1wC,KAAKs4E,SAAWA,EAChBt4E,KAAK8Y,KAAOA,EACZ9Y,KAAKgxC,OAASA,EACdhxC,KAAKywC,QAAUA,EACfzwC,KAAK0wC,OAASA,EACd1wC,KAAK4a,KAAOy9D,EAAcp8D,KAG9B,MADAo8D,GAAcp8D,KAAO,UACdo8D,IAEXp+E,SAAQo+E,cAAgBA,aAIxB,IAAIE,kBAAkC,WAClC,QAASA,GAAiBC,EAAqBloC,GAC3CtwC,KAAKw4E,oBAAsBA,EAC3Bx4E,KAAKswC,SAAWA,EA6DpB,MA3DAioC,GAAiB93E,UAAUwI,MAAQ,SAAUunC,EAASC,GAElD,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE3B3D,MAAKswC,UAAYygC,UAAUrzE,SAASuL,OACpCjJ,KAAKy4E,QAAQjoC,EAASC,EAASsgC,UAAUrzE,SAASuL,MAAOynC,IAEjE6nC,EAAiB93E,UAAU2lC,KAAO,SAAUoK,EAASC,GAEjD,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE3B3D,MAAKswC,UAAYygC,UAAUrzE,SAAS0oC,MACpCpmC,KAAKy4E,QAAQjoC,EAASC,EAASsgC,UAAUrzE,SAAS0oC,KAAMsK,IAEhE6nC,EAAiB93E,UAAUkwC,KAAO,SAAUH,EAASC,GAEjD,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE3B3D,MAAKswC,UAAYygC,UAAUrzE,SAASizC,MACpC3wC,KAAKy4E,QAAQjoC,EAASC,EAASsgC,UAAUrzE,SAASizC,KAAMD,IAEhE6nC,EAAiB93E,UAAU2Y,IAAM,SAAUo3B,EAASC,GAEhD,IAAK,GADDC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE/B,IAAI3D,KAAKswC,UAAYygC,UAAUrzE,SAAS0b,IAEpC,IACI,GAAI43B,GAA4B,gBAAZR,GAAuBA,EAAQpxC,YAAYoQ,KAAO8gB,OAAOkgB,EAC7EM,SAAQ13B,IAAIvX,MAAM2uC,GAAUQ,EAAS,KAAOP,GAASr8B,OAAOs8B,IAEhE,MAAOznC,MAGfsvE,EAAiB93E,UAAUg4E,QAAU,SAAUjoC,EAASC,EAASH,EAAUI,GACvE,GAAIgoC,GAAO,GAAIznC,MACXznC,EAAS,GAAI6uE,eAActH,UAAUrzE,SAAS4yC,GAAWooC,EAAKxnC,qBAAyC,gBAAZV,GAAuBA,EAAQpxC,YAAYoQ,KAAO8gB,OAAOkgB,GAAUC,EAASC,EAAOliC,IAAI,SAAUlO,GAAK,MAAOqmC,MAAKC,UAAUtmC,KAC3NN,MAAKw4E,sBAAsB9jE,KAAK,SAAUikE,GACtC,IACIA,EAAYpvE,OAAOC,GAEvB,MAAOP,GACH,IACI6nC,QAAQ13B,IAAIvX,MAAM2uC,GAAUC,EAASjnC,EAAQP,IAEjD,MAAOA,SAInBsvE,EAAmBhxE,YACfgB,YAAY9N,aACZ2N,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMwB,sBAC5CqK,QAAQ,EAAGG,YAAYxN,OAAOyN,QAAQjM,MAAMmB,WAC5CsK,WAAW,qBAAsB0K,SAAUie,UAC5C4nD,KAGPt+E,SAAQs+E,iBAAmBA,iB;;;;;;;AClG3B,GAAIx4E,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,QAGnF+G,WAAcvH,MAAQA,KAAKuH,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HvH,GAAvHwH,EAAI9F,UAAUvC,OAAQsI,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO5N,OAAO+N,yBAAyBL,EAAQC,GAAOC,CACrH,IAAuB,gBAAZI,UAAoD,kBAArBA,SAAQhM,SAAyB8L,EAAIE,QAAQhM,SAASyL,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIlI,GAAI+H,EAAWjI,OAAS,EAAGE,GAAK,EAAGA,KAASW,EAAIoH,EAAW/H,MAAIoI,GAAKD,EAAI,EAAIxH,EAAEyH,GAAKD,EAAI,EAAIxH,EAAEqH,EAAQC,EAAKG,GAAKzH,EAAEqH,EAAQC,KAASG,EAChJ,OAAOD,GAAI,GAAKC,GAAK9N,OAAOC,eAAeyN,EAAQC,EAAKG,GAAIA,EAEhE9N,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIqO,aAAc,mBAAAnO,CAAQ,GACtBw+E,iBAAmB,mBAAAx+E,CAAQ,IAK3By+E,uBAAwC,SAAUl3E,GAElD,QAASk3E,KACL,MAAkB,QAAXl3E,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KA6B/D,MA/BAD,WAAU84E,EAAwBl3E,GAIlCk3E,EAAuBp4E,UAAUq4E,OAAS,SAAUC,GAChD,GAAIn3E,GAAQ5B,IACZ+4E,GAAUr2B,iBAAiB,UAAW,SAAUryC,GAC5CzO,EAAMslD,gBAAgB72C,EAAMI,QAEhCsoE,EAAUr2B,iBAAiB,QAAS,SAAUryC,GAC1CzO,EAAMoH,OAAOC,MAAMrH,EAAO,uBAAwByO,KAEtDrQ,KAAK+4E,UAAYA,GAErBF,EAAuBp4E,UAAUu4E,WAAa,WACtCh5E,KAAK+4E,YACL/4E,KAAK+4E,UAAUt7D,QACfzd,KAAK+4E,cAAY55E,KAGzB05E,EAAuBp4E,UAAUwmD,YAAc,SAAUxW,GACrD,IAAIzwC,KAAK+4E,UAIL,KAAM,IAAI53E,OAAM,6BAHhBnB,MAAK+4E,UAAUE,KAAKtyC,KAAKC,UAAU6J,KAM3CooC,EAAyBtxE,YACrBgB,YAAY9N,cACbo+E,IAELD,iBAAiBhyB,cACnB3sD,SAAQ4+E,uBAAyBA,uB;;;;;;;ACzDjC9+E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GAKtD,IAAIg9E,UAA0B,WAC1B,QAASA,KACL,GAAIt1E,GAAQ5B,IACZA,MAAKm3E,QAAU,GAAI1+D,SAAQ,SAAUC,EAASC,GAC1C/W,EAAM8W,QAAUA,EAChB9W,EAAM+W,OAASA,IAGvB,MAAOu+D,KAEXj9E,SAAQi9E,SAAWA,S;;;;;;;ACdnB,QAASgC,KAAIC,EAAKC,EAAOC,GACrB,OACIF,IAAKA,EACLC,MAAOA,EACPC,KAAMA,GAId,QAASC,OAAM1xE,GACX,MAAO,OAASA,EAAEuxE,IAAM,IAAMvxE,EAAEwxE,MAAQ,IAAMxxE,EAAEyxE,KAAO,IAV3Dt/E,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAQtDD,QAAQi/E,IAAMA,IAIdj/E,QAAQq/E,MAAQA,KAChB,IAAIC,UAA0B,WAC1B,QAASA,GAASC,GACdx5E,KAAKw5E,MAAQA,EAOjB,MALAD,GAAS94E,UAAUg5E,SAAW,SAAU5oE,GACpCA,EAAIjR,KAAKiF,IAAI,EAAGjF,KAAK+E,IAAI,UAAYkM,GACrC,IAAIpR,GAAIG,KAAKC,MAAMgR,EAAI7Q,KAAKw5E,MAAMj6E,OAClC,OAAOS,MAAKw5E,MAAM/5E,IAEf85E,IAEXt/E,SAAQs/E,SAAWA,S;;;;;;ACCnB,QAASG,gBAAevrD,GACtB,GAAIA,IAAawrD,iBAAiBxrD,GAChC,KAAM,IAAIhtB,OAAM,qBAAuBgtB,GA8K3C,QAASyrD,kBAAiBhrD,GACxB,MAAOA,GAAO/gB,SAAS7N,KAAKmuB,UAG9B,QAAS0rD,2BAA0BjrD,GACjC5uB,KAAK85E,aAAelrD,EAAOrvB,OAAS,EACpCS,KAAK+5E,WAAa/5E,KAAK85E,aAAe,EAAI,EAG5C,QAASE,4BAA2BprD,GAClC5uB,KAAK85E,aAAelrD,EAAOrvB,OAAS,EACpCS,KAAK+5E,WAAa/5E,KAAK85E,aAAe,EAAI,EAtM5C,GAAI3sD,QAAS,mBAAA/yB,CAAQ,IAAU+yB,OAE3BwsD,iBAAmBxsD,OAAOmB,YACzB,SAASH,GACP,OAAQA,GAAYA,EAASgB,eAC3B,IAAK,MAAO,IAAK,OAAQ,IAAK,QAAS,IAAK,QAAS,IAAK,SAAU,IAAK,SAAU,IAAK,OAAQ,IAAK,QAAS,IAAK,UAAW,IAAK,WAAY,IAAK,MAAO,OAAO,CAClK,SAAS,OAAO,IAmBrBy3C,cAAgB3sE,QAAQ2sE,cAAgB,SAASz4C,GAGnD,OAFAnuB,KAAKmuB,UAAYA,GAAY,QAAQgB,cAAclY,QAAQ,OAAQ,IACnEyiE,eAAevrD,GACPnuB,KAAKmuB,UACX,IAAK,OAEHnuB,KAAKi6E,cAAgB,CACrB,MACF,KAAK,OACL,IAAK,UAEHj6E,KAAKi6E,cAAgB,EACrBj6E,KAAKk6E,qBAAuBL,yBAC5B,MACF,KAAK,SAEH75E,KAAKi6E,cAAgB,EACrBj6E,KAAKk6E,qBAAuBF,0BAC5B,MACF,SAEE,YADAh6E,KAAKwd,MAAQo8D,kBAMjB55E,KAAKm6E,WAAa,GAAIhtD,QAAO,GAE7BntB,KAAK85E,aAAe,EAEpB95E,KAAK+5E,WAAa,EAapBnT,eAAcnmE,UAAU+c,MAAQ,SAASoR,GAGvC,IAFA,GAAIwrD,GAAU,GAEPp6E,KAAK+5E,YAAY,CAEtB,GAAIM,GAAazrD,EAAOrvB,QAAUS,KAAK+5E,WAAa/5E,KAAK85E,aACrD95E,KAAK+5E,WAAa/5E,KAAK85E,aACvBlrD,EAAOrvB,MAMX,IAHAqvB,EAAOD,KAAK3uB,KAAKm6E,WAAYn6E,KAAK85E,aAAc,EAAGO,GACnDr6E,KAAK85E,cAAgBO,EAEjBr6E,KAAK85E,aAAe95E,KAAK+5E,WAE3B,MAAO,EAITnrD,GAASA,EAAOlY,MAAM2jE,EAAWzrD,EAAOrvB,QAGxC66E,EAAUp6E,KAAKm6E,WAAWzjE,MAAM,EAAG1W,KAAK+5E,YAAYlsE,SAAS7N,KAAKmuB,SAGlE,IAAImsD,GAAWF,EAAQvmD,WAAWumD,EAAQ76E,OAAS,EACnD,MAAI+6E,GAAY,OAAUA,GAAY,OAAtC,CAQA,GAHAt6E,KAAK85E,aAAe95E,KAAK+5E,WAAa,EAGhB,IAAlBnrD,EAAOrvB,OACT,MAAO66E,EAET,OAVEp6E,KAAK+5E,YAAc/5E,KAAKi6E,cACxBG,EAAU,GAadp6E,KAAKk6E,qBAAqBtrD,EAE1B,IAAIS,GAAMT,EAAOrvB,MACbS,MAAK+5E,aAEPnrD,EAAOD,KAAK3uB,KAAKm6E,WAAY,EAAGvrD,EAAOrvB,OAASS,KAAK85E,aAAczqD,GACnEA,GAAOrvB,KAAK85E,cAGdM,GAAWxrD,EAAO/gB,SAAS7N,KAAKmuB,SAAU,EAAGkB,EAE7C,IAAIA,GAAM+qD,EAAQ76E,OAAS,EACvB+6E,EAAWF,EAAQvmD,WAAWxE,EAElC,IAAIirD,GAAY,OAAUA,GAAY,MAAQ,CAC5C,GAAIvuE,GAAO/L,KAAKi6E,aAKhB,OAJAj6E,MAAK+5E,YAAchuE,EACnB/L,KAAK85E,cAAgB/tE,EACrB/L,KAAKm6E,WAAWxrD,KAAK3uB,KAAKm6E,WAAYpuE,EAAM,EAAGA,GAC/C6iB,EAAOD,KAAK3uB,KAAKm6E,WAAY,EAAG,EAAGpuE,GAC5BquE,EAAQjwE,UAAU,EAAGklB,GAI9B,MAAO+qD,IAOTxT,cAAcnmE,UAAUy5E,qBAAuB,SAAStrD,GAMtD,IAJA,GAAInvB,GAAKmvB,EAAOrvB,QAAU,EAAK,EAAIqvB,EAAOrvB,OAInCE,EAAI,EAAGA,IAAK,CACjB,GAAImI,GAAIgnB,EAAOA,EAAOrvB,OAASE,EAK/B,IAAS,GAALA,GAAUmI,GAAK,GAAK,EAAM,CAC5B5H,KAAK+5E,WAAa,CAClB,OAIF,GAAIt6E,GAAK,GAAKmI,GAAK,GAAK,GAAM,CAC5B5H,KAAK+5E,WAAa,CAClB,OAIF,GAAIt6E,GAAK,GAAKmI,GAAK,GAAK,GAAM,CAC5B5H,KAAK+5E,WAAa,CAClB,QAGJ/5E,KAAK85E,aAAer6E,GAGtBmnE,cAAcnmE,UAAU4uB,IAAM,SAAST,GACrC,GAAIvX,GAAM,EAIV,IAHIuX,GAAUA,EAAOrvB,SACnB8X,EAAMrX,KAAKwd,MAAMoR,IAEf5uB,KAAK85E,aAAc,CACrB,GAAIS,GAAKv6E,KAAK85E,aACV7pD,EAAMjwB,KAAKm6E,WACX/Q,EAAMppE,KAAKmuB,QACf9W,IAAO4Y,EAAIvZ,MAAM,EAAG6jE,GAAI1sE,SAASu7D,GAGnC,MAAO/xD,I;;;;;;ACxMTa,OAAOje,SACLugF,MAAQ,EACRC,MAAQ,EACRC,IAAM,EACNC,KAAO,EACPC,OAAS,EACTC,IAAM,EACNC,KAAO,EACP1uC,OAAS,EACT2uC,QAAU,EACVC,MAAQ,EACRC,UAAY,EACZC,MAAQ,EACRrqB,OAAS,EACThmD,QAAU,EACVswE,OAAS,EACTC,KAAO,G;;;;;;;AChBTrhF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAImhF,aACJ,SAAWA,GACP,QAAS36E,GAAO40D,GACZ,OACIgmB,QAAShmB,GAGjB+lB,EAAW36E,OAASA,GACrB26E,WAAaphF,QAAQohF,aAAephF,QAAQohF,eAC/C,IAAIE,QACJ,SAAWA,GACP,GAAIC,IAAgBF,QAAS,aAC7BC,GAAME,KAAO,WAAc,MAAOD,KACnCD,MAAQthF,QAAQshF,QAAUthF,QAAQshF,UACrC,IAAIG,cAA8B,WAC9B,QAASA,MAgET,MA9DAA,GAAaj7E,UAAUsB,IAAM,SAAUqpC,EAAUviC,EAAS8yE,GACtD,GAAI/5E,GAAQ5B,SACI,KAAZ6I,IAAsBA,EAAU,MAC/B7I,KAAK47E,aACN57E,KAAK47E,cACL57E,KAAK67E,cAET77E,KAAK47E,WAAW35E,KAAKmpC,GACrBprC,KAAK67E,UAAU55E,KAAK4G,GAChBxJ,MAAMwS,QAAQ8pE,IACdA,EAAO15E,MAAOq5E,QAAS,WAAc,MAAO15E,GAAMO,OAAOipC,EAAUviC,OAG3E6yE,EAAaj7E,UAAU0B,OAAS,SAAUipC,EAAUviC,GAEhD,OADgB,KAAZA,IAAsBA,EAAU,MAC/B7I,KAAK47E,WAAV,CAIA,IAAK,GADDE,IAAoC,EAC/Br8E,EAAI,EAAG8W,EAAMvW,KAAK47E,WAAWr8E,OAAQE,EAAI8W,EAAK9W,IACnD,GAAIO,KAAK47E,WAAWn8E,KAAO2rC,EAAU,CACjC,GAAIprC,KAAK67E,UAAUp8E,KAAOoJ,EAItB,MAFA7I,MAAK47E,WAAW15E,OAAOzC,EAAG,OAC1BO,MAAK67E,UAAU35E,OAAOzC,EAAG,EAIzBq8E,IAAoC,EAIhD,GAAIA,EACA,KAAM,IAAI36E,OAAM,uFAGxBu6E,EAAaj7E,UAAUs7E,OAAS,WAE5B,IAAK,GADDh6D,MACKpe,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpCoe,EAAKpe,GAAM7B,UAAU6B,EAEzB,KAAK3D,KAAK47E,WACN,QAGJ,KAAK,GADDtpD,MAAU0pD,EAAYh8E,KAAK47E,WAAWllE,MAAM,GAAIulE,EAAWj8E,KAAK67E,UAAUnlE,MAAM,GAC3EjX,EAAI,EAAG8W,EAAMylE,EAAUz8E,OAAQE,EAAI8W,EAAK9W,IAC7C,IACI6yB,EAAIrwB,KAAK+5E,EAAUv8E,GAAGoC,MAAMo6E,EAASx8E,GAAIsiB,IAE7C,MAAO7c,GACH4rC,QAAQ7nC,MAAM/D,GAGtB,MAAOotB,IAEXopD,EAAaj7E,UAAUy7E,QAAU,WAC7B,OAAQl8E,KAAK47E,YAAyC,IAA3B57E,KAAK47E,WAAWr8E,QAE/Cm8E,EAAaj7E,UAAU66E,QAAU,WAC7Bt7E,KAAK47E,eAAaz8E,GAClBa,KAAK67E,cAAY18E,IAEdu8E,KAEPS,QAAyB,WACzB,QAASA,GAAQC,GACbp8E,KAAKo8E,SAAWA,EAuDpB,MArDAriF,QAAOC,eAAemiF,EAAQ17E,UAAW,SAKrCK,IAAK,WACD,GAAIc,GAAQ5B,IA0BZ,OAzBKA,MAAKq8E,SACNr8E,KAAKq8E,OAAS,SAAU/rE,EAAUgsE,EAAUC,GACnC36E,EAAMg6E,aACPh6E,EAAMg6E,WAAa,GAAIF,eAEvB95E,EAAMw6E,UAAYx6E,EAAMw6E,SAASI,oBAAsB56E,EAAMg6E,WAAWM,WACxEt6E,EAAMw6E,SAASI,mBAAmB56E,GAEtCA,EAAMg6E,WAAW75E,IAAIuO,EAAUgsE,EAC/B,IAAI/xE,EAaJ,OAZAA,IACI+wE,QAAS,WACL15E,EAAMg6E,WAAWz5E,OAAOmO,EAAUgsE,GAClC/xE,EAAO+wE,QAAUa,EAAQM,MACrB76E,EAAMw6E,UAAYx6E,EAAMw6E,SAASM,sBAAwB96E,EAAMg6E,WAAWM,WAC1Et6E,EAAMw6E,SAASM,qBAAqB96E,KAI5CvC,MAAMwS,QAAQ0qE,IACdA,EAAYt6E,KAAKsI,GAEdA,IAGRvK,KAAKq8E,QAEhBj7E,YAAY,EACZC,cAAc,IAMlB86E,EAAQ17E,UAAUk8E,KAAO,SAAUtsE,GAC3BrQ,KAAK47E,YACL57E,KAAK47E,WAAWG,OAAO54E,KAAKnD,KAAK47E,WAAYvrE,IAGrD8rE,EAAQ17E,UAAU66E,QAAU,WACpBt7E,KAAK47E,aACL57E,KAAK47E,WAAWN,UAChBt7E,KAAK47E,eAAaz8E,KAG1Bg9E,EAAQM,MAAQ,aACTN,IAEXliF,SAAQkiF,QAAUA,Q;;;;;;;AC3IlB,QAASS,SAAQ1iF,GACb,OAAiB,IAAVA,IAA4B,IAAVA,EAG7B,QAASm0B,QAAOn0B,GACZ,MAAgC,oBAAzB2T,SAAS1K,KAAKjJ,GAGzB,QAAS2iF,QAAO3iF,GACZ,MAAgC,oBAAzB2T,SAAS1K,KAAKjJ,GAGzB,QAAS+O,OAAM/O,GACX,MAAgC,mBAAzB2T,SAAS1K,KAAKjJ,GAGzB,QAASo7D,MAAKp7D,GACV,MAAgC,sBAAzB2T,SAAS1K,KAAKjJ,GAGzB,QAAS2d,OAAM3d,GACX,MAAOmF,OAAMwS,QAAQ3X,GAGzB,QAAS4iF,aAAY5iF,GACjB,MAAO2d,OAAM3d,IAAUA,EAAM6iF,MAAM,SAAUC,GAAQ,MAAO3uD,QAAO2uD,KA3BvEjjF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI2T,UAAW9T,OAAO0G,UAAUoN,QAIhC5T,SAAQ2iF,QAAUA,QAIlB3iF,QAAQo0B,OAASA,OAIjBp0B,QAAQ4iF,OAASA,OAIjB5iF,QAAQgP,MAAQA,MAIhBhP,QAAQq7D,KAAOA,KAIfr7D,QAAQ4d,MAAQA,MAIhB5d,QAAQ6iF,YAAcA,Y;;;;;;;oDClBtB,QAAShyD,UAAShZ,GACd,IAAK,GAAIxR,KAAKwR,GAAQ7X,QAAQsG,eAAeD,KAAIrG,QAAQqG,GAAKwR,EAAExR,IAwIpE,QAAS28E,0BAAyBC,EAAeC,EAAen0E,EAAQo0E,GAoBpE,QAASC,GAAsB79E,GAC3B,MAAO,OAASA,EAAGqO,WAEvB,QAASyvE,GAAuB99E,GAC5B,MAAW,QAAPA,EACO,kBAAoB+9E,GAA8B1vE,WAGlD,OAASrO,EAAGqO,WAG3B,QAAS2vE,KACL,MAAO,UAAYC,GAA2B5vE,WAElD,QAAS6vE,GAAkBp8D,EAAOmvB,GAC1BktC,WAAWC,iBAAiBntC,GAC5BnvB,EAAM5d,IAAI25E,EAAsB5sC,EAAQjxC,IAAKixC,GAExCktC,WAAWE,kBAAkBptC,GAClCnvB,EAAM5d,IAAI45E,EAAuB7sC,EAAQjxC,IAAKixC,GAG9CnvB,EAAM5d,IAAI85E,IAA8B/sC,GAGhD,QAASqtC,GAAmBC,IAG5B,QAASC,KACL,MAAOv2D,KAAUw2D,gBAAgBC,UAErC,QAASC,KACL,MAAO12D,KAAUw2D,gBAAgBG,OAErC,QAASC,KACL,MAAO52D,KAAUw2D,gBAAgBK,SAErC,QAASC,KACD92D,IAAUw2D,gBAAgBO,KAAO/2D,IAAUw2D,gBAAgBC,YAC3Dz2D,EAAQw2D,gBAAgBG,OACxBK,EAAa9B,SAAKx9E,KAK1B,QAASu/E,GAAiBz1E,GACtB01E,EAAahC,MAAM1zE,MAAO9J,OAAWA,KAEzC,QAASy/E,GAAkBnuE,GACvBkuE,EAAahC,KAAKlsE,GAMtB,QAASouE,KACDC,GAA+B,IAAtBC,EAAahzE,OAG1B+yE,EAAQpsC,aAAa,WACjBosC,MAAQ3/E,GACR6/E,OAGR,QAASA,KACL,GAA0B,IAAtBD,EAAahzE,KAAjB,CAGA,GAAI0kC,GAAUsuC,EAAa1W,OAC3B,KACQsV,WAAWC,iBAAiBntC,GAC5BwuC,EAAcxuC,GAETktC,WAAWuB,sBAAsBzuC,GACtC0uC,EAAmB1uC,GAEdktC,WAAWE,kBAAkBptC,GAClC2uC,EAAe3uC,GAGf4uC,EAAqB5uC,GAG7B,QACIouC,MA2BR,QAASI,GAAcK,GAMnB,QAASC,GAAMC,EAAe9lD,EAAQ+lD,GAClC,GAAIhvC,IACAivC,QAASt9D,EACT5iB,GAAI8/E,EAAe9/E,GAEnBggF,aAAyB7B,YAAWgC,cACpClvC,EAAQxnC,MAAQu2E,EAAcI,SAG9BnvC,EAAQlmC,WAA2B,KAAlBi1E,EAA2B,KAAOA,EAEvDK,EAAqBpvC,EAAS/W,EAAQ+lD,GACtCtC,EAAc3/D,MAAMizB,GAExB,QAASqvC,GAAW72E,EAAOywB,EAAQ+lD,GAC/B,GAAIhvC,IACAivC,QAASt9D,EACT5iB,GAAI8/E,EAAe9/E,GACnByJ,MAAOA,EAAM22E,SAEjBC,GAAqBpvC,EAAS/W,EAAQ+lD,GACtCtC,EAAc3/D,MAAMizB,GA1BxB,IAAI4tC,IAAJ,CA0CA0B,EAAqBT,EACrB,IACIr1E,GACA+1E,EAFA/gF,EAAUghF,EAAgBX,EAAe5lD,OAGzCz6B,KACAgL,EAAOhL,EAAQgL,KACf+1E,EAAiB/gF,EAAQykC,QAE7B,IAAI+7C,GAAYxuC,KAAKivC,KACrB,IAAIF,GAAkBG,EAAoB,CACtC,GAAIC,GAAqB,GAAIC,gBAAeC,wBACxCC,EAAajwD,OAAOgvD,EAAe9/E,GACvCghF,GAAcD,GAAcH,CAC5B,KACI,GAAIK,OAAgB,EAEhBA,OAD0B,KAA1BnB,EAAe5uC,YAA+B,KAATzmC,GAA2C,IAAxBA,EAAKy2E,eAC7CV,EACVA,EAAeI,EAAmBO,OAClCR,EAAmBb,EAAe5lD,OAAQ0mD,EAAmBO,OAE9DC,GAAG/oE,MAAMynE,EAAe5uC,cAAqB,KAATzmC,GAAmBA,EAAKy2E,eAAiB,GAClEV,EACVA,EAAen+E,UAAM,GAAQy9E,EAAe5uC,OAAOt8B,QAAQgsE,EAAmBO,SAAWR,EAAmBt+E,UAAM,IAASy9E,EAAe5lD,QAAQtlB,OAAOkrE,EAAe5uC,QAAS0vC,EAAmBO,SAG1LX,EACVA,EAAeV,EAAe5uC,OAAQ0vC,EAAmBO,OACzDR,EAAmBb,EAAe5lD,OAAQ4lD,EAAe5uC,OAAQ0vC,EAAmBO,MAE9F,IAAIxJ,GAAUsJ,CACTA,GAIItJ,EAAQziE,KACbyiE,EAAQziE,KAAK,SAAU8qE,SACZgB,GAAcD,GACrBhB,EAAMC,EAAeF,EAAe5lD,OAAQ+lD,IAC7C,SAAUx2E,SACFu3E,GAAcD,GACjBt3E,YAAiB00E,YAAWgC,cAC5BG,EAAW72E,EAAOq2E,EAAe5lD,OAAQ+lD,GAEpCx2E,GAAS23E,GAAGvyD,OAAOplB,EAAMwnC,SAC9BqvC,EAAW,GAAInC,YAAWgC,cAAchC,WAAWkD,WAAWC,cAAe,WAAaxB,EAAe5lD,OAAS,yBAA2BzwB,EAAMwnC,SAAU6uC,EAAe5lD,OAAQ+lD,GAGpLK,EAAW,GAAInC,YAAWgC,cAAchC,WAAWkD,WAAWC,cAAe,WAAaxB,EAAe5lD,OAAS,uDAAwD4lD,EAAe5lD,OAAQ+lD,YAKlMe,GAAcD,GACrBhB,EAAMkB,EAAenB,EAAe5lD,OAAQ+lD,WAtBrCe,GAAcD,GA7CjC,SAAsBh2E,EAAQmvB,EAAQ+lD,OAGnB,KAAXl1E,IACAA,EAAS,KAEb,IAAIkmC,IACAivC,QAASt9D,EACT5iB,GAAI8/E,EAAe9/E,GACnB+K,OAAQA,EAEZs1E,GAAqBpvC,EAAS/W,EAAQ+lD,GACtCtC,EAAc3/D,MAAMizB,IAkCCgwC,EAAenB,EAAe5lD,OAAQ+lD,IAwB3D,MAAOx2E,SACIu3E,GAAcD,GACjBt3E,YAAiB00E,YAAWgC,cAC5BJ,EAAMt2E,EAAOq2E,EAAe5lD,OAAQ+lD,GAE/Bx2E,GAAS23E,GAAGvyD,OAAOplB,EAAMwnC,SAC9BqvC,EAAW,GAAInC,YAAWgC,cAAchC,WAAWkD,WAAWC,cAAe,WAAaxB,EAAe5lD,OAAS,yBAA2BzwB,EAAMwnC,SAAU6uC,EAAe5lD,OAAQ+lD,GAGpLK,EAAW,GAAInC,YAAWgC,cAAchC,WAAWkD,WAAWC,cAAe,WAAaxB,EAAe5lD,OAAS,uDAAwD4lD,EAAe5lD,OAAQ+lD,QAKzMK,GAAW,GAAInC,YAAWgC,cAAchC,WAAWkD,WAAWE,eAAgB,oBAAsBzB,EAAe5lD,QAAS4lD,EAAe5lD,OAAQ+lD,IAG3J,QAASL,GAAe4B,GACpB,IAAI3C,IAIJ,GAA2B,OAAvB2C,EAAgBxhF,GACZwhF,EAAgB/3E,MAChBD,EAAOC,MAAM,qDAAuD09B,KAAKC,UAAUo6C,EAAgB/3E,UAAO9J,GAAW,IAGrH6J,EAAOC,MAAM,oFAGhB,CACD,GAAIvB,GAAM4oB,OAAO0wD,EAAgBxhF,IAC7ByhF,EAAkBC,EAAiBx5E,EAEvC,IADAy5E,EAAsBH,EAAiBC,GACnCA,EAAiB,OACVC,GAAiBx5E,EACxB,KACI,GAAIs5E,EAAgB/3E,MAAO,CACvB,GAAIA,GAAQ+3E,EAAgB/3E,KAC5Bg4E,GAAgBtoE,OAAO,GAAIglE,YAAWgC,cAAc12E,EAAM8gB,KAAM9gB,EAAMwnC,QAASxnC,EAAMwH,WAEpF,QAA+B,KAA3BuwE,EAAgBz2E,OAIrB,KAAM,IAAIpJ,OAAM,uBAHhB8/E,GAAgBvoE,QAAQsoE,EAAgBz2E,SAMhD,MAAOtB,GACCA,EAAMwnC,QACNznC,EAAOC,MAAM,qBAAuBg4E,EAAgBvnD,OAAS,0BAA4BzwB,EAAMwnC,SAG/FznC,EAAOC,MAAM,qBAAuBg4E,EAAgBvnD,OAAS,6BAMjF,QAASylD,GAAmB1uC,GACxB,IAAI4tC,IAAJ,CAIA,GACI+C,GADAn3E,MAAO9K,EAEX,IAAIsxC,EAAQ/W,SAAW2nD,mBAAmBp3E,KAAKyvB,OAC3C0nD,EAAsB,SAAU1wC,GAC5B,GAAIlxC,GAAKkxC,EAAOlxC,GACZqL,EAAS21E,EAAclwD,OAAO9wB,GAC9BqL,IACAA,EAAOy2E,cAId,CACD,GAAIriF,GAAUsiF,EAAqB9wC,EAAQ/W,OACvCz6B,KACAmiF,EAAsBniF,EAAQykC,QAC9Bz5B,EAAOhL,EAAQgL,MAGvB,GAAIm3E,GAAuBI,EACvB,IACIC,EAA0BhxC,OACH,KAAnBA,EAAQC,YAA+B,KAATzmC,GAA2C,IAAxBA,EAAKy2E,eACtDU,EAAsBA,IAAwBI,EAAwB/wC,EAAQ/W,QAEzEknD,GAAG/oE,MAAM44B,EAAQC,cAAqB,KAATzmC,GAAmBA,EAAKy2E,eAAiB,GAC3EU,EAAsBA,EAAoBv/E,UAAM,GAAQ4uC,EAAQC,QAAU8wC,EAAwB3/E,UAAM,IAAS4uC,EAAQ/W,QAAQtlB,OAAOq8B,EAAQC,SAGhJ0wC,EAAsBA,EAAoB3wC,EAAQC,QAAU8wC,EAAwB/wC,EAAQ/W,OAAQ+W,EAAQC,QAGpH,MAAOznC,GACCA,EAAMwnC,QACNznC,EAAOC,MAAM,yBAA2BwnC,EAAQ/W,OAAS,0BAA4BzwB,EAAMwnC,SAG3FznC,EAAOC,MAAM,yBAA2BwnC,EAAQ/W,OAAS,8BAKjEgoD,GAA6B/E,KAAKlsC,IAG1C,QAAS4uC,GAAqB5uC,GAC1B,IAAKA,EAED,WADAznC,GAAOC,MAAM,0BAGjBD,GAAOC,MAAM,6EAA+E09B,KAAKC,UAAU6J,EAAS,KAAM,GAE1H,IAAIuwC,GAAkBvwC,CACtB,IAAImwC,GAAGvyD,OAAO2yD,EAAgBxhF,KAAOohF,GAAG/D,OAAOmE,EAAgBxhF,IAAK,CAChE,GAAIkI,GAAM4oB,OAAO0wD,EAAgBxhF,IAC7BmiF,EAAkBT,EAAiBx5E,EACnCi6E,IACAA,EAAgBhpE,OAAO,GAAIxX,OAAM,uEAI7C,QAASygF,GAAoBnxC,GACzB,GAAIqZ,IAAU+3B,MAAMC,KAAQC,EAA5B,CAGA,GAAItxE,OAAOtR,EACP2qD,KAAU+3B,MAAMG,SAAWvxC,EAAQC,SACnCjgC,EAAO,WAAak2B,KAAKC,UAAU6J,EAAQC,OAAQ,KAAM,GAAK,QAElEqxC,EAAO3oE,IAAI,oBAAsBq3B,EAAQ/W,OAAS,OAAS+W,EAAQjxC,GAAK,MAAOiR,IAEnF,QAASwxE,GAAsBxxC,GAC3B,GAAIqZ,IAAU+3B,MAAMC,KAAQC,EAA5B,CAGA,GAAItxE,OAAOtR,EACP2qD,KAAU+3B,MAAMG,UAEZvxE,EADAggC,EAAQC,OACD,WAAa/J,KAAKC,UAAU6J,EAAQC,OAAQ,KAAM,GAAK,OAGvD,+BAGfqxC,EAAO3oE,IAAI,yBAA2Bq3B,EAAQ/W,OAAS,KAAMjpB,IAEjE,QAASovE,GAAqBpvC,EAAS/W,EAAQ+lD,GAC3C,GAAI31B,IAAU+3B,MAAMC,KAAQC,EAA5B,CAIIj4B,IAAU+3B,MAAMG,UACZvxC,EAAQxnC,OAASwnC,EAAQxnC,MAAMwH,KACxB,eAAiBk2B,KAAKC,UAAU6J,EAAQxnC,MAAMwH,KAAM,KAAM,GAAK,OAGlEggC,EAAQlmC,OACD,WAAao8B,KAAKC,UAAU6J,EAAQlmC,OAAQ,KAAM,GAAK,WAEvC,KAAlBkmC,EAAQxnC,OACN,2BAInB84E,EAAO3oE,IAAI,qBAAuBsgB,EAAS,OAAS+W,EAAQjxC,GAAK,gCAAkCyxC,KAAKivC,MAAQT,GAAa,OAEjI,QAASM,GAAqBtvC,GAC1B,GAAIqZ,IAAU+3B,MAAMC,KAAQC,EAA5B,CAGA,GAAItxE,OAAOtR,EACP2qD,KAAU+3B,MAAMG,SAAWvxC,EAAQC,SACnCjgC,EAAO,WAAak2B,KAAKC,UAAU6J,EAAQC,OAAQ,KAAM,GAAK,QAElEqxC,EAAO3oE,IAAI,qBAAuBq3B,EAAQ/W,OAAS,OAAS+W,EAAQjxC,GAAK,MAAOiR,IAEpF,QAASgxE,GAA0BhxC,GAC/B,GAAIqZ,IAAU+3B,MAAMC,KAAQC,GAAUtxC,EAAQ/W,SAAWwoD,qBAAqBj4E,KAAKyvB,OAAnF,CAGA,GAAIjpB,OAAOtR,EACP2qD,KAAU+3B,MAAMG,UAEZvxE,EADAggC,EAAQC,OACD,WAAa/J,KAAKC,UAAU6J,EAAQC,OAAQ,KAAM,GAAK,OAGvD,+BAGfqxC,EAAO3oE,IAAI,0BAA4Bq3B,EAAQ/W,OAAS,KAAMjpB,IAElE,QAAS0wE,GAAsB1wC,EAASwwC,GACpC,GAAIn3B,IAAU+3B,MAAMC,KAAQC,EAA5B,CAGA,GAAItxE,OAAOtR,EAcX,IAbI2qD,IAAU+3B,MAAMG,UACZvxC,EAAQxnC,OAASwnC,EAAQxnC,MAAMwH,KAC/BA,EAAO,eAAiBk2B,KAAKC,UAAU6J,EAAQxnC,MAAMwH,KAAM,KAAM,GAAK,OAGlEggC,EAAQlmC,OACRkG,EAAO,WAAak2B,KAAKC,UAAU6J,EAAQlmC,OAAQ,KAAM,GAAK,WAEvC,KAAlBkmC,EAAQxnC,QACbwH,EAAO,4BAIfwwE,EAAiB,CACjB,GAAIh4E,GAAQwnC,EAAQxnC,MAAQ,oBAAsBwnC,EAAQxnC,MAAMwnC,QAAU,KAAOA,EAAQxnC,MAAM8gB,KAAO,KAAO,EAC7Gg4D,GAAO3oE,IAAI,sBAAwB6nE,EAAgBvnD,OAAS,OAAS+W,EAAQjxC,GAAK,UAAYyxC,KAAKivC,MAAQe,EAAgBkB,YAAc,MAAQl5E,EAAOwH,OAGxJsxE,GAAO3oE,IAAI,qBAAuBq3B,EAAQjxC,GAAK,oCAAqCiR,IAG5F,QAAS2xE,KACL,GAAIjE,IACA,KAAM,IAAIkE,iBAAgBC,iBAAiBlE,OAAQ,wBAEvD,IAAIC,IACA,KAAM,IAAIgE,iBAAgBC,iBAAiBhE,SAAU,2BAG7D,QAASiE,KACL,GAAIvE,IACA,KAAM,IAAIqE,iBAAgBC,iBAAiBE,iBAAkB,mCAGrE,QAASC,KACL,IAAKzE,IACD,KAAM,IAAI78E,OAAM,wBAGxB,QAASuhF,GAAgB7xB,GACrB,WAAc,KAAVA,EACO,KAGAA,EAGf,QAAS8xB,GAAqB14E,EAAMymC,GAChC,GAAInmC,GACAm2E,EAAiBz2E,EAAKy2E,cAC1B,QAAQA,GACJ,IAAK,GACDn2E,EAAS,IACT,MACJ,KAAK,GACDA,EAASm4E,EAAgBhyC,EAAO,GAChC,MACJ,SACInmC,IACA,KAAK,GAAI9K,GAAI,EAAGA,EAAIixC,EAAOnxC,QAAUE,EAAIihF,EAAgBjhF,IACrD8K,EAAOtI,KAAKygF,EAAgBhyC,EAAOjxC,IAEvC,IAAIixC,EAAOnxC,OAASmhF,EAChB,IAAK,GAAIjhF,GAAIixC,EAAOnxC,OAAQE,EAAIihF,EAAgBjhF,IAC5C8K,EAAOtI,KAAK,MAK5B,MAAOsI,GAjfX,GAQIu0E,GAKAiD,EAbAa,EAAiB,EACjBnF,EAA4B,EAC5BF,EAA+B,EAC/Bn7D,EAAU,MACV+9D,MAAqBhhF,GACrB8gF,EAAkBlmF,OAAO2G,OAAO,MAChC8gF,MAA0BriF,GAC1BoiF,EAAuBxnF,OAAO2G,OAAO,MAErCq+E,EAAe,GAAI8D,aAAYC,UAC/B5B,EAAmBnnF,OAAO2G,OAAO,MACjC8/E,EAAgBzmF,OAAO2G,OAAO,MAC9BopD,EAAQ+3B,MAAMC,IAEdr6D,EAAQw2D,gBAAgBO,IACxBG,EAAe,GAAIoE,UAAS5G,QAC5BsC,EAAe,GAAIsE,UAAS5G,QAC5BuF,EAA+B,GAAIqB,UAAS5G,QAC5C6G,EAAiB,GAAID,UAAS5G,OAoDlCe,GAAc+F,QAAQ1E,GACtBrB,EAAcgG,QAAQxE,GACtBvB,EAAc8F,QAAQ1E,GACtBpB,EAAc+F,QAAQtE,EAiCtB,IAAIxzC,GAAW,SAAUqF,GACrB,IAGI,GAAIktC,WAAWuB,sBAAsBzuC,IAAYA,EAAQ/W,SAAW2nD,mBAAmBp3E,KAAKyvB,OAAQ,CAChG,GAAIhyB,GAAM21E,EAAsB5sC,EAAQC,OAAOlxC,IAC3C2jF,EAAWpE,EAAaj+E,IAAI4G,EAChC,IAAIi2E,WAAWC,iBAAiBuF,GAAW,CACvC,GAAIC,GAAWhG,GAAYA,EAASU,mBAAqBV,EAASU,mBAAmBqF,EAAUrF,OAAsBA,EACrH,IAAIsF,QAAgC,KAAnBA,EAASn6E,WAAwC,KAApBm6E,EAAS74E,QAKnD,MAJAw0E,GAAal7E,OAAO6D,GACpB07E,EAAS5jF,GAAK2jF,EAAS3jF,GACvBqgF,EAAqBuD,EAAU3yC,EAAQ/W,OAAQuX,KAAKivC,WACpD/C,GAAc3/D,MAAM4lE,IAKhC1F,EAAkBqB,EAActuC,GAEpC,QACIouC,MAoXJwE,GACAC,iBAAkB,SAAUr5E,GAExB,IAAK,GADDymC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE/By+E,IACA,IACImB,EACJ,IAAI3C,GAAGvyD,OAAOpkB,GAEV,OADSA,EACDymC,EAAOnxC,QACX,IAAK,GACDgkF,EAAgB,IAChB,MACJ,KAAK,GACDA,EAAgB7yC,EAAO,EACvB,MACJ,SACI6yC,EAAgB7yC,MAKfzmC,GAAKyvB,OACd6pD,EAAgBZ,EAAqB14E,EAAMymC,EAE/C,IAAI8yC,IACA9D,QAASt9D,EACTsX,OAAQknD,GAAGvyD,OAAOpkB,GAAQA,EAAOA,EAAKyvB,OACtCgX,OAAQ6yC,EAEZtB,GAAsBuB,GACtBrG,EAAc3/D,MAAMgmE,IAExBC,eAAgB,SAAUx5E,EAAMy5B,GAC5B0+C,IACIxB,GAAGtrB,KAAKrrD,GACRu3E,EAA0Bv3E,EAErBy5B,IACDk9C,GAAGvyD,OAAOpkB,GACVs3E,EAAqBt3E,IAAUA,SAAM9K,GAAWukC,QAASA,GAGzD69C,EAAqBt3E,EAAKyvB,SAAYzvB,KAAMA,EAAMy5B,QAASA,KAIvEggD,YAAa,SAAUz5E,GAEnB,IAAK,GADDymC,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,EAAK,GAAK7B,UAAU6B,EAE/By+E,KACAK,GACA,IAAI/oD,GACA6pD,EACA5C,MAAQxhF,EACZ,IAAIyhF,GAAGvyD,OAAOpkB,GAEV,OADAyvB,EAASzvB,EACDymC,EAAOnxC,QACX,IAAK,GACDgkF,EAAgB,IAChB,MACJ,KAAK,GAEGlD,eAAesD,kBAAkB1+C,GAAGyL,EAAO,KAC3C6yC,EAAgB,KAChB5C,EAAQjwC,EAAO,IAGf6yC,EAAgBb,EAAgBhyC,EAAO,GAE3C,MACJ,SACI,GAAI2c,GAAO3c,EAAOnxC,OAAS,CACvB8gF,gBAAesD,kBAAkB1+C,GAAGyL,EAAO2c,KAC3CszB,EAAQjwC,EAAO2c,GAEXk2B,EADkB,IAAlB7yC,EAAOnxC,OACSmjF,EAAgBhyC,EAAO,IAGvBA,EAAOh6B,MAAM,EAAG22C,GAAM7+C,IAAI,SAAUtU,GAAS,MAAOwoF,GAAgBxoF,MAIxFqpF,EAAgB7yC,EAAOliC,IAAI,SAAUtU,GAAS,MAAOwoF,GAAgBxoF,SAKhF,CACDw/B,EAASzvB,EAAKyvB,OACd6pD,EAAgBZ,EAAqB14E,EAAMymC,EAC3C,IAAIgwC,GAAiBz2E,EAAKy2E,cAC1BC,GAAQN,eAAesD,kBAAkB1+C,GAAGyL,EAAOgwC,IAAmBhwC,EAAOgwC,OAAkBvhF,GAEnG,GAAIK,GAAKojF,IACLr4E,EAAS,GAAIkO,SAAQ,SAAUC,EAASC,GACxC,GAAI2mE,IACAI,QAASt9D,EACT5iB,GAAIA,EACJk6B,OAAQA,EACRgX,OAAQ6yC,GAERtC,GAAoBvnD,OAAQA,EAAQyoD,WAAYlxC,KAAKivC,MAAOxnE,QAASA,EAASC,OAAQA,EAC1FipE,GAAoBtC,EACpB,KACInC,EAAc3/D,MAAM8hE,GAExB,MAAOp6E,GAEH+7E,EAAgBtoE,OAAO,GAAIglE,YAAWgC,cAAchC,WAAWkD,WAAW+C,kBAAmB1+E,EAAEurC,QAAUvrC,EAAEurC,QAAU,mBACrHwwC,EAAkB,KAElBA,IACAC,EAAiB5wD,OAAO9wB,IAAOyhF,IAQvC,OALIN,IACAA,EAAMkD,wBAAwB,WAC1BR,EAAWC,iBAAiBjC,mBAAmBp3E,MAAQzK,GAAIA,MAG5D+K,GAEXu5E,UAAW,SAAU75E,EAAMy5B,GACvB0+C,IACIxB,GAAGtrB,KAAKrrD,GACRk2E,EAAqBl2E,EAEhBy5B,IACDk9C,GAAGvyD,OAAOpkB,GACVg2E,EAAgBh2E,IAAUA,SAAM9K,GAAWukC,QAASA,GAGpDu8C,EAAgBh2E,EAAKyvB,SAAYzvB,KAAMA,EAAMy5B,QAASA,KAIlEomB,MAAO,SAAUi6B,EAAQC,EAASV,OACL,KAArBA,IAA+BA,GAAmB,GACtDx5B,EAAQi6B,EAEJhC,EADAj4B,IAAU+3B,MAAMC,QACP3iF,GAGA6kF,GAETV,GAAqBnF,KAAeE,KACpCgF,EAAWC,iBAAiBW,qBAAqBh6E,MAAQ/P,MAAO2nF,MAAMh0E,SAASk2E,MAGvFb,QAASvE,EAAatuE,MACtB4yE,QAASxE,EAAapuE,MACtB6zE,wBAAyBxC,EAA6BrxE,MACtD8zE,UAAWnB,EAAe3yE,MAC1BirE,QAAS,WACL,IAAI+C,IAAJ,CAGA52D,EAAQw2D,gBAAgBK,SACxB0E,EAAerG,SAAKx9E,GACpB,IAAI8J,GAAQ,GAAI9H,OAAM,2BACtBpH,QAAOw/B,KAAK2nD,GAAkB3+E,QAAQ,SAAUmF,GAC5Cw5E,EAAiBx5E,GAAKiR,OAAO1P,KAEjCi4E,EAAmBnnF,OAAO2G,OAAO,MACjC8/E,EAAgBzmF,OAAO2G,OAAO,MAC9Bq+E,EAAe,GAAI8D,aAAYC,UAE3BlC,GAAGtrB,KAAK6nB,EAAc7B,UACtB6B,EAAc7B,UAEdsF,GAAGtrB,KAAK4nB,EAAc5B,UACtB4B,EAAc5B,YAGtBxC,OAAQ,WACJsJ,IACAG,IACA96D,EAAQw2D,gBAAgBC,UACxBhB,EAAcpE,OAAO1tC,IAEzBlW,QAAS,WACL4b,QAAQ13B,IAAI,YASpB,OANAiqE,GAAWI,eAAevB,qBAAqBj4E,KAAM,SAAUymC,GACvDoZ,IAAU+3B,MAAMC,KAAQC,GAG5BA,EAAO3oE,IAAIs3B,EAAOD,QAASqZ,IAAU+3B,MAAMG,QAAUtxC,EAAO0zC,YAAUjlF,MAEnEkkF,EAEX,QAASgB,iBAAgBnqF,GACrB,WAAwB,KAAjBA,EAAM4+E,YAAoC,KAAf5+E,EAAM81B,KAE5C,QAASs0D,iBAAgBpqF,GACrB,WAAuB,KAAhBA,EAAMsjB,WAAkC,KAAdtjB,EAAMm1B,IAE3C,QAASk1D,yBAAwBn4C,EAAOo4C,EAAQx7E,EAAQo0E,GAGpD,MAAOH,0BAFMoH,gBAAgBj4C,GAASA,EAAQ,GAAIq4C,iBAAgBC,oBAAoBt4C,GACzEk4C,gBAAgBE,GAAUA,EAAS,GAAIG,iBAAgBC,oBAAoBJ,GACxCx7E,EAAQo0E,GAr1B5D,GAAIr9E,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAMvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI0mF,IAAK,mBAAAxmF,CAAQ,KACbujF,WAAa,mBAAAvjF,CAAQ,IACzBH,SAAQ4qF,YAAclH,WAAWkH,YACjC5qF,QAAQ6qF,aAAenH,WAAWmH,aAClC7qF,QAAQ8qF,aAAepH,WAAWoH,aAClC9qF,QAAQ+qF,aAAerH,WAAWqH,aAClC/qF,QAAQgrF,aAAetH,WAAWsH,aAClChrF,QAAQirF,aAAevH,WAAWuH,aAClCjrF,QAAQkrF,aAAexH,WAAWwH,aAClClrF,QAAQmrF,aAAezH,WAAWyH,aAClCnrF,QAAQorF,aAAe1H,WAAW0H,aAClCprF,QAAQqrF,aAAe3H,WAAW2H,aAClCrrF,QAAQsrF,aAAe5H,WAAW4H,aAClCtrF,QAAQ0lF,cAAgBhC,WAAWgC,cACnC1lF,QAAQ4mF,WAAalD,WAAWkD,WAChC5mF,QAAQurF,iBAAmB7H,WAAW6H,iBACtCvrF,QAAQwrF,kBAAoB9H,WAAW8H,kBACvCxrF,QAAQyrF,kBAAoB/H,WAAW+H,kBACvCzrF,QAAQ0rF,kBAAoBhI,WAAWgI,kBACvC1rF,QAAQ2rF,kBAAoBjI,WAAWiI,kBACvC3rF,QAAQ4rF,kBAAoBlI,WAAWkI,kBACvC5rF,QAAQ6rF,kBAAoBnI,WAAWmI,kBACvC7rF,QAAQ8rF,kBAAoBpI,WAAWoI,kBACvC9rF,QAAQ+rF,kBAAoBrI,WAAWqI,kBACvC/rF,QAAQgsF,kBAAoBtI,WAAWsI,kBACvChsF,QAAQisF,kBAAoBvI,WAAWuI,iBACvC,IAAIzB,iBAAkB,mBAAArqF,CAAQ,IAC9BH,SAAQksF,cAAgB1B,gBAAgB0B,cACxClsF,QAAQyqF,oBAAsBD,gBAAgBC,oBAC9CzqF,QAAQmsF,iBAAmB3B,gBAAgB2B,iBAC3CnsF,QAAQosF,oBAAsB5B,gBAAgB4B,mBAC9C,IAAI1B,iBAAkB,mBAAAvqF,CAAQ,IAC9BH,SAAQqsF,cAAgB3B,gBAAgB2B,cACxCrsF,QAAQ2qF,oBAAsBD,gBAAgBC,oBAC9C3qF,QAAQssF,iBAAmB5B,gBAAgB4B,iBAC3CtsF,QAAQusF,oBAAsB7B,gBAAgB6B,mBAC9C,IAAIzD,UAAW,mBAAA3oF,CAAQ,IACvBH,SAAQohF,WAAa0H,SAAS1H,WAC9BphF,QAAQshF,MAAQwH,SAASxH,MACzBthF,QAAQkiF,QAAU4G,SAAS5G,OAC3B,IAAIkE,gBAAiB,mBAAAjmF,CAAQ,IAC7BH,SAAQqmF,wBAA0BD,eAAeC,wBACjDrmF,QAAQ0pF,kBAAoBtD,eAAesD,iBAC3C,IAAId,aAAc,mBAAAzoF,CAAQ,IAC1B0wB,UAAS,mBAAA1wB,CAAQ,KACjB,IAAIinF,qBACJ,SAAWA,GACPA,EAAmBp3E,KAAO,GAAI0zE,YAAW6H,iBAAiB,oBAC3DnE,qBAAuBA,uBAC1B,IAAIQ,QACJ,SAAWA,GACPA,EAAMA,EAAW,IAAI,GAAK,MAC1BA,EAAMA,EAAgB,SAAI,GAAK,WAC/BA,EAAMA,EAAe,QAAI,GAAK,WAC/BA,MAAQ5nF,QAAQ4nF,QAAU5nF,QAAQ4nF,WACrC,SAAWA,GACP,QAAS/zD,GAAW5zB,GAEhB,OADAA,EAAQA,EAAMi1B,eAEV,IAAK,MACD,MAAO0yD,GAAMC,GACjB,KAAK,WACD,MAAOD,GAAM4E,QACjB,KAAK,UACD,MAAO5E,GAAMG,OACjB,SACI,MAAOH,GAAMC,KAIzB,QAASj0E,GAAS3T,GACd,OAAQA,GACJ,IAAK2nF,GAAMC,IACP,MAAO,KACX,KAAKD,GAAM4E,SACP,MAAO,UACX,KAAK5E,GAAMG,QACP,MAAO,SACX,SACI,MAAO,OAVnBH,EAAM/zD,WAAaA,EAanB+zD,EAAMh0E,SAAWA,GAClBg0E,MAAQ5nF,QAAQ4nF,QAAU5nF,QAAQ4nF,UACrC,IAAIoC,uBACJ,SAAWA,GACPA,EAAqBh6E,KAAO,GAAI0zE,YAAW6H,iBAAiB,2BAC7DvB,qBAAuBhqF,QAAQgqF,uBAAyBhqF,QAAQgqF,yBACnE,IAAI/B,uBACJ,SAAWA,GACPA,EAAqBj4E,KAAO,GAAI0zE,YAAW6H,iBAAiB,2BAC7DtD,qBAAuBjoF,QAAQioF,uBAAyBjoF,QAAQioF,yBACnE,IAAII,mBACJ,SAAWA,GAIPA,EAAiBA,EAAyB,OAAI,GAAK,SAInDA,EAAiBA,EAA2B,SAAI,GAAK,WAIrDA,EAAiBA,EAAmC,iBAAI,GAAK,oBAC9DA,iBAAmBroF,QAAQqoF,mBAAqBroF,QAAQqoF,qBAC3D,IAAID,iBAAiC,SAAU1gF,GAE3C,QAAS0gF,GAAgBt4D,EAAM0mB,GAC3B,GAAI7uC,GAAQD,EAAOwB,KAAKnD,KAAMywC,IAAYzwC,IAG1C,OAFA4B,GAAMmoB,KAAOA,EACbhwB,OAAOmG,eAAe0B,EAAOygF,EAAgB5hF,WACtCmB,EAEX,MAPA7B,WAAUsiF,EAAiB1gF,GAOpB0gF,GACTlhF,MACFlH,SAAQooF,gBAAkBA,eAC1B,IAAIqE,qBACJ,SAAWA,GACP,QAASzhD,GAAG/qC,GACR,GAAIysF,GAAYzsF,CAChB,OAAOysF,IAAa/F,GAAGtrB,KAAKqxB,EAAU7I,oBAE1C4I,EAAmBzhD,GAAKA,GACzByhD,mBAAqBzsF,QAAQysF,qBAAuBzsF,QAAQysF,uBAC/D,IAAIzI,kBACJ,SAAWA,GACPA,EAAgBA,EAAqB,IAAI,GAAK,MAC9CA,EAAgBA,EAA2B,UAAI,GAAK,YACpDA,EAAgBA,EAAwB,OAAI,GAAK,SACjDA,EAAgBA,EAA0B,SAAI,GAAK,YACpDA,kBAAoBA,qBAqsBvBhkF,QAAQsqF,wBAA0BA,wB;;;;;;;;AC71BlC;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yEAAyE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wFAAwF;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8FAA8F;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2FAA2F;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4EAA4E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oGAAoG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4EAA4E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+EAA+E;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qIAAqI;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gEAAgE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oGAAoG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qFAAqF;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iGAAiG;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6GAA6G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4HAA4H;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kIAAkI;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+HAA+H;AAChI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4HAA4H;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+HAA+H;AAChI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2IAA2I;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kIAAkI;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yEAAyE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yHAAyH;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uGAAuG;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mEAAmE;AACpE;AACA;AACA;AACA,CAAC,2FAA2F;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uGAAuG;AACxG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,OADA4B,GAAMsuF,OAASA,EACRtuF,EAUX,MAdA7B,WAAUinG,EAAwBrlG,GAMlCqlG,EAAuBvmG,UAAUw4E,KAAO,SAAUnkC,GAC9C,IACI90C,KAAKkwF,OAAOjX,KAAKnkC,GAErB,MAAO5vC,GACHlF,KAAKkvF,UAAUhqF,KAGhB8hG,GACTvW,SAASwW,4BACXhtG,SAAQ+sG,uBAAyBA,uB;;;;;;;AClCjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gEAAgE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gEAAgE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,UAAU;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8FAA8F;AAC/F;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,2EAA2E,+BAA+B;AAC1G;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wHAAwH,4DAA4D,EAAE;AACtL,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,kBAAkB,qGAAqG,sPAAsP;AAC3Z;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,qBAAqB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qCAAqC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,qCAAqC;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,qCAAqC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,qCAAqC;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,SAAS;AACT;AACA;AACA;AACA;AACA,iCAAiC,sBAAsB,YAAY,mBAAmB,GAAG,+DAA+D;AACxJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kCAAkC,IAAI,QAAQ;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kCAAkC,IAAI,QAAQ;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kCAAkC,IAAI,QAAQ;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kCAAkC,IAAI,QAAQ;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+DAA+D,EAAE;AACjE,SAAS;AACT;AACA;AACA;AACA;AACA,+FAA+F,WAAW;AAC1G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gCAAgC;AACvE;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,iBAAiB,EAAE;AACnB;AACA,iDAAiD,mCAAmC,4BAA4B;AAChH,4CAA4C,8BAA8B,4BAA4B;AACtG;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,4DAA4D;AAClK,uGAAuG,4DAA4D;AACnK;AACA;AACA;AACA;AACA,6DAA6D,oBAAoB,2CAA2C;AAC5H,yBAAyB;AACzB;AACA;AACA,uGAAuG,4DAA4D;AACnK;AACA;AACA,2GAA2G,4DAA4D;AACvK;AACA;AACA;AACA;AACA,6DAA6D,oBAAoB,0DAA0D;AAC3I,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,8BAA8B;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,4BAA4B;AACtF;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,kDAAkD;AACrG;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA,oCAAoC,iBAAiB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iBAAiB;AACrD;AACA,sEAAsE,SAAS,WAAW,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,0CAA0C;AAC1C,4EAA4E,oDAAoD;AAChI;AACA;AACA,uEAAuE,2DAA2D,oBAAoB;AACtJ;AACA;AACA,0CAA0C;AAC1C,+EAA+E,oDAAoD;AACnI;AACA;AACA,4EAA4E,2DAA2D,oBAAoB;AAC3J;AACA;AACA,4EAA4E,2DAA2D,oBAAoB;AAC3J;AACA;AACA,mFAAmF,2DAA2D,oBAAoB;AAClK;AACA;AACA,gFAAgF,2DAA2D,oBAAoB;AAC/J;AACA;AACA,iFAAiF,2DAA2D,oBAAoB;AAChK;AACA;AACA,4EAA4E,2DAA2D,oBAAoB;AAC3J;AACA;AACA,0CAA0C;AAC1C,0EAA0E,oDAAoD;AAC9H;AACA;AACA,oFAAoF,2DAA2D,oBAAoB;AACnK;AACA;AACA,yFAAyF,2DAA2D,oBAAoB;AACxK;AACA;AACA,0CAA0C;AAC1C,0FAA0F,oDAAoD;AAC9I;AACA;AACA,wEAAwE,2DAA2D,oBAAoB;AACvJ;AACA;AACA,0CAA0C;AAC1C,8EAA8E,oDAAoD;AAClI;AACA;AACA,0CAA0C;AAC1C,gFAAgF,oDAAoD;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,YAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACtuCA,QAASE,sBAAqBC,GAC1B,MAAO,IAAIC,yBAAwBC,oBAC/B73F,KAAM,4BACN83F,eACIC,kBAAmB,QAEnBC,cACIv+F,MAAO,WAAc,MAAOm+F,yBAAwBK,YAAYC,UAChEC,OAAQ,WAAc,MAAOP,yBAAwBQ,YAAYC,gBAGzEvjF,SAAUA,SAEVwjF,oBACIhnG,IAAK,SAAU0mG,EAAcjpB,GACzB,GAAI8E,GAAa+jB,wBAAwBW,iBAAiBZ,EAAmBK,EAAcjpB,EAE3F,OADAypB,eAAclvB,OAAOuK,GACd5qE,QAAQC,QAAQ2qE,OAvFvCtpF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAQtD,mBAAAE,CAAQ,IACR,IAAI6tG,qBAAsB,mBAAA7tG,CAAQ,KAC9BgtG,wBAA0B,mBAAAhtG,CAAQ,KAClCg1D,MAAQ,mBAAAh1D,CAAQ,IAChB8tG,iBAAmB,mBAAA9tG,CAAQ,KAC3B+tG,iBAAmB,mBAAA/tG,CAAQ,KAC3BguG,0BAA4B,mBAAAhuG,CAAQ,KACpCivF,SAAW,mBAAAjvF,CAAQ,IACvBA,CAAA,mBAAAA,CAAQ,IACR,IAAIiuG,WAAY,mBAAAjuG,CAAQ,KACpBkuG,cAAgBJ,iBAAiBx3C,gBACjC63C,cAEAA,oBADoCppG,KAApCmpG,cAAcE,kBACGnf,SAASsB,kCAAkC2d,cAAcE,uBAEpCrpG,KAAjCmpG,cAAcC,eACFE,mBAAmBH,cAAcC,gBAGjC,EAGrB,IAAIG,kBAAmBP,iBAAiBl9E,SACxCy9E,kBAAiBjzF,KAAK25C,MAAM7yD,MAAMuB,aAAa+xD,GAAGu4C,0BAA0Bn9E,SAAS6kC,kBACrF,IAAIk4C,eAAgBU,iBAAiB5nG,IAAIsuD,MAAM7yD,MAAMuB,aAEjD6qG,SAAW,uBACX33C,OAASoiC,OAAOpiC,OAAOtwD,OAAOiU,SAASE,eAAe,kBACtDjB,MAAOw/E,OAAOpiC,OAAO43C,YAAYL,eAAgB,OAAQnV,OAAOmD,IAAIxvD,MAAM4hE,YAE9E33C,QAAO63C,eACHC,SAAWx+D,SAAS,KAExB49D,iBAAiBn3C,eAAeC,OAAQ,SAAU3gD,GAC9C,OACIm4F,kBAAmBnf,SAASqB,8BAA8B15B,OAAOuF,cAKzE,IAAIwyC,YAAmC,WAAtBx5D,SAASE,SAAwB,MAAQ,MAAQ,6BAC9Du5D,eACAC,qBAAsB,IACtBC,qBAAsB,IACtBC,4BAA6B,IAC7BC,kBAAmB,IACnBC,WAAY11E,IACZg0C,OAAO,GAEPoR,UAAY,GAAIsvB,WAAUU,cAAW5pG,GAAW6pG,eAChD1kF,SAAW8iF,wBAAwBkC,qBAAqBt4C,OAC5Di3C,qBAAoBnvB,QAChBC,UAAWA,UACXwwB,aAAc,SAAUlmB,GACpB,GAAImmB,GAAiBtC,qBAAqB7jB,GACtCkJ,EAAaid,EAAe9xF,OAChC2rE,GAAWJ,QAAQ,WACf+kB,cAAchvB,aACduT,EAAWjR,e;;;;;;;;;AC5DvB8X,OAAOC,UAAUlkF,UACb3P,GAAI,OACJiqG,YAAa,WAEjBrW,OAAOC,UAAUqW,yBAAyB,QACtCC,UACIC,YAAa,KACbC,cAAe,KAAM,OAEzBC,WAAY,IAAK,MAAO,IAAK,MAC7BC,mBAEQxsF,KAAM,IACNE,MAAO,MAGPF,KAAM,IACNE,MAAO,QAInB21E,OAAOC,UAAU2W,yBAAyB,QACtCC,UACI,QAAS,OAAQ,QAAS,OAAQ,OAAQ,SAAU,WAAY,OAAQ,WAAY,WACpF,QAAS,MAAO,QAAS,UAAW,OAAQ,SAEhDC,gBACAC,aACAC,QAAS,wBACTC,QAAS,uEACTC,WACIhpG,OAEK,iBACOipG,OACIC,gBAAiB,UACjBC,YAAa,UACbC,WAAY,iBAItB/wF,QAAS,gBAEV,aAAc,cACd,mBAAoB,cACpB,YACO4wF,OACII,aAAc,WACdD,WAAY,OAI5BE,aACK,aAAc,UACd,OAAQ,UAAW,aACnB,UAAW,YAEhBC,UACK,UAAW,YACX,OAAQ,oBACR,OAAQ,UAAW,SACnB,QAAS,YAEdx8E,SACK,UAAW,WACX,WAAY,kBACZ,MAAO,0BACP,IAAK,SAAU,Y;;;;;;;ACzE5B,GAAItuB,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIk1D,OAAQ,mBAAAh1D,CAAQ,IAChB0wG,8BAAgC,iBAChCC,uBAAyB,mBACzBC,sBAAuC,SAAUrpG,GAEjD,QAASqpG,KACL,MAAkB,QAAXrpG,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAoB/D,MAtBAD,WAAUirG,EAAuBrpG,GAIjCqpG,EAAsBvqG,UAAUq4E,OAAS,SAAUuK,GAC/C,GAAIzhF,GAAQ5B,IACZqjF,GAAWI,eAAeqnB,8BAA+B,SAAUr6D,GAC/D7uC,EAAMslD,gBAAgBzW,KAE1BzwC,KAAKqjF,WAAaA,GAEtB2nB,EAAsBvqG,UAAUu4E,WAAa,eACjB75E,KAApBa,KAAKqjF,aACLrjF,KAAKqjF,WAAWC,iBAAiBynB,uBAAwB/qG,KAAK+mD,UAC9D/mD,KAAKqjF,eAAalkF,KAG1B6rG,EAAsBvqG,UAAUwmD,YAAc,SAAUxW,OAC5BtxC,KAApBa,KAAKqjF,YACLrjF,KAAKqjF,WAAWC,iBAAiBwnB,8BAA+Br6D,IAGjEu6D,GACT57C,MAAMxI,cACR3sD,SAAQgxB,QAAU+/E,sB;;;;;;ACjClBxqF,OAAOyqF,OAAS,WAEJzqF,OACNpmB,SAAS,yBAA0B,WAEjC,mBAAAA,CAAQ,Q;;;;;;;;;ACZhB8d,OAAOje,QAAU,SAAUixG,EAAMC,GAC/B,GAAoB,gBAATD,GACT,KAAM,IAAIv9E,WAAU,oBAgCtB,KAAK,GADD/lB,GA5BA0rB,EAAMhD,OAAO46E,GAGbE,EAAQ,GAKR5R,IAAW2R,KAASA,EAAK3R,SAWzBC,IAAW0R,KAASA,EAAK1R,SAIzB4R,GAAU,EAGVC,EAAQH,GAAiC,gBAAjBA,GAAW,MAAiBA,EAAKG,MAAQ,GAG5D7rG,EAAI,EAAG8W,EAAM+c,EAAI/zB,OAAQE,EAAI8W,EAAK9W,IAGzC,OAFAmI,EAAI0rB,EAAI7zB,IAGR,IAAK,KACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACH2rG,GAAS,KAAOxjG,CAChB,MAEF,KAAK,IACH,GAAI4xF,EAAU,CACZ4R,GAAS,GACZ,OAGD,IAAK,IACL,IAAK,IACH,GAAI5R,EAAU,CACZ4R,GAASxjG,CACZ,OAGD,IAAK,IACH,GAAI4xF,EAAU,CACZ6R,GAAU,EACbD,GAAS,GACT,OAGD,IAAK,IACH,GAAI5R,EAAU,CACZ6R,GAAU,EACbD,GAAS,GACT,OAGD,IAAK,IACH,GAAIC,EAAS,CACXD,GAAS,GACZ,OAECA,GAAS,KAAOxjG,CAChB,MAEF,KAAK,IAKH,IAFA,GAAI2jG,GAAWj4E,EAAI7zB,EAAI,GACnB+rG,EAAY,EACK,MAAfl4E,EAAI7zB,EAAI,IACZ+rG,IACA/rG,GAEF,IAAIi7D,GAAWpnC,EAAI7zB,EAAI,EAEvB,IAAKg6F,EAGE,CAEY+R,EAAY,IACV,MAAbD,OAAiCpsG,KAAbosG,KACP,MAAb7wC,OAAiCv7D,KAAbu7D,IAIxB0wC,GAAS,oBACT3rG,KAGA2rG,GAAS,YAbXA,IAAS,IAgBX,MAEF,SACEA,GAASxjG,EAUb,MAJK0jG,KAAWA,EAAMlpG,QAAQ,OAC5BgpG,EAAQ,IAAMA,EAAQ,KAGjB,GAAIr9B,QAAOq9B,EAAOE,I;;;;;;;AChI3BvxG,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI2/F,cAAe,mBAAAz/F,CAAQ,KACvBugG,2BAA4C,WAC5C,QAASA,GAA2BnrF,EAAM4qF,GACtCp6F,KAAKwP,KAAOA,EACZxP,KAAKo6F,IAAMA,EACXp6F,KAAKi1F,YAAc,GAAIzxF,KACvBxD,KAAKyrG,UAAY,GAAI5R,cAAavN,qBAwBtC,MAtBAqO,GAA2Bl6F,UAAU66E,QAAU,WAC3Ct7E,KAAKyrG,UAAUnwB,WAEnBqf,EAA2Bl6F,UAAUK,IAAM,SAAU8xF,GACjD,GAAIqC,GAAcj1F,KAAKi1F,YAAYn0F,IAAI8xF,EACvC,OAASqC,GAAcA,EAAYA,gBAEvC0F,EAA2Bl6F,UAAUiD,IAAM,SAAUkvF,EAAKqC,GACtD,GAAIrzF,GAAQ5B,KACR0xF,EAAW1xF,KAAKi1F,YAAYn0F,IAAI8xF,EACpC,IAAIlB,EACAA,EAASuD,YAAcA,MAEtB,CACD,GAAIyW,GAAqB,GAAIC,wBAAuB/Y,EAAKqC,EAAaj1F,KAAKwP,KAAMxP,KAAKo6F,IACtFp6F,MAAKi1F,YAAYvxF,IAAIkvF,EAAK8Y,GAC1B1rG,KAAKyrG,UAAUxpG,KAAK43F,aAAaxe,WAAW36E,OAAO,WAC/CkB,EAAMqzF,YAAYpxF,OAAO+uF,GACzB8Y,EAAmBpwB,eAIxBqf,IAEX1gG,SAAQ0gG,2BAA6BA,0BACrC,IAAIgR,wBAAwC,WACxC,QAASA,GAAuB/Y,EAAKqC,EAAa2W,EAAOxR,GACrD,GAAIx4F,GAAQ5B,IACZA,MAAK4rG,MAAQA,EACb5rG,KAAKo6F,IAAMA,EACXp6F,KAAK4yF,IAAMQ,OAAOmD,IAAIxvD,MAAM6rD,GAC5B5yF,KAAKi1F,YAAcA,EACnB7B,OAAOpiC,OAAOivC,iBAAiB,SAAUrsF,GAAS,MAAOhS,GAAMiqG,qBAAqBj4F,KAmCxF,MAjCA7Z,QAAOC,eAAe2xG,EAAuBlrG,UAAW,eACpDK,IAAK,WACD,MAAOd,MAAK8rG,cAEhBpoG,IAAK,SAAUuxF,GACX,GAAIrzF,GAAQ5B,IACZA,MAAK8rG,aAAe7W,EACpBj1F,KAAK+rG,SAAW9W,EAAYzmF,IAAI,SAAUkqF,GAAc,MAAO92F,GAAMw4F,IAAI3B,SAASC,KAClF14F,KAAKgsG,sBAET5qG,YAAY,EACZC,cAAc,IAElBtH,OAAOC,eAAe2xG,EAAuBlrG,UAAW,WACpDK,IAAK,WACD,MAAOd,MAAK+rG,UAEhB3qG,YAAY,EACZC,cAAc,IAElBsqG,EAAuBlrG,UAAU66E,QAAU,WACvCt7E,KAAK+rG,YACL/rG,KAAKgsG,sBAETL,EAAuBlrG,UAAUurG,mBAAqB,WAClD,GAAIp4F,GAAQw/E,OAAOpiC,OAAOknB,SAASl4E,KAAK4yF,IACxC5yF,MAAK6rG,qBAAqBj4F,IAE9B+3F,EAAuBlrG,UAAUorG,qBAAuB,SAAUj4F,GAC1DA,GAAS5T,KAAK4yF,IAAI/kF,aAAe+F,EAAMg/E,IAAI/kF,YAC3CulF,OAAOpiC,OAAOi7C,gBAAgBr4F,EAAO5T,KAAK4rG,MAAO5rG,KAAK+rG,WAGvDJ,IAEX1xG,SAAQ0xG,uBAAyBA,uB;;;;;;;AC9EjC,QAAS7gF,UAAShZ,GACd,IAAK,GAAIxR,KAAKwR,GAAQ7X,QAAQsG,eAAeD,KAAIrG,QAAQqG,GAAKwR,EAAExR,IAEpEvG,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAKtD4wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,M;;;;;;;ACVjB,QAASkvG,sBAAqBt4C,EAAQ30C,OAClB,KAAZA,IAAsBA,KAC1B,IAAIg+E,GAAM,GAAI6R,aAAYja,0BACtBmI,EAAM,GAAI8R,aAAYnW,yBAC1B,QACIx5C,SAAU,GAAI4vD,YAAWtb,eAAe7/B,GACxCqiC,UAAW,GAAI+Y,aAAYjS,gBAAgBC,EAAKC,GAChDgS,UAAW,GAAIC,aAAYhN,gBAAgBlF,EAAKC,EAAKh+E,EAAQkwF,SAC7D/rF,OAAQ,GAAIgsF,kBAAiBtb,eAdrCn3F,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIgyG,aAAc,mBAAA9xG,CAAQ,KACtB+xG,WAAa,mBAAA/xG,CAAQ,KACrBgyG,YAAc,mBAAAhyG,CAAQ,KACtBkyG,YAAc,mBAAAlyG,CAAQ,KACtBoyG,iBAAmB,mBAAApyG,CAAQ,IAY/BH,SAAQqvG,qBAAuBA,qB;;;;;;AClB/BrvG,QAAQwyG,WAAa,WAAc,MAAO,MAE1CxyG,QAAQyyG,SAAW,WACf,MAAwB,mBAAbn9D,UACAA,SAASm9D,SAER,IAGhBzyG,QAAQ0yG,QAAU,WAAc,UAEhC1yG,QAAQ2yG,OAAS,WAAc,MAAO,IAEtC3yG,QAAQ4yG,QAAU,WACd,MAAOl8E,QAAOm8E,WAGlB7yG,QAAQ8yG,SAAW,WACf,MAAOp8E,QAAOm8E,WAGlB7yG,QAAQ+yG,KAAO,WAAc,UAE7B/yG,QAAQgQ,KAAO,WAAc,MAAO,WAEpChQ,QAAQgzG,QAAU,WACd,MAAyB,mBAAd99D,WACAA,UAAU+9D,WAEd,IAGXjzG,QAAQkzG,kBACNlzG,QAAQmzG,qBACR,WAAc,UAEhBnzG,QAAQozG,KAAO,WAAc,MAAO,cAEpCpzG,QAAQqzG,SAAW,WAAc,MAAO,WAExCrzG,QAAQszG,OAAStzG,QAAQuzG,OAAS,WAC9B,MAAO,QAGXvzG,QAAQgrG,IAAM,K;;;;;;ACnBd,uDAASwI,gBAAe/kB,EAAOglB,GAG7B,IAAK,GADDC,GAAK,EACAluG,EAAIipF,EAAMnpF,OAAS,EAAGE,GAAK,EAAGA,IAAK,CAC1C,GAAI4tD,GAAOq7B,EAAMjpF,EACJ,OAAT4tD,EACFq7B,EAAMxmF,OAAOzC,EAAG,GACE,OAAT4tD,GACTq7B,EAAMxmF,OAAOzC,EAAG,GAChBkuG,KACSA,IACTjlB,EAAMxmF,OAAOzC,EAAG,GAChBkuG,KAKJ,GAAID,EACF,KAAOC,IAAMA,EACXjlB,EAAM9iB,QAAQ,KAIlB,OAAO8iB,GA+JT,QAASpmF,QAAQ62B,EAAIC,GACjB,GAAID,EAAG72B,OAAQ,MAAO62B,GAAG72B,OAAO82B,EAEhC,KAAK,GADD/hB,MACK5X,EAAI,EAAGA,EAAI05B,EAAG55B,OAAQE,IACvB25B,EAAED,EAAG15B,GAAIA,EAAG05B,IAAK9hB,EAAIpV,KAAKk3B,EAAG15B,GAErC,OAAO4X,GAhKX,GAAIu2F,aACA,gEACAC,UAAY,SAASC,GACvB,MAAOF,aAAYG,KAAKD,GAAUp3F,MAAM,GAK1Czc,SAAQye,QAAU,WAIhB,IAAK,GAHDs1F,GAAe,GACfC,GAAmB,EAEdxuG,EAAIqC,UAAUvC,OAAS,EAAGE,IAAM,IAAMwuG,EAAkBxuG,IAAK,CACpE,GAAIw5D,GAAQx5D,GAAK,EAAKqC,UAAUrC,GAAKoiB,QAAQmB,KAG7C,IAAoB,gBAATi2C,GACT,KAAM,IAAItrC,WAAU,4CACVsrC,KAIZ+0C,EAAe/0C,EAAO,IAAM+0C,EAC5BC,EAAsC,MAAnBh1C,EAAKt5D,OAAO,IAWjC,MAJAquG,GAAeP,eAAenrG,OAAO0rG,EAAav6D,MAAM,KAAM,SAASnzC,GACrE,QAASA,KACN2tG,GAAkBj3F,KAAK,MAEnBi3F,EAAmB,IAAM,IAAMD,GAAiB,KAK3D/zG,QAAQi0G,UAAY,SAASj1C,GAC3B,GAAIk1C,GAAal0G,QAAQk0G,WAAWl1C,GAChCm1C,EAAqC,MAArBp9E,OAAOioC,GAAO,EAclC,OAXAA,GAAOw0C,eAAenrG,OAAO22D,EAAKxlB,MAAM,KAAM,SAASnzC,GACrD,QAASA,KACN6tG,GAAYn3F,KAAK,KAEjBiiD,GAASk1C,IACZl1C,EAAO,KAELA,GAAQm1C,IACVn1C,GAAQ,MAGFk1C,EAAa,IAAM,IAAMl1C,GAInCh/D,QAAQk0G,WAAa,SAASl1C,GAC5B,MAA0B,MAAnBA,EAAKt5D,OAAO,IAIrB1F,QAAQ+c,KAAO,WACb,GAAIq3F,GAAQhvG,MAAMoB,UAAUiW,MAAMvT,KAAKrB,UAAW,EAClD,OAAO7H,SAAQi0G,UAAU5rG,OAAO+rG,EAAO,SAAS/tG,EAAGiB,GACjD,GAAiB,gBAANjB,GACT,KAAM,IAAIqtB,WAAU,yCAEtB,OAAOrtB,KACN0W,KAAK,OAMV/c,QAAQq0G,SAAW,SAAS5gF,EAAMmiC,GAIhC,QAASp8B,GAAK5G,GAEZ,IADA,GAAInV,GAAQ,EACLA,EAAQmV,EAAIttB,QACE,KAAfstB,EAAInV,GADiBA,KAK3B,IADA,GAAI2X,GAAMxC,EAAIttB,OAAS,EAChB8vB,GAAO,GACK,KAAbxC,EAAIwC,GADOA,KAIjB,MAAI3X,GAAQ2X,KACLxC,EAAInW,MAAMgB,EAAO2X,EAAM3X,EAAQ,GAfxCgW,EAAOzzB,QAAQye,QAAQgV,GAAMsD,OAAO,GACpC6+B,EAAK51D,QAAQye,QAAQm3C,GAAI7+B,OAAO,EAsBhC,KAAK,GALDu9E,GAAY96E,EAAK/F,EAAK+lB,MAAM,MAC5B+6D,EAAU/6E,EAAKo8B,EAAGpc,MAAM,MAExBl0C,EAASK,KAAK+E,IAAI4pG,EAAUhvG,OAAQivG,EAAQjvG,QAC5CkvG,EAAkBlvG,EACbE,EAAI,EAAGA,EAAIF,EAAQE,IAC1B,GAAI8uG,EAAU9uG,KAAO+uG,EAAQ/uG,GAAI,CAC/BgvG,EAAkBhvG,CAClB,OAKJ,IAAK,GADDivG,MACKjvG,EAAIgvG,EAAiBhvG,EAAI8uG,EAAUhvG,OAAQE,IAClDivG,EAAYzsG,KAAK,KAKnB,OAFAysG,GAAcA,EAAYt6F,OAAOo6F,EAAQ93F,MAAM+3F,IAExCC,EAAY13F,KAAK,MAG1B/c,QAAQ00G,IAAM,IACd10G,QAAQ20G,UAAY,IAEpB30G,QAAQ40G,QAAU,SAAS51C,GACzB,GAAI1uD,GAASsjG,UAAU50C,GACnB33D,EAAOiJ,EAAO,GACd2Y,EAAM3Y,EAAO,EAEjB,OAAKjJ,IAAS4hB,GAKVA,IAEFA,EAAMA,EAAI8N,OAAO,EAAG9N,EAAI3jB,OAAS,IAG5B+B,EAAO4hB,GARL,KAYXjpB,QAAQ60G,SAAW,SAAS71C,EAAMtmC,GAChC,GAAIyG,GAAIy0E,UAAU50C,GAAM,EAKxB,OAHItmC,IAAOyG,EAAEpI,QAAQ,EAAI2B,EAAIpzB,UAAYozB,IACvCyG,EAAIA,EAAEpI,OAAO,EAAGoI,EAAE75B,OAASozB,EAAIpzB,SAE1B65B,GAITn/B,QAAQ80G,QAAU,SAAS91C,GACzB,MAAO40C,WAAU50C,GAAM,GAazB,IAAIjoC,QAA6B,MAApB,KAAKA,QAAQ,GACpB,SAAUsC,EAAK5b,EAAOnB,GAAO,MAAO+c,GAAItC,OAAOtZ,EAAOnB,IACtD,SAAU+c,EAAK5b,EAAOnB,GAEpB,MADImB,GAAQ,IAAGA,EAAQ4b,EAAI/zB,OAASmY,GAC7B4b,EAAItC,OAAOtZ,EAAOnB,I;;;;;;;;;;;AC7NjC2B,OAAOje,QAAU,mBAAAG,CAAQ,I;;;;;;ACAzB8d,OAAOje,QAAU,mBAAAG,CAAQ,KAAc+0D,Y;;;;;;ACAvCj3C,OAAOje,QAAU,mBAAAG,CAAQ,KAAc80D,U;;;;;;ACAvCh3C,OAAOje,QAAU,mBAAAG,CAAQ,K;;;;;;;ACIzB,GAAI40G,aAAc,SAAU5vG,GACxB,MAAOA,IAAuC,IAAxBA,EAAY6vG,SAElCC,kBAAoB,WACpB,MAA4B,mBAAd7G,YAA6B2G,YAAY3G,YAEvD8G,kBAAoB,WAAc,OAClC/vG,YAAa8vG,oBAAsB7G,UAAY,KAC/CY,qBAAsB,IACtBC,qBAAsB,KACtBC,4BAA6B,IAC7BC,kBAAmB,IACnBC,WAAY11E,IACZg0C,OAAO,IAEPynC,eAAiB,SAAUl7E,EAAKC,EAAK3kB,GACrCzV,OAAOC,eAAem6B,EAAK3kB,GACvB1O,IAAK,WAAc,MAAOozB,GAAI1kB,IAC9B9L,IAAK,SAAUxJ,GAASg6B,EAAI1kB,GAAQtV,GACpCkH,YAAY,EACZC,cAAc,KAGlBguG,sBAAwB,SAAUrhB,GAClC,MAAQA,GAAOkb,qBAAuBtpG,KAAKE,SAAWkuF,EAAOkb,sBAE7DoG,wBAA0B,SAAUthB,EAAQuhB,GAC5C,GAAIC,GAAWD,EAAgBvhB,EAAOmb,2BACtC,OAAQqG,GAAWxhB,EAAOib,qBACpBjb,EAAOib,qBACPuG,GAENC,gBAAkB,SAAU,UAAW,YAAa,WACpDC,uBAAyB,SAAUhkC,EAAIikC,EAAO7sF,GAC9C/oB,OAAOw/B,KAAKzW,GAAWvgB,QAAQ,SAAU0H,GACrC6Y,EAAU7Y,GAAM1H,QAAQ,SAAUqB,GAC9B,GAAI0M,GAAW1M,EAAG,GAAIyY,EAAUzY,EAAG,EACnC8nE,GAAGhpB,iBAAiBz4C,EAAMqG,EAAU+L,OAGxCszF,GACAF,eAAeltG,QAAQ,SAAUiN,GAC7Bk8D,EAAGl8D,GAAQmgG,EAAMngG,MAIzBogG,sBAAwB,SAAUtgE,EAAKugE,EAAWxzF,GAClD,GAAIza,GAAQ5B,SACI,KAAZqc,IAAsBA,KAC1B,IAAIqvD,GACAokC,EACAC,EAAiB,EACjBC,EAAe,EACfC,GAAc,EACdC,EAAe,KACfptF,IAEJ,MAAM9iB,eAAgB4vG,wBAClB,KAAM,IAAIjiF,WAAU,6EAGxB,IAAIqgE,GAASmhB,mBAIb,IAHAp1G,OAAOw/B,KAAKy0D,GACP1rF,OAAO,SAAUoF,GAAO,MAAO2U,GAAQ9b,eAAemH,KACtDnF,QAAQ,SAAUmF,GAAO,MAAOsmF,GAAOtmF,GAAO2U,EAAQ3U,MACtDsnG,YAAYhhB,EAAO5uF,aACpB,KAAM,IAAIuuB,WAAU,2DAExB,IAAIvU,GAAM40E,EAAOrmB,MAAQ,WAErB,IAAK,GADDj3B,MACK/sC,EAAK,EAAGA,EAAK7B,UAAUvC,OAAQoE,IACpC+sC,EAAO/sC,GAAM7B,UAAU6B,EAE3B,OAAOmtC,SAAQ13B,IAAIvX,MAAMivC,SAAU,QAAQ18B,OAAOs8B,KAClD,aAKAy/D,EAAY,SAAUpmF,EAAMo3C,GAAO,MAAOrgD,YAAW,WACrD,GAAIgZ,GAAM,GAAI34B,OAAMggE,EACpBrnC,GAAI/P,KAAOA,EACP1qB,MAAMwS,QAAQiR,EAAU7Z,QACxB6Z,EAAU7Z,MAAM1G,QAAQ,SAAUqB,GAE9B,OAAOutC,EADEvtC,EAAG,IACFk2B,KAGd4xC,EAAG92B,SACH82B,EAAG92B,QAAQ9a,IAEhB,IACCs2E,EAAc,WAId,GAHAh3F,EAAI,eAAiB62F,YAAaA,IAClCD,IACA52F,EAAI,iBAAkB42F,GAClBA,EAAehiB,EAAOqb,WAEtB,WADA8G,GAAU,YAAa,sCAOvBJ,GAJCA,EAIgBT,wBAAwBthB,EAAQ+hB,GAHhCV,sBAAsBrhB,GAK3C50E,EAAI,gCAAiC22F,GACjCE,GACAnvF,WAAWuvF,EAASN,IAGxBM,EAAU,WACV,GAAKJ,EAAL,CAGA72F,EAAI,UACJ,IAAIu2F,GAAQjkC,EACR4kC,EAAwB,kBAARhhE,GAAsBA,IAAQA,CAClDo8B,GAAK,GAAIsiB,GAAO5uF,YAAYkxG,EAAOT,GACnCC,EAAoBhvF,WAAW,WAC3B1H,EAAI,WACJsyD,EAAGjuD,QACH0yF,EAAU,YAAa,uBACxBniB,EAAOob,mBACVhwF,EAAI,oBACJ,KAAK,GAAI1R,KAAOgkE,IAEP,mBAAoB,sBAAuB,QAAS,QAAQtpE,QAAQsF,GAAO,GAC5E0nG,eAAe1jC,EAAI9pE,EAAO8F,EAGlCgkE,GAAGhpB,iBAAiB,OAAQ,WACxBxhC,aAAa4uF,GACb12F,EAAI,QACJ22F,EAAiBV,sBAAsBrhB,GACvC50E,EAAI,kBAAmB22F,GACvBC,EAAe,IAEnBtkC,EAAGhpB,iBAAiB,QAAS0tD,GAC7BV,uBAAuBhkC,EAAIikC,EAAO7sF,GAElC4oD,EAAG7B,QAAU6B,EAAG7B,SAAWqmC,EAC3BA,EAAe,MAEnB92F,GAAI,QACJi3F,IACArwG,KAAKyd,MAAQ,SAAUsM,EAAM88E,EAAQjjG,OACpB,KAATmmB,IAAmBA,EAAO,SACf,KAAX88E,IAAqBA,EAAS,GAClC,IAAIl5D,OAAY,KAAP/pC,KAAqBA,EAAIgqC,EAAKD,EAAG4iE,WAAYA,MAAoB,KAAP3iE,GAAwBA,EAAI4iE,EAAK7iE,EAAG8iE,UAAWA,MAAmB,KAAPD,GAAuBA,EAAIE,EAAK/iE,EAAGgjE,MAAOA,MAAe,KAAPD,EAAgB,EAAIA,CAOpM,IANAt3F,EAAI,mBAAqBytF,OAAQA,EAAQ0J,WAAYA,EAAYE,UAAWA,EAAWE,MAAOA,EAAOX,aAAcA,EAAc3G,WAAYrb,EAAOqb,aACpJ4G,GAAeM,GAAcP,GAAgBhiB,EAAOqb,WAChDsH,IACAZ,EAAiBY,GAErBjlC,EAAGjuD,MAAMsM,EAAM88E,GACX4J,EAAW,CACX,GAAIG,IACA7mF,KAAMA,EACN88E,OAAQA,EACRgK,UAAU,EAKdT,KACA1kC,EAAG8D,oBAAoB,QAAS4gC,GAE5B/wG,MAAMwS,QAAQiR,EAAUrF,QACxBqF,EAAUrF,MAAMlb,QAAQ,SAAUqB,GAC9B,GAAI0M,GAAW1M,EAAG,GAAIyY,EAAUzY,EAAG,EACnC0M,GAASsgG,GACTllC,EAAG8D,oBAAoB,QAASl/D,EAAU+L,KAI9CqvD,EAAG7B,UACHqmC,EAAexkC,EAAG7B,QAClB6B,EAAG7B,QAAQ+mC,GACXllC,EAAG7B,QAAU,QAIzB7pE,KAAKi5E,KAAO,SAAUxoE,GAClBi7D,EAAGuN,KAAKxoE,IAEZzQ,KAAK0iD,iBAAmB,SAAUz4C,EAAMqG,EAAU+L,GAC1Chd,MAAMwS,QAAQiR,EAAU7Y,IACnB6Y,EAAU7Y,GAAM8rC,KAAK,SAAUnyC,GAEhC,MADQA,GAAG,KACE0M,KAEbwS,EAAU7Y,GAAMhI,MAAMqO,EAAU+L,IAIpCyG,EAAU7Y,KAAUqG,EAAU+L,IAElCqvD,EAAGhpB,iBAAiBz4C,EAAMqG,EAAU+L,IAExCrc,KAAKwvE,oBAAsB,SAAUvlE,EAAMqG,EAAU+L,GAC7Chd,MAAMwS,QAAQiR,EAAU7Y,MACxB6Y,EAAU7Y,GAAQ6Y,EAAU7Y,GAAM3H,OAAO,SAAUsB,GAE/C,MADQA,GAAG,KACE0M,KAGrBo7D,EAAG8D,oBAAoBvlE,EAAMqG,EAAU+L,IAG/CnE,QAAOje,QAAU21G,sB;;;;;;AC7KjB,QAAS/iD,UACPic,GAAG3lE,KAAKnD,MArBVkY,OAAOje,QAAU4yD,MAEjB,IAAIic,IAAK,mBAAA1uE,CAAQ,KAAUkvD,aACvB7vB,SAAW,mBAAAr/B,CAAQ,GAEvBq/B,UAASozB,OAAQic,IACjBjc,OAAOp0B,SAAW,mBAAAr+B,CAAQ,KAC1ByyD,OAAOn0B,SAAW,mBAAAt+B,CAAQ,KAC1ByyD,OAAOr0B,OAAS,mBAAAp+B,CAAQ,KACxByyD,OAAOqC,UAAY,mBAAA90D,CAAQ,KAC3ByyD,OAAOsC,YAAc,mBAAA/0D,CAAQ,KAG7ByyD,OAAOA,OAASA,OAWhBA,OAAOpsD,UAAUmuD,KAAO,SAAS2a,EAAMltD,GAGrC,QAAS4tD,GAAO7f,GACVmf,EAAKjmE,WACH,IAAUimE,EAAK/rD,MAAM4sC,IAAUv/C,EAAOu/D,OACxCv/D,EAAOu/D,QAOb,QAASL,KACHl/D,EAAO8tB,UAAY9tB,EAAOq9D,QAC5Br9D,EAAOq9D,SAcX,QAASrvC,KACHi4E,IACJA,GAAW,EAEXvnC,EAAKl6C,OAIP,QAASw6C,KACHinC,IACJA,GAAW,EAEiB,kBAAjBvnC,GAAK7wB,SAAwB6wB,EAAK7wB,WAI/C,QAAS9D,GAAQ+U,GAEf,GADAigB,IACwC,IAApCd,GAAG9e,cAAchqD,KAAM,SACzB,KAAM2pD,GAQV,QAASigB,KACP/+D,EAAO4X,eAAe,OAAQwnD,GAC9BV,EAAK9mD,eAAe,QAASsnD,GAE7Bl/D,EAAO4X,eAAe,MAAOoW,GAC7BhuB,EAAO4X,eAAe,QAASonD,GAE/Bh/D,EAAO4X,eAAe,QAASmyB,GAC/B20B,EAAK9mD,eAAe,QAASmyB,GAE7B/pC,EAAO4X,eAAe,MAAOmnD,GAC7B/+D,EAAO4X,eAAe,QAASmnD,GAE/BL,EAAK9mD,eAAe,QAASmnD,GApE/B,GAAI/+D,GAAS7K,IAUb6K,GAAOuF,GAAG,OAAQ65D,GAQlBV,EAAKn5D,GAAG,QAAS25D,GAIZR,EAAKwnC,UAAc10F,IAA2B,IAAhBA,EAAQgT,MACzCxkB,EAAOuF,GAAG,MAAOyoB,GACjBhuB,EAAOuF,GAAG,QAASy5D,GAGrB,IAAIinC,IAAW,CAoDf,OA5BAjmG,GAAOuF,GAAG,QAASwkC,GACnB20B,EAAKn5D,GAAG,QAASwkC,GAmBjB/pC,EAAOuF,GAAG,MAAOw5D,GACjB/+D,EAAOuF,GAAG,QAASw5D,GAEnBL,EAAKn5D,GAAG,QAASw5D,GAEjBL,EAAK5mD,KAAK,OAAQ9X,GAGX0+D,G;;;;;;;;;;;;;ACxHTxvE,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAI6oF,UAAW,mBAAA3oF,CAAQ,KACnBwmF,GAAK,mBAAAxmF,CAAQ,KACbupF,mBACJ,SAAWA,GASP,QAAS1+C,GAAG/qC,GACR,GAAIysF,GAAYzsF,CAChB,OAAOysF,KAAcA,IAAchD,EAAkBlI,MAC9CkL,IAAchD,EAAkBqtB,WAC/BpwB,GAAGhE,QAAQ+J,EAAUsqB,4BAA8BtqB,EAAU9C,yBAZzEF,EAAkBlI,KAAO1hF,OAAO0M,QAC5BwqG,yBAAyB,EACzBptB,wBAAyBd,SAASxH,MAAME,OAE5CkI,EAAkBqtB,UAAYj3G,OAAO0M,QACjCwqG,yBAAyB,EACzBptB,wBAAyBd,SAASxH,MAAME,OAQ5CkI,EAAkB1+C,GAAKA,GACxB0+C,kBAAoB1pF,QAAQ0pF,oBAAsB1pF,QAAQ0pF,sBAC7D,IAAIutB,eAAgBn3G,OAAO0M,OAAO,SAAU2kC,EAAUviC,GAClD,GAAIU,GAASuX,WAAWsqB,EAAS31B,KAAK5M,GAAU,EAChD,QAASyyE,QAAS,WAAcp6D,aAAa3X,OAE7C4nG,aAA8B,WAC9B,QAASA,KACLnxG,KAAKoxG,cAAe,EA+BxB,MA7BAD,GAAa1wG,UAAU6gF,OAAS,WACvBthF,KAAKoxG,eACNpxG,KAAKoxG,cAAe,EAChBpxG,KAAKqxG,WACLrxG,KAAKqxG,SAAS10B,SAAKx9E,IACnBa,KAAKqxG,aAAWlyG,MAI5BpF,OAAOC,eAAem3G,EAAa1wG,UAAW,2BAC1CK,IAAK,WACD,MAAOd,MAAKoxG,cAEhBhwG,YAAY,EACZC,cAAc,IAElBtH,OAAOC,eAAem3G,EAAa1wG,UAAW,2BAC1CK,IAAK,WACD,MAAId,MAAKoxG,aACEF,eAENlxG,KAAKqxG,WACNrxG,KAAKqxG,SAAW,GAAItuB,UAAS5G,SAE1Bn8E,KAAKqxG,SAAShhG,QAEzBjP,YAAY,EACZC,cAAc,IAEX8vG,KAEP7wB,wBAAyC,WACzC,QAASA,MA4BT,MA1BAvmF,QAAOC,eAAesmF,EAAwB7/E,UAAW,SACrDK,IAAK,WAMD,MALKd,MAAKsxG,SAGNtxG,KAAKsxG,OAAS,GAAIH,eAEfnxG,KAAKsxG,QAEhBlwG,YAAY,EACZC,cAAc,IAElBi/E,EAAwB7/E,UAAU6gF,OAAS,WAClCthF,KAAKsxG,OAONtxG,KAAKsxG,OAAOhwB,SAHZthF,KAAKsxG,OAAS3tB,kBAAkBqtB,WAMxC1wB,EAAwB7/E,UAAU66E,QAAU,WACxCt7E,KAAKshF,UAEFhB,IAEXrmF,SAAQqmF,wBAA0BA,wB;;;;;;;AC3FlCvmF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIq3G,QACJ,SAAWA,GACPA,EAAM91B,KAAO,EACb81B,EAAMC,MAAQ,EACdD,EAAME,KAAO,GACdF,MAAQt3G,QAAQs3G,QAAUt3G,QAAQs3G,UACrC,IAAIzuB,WAA2B,WAC3B,QAASA,KACL9iF,KAAKq3D,KAAO,GAAI7zD,KAChBxD,KAAK0xG,UAAQvyG,GACba,KAAK2xG,UAAQxyG,GACba,KAAK4xG,MAAQ,EAyQjB,MAvQA9uB,GAAUriF,UAAU22D,MAAQ,WACxBp3D,KAAKq3D,KAAKD,QACVp3D,KAAK0xG,UAAQvyG,GACba,KAAK2xG,UAAQxyG,GACba,KAAK4xG,MAAQ,GAEjB9uB,EAAUriF,UAAUy7E,QAAU,WAC1B,OAAQl8E,KAAK0xG,QAAU1xG,KAAK2xG,OAEhC53G,OAAOC,eAAe8oF,EAAUriF,UAAW,QACvCK,IAAK,WACD,MAAOd,MAAK4xG,OAEhBxwG,YAAY,EACZC,cAAc,IAElByhF,EAAUriF,UAAUqD,IAAM,SAAU4D,GAChC,MAAO1H,MAAKq3D,KAAKvzD,IAAI4D,IAEzBo7E,EAAUriF,UAAUK,IAAM,SAAU4G,GAChC,GAAIqI,GAAO/P,KAAKq3D,KAAKv2D,IAAI4G,EACzB,IAAKqI,EAGL,MAAOA,GAAK7V,OAEhB4oF,EAAUriF,UAAUiD,IAAM,SAAUgE,EAAKxN,EAAO23G,OAC9B,KAAVA,IAAoBA,EAAQN,MAAM91B,KACtC,IAAI1rE,GAAO/P,KAAKq3D,KAAKv2D,IAAI4G,EACzB,IAAIqI,EACAA,EAAK7V,MAAQA,EACT23G,IAAUN,MAAM91B,MAChBz7E,KAAK6xG,MAAM9hG,EAAM8hG,OAGpB,CAED,OADA9hG,GAASrI,IAAKA,EAAKxN,MAAOA,EAAO6gB,SAAM5b,GAAW2yG,aAAU3yG,IACpD0yG,GACJ,IAAKN,OAAM91B,KACPz7E,KAAK+xG,YAAYhiG,EACjB,MACJ,KAAKwhG,OAAMC,MACPxxG,KAAKgyG,aAAajiG,EAClB,MACJ,KAAKwhG,OAAME,KAGX,QACIzxG,KAAK+xG,YAAYhiG,GAGzB/P,KAAKq3D,KAAK3zD,IAAIgE,EAAKqI,GACnB/P,KAAK4xG,UAGb9uB,EAAUriF,UAAUoD,OAAS,SAAU6D,GACnC,GAAIqI,GAAO/P,KAAKq3D,KAAKv2D,IAAI4G,EACzB,SAAKqI,IAGL/P,KAAKq3D,KAAKxzD,OAAO6D,GACjB1H,KAAKiyG,WAAWliG,GAChB/P,KAAK4xG,SACE,IAEX9uB,EAAUriF,UAAU4nE,MAAQ,WACxB,GAAKroE,KAAK0xG,OAAU1xG,KAAK2xG,MAAzB,CAGA,IAAK3xG,KAAK0xG,QAAU1xG,KAAK2xG,MACrB,KAAM,IAAIxwG,OAAM,eAEpB,IAAI4O,GAAO/P,KAAK0xG,KAIhB,OAHA1xG,MAAKq3D,KAAKxzD,OAAOkM,EAAKrI,KACtB1H,KAAKiyG,WAAWliG,GAChB/P,KAAK4xG,QACE7hG,EAAK7V,QAEhB4oF,EAAUriF,UAAU8B,QAAU,SAAU2vG,EAAY1hE,GAEhD,IADA,GAAIzvC,GAAUf,KAAK0xG,MACZ3wG,GACCyvC,EACA0hE,EAAWz8F,KAAK+6B,GAASzvC,EAAQ7G,MAAO6G,EAAQ2G,IAAK1H,MAGrDkyG,EAAWnxG,EAAQ7G,MAAO6G,EAAQ2G,IAAK1H,MAE3Ce,EAAUA,EAAQga,MAG1B+nE,EAAUriF,UAAU0xG,eAAiB,SAAUD,EAAY1hE,GAEvD,IADA,GAAIzvC,GAAUf,KAAK2xG,MACZ5wG,GACCyvC,EACA0hE,EAAWz8F,KAAK+6B,GAASzvC,EAAQ7G,MAAO6G,EAAQ2G,IAAK1H,MAGrDkyG,EAAWnxG,EAAQ7G,MAAO6G,EAAQ2G,IAAK1H,MAE3Ce,EAAUA,EAAQ+wG,UAG1BhvB,EAAUriF,UAAUm2D,OAAS,WAGzB,IAFA,GAAIrsD,MACAxJ,EAAUf,KAAK0xG,MACZ3wG,GACHwJ,EAAOtI,KAAKlB,EAAQ7G,OACpB6G,EAAUA,EAAQga,IAEtB,OAAOxQ,IAEXu4E,EAAUriF,UAAU84B,KAAO,WAGvB,IAFA,GAAIhvB,MACAxJ,EAAUf,KAAK0xG,MACZ3wG,GACHwJ,EAAOtI,KAAKlB,EAAQ2G,KACpB3G,EAAUA,EAAQga,IAEtB,OAAOxQ,IAyCXu4E,EAAUriF,UAAUuxG,aAAe,SAAUjiG,GAEzC,GAAK/P,KAAK0xG,OAAU1xG,KAAK2xG,MAGpB,KAAK3xG,KAAK0xG,MACX,KAAM,IAAIvwG,OAAM,eAGhB4O,GAAKgL,KAAO/a,KAAK0xG,MACjB1xG,KAAK0xG,MAAMI,SAAW/hG,MAPtB/P,MAAK2xG,MAAQ5hG,CASjB/P,MAAK0xG,MAAQ3hG,GAEjB+yE,EAAUriF,UAAUsxG,YAAc,SAAUhiG,GAExC,GAAK/P,KAAK0xG,OAAU1xG,KAAK2xG,MAGpB,KAAK3xG,KAAK2xG,MACX,KAAM,IAAIxwG,OAAM,eAGhB4O,GAAK+hG,SAAW9xG,KAAK2xG,MACrB3xG,KAAK2xG,MAAM52F,KAAOhL,MAPlB/P,MAAK0xG,MAAQ3hG,CASjB/P,MAAK2xG,MAAQ5hG,GAEjB+yE,EAAUriF,UAAUwxG,WAAa,SAAUliG,GACvC,GAAIA,IAAS/P,KAAK0xG,OAAS3hG,IAAS/P,KAAK2xG,MACrC3xG,KAAK0xG,UAAQvyG,GACba,KAAK2xG,UAAQxyG,OAEZ,IAAI4Q,IAAS/P,KAAK0xG,MACnB1xG,KAAK0xG,MAAQ3hG,EAAKgL,SAEjB,IAAIhL,IAAS/P,KAAK2xG,MACnB3xG,KAAK2xG,MAAQ5hG,EAAK+hG,aAEjB,CACD,GAAI/2F,GAAOhL,EAAKgL,KACZ+2F,EAAW/hG,EAAK+hG,QACpB,KAAK/2F,IAAS+2F,EACV,KAAM,IAAI3wG,OAAM,eAEpB4Z,GAAK+2F,SAAWA,EAChBA,EAAS/2F,KAAOA,IAGxB+nE,EAAUriF,UAAUoxG,MAAQ,SAAU9hG,EAAM8hG,GACxC,IAAK7xG,KAAK0xG,QAAU1xG,KAAK2xG,MACrB,KAAM,IAAIxwG,OAAM,eAEpB,IAAK0wG,IAAUN,MAAMC,OAASK,IAAUN,MAAME,KAG9C,GAAII,IAAUN,MAAMC,MAAO,CACvB,GAAIzhG,IAAS/P,KAAK0xG,MACd,MAEJ,IAAI32F,GAAOhL,EAAKgL,KACZ+2F,EAAW/hG,EAAK+hG,QAEhB/hG,KAAS/P,KAAK2xG,OAGdG,EAAS/2F,SAAO5b,GAChBa,KAAK2xG,MAAQG,IAIb/2F,EAAK+2F,SAAWA,EAChBA,EAAS/2F,KAAOA,GAGpBhL,EAAK+hG,aAAW3yG,GAChB4Q,EAAKgL,KAAO/a,KAAK0xG,MACjB1xG,KAAK0xG,MAAMI,SAAW/hG,EACtB/P,KAAK0xG,MAAQ3hG,MAEZ,IAAI8hG,IAAUN,MAAME,KAAM,CAC3B,GAAI1hG,IAAS/P,KAAK2xG,MACd,MAEJ,IAAI52F,GAAOhL,EAAKgL,KACZ+2F,EAAW/hG,EAAK+hG,QAEhB/hG,KAAS/P,KAAK0xG,OAGd32F,EAAK+2F,aAAW3yG,GAChBa,KAAK0xG,MAAQ32F,IAIbA,EAAK+2F,SAAWA,EAChBA,EAAS/2F,KAAOA,GAEpBhL,EAAKgL,SAAO5b,GACZ4Q,EAAK+hG,SAAW9xG,KAAK2xG,MACrB3xG,KAAK2xG,MAAM52F,KAAOhL,EAClB/P,KAAK2xG,MAAQ5hG,IAGd+yE,IAEX7oF,SAAQ6oF,UAAYA,U;;;;;;;+CChRpB,QAASsvB,0BACL,GAAIC,GAAeC,SAASC,YAAY,IAAI1kG,SAAS,MACrD,OAAyB,UAArBgU,QAAQyrF,SACD,+BAAiC+E,EAAe,QAIhDG,OAAOx7F,KAAKy7F,KAAKlF,SAAU,UAAY8E,EAAe,SAIrE,QAASK,2BAA0BC,EAAUxkF,OACxB,KAAbA,IAAuBA,EAAW,QACtC,IAAIykF,GACAC,EAAY,GAAIp6F,SAAQ,SAAUC,EAASo6F,GAC3CF,EAAiBl6F,GAErB,OAAO,IAAID,SAAQ,SAAUC,EAASC,GAClC,GAAIo6F,GAASC,MAAMC,aAAa,SAAU/iB,GACtC6iB,EAAOt1F,QACPm1F,GACI,GAAInuB,iBAAgB4B,oBAAoB6J,EAAQ/hE,GAChD,GAAIw2D,iBAAgB6B,oBAAoB0J,EAAQ/hE,MAGxD4kF,GAAO3iG,GAAG,QAASuI,GACnBo6F,EAAOj6B,OAAO65B,EAAU,WACpBI,EAAOtwF,eAAe,QAAS9J,GAC/BD,GACIw6F,YAAa,WAAc,MAAOL,UAMlD,QAASM,2BAA0BR,EAAUxkF,OACxB,KAAbA,IAAuBA,EAAW,QACtC,IAAI+hE,GAAS8iB,MAAMjL,iBAAiB4K,EACpC,QACI,GAAIluB,iBAAgB4B,oBAAoB6J,EAAQ/hE,GAChD,GAAIw2D,iBAAgB6B,oBAAoB0J,EAAQ/hE,IA/CxDp0B,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIs4G,QAAS,mBAAAp4G,CAAQ,KACjBq4G,KAAO,mBAAAr4G,CAAQ,KACfk4G,SAAW,mBAAAl4G,CAAQ,KACnB44G,MAAQ,mBAAA54G,CAAQ,KAChBqqF,gBAAkB,mBAAArqF,CAAQ,KAC1BuqF,gBAAkB,mBAAAvqF,CAAQ,IAW9BH,SAAQm4G,uBAAyBA,uBAwBjCn4G,QAAQy4G,0BAA4BA,0BASpCz4G,QAAQk5G,0BAA4BA,0B;;;;;;;;ACnDpC,QAASr6B,QAAOz8D,GACZ,GAAI08D,GAAY18D,EAAQ08D,UAAWwwB,EAAeltF,EAAQktF,aACtDvgG,EAASqT,EAAQrT,QAAU,GAAIoqG,UAASxiE,aAC5CmoC,GAAUs6B,OAAS,WACf,GAAInjB,GAASojB,SAASv6B,GAClBsK,EAAakwB,SAASC,0BAA0BtjB,EAAQlnF,EAC5DugG,GAAalmB,IAIrB,QAASiwB,UAASv6B,GACd,OACIE,KAAM,SAAUnkC,GAAW,MAAOikC,GAAUE,KAAKnkC,IACjD6xD,UAAW,SAAU5sE,GAAM,MAAOg/C,GAAUqU,UAAY,SAAU/8E,GAAS,MAAO0pB,GAAG1pB,EAAMI,QAC3FyyE,QAAS,SAAUnpD,GAAM,MAAOg/C,GAAUnkC,QAAU,SAAUvkC,GACtDA,YAAiBojG,aACjB15E,EAAG1pB,EAAMogC,WAGjBwyC,QAAS,SAAUlpD,GAAM,MAAOg/C,GAAUlP,QAAU,SAAUx5D,GAAS,MAAO0pB,GAAG1pB,EAAM0Z,KAAM1Z,EAAMw2F,UACnGvrB,QAAS,WAAc,MAAOvC,GAAUt7D,UAvBhD1jB,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIq5G,UAAW,mBAAAn5G,CAAQ,KACnBg5G,SAAW,mBAAAh5G,CAAQ,IAUvBH,SAAQ6+E,OAASA,OAcjB7+E,QAAQq5G,SAAWA,S;;;;;;;AC1BnBv5G,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GAKtD,IAAI6oF,UAAW,mBAAA3oF,CAAQ,IACvBH,SAAQohF,WAAa0H,SAAS1H,UAC9B,IAAIiR,sBAAwB,WACxB,QAASA,KACLtsF,KAAKu8E,eAmBT,MAjBA+P,GAAqB7rF,UAAU66E,QAAU,WACrC,KAAmC,IAA5Bt7E,KAAKu8E,YAAYh9E,QACpBS,KAAKu8E,YAAYjhC,MAAMggC,WAG/BgR,EAAqB7rF,UAAUwB,KAAO,SAAUsqF,GAC5C,GAAIhQ,GAAcv8E,KAAKu8E,WAEvB,OADAA,GAAYt6E,KAAKsqF,IAEbjR,QAAS,WACL,GAAI/5E,GAAQg7E,EAAYn6E,QAAQmqF,IACjB,IAAXhrF,GACAg7E,EAAYr6E,OAAOX,EAAO,MAKnC+qF,IAEXryF,SAAQqyF,qBAAuBA,qB;;;;;;;AC9B/B,QAASxhE,UAAShZ,GACd,IAAK,GAAIxR,KAAKwR,GAAQ7X,QAAQsG,eAAeD,KAAIrG,QAAQqG,GAAKwR,EAAExR,IAEpEvG,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,IAKtD4wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,MACjB0wB,SAAS,mBAAA1wB,CAAQ,M;;;;;;;ACNjB,QAASo5G,2BAA0BtjB,EAAQlnF,GACvC,GAAIk0E,GAAgB,GAAIw2B,UAASjN,uBAAuBvW,GACpD/S,EAAgB,GAAIw2B,UAAS3M,uBAAuB9W,GACpD7M,EAAauwB,iBAAiBrvB,wBAAwBrH,EAAeC,EAAen0E,EAExF,OADAq6E,GAAWJ,QAAQ,WAAc,MAAOI,GAAW/H,YAC5C+H,EAbXtpF,OAAOC,eAAeC,QAAS,cAAgBC,OAAO,GAKtD,IAAI05G,kBAAmB,mBAAAx5G,CAAQ,KAC3Bs5G,SAAW,mBAAAt5G,CAAQ,KACnBu5G,SAAW,mBAAAv5G,CAAQ,IAQvBH,SAAQu5G,0BAA4BA,0B;;;;;;;ACfpC,GAAIzzG,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GAKtD,IAAIuqF,iBAAkB,mBAAArqF,CAAQ,KAC1Bq2F,SAAW,mBAAAr2F,CAAQ,KACnB2sG,4BAA+B,SAAUplG,GAEzC,QAASolG,KACL,MAAkB,QAAXplG,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAW/D,MAbAD,WAAUgnG,EAA6BplG,GAIvColG,EAA4BtmG,UAAUmmG,YAAc,SAAUn2D,EAASrF,GACnE,GAAIxpC,GAAQ5B,KACR24B,EAAW,GAAI83D,UAASC,eAAejgD,GACvCwD,EAAS,GAAIwwC,iBAAgBC,oBAAoB/rD,EACrDsb,GAAOivC,QAAQ,SAAUh+E,GAAK,MAAOtD,GAAMstF,UAAUhqF,KACrD+uC,EAAOgvC,QAAQ,WAAc,MAAOrhF,GAAMwtF,cAC1Cn7C,EAAO86C,iBAAiB,SAAUp+C,GAAQ,MAAO/uC,GAAMytF,mBAAmB1+C,KAC1EsD,EAAO6kC,OAAO1tC,IAEX27D,GACTtiB,gBAAgBuK,sBAClB/0F,SAAQ8sG,4BAA8BA,4B;;;;;;;ACjCtC,GAAIhnG,WAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBlG,OAAOmG,iBACpBC,uBAA2Bd,QAAS,SAAUe,EAAGC,GAAKD,EAAED,UAAYE,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOR,KAAKZ,YAAcgB,EADnCH,EAAcG,EAAGC,GAEjBD,EAAEK,UAAkB,OAANJ,EAAatG,OAAO2G,OAAOL,IAAMG,EAAGC,UAAYJ,EAAEI,UAAW,GAAID,OAGvFzG,QAAOC,eAAeC,QAAS,cAAgBC,OAAO,GACtD,IAAIyqF,iBAAkB,mBAAAvqF,CAAQ,KAC1Bq2F,SAAW,mBAAAr2F,CAAQ,KACnB6sG,4BAA+B,SAAUtlG,GAEzC,QAASslG,KACL,MAAkB,QAAXtlG,GAAmBA,EAAOE,MAAM7B,KAAM8B,YAAc9B,KAgB/D,MAlBAD,WAAUknG,EAA6BtlG,GAIvCslG,EAA4BxmG,UAAU+c,MAAQ,SAAU2jD,GACpD,GAAIrsB,GAAU90C,KAAK6zG,aAAa1yC,EAChCnhE,MAAKi5E,KAAKnkC,IAEdmyD,EAA4BxmG,UAAUozG,aAAe,SAAU1yC,GAC3D,GAAIv/D,GAAQ5B,KACRsD,EAAW,GAAImtF,UAASE,eACxBmjB,EAAS,GAAInvB,iBAAgBC,oBAAoBthF,EAKrD,OAJAwwG,GAAO5wB,QAAQ,SAAUh+E,GAAK,MAAOtD,GAAMstF,UAAUhqF,KACrD4uG,EAAO7wB,QAAQ,WAAc,MAAOrhF,GAAMwtF,cAC1C0kB,EAAOt2F,MAAM2jD,GACb79D,EAAS+rB,MACF/rB,EAASmN,KAAK5C,YAElBo5F,GACTtiB,gBAAgByL,sBAClBn2F,SAAQgtG,4BAA8BA,4B;;;;;;;;;ACnCtC;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,kCAAkC,yCAAyC,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,GAAG;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"elkgraph.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 234);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 24a07b66a7b2f2e95504","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = require(\"./container/container\");\nexports.Container = container_1.Container;\nvar container_module_1 = require(\"./container/container_module\");\nexports.ContainerModule = container_module_1.ContainerModule;\nvar injectable_1 = require(\"./annotation/injectable\");\nexports.injectable = injectable_1.injectable;\nvar tagged_1 = require(\"./annotation/tagged\");\nexports.tagged = tagged_1.tagged;\nvar named_1 = require(\"./annotation/named\");\nexports.named = named_1.named;\nvar inject_1 = require(\"./annotation/inject\");\nexports.inject = inject_1.inject;\nvar optional_1 = require(\"./annotation/optional\");\nexports.optional = optional_1.optional;\nvar unmanaged_1 = require(\"./annotation/unmanaged\");\nexports.unmanaged = unmanaged_1.unmanaged;\nvar multi_inject_1 = require(\"./annotation/multi_inject\");\nexports.multiInject = multi_inject_1.multiInject;\nvar target_name_1 = require(\"./annotation/target_name\");\nexports.targetName = target_name_1.targetName;\nvar post_construct_1 = require(\"./annotation/post_construct\");\nexports.postConstruct = post_construct_1.postConstruct;\nvar metadata_reader_1 = require(\"./planning/metadata_reader\");\nexports.MetadataReader = metadata_reader_1.MetadataReader;\nvar guid_1 = require(\"./utils/guid\");\nexports.guid = guid_1.guid;\nvar decorator_utils_1 = require(\"./annotation/decorator_utils\");\nexports.decorate = decorator_utils_1.decorate;\nvar constraint_helpers_1 = require(\"./syntax/constraint_helpers\");\nexports.traverseAncerstors = constraint_helpers_1.traverseAncerstors;\nexports.taggedConstraint = constraint_helpers_1.taggedConstraint;\nexports.namedConstraint = constraint_helpers_1.namedConstraint;\nexports.typeConstraint = constraint_helpers_1.typeConstraint;\nvar serialization_1 = require(\"./utils/serialization\");\nexports.getServiceIdentifierAsString = serialization_1.getServiceIdentifierAsString;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/inversify.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TYPES = {\n    IActionDispatcher: Symbol('IActionDispatcher'),\n    IActionDispatcherProvider: Symbol('IActionDispatcherProvider'),\n    IActionHandlerInitializer: Symbol('IActionHandlerInitializer'),\n    ActionHandlerRegistry: Symbol('ActionHandlerRegistry'),\n    AnimationFrameSyncer: Symbol('AnimationFrameSyncer'),\n    CommandStackOptions: Symbol('CommandStackOptions'),\n    IButtonHandler: Symbol('IButtonHandler'),\n    ICommand: Symbol('ICommand'),\n    ICommandStack: Symbol('ICommandStack'),\n    ICommandStackProvider: Symbol('ICommandStackProvider'),\n    DOMHelper: Symbol('DOMHelper'),\n    HiddenVNodeDecorator: Symbol('HiddenVNodeDecorator'),\n    HoverState: Symbol('HoverState'),\n    KeyListener: Symbol('KeyListener'),\n    Layouter: Symbol('Layouter'),\n    LayoutRegistry: Symbol('LayoutRegistry'),\n    ILogger: Symbol('ILogger'),\n    LogLevel: Symbol('LogLevel'),\n    IModelFactory: Symbol('IModelFactory'),\n    IModelLayoutEngine: Symbol('IModelLayoutEngine'),\n    ModelRendererFactory: Symbol('ModelRendererFactory'),\n    ModelSource: Symbol('ModelSource'),\n    ModelSourceProvider: Symbol('ModelSourceProvider'),\n    MouseListener: Symbol('MouseListener'),\n    /**\n     * @deprecated Use IPopupModelProvider instead.\n     */\n    PopupModelFactory: Symbol('PopupModelFactory'),\n    IPopupModelProvider: Symbol('IPopupModelProvider'),\n    PopupMouseListener: Symbol('PopupMouseListener'),\n    PopupVNodeDecorator: Symbol('PopupVNodeDecorator'),\n    SModelElementRegistration: Symbol('SModelElementRegistration'),\n    SModelRegistry: Symbol('SModelRegistry'),\n    SModelStorage: Symbol('SModelStorage'),\n    StateAwareModelProvider: Symbol('StateAwareModelProvider'),\n    SvgExporter: Symbol('SvgExporter'),\n    IViewer: Symbol('IViewer'),\n    ViewerOptions: Symbol('ViewerOptions'),\n    IViewerProvider: Symbol('IViewerProvider'),\n    ViewRegistration: Symbol('ViewRegistration'),\n    ViewRegistry: Symbol('ViewRegistry'),\n    IVNodeDecorator: Symbol('IVNodeDecorator')\n};\n//# sourceMappingURL=types.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/types.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar iterable_1 = require(\"../../utils/iterable\");\n/**\n * Base class for all elements of the diagram model.\n * Each model element must have a unique ID and a type that is used to look up its view.\n */\nvar SModelElement = /** @class */ (function () {\n    function SModelElement() {\n    }\n    Object.defineProperty(SModelElement.prototype, \"root\", {\n        get: function () {\n            var current = this;\n            while (current) {\n                if (current instanceof SModelRoot)\n                    return current;\n                else if (current instanceof SChildElement)\n                    current = current.parent;\n                else\n                    current = undefined;\n            }\n            throw new Error(\"Element has no root\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SModelElement.prototype, \"index\", {\n        get: function () {\n            return this.root.index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * A feature is a symbol identifying some functionality that can be enabled or disabled for\n     * a model element. The base implementation always returns false, so it disables all features.\n     */\n    SModelElement.prototype.hasFeature = function (feature) {\n        return false;\n    };\n    return SModelElement;\n}());\nexports.SModelElement = SModelElement;\nfunction isParent(element) {\n    var children = element.children;\n    return children !== undefined && children.constructor === Array;\n}\nexports.isParent = isParent;\n/**\n * A parent element may contain child elements, thus the diagram model forms a tree.\n */\nvar SParentElement = /** @class */ (function (_super) {\n    __extends(SParentElement, _super);\n    function SParentElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.children = [];\n        return _this;\n    }\n    SParentElement.prototype.add = function (child, i) {\n        var children = this.children;\n        if (i === undefined) {\n            children.push(child);\n        }\n        else {\n            if (i < 0 || i > this.children.length) {\n                throw new Error(\"Child index \" + i + \" out of bounds (0..\" + children.length + \")\");\n            }\n            children.splice(i, 0, child);\n        }\n        child.parent = this;\n        this.index.add(child);\n    };\n    SParentElement.prototype.remove = function (child) {\n        var children = this.children;\n        var i = children.indexOf(child);\n        if (i < 0) {\n            throw new Error(\"No such child \" + child.id);\n        }\n        children.splice(i, 1);\n        delete child.parent;\n        this.index.remove(child);\n    };\n    SParentElement.prototype.removeAll = function (filter) {\n        var _this = this;\n        var children = this.children;\n        if (filter !== undefined) {\n            for (var i = children.length - 1; i >= 0; i--) {\n                if (filter(children[i])) {\n                    var child = children.splice(i, 1)[0];\n                    delete child.parent;\n                    this.index.remove(child);\n                }\n            }\n        }\n        else {\n            children.forEach(function (child) {\n                delete child.parent;\n                _this.index.remove(child);\n            });\n            children.splice(0, children.length);\n        }\n    };\n    SParentElement.prototype.move = function (child, newIndex) {\n        var children = this.children;\n        var i = children.indexOf(child);\n        if (i === -1) {\n            throw new Error(\"No such child \" + child.id);\n        }\n        else {\n            if (newIndex < 0 || newIndex > children.length - 1) {\n                throw new Error(\"Child index \" + newIndex + \" out of bounds (0..\" + children.length + \")\");\n            }\n            children.splice(i, 1);\n            children.splice(newIndex, 0, child);\n        }\n    };\n    /**\n     * Transform the given bounds from the local coordinate system of this element to the coordinate\n     * system of its parent. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    SParentElement.prototype.localToParent = function (point) {\n        return geometry_1.isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    };\n    /**\n     * Transform the given bounds from the coordinate system of this element's parent to its local\n     * coordinate system. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    SParentElement.prototype.parentToLocal = function (point) {\n        return geometry_1.isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    };\n    return SParentElement;\n}(SModelElement));\nexports.SParentElement = SParentElement;\n/**\n * A child element is contained in a parent element. All elements except the model root are child\n * elements. In order to keep the model class hierarchy simple, every child element is also a\n * parent element, although for many elements the array of children is empty (i.e. they are\n * leafs in the model element tree).\n */\nvar SChildElement = /** @class */ (function (_super) {\n    __extends(SChildElement, _super);\n    function SChildElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SChildElement;\n}(SParentElement));\nexports.SChildElement = SChildElement;\n/**\n * Base class for the root element of the diagram model tree.\n */\nvar SModelRoot = /** @class */ (function (_super) {\n    __extends(SModelRoot, _super);\n    function SModelRoot(index) {\n        if (index === void 0) { index = new SModelIndex(); }\n        var _this = _super.call(this) || this;\n        _this.canvasBounds = geometry_1.EMPTY_BOUNDS;\n        // Override the index property from SModelElement, which has a getter, with a data property\n        Object.defineProperty(_this, 'index', {\n            value: index,\n            writable: false\n        });\n        return _this;\n    }\n    return SModelRoot;\n}(SParentElement));\nexports.SModelRoot = SModelRoot;\nvar ID_CHARS = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nfunction createRandomId(length) {\n    if (length === void 0) { length = 8; }\n    var id = \"\";\n    for (var i = 0; i < length; i++) {\n        id += ID_CHARS.charAt(Math.floor(Math.random() * ID_CHARS.length));\n    }\n    return id;\n}\nexports.createRandomId = createRandomId;\n/**\n * Used to speed up model element lookup by id.\n */\nvar SModelIndex = /** @class */ (function () {\n    function SModelIndex() {\n        this.id2element = new Map;\n    }\n    SModelIndex.prototype.add = function (element) {\n        if (!element.id) {\n            do {\n                element.id = createRandomId();\n            } while (this.contains(element));\n        }\n        else if (this.contains(element)) {\n            throw new Error(\"Duplicate ID in model: \" + element.id);\n        }\n        this.id2element.set(element.id, element);\n        if (element.children !== undefined && element.children.constructor === Array) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.add(child);\n            }\n        }\n    };\n    SModelIndex.prototype.remove = function (element) {\n        this.id2element.delete(element.id);\n        if (element.children !== undefined && element.children.constructor === Array) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.remove(child);\n            }\n        }\n    };\n    SModelIndex.prototype.contains = function (element) {\n        return this.id2element.has(element.id);\n    };\n    SModelIndex.prototype.getById = function (id) {\n        return this.id2element.get(id);\n    };\n    SModelIndex.prototype.getAttachedElements = function (element) {\n        return [];\n    };\n    SModelIndex.prototype.all = function () {\n        return iterable_1.mapIterable(this.id2element, function (_a) {\n            var key = _a[0], value = _a[1];\n            return value;\n        });\n    };\n    return SModelIndex;\n}());\nexports.SModelIndex = SModelIndex;\n//# sourceMappingURL=smodel.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/model/smodel.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * (x,y) coordinates of the origin.\n */\nexports.ORIGIN_POINT = Object.freeze({\n    x: 0,\n    y: 0\n});\n/**\n * Adds two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The sum of the two points\n */\nfunction add(p1, p2) {\n    return {\n        x: p1.x + p2.x,\n        y: p1.y + p2.y\n    };\n}\nexports.add = add;\n/**\n * Subtracts two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The difference of the two points\n */\nfunction subtract(p1, p2) {\n    return {\n        x: p1.x - p2.x,\n        y: p1.y - p2.y\n    };\n}\nexports.subtract = subtract;\n/**\n * A dimension with both width and height set to a negative value, which is considered as undefined.\n */\nexports.EMPTY_DIMENSION = Object.freeze({\n    width: -1,\n    height: -1\n});\n/**\n * Checks whether the given dimention is valid, i.e. the width and height are non-zero.\n * @param {Dimension} b - Dimension object\n * @returns {boolean}\n */\nfunction isValidDimension(d) {\n    return d.width >= 0 && d.height >= 0;\n}\nexports.isValidDimension = isValidDimension;\nexports.EMPTY_BOUNDS = Object.freeze({\n    x: 0,\n    y: 0,\n    width: -1,\n    height: -1\n});\nfunction isBounds(element) {\n    return 'x' in element\n        && 'y' in element\n        && 'width' in element\n        && 'height' in element;\n}\nexports.isBounds = isBounds;\n/**\n * Combines the bounds of two objects into one, so that the new bounds\n * are the minimum bounds that covers both of the original bounds.\n * @param {Bounds} b0 - First bounds object\n * @param {Bounds} b1 - Second bounds object\n * @returns {Bounds} The combined bounds\n */\nfunction combine(b0, b1) {\n    var minX = Math.min(b0.x, b1.x);\n    var minY = Math.min(b0.y, b1.y);\n    var maxX = Math.max(b0.x + (b0.width >= 0 ? b0.width : 0), b1.x + (b1.width >= 0 ? b1.width : 0));\n    var maxY = Math.max(b0.y + (b0.height >= 0 ? b0.height : 0), b1.y + (b1.height >= 0 ? b1.height : 0));\n    return {\n        x: minX, y: minY, width: maxX - minX, height: maxY - minY\n    };\n}\nexports.combine = combine;\n/**\n * Translates the given bounds.\n * @param {Bounds} b - Bounds object\n * @param {Point} p - Vector by which to translate the bounds\n * @returns {Bounds} The translated bounds\n */\nfunction translate(b, p) {\n    return {\n        x: b.x + p.x,\n        y: b.y + p.y,\n        width: b.width,\n        height: b.height\n    };\n}\nexports.translate = translate;\n/**\n * Returns the center point of the bounds of an object\n * @param {Bounds} b - Bounds object\n * @returns {Point} the center point\n */\nfunction center(b) {\n    return {\n        x: b.x + (b.width >= 0 ? 0.5 * b.width : 0),\n        y: b.y + (b.height >= 0 ? 0.5 * b.height : 0)\n    };\n}\nexports.center = center;\nfunction centerOfLine(s, e) {\n    var b = {\n        x: s.x > e.x ? e.x : s.x,\n        y: s.y > e.y ? e.y : s.y,\n        width: Math.abs(e.x - s.x),\n        height: Math.abs(e.y - s.y)\n    };\n    return center(b);\n}\nexports.centerOfLine = centerOfLine;\n/**\n * Checks whether the point p is included in the bounds b.\n */\nfunction includes(b, p) {\n    return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;\n}\nexports.includes = includes;\n/**\n * Enumeration of possible directions (left, right, up, down)\n */\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"left\"] = 0] = \"left\";\n    Direction[Direction[\"right\"] = 1] = \"right\";\n    Direction[Direction[\"up\"] = 2] = \"up\";\n    Direction[Direction[\"down\"] = 3] = \"down\";\n})(Direction = exports.Direction || (exports.Direction = {}));\n/**\n * Returns the \"straight line\" distance between two points.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Eucledian distance\n */\nfunction euclideanDistance(a, b) {\n    var dx = b.x - a.x;\n    var dy = b.y - a.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexports.euclideanDistance = euclideanDistance;\n/**\n * Returns the distance between two points in a grid, using a\n * strictly vertical and/or horizontal path (versus straight line).\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Manhattan distance\n */\nfunction manhattanDistance(a, b) {\n    return Math.abs(b.x - a.x) + Math.abs(b.y - a.y);\n}\nexports.manhattanDistance = manhattanDistance;\n/**\n * Returns the maximum of the horizontal and the vertical distance.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The maximum distance\n */\nfunction maxDistance(a, b) {\n    return Math.max(Math.abs(b.x - a.x), Math.abs(b.y - a.y));\n}\nexports.maxDistance = maxDistance;\n/**\n * Computes the angle in radians of the given point to the x-axis of the coordinate system.\n * The result is in the range [-pi, pi].\n * @param {Point} p - A point in the Eucledian plane\n */\nfunction angleOfPoint(p) {\n    return Math.atan2(p.y, p.x);\n}\nexports.angleOfPoint = angleOfPoint;\n/**\n * Computes the angle in radians between the two given points (relative to the origin of the coordinate system).\n * The result is in the range [0, pi]. Returns NaN if the points are equal.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n */\nfunction angleBetweenPoints(a, b) {\n    var lengthProduct = Math.sqrt((a.x * a.x + a.y * a.y) * (b.x * b.x + b.y * b.y));\n    if (isNaN(lengthProduct) || lengthProduct === 0)\n        return NaN;\n    var dotProduct = a.x * b.x + a.y * b.y;\n    return Math.acos(dotProduct / lengthProduct);\n}\nexports.angleBetweenPoints = angleBetweenPoints;\n/**\n * Converts from radians to degrees\n * @param {number} a - A value in radians\n * @returns {number} The converted value\n */\nfunction toDegrees(a) {\n    return a * 180 / Math.PI;\n}\nexports.toDegrees = toDegrees;\n/**\n * Converts from degrees to radians\n * @param {number} a - A value in degrees\n * @returns {number} The converted value\n */\nfunction toRadians(a) {\n    return a * Math.PI / 180;\n}\nexports.toRadians = toRadians;\n/**\n * Returns whether two numbers are almost equal, within a small margin (0.001)\n * @param {number} a - First number\n * @param {number} b - Second number\n * @returns {boolean} True if the two numbers are almost equal\n */\nfunction almostEquals(a, b) {\n    return Math.abs(a - b) < 1e-3;\n}\nexports.almostEquals = almostEquals;\n//# sourceMappingURL=geometry.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/geometry.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NAMED_TAG = \"named\";\nexports.NAME_TAG = \"name\";\nexports.UNMANAGED_TAG = \"unmanaged\";\nexports.OPTIONAL_TAG = \"optional\";\nexports.INJECT_TAG = \"inject\";\nexports.MULTI_INJECT_TAG = \"multi_inject\";\nexports.TAGGED = \"inversify:tagged\";\nexports.TAGGED_PROP = \"inversify:tagged_props\";\nexports.PARAM_TYPES = \"inversify:paramtypes\";\nexports.DESIGN_PARAM_TYPES = \"design:paramtypes\";\nexports.POST_CONSTRUCT = \"post_construct\";\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/constants/metadata_keys.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\n/**\n * Base class for all commands.\n */\nvar Command = /** @class */ (function () {\n    function Command() {\n    }\n    return Command;\n}());\nexports.Command = Command;\n/**\n * A mergeable command can accumulate subsequent commands of the same kind.\n *\n * For example, multiple subsequent move commands can be merged to yield a\n * single command, such that undo will roll them back altogether. Otherwise\n * the user would have to push CTRL-Z for each mouse move element that\n * resuted in a command.\n */\nvar MergeableCommand = /** @class */ (function (_super) {\n    __extends(MergeableCommand, _super);\n    function MergeableCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Tries to merge the given command with this.\n     *\n     * @param command\n     * @param context\n     */\n    MergeableCommand.prototype.merge = function (command, context) {\n        return false;\n    };\n    return MergeableCommand;\n}(Command));\nexports.MergeableCommand = MergeableCommand;\n/**\n * A hidden command is used to trigger the rendering of a model on a\n * hidden canvas.\n *\n * Some graphical elements are styled using CSS, others have bounds that\n * require to layout their children before being computed. In such cases\n * we cannot tell about the size of elements without acutally rendering\n * the DOM. We render them to an invisible canvas. This can be achieved\n * using hidden commands.\n *\n * Hidden commands do not change the model directly, and are as such\n * neither undoable nor redoable. The command stack does not push them on\n * any stack and forwards the resulting model to the invisible viewer.\n */\nvar HiddenCommand = /** @class */ (function (_super) {\n    __extends(HiddenCommand, _super);\n    function HiddenCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HiddenCommand.prototype.undo = function (context) {\n        context.logger.error(this, 'Cannot undo a hidden command');\n        return context.root;\n    };\n    HiddenCommand.prototype.redo = function (context) {\n        context.logger.error(this, 'Cannot redo a hidden command');\n        return context.root;\n    };\n    return HiddenCommand;\n}(Command));\nexports.HiddenCommand = HiddenCommand;\nvar PopupCommand = /** @class */ (function (_super) {\n    __extends(PopupCommand, _super);\n    function PopupCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PopupCommand;\n}(Command));\nexports.PopupCommand = PopupCommand;\n/**\n * A system command is triggered by the system, e.g. in order to update bounds\n * in the model with data fetched from the DOM.\n *\n * As it is automatically triggered it should not count as a single command in\n * undo/redo operations. Into the bargain, such an automatic command could occur\n * after an undo and as such make the next redo command invalid because it is\n * based on a model state that has changed. The command stack handles system\n * commands in a special way to overcome these issues.\n */\nvar SystemCommand = /** @class */ (function (_super) {\n    __extends(SystemCommand, _super);\n    function SystemCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SystemCommand;\n}(Command));\nexports.SystemCommand = SystemCommand;\nvar CommandActionHandler = /** @class */ (function () {\n    function CommandActionHandler(commandType) {\n        this.commandType = commandType;\n    }\n    CommandActionHandler.prototype.handle = function (action) {\n        return new this.commandType(action);\n    };\n    return CommandActionHandler;\n}());\nexports.CommandActionHandler = CommandActionHandler;\nvar CommandActionHandlerInitializer = /** @class */ (function () {\n    function CommandActionHandlerInitializer(commandCtrs) {\n        this.commandCtrs = commandCtrs;\n    }\n    CommandActionHandlerInitializer.prototype.initialize = function (registry) {\n        this.commandCtrs.forEach(function (commandCtr) { return registry.registerCommand(commandCtr); });\n    };\n    CommandActionHandlerInitializer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ICommand)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], CommandActionHandlerInitializer);\n    return CommandActionHandlerInitializer;\n}());\nexports.CommandActionHandlerInitializer = CommandActionHandlerInitializer;\n//# sourceMappingURL=command.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/commands/command.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"./smodel\");\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the basic type of a model element.\n */\nfunction getBasicType(schema) {\n    if (!schema.type)\n        return '';\n    var colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(0, colonIndex);\n    else\n        return schema.type;\n}\nexports.getBasicType = getBasicType;\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the sub-type of a model element.\n */\nfunction getSubType(schema) {\n    if (!schema.type)\n        return '';\n    var colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(colonIndex + 1);\n    else\n        return schema.type;\n}\nexports.getSubType = getSubType;\n/**\n * Find the element with the given identifier. If you need to find multiple elements, using an\n * SModelIndex might be more effective.\n */\nfunction findElement(parent, elementId) {\n    if (parent.id === elementId)\n        return parent;\n    if (parent.children !== undefined) {\n        for (var _i = 0, _a = parent.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            var result = findElement(child, elementId);\n            if (result !== undefined)\n                return result;\n        }\n    }\n    return undefined;\n}\nexports.findElement = findElement;\n/**\n * Find a parent element that satisfies the given predicate.\n */\nfunction findParent(element, predicate) {\n    var current = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof smodel_1.SChildElement)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\nexports.findParent = findParent;\n/**\n * Find a parent element that implements the feature identified with the given predicate.\n */\nfunction findParentByFeature(element, predicate) {\n    var current = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof smodel_1.SChildElement)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\nexports.findParentByFeature = findParentByFeature;\n/**\n * Translate a point from the coordinate system of the source element to the coordinate system\n * of the target element.\n */\nfunction translatePoint(point, source, target) {\n    if (source !== target) {\n        // Translate from the source to the root element\n        while (source instanceof smodel_1.SChildElement) {\n            point = source.localToParent(point);\n            source = source.parent;\n            if (source === target)\n                return point;\n        }\n        // Translate from the root to the target element\n        var targetTrace = [];\n        while (target instanceof smodel_1.SChildElement) {\n            targetTrace.push(target);\n            target = target.parent;\n        }\n        if (source !== target)\n            throw new Error(\"Incompatible source and target: \" + source.id + \", \" + target.id);\n        for (var i = targetTrace.length - 1; i >= 0; i--) {\n            point = targetTrace[i].parentToLocal(point);\n        }\n    }\n    return point;\n}\nexports.translatePoint = translatePoint;\n//# sourceMappingURL=smodel-utils.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/model/smodel-utils.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nexports.boundsFeature = Symbol('boundsFeature');\nexports.layoutContainerFeature = Symbol('layoutContainerFeature');\nexports.layoutableChildFeature = Symbol('layoutableChildFeature');\nexports.alignFeature = Symbol('alignFeature');\nfunction isBoundsAware(element) {\n    return 'bounds' in element;\n}\nexports.isBoundsAware = isBoundsAware;\nfunction isLayoutContainer(element) {\n    return isBoundsAware(element)\n        && element.hasFeature(exports.layoutContainerFeature)\n        && 'layout' in element;\n}\nexports.isLayoutContainer = isLayoutContainer;\nfunction isLayoutableChild(element) {\n    return isBoundsAware(element)\n        && element.hasFeature(exports.layoutableChildFeature);\n}\nexports.isLayoutableChild = isLayoutableChild;\nfunction isSizeable(element) {\n    return element.hasFeature(exports.boundsFeature) && isBoundsAware(element);\n}\nexports.isSizeable = isSizeable;\nfunction isAlignable(element) {\n    return element.hasFeature(exports.alignFeature)\n        && 'alignment' in element;\n}\nexports.isAlignable = isAlignable;\nfunction getAbsoluteBounds(element) {\n    var boundsAware = smodel_utils_1.findParentByFeature(element, isBoundsAware);\n    if (boundsAware !== undefined) {\n        var bounds = boundsAware.bounds;\n        var current = boundsAware;\n        while (current instanceof smodel_1.SChildElement) {\n            var parent_1 = current.parent;\n            bounds = parent_1.localToParent(bounds);\n            current = parent_1;\n        }\n        return bounds;\n    }\n    else if (element instanceof smodel_1.SModelRoot) {\n        var canvasBounds = element.canvasBounds;\n        return { x: 0, y: 0, width: canvasBounds.width, height: canvasBounds.height };\n    }\n    else {\n        return geometry_1.EMPTY_BOUNDS;\n    }\n}\nexports.getAbsoluteBounds = getAbsoluteBounds;\n/**\n * Abstract class for elements with a position and a size.\n */\nvar SShapeElement = /** @class */ (function (_super) {\n    __extends(SShapeElement, _super);\n    function SShapeElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        return _this;\n    }\n    Object.defineProperty(SShapeElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SShapeElement.prototype.localToParent = function (point) {\n        var result = {\n            x: point.x + this.position.x,\n            y: point.y + this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    };\n    SShapeElement.prototype.parentToLocal = function (point) {\n        var result = {\n            x: point.x - this.position.x,\n            y: point.y - this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    };\n    return SShapeElement;\n}(smodel_1.SChildElement));\nexports.SShapeElement = SShapeElement;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/model.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar template_1 = require(\"../utils/template\");\nexports.DUPLICATED_INJECTABLE_DECORATOR = \"Cannot apply @injectable decorator multiple times.\";\nexports.DUPLICATED_METADATA = \"Metadata key was used more than once in a parameter:\";\nexports.NULL_ARGUMENT = \"NULL argument\";\nexports.KEY_NOT_FOUND = \"Key Not Found\";\nexports.AMBIGUOUS_MATCH = \"Ambiguous match found for serviceIdentifier:\";\nexports.CANNOT_UNBIND = \"Could not unbind serviceIdentifier:\";\nexports.NOT_REGISTERED = \"No matching bindings found for serviceIdentifier:\";\nexports.MISSING_INJECTABLE_ANNOTATION = \"Missing required @injectable annotation in:\";\nexports.MISSING_INJECT_ANNOTATION = \"Missing required @inject or @multiInject annotation in:\";\nexports.CIRCULAR_DEPENDENCY = \"Circular dependency found:\";\nexports.NOT_IMPLEMENTED = \"Sorry, this feature is not fully implemented yet.\";\nexports.INVALID_BINDING_TYPE = \"Invalid binding type:\";\nexports.NO_MORE_SNAPSHOTS_AVAILABLE = \"No snapshot available to restore.\";\nexports.INVALID_MIDDLEWARE_RETURN = \"Invalid return type in middleware. Middleware must return!\";\nexports.INVALID_FUNCTION_BINDING = \"Value provided to function binding must be a function!\";\nexports.INVALID_TO_SELF_VALUE = \"The toSelf function can only be applied when a constructor is \" +\n    \"used as service identifier\";\nexports.INVALID_DECORATOR_OPERATION = \"The @inject @multiInject @tagged and @named decorators \" +\n    \"must be applied to the parameters of a class constructor or a class property.\";\nexports.ARGUMENTS_LENGTH_MISMATCH_1 = \"The number of constructor arguments in the derived class \";\nexports.ARGUMENTS_LENGTH_MISMATCH_2 = \" must be >= than the number of constructor arguments of its base class.\";\nexports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = \"Invalid Container constructor argument. Container options \" +\n    \"must be an object.\";\nexports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = \"Invalid Container option. Default scope must \" +\n    \"be a string ('singleton' or 'transient').\";\nexports.MULTIPLE_POST_CONSTRUCT_METHODS = \"Cannot apply @postConstruct decorator multiple times in the same class\";\nexports.POST_CONSTRUCT_ERROR = (_a = [\"@postConstruct error in class \", \": \", \"\"], _a.raw = [\"@postConstruct error in class \", \": \", \"\"], template_1.template(_a, 0, 1));\nvar _a;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/constants/error_msgs.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Metadata = (function () {\n    function Metadata(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    Metadata.prototype.toString = function () {\n        if (this.key === METADATA_KEY.NAMED_TAG) {\n            return \"named: \" + this.value.toString() + \" \";\n        }\n        else {\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + this.value + \" }\";\n        }\n    };\n    return Metadata;\n}());\nexports.Metadata = Metadata;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/metadata.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar smodel_1 = require(\"./smodel\");\n/**\n * The default model factory creates SModelRoot for the root element and SChildElement for all other\n * model elements.\n */\nvar SModelFactory = /** @class */ (function () {\n    function SModelFactory(registry) {\n        this.registry = registry;\n    }\n    SModelFactory.prototype.createElement = function (schema, parent) {\n        var child;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SChildElement))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SChildElement.\");\n            child = regElement;\n        }\n        else {\n            child = new smodel_1.SChildElement();\n        }\n        return this.initializeChild(child, schema, parent);\n    };\n    SModelFactory.prototype.createRoot = function (schema) {\n        var root;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SModelRoot))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SModelRoot.\");\n            root = regElement;\n        }\n        else {\n            root = new smodel_1.SModelRoot();\n        }\n        return this.initializeRoot(root, schema);\n    };\n    SModelFactory.prototype.createSchema = function (element) {\n        var _this = this;\n        var schema = {};\n        for (var key in element) {\n            if (!this.isReserved(element, key)) {\n                var value = element[key];\n                if (typeof value !== 'function')\n                    schema[key] = value;\n            }\n        }\n        if (element instanceof smodel_1.SParentElement)\n            schema['children'] = element.children.map(function (child) { return _this.createSchema(child); });\n        return schema;\n    };\n    SModelFactory.prototype.initializeElement = function (element, schema) {\n        for (var key in schema) {\n            if (!this.isReserved(element, key)) {\n                var value = schema[key];\n                if (typeof value !== 'function')\n                    element[key] = value;\n            }\n        }\n        return element;\n    };\n    SModelFactory.prototype.isReserved = function (element, propertyName) {\n        if (['children', 'parent', 'index'].indexOf(propertyName) >= 0)\n            return true;\n        var obj = element;\n        do {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, propertyName);\n            if (descriptor !== undefined)\n                return descriptor.get !== undefined;\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return false;\n    };\n    SModelFactory.prototype.initializeParent = function (parent, schema) {\n        var _this = this;\n        this.initializeElement(parent, schema);\n        if (smodel_1.isParent(schema)) {\n            parent.children = schema.children.map(function (childSchema) { return _this.createElement(childSchema, parent); });\n        }\n        return parent;\n    };\n    SModelFactory.prototype.initializeChild = function (child, schema, parent) {\n        this.initializeParent(child, schema);\n        if (parent !== undefined) {\n            child.parent = parent;\n        }\n        return child;\n    };\n    SModelFactory.prototype.initializeRoot = function (root, schema) {\n        this.initializeParent(root, schema);\n        root.index.add(root);\n        return root;\n    };\n    SModelFactory = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.SModelRegistry)),\n        __metadata(\"design:paramtypes\", [SModelRegistry])\n    ], SModelFactory);\n    return SModelFactory;\n}());\nexports.SModelFactory = SModelFactory;\nexports.EMPTY_ROOT = Object.freeze({\n    type: 'NONE',\n    id: 'EMPTY'\n});\n/**\n * Model element classes registered here are considered automatically when constructring a model from its schema.\n */\nvar SModelRegistry = /** @class */ (function (_super) {\n    __extends(SModelRegistry, _super);\n    function SModelRegistry(registrations) {\n        var _this = _super.call(this) || this;\n        registrations.forEach(function (registration) { return _this.register(registration.type, registration.constr); });\n        return _this;\n    }\n    SModelRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.SModelElementRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], SModelRegistry);\n    return SModelRegistry;\n}(registry_1.ProviderRegistry));\nexports.SModelRegistry = SModelRegistry;\n//# sourceMappingURL=smodel-factory.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/model/smodel-factory.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction setAttr(vnode, name, value) {\n    getAttrs(vnode)[name] = value;\n}\nexports.setAttr = setAttr;\nfunction setClass(vnode, name, value) {\n    getClass(vnode)[name] = value;\n}\nexports.setClass = setClass;\nfunction copyClassesFromVNode(source, target) {\n    var classList = getClass(source);\n    for (var c in classList) {\n        if (classList.hasOwnProperty(c))\n            setClass(target, c, true);\n    }\n}\nexports.copyClassesFromVNode = copyClassesFromVNode;\nfunction copyClassesFromElement(element, target) {\n    var classList = element.classList;\n    for (var i = 0; i < classList.length; i++) {\n        var item = classList.item(i);\n        if (item)\n            setClass(target, item, true);\n    }\n}\nexports.copyClassesFromElement = copyClassesFromElement;\nfunction mergeStyle(vnode, style) {\n    getData(vnode).style = __assign({}, (getData(vnode).style || {}), style);\n}\nexports.mergeStyle = mergeStyle;\nfunction on(vnode, event, listener, element) {\n    var val = getOn(vnode);\n    if (val[event]) {\n        throw new Error('EventListener for ' + event + ' already registered on VNode');\n    }\n    val[event] = [listener, element];\n}\nexports.on = on;\nfunction getAttrs(vnode) {\n    var data = getData(vnode);\n    if (!data.attrs)\n        data.attrs = {};\n    return data.attrs;\n}\nexports.getAttrs = getAttrs;\nfunction getData(vnode) {\n    if (!vnode.data)\n        vnode.data = {};\n    return vnode.data;\n}\nfunction getClass(vnode) {\n    var data = getData(vnode);\n    if (!data.class)\n        data.class = {};\n    return data.class;\n}\nfunction getOn(vnode) {\n    var data = getData(vnode);\n    if (!data.on)\n        data.on = {};\n    return data.on;\n}\n//# sourceMappingURL=vnode-utils.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/vnode-utils.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.selectFeature = Symbol('selectFeature');\nfunction isSelectable(element) {\n    return element.hasFeature(exports.selectFeature);\n}\nexports.isSelectable = isSelectable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/select/model.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED;\n    _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\nexports.tagParameter = tagParameter;\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED_PROP;\n    _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\nexports.tagProperty = tagProperty;\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n    var paramsOrPropertiesMetadata = {};\n    var isParameterDecorator = (typeof parameterIndex === \"number\");\n    var key = (parameterIndex !== undefined && isParameterDecorator) ? parameterIndex.toString() : propertyName;\n    if (isParameterDecorator === true && propertyName !== undefined) {\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n    }\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget) === true) {\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n    }\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n    if (Array.isArray(paramOrPropertyMetadata) !== true) {\n        paramOrPropertyMetadata = [];\n    }\n    else {\n        for (var i = 0; i < paramOrPropertyMetadata.length; i++) {\n            var m = paramOrPropertyMetadata[i];\n            if (m.key === metadata.key) {\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key);\n            }\n        }\n    }\n    paramOrPropertyMetadata.push(metadata);\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\nfunction _decorate(decorators, target) {\n    Reflect.decorate(decorators, target);\n}\nfunction _param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction decorate(decorator, target, parameterIndex) {\n    if (typeof parameterIndex === \"number\") {\n        _decorate([_param(parameterIndex, decorator)], target);\n    }\n    else if (typeof parameterIndex === \"string\") {\n        Reflect.decorate([decorator], target, parameterIndex);\n    }\n    else {\n        _decorate([decorator], target);\n    }\n}\nexports.decorate = decorate;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/decorator_utils.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BindingScopeEnum = {\n    Singleton: \"Singleton\",\n    Transient: \"Transient\"\n};\nexports.BindingScopeEnum = BindingScopeEnum;\nvar BindingTypeEnum = {\n    ConstantValue: \"ConstantValue\",\n    Constructor: \"Constructor\",\n    DynamicValue: \"DynamicValue\",\n    Factory: \"Factory\",\n    Function: \"Function\",\n    Instance: \"Instance\",\n    Invalid: \"Invalid\",\n    Provider: \"Provider\"\n};\nexports.BindingTypeEnum = BindingTypeEnum;\nvar TargetTypeEnum = {\n    ClassProperty: \"ClassProperty\",\n    ConstructorArgument: \"ConstructorArgument\",\n    Variable: \"Variable\"\n};\nexports.TargetTypeEnum = TargetTypeEnum;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/constants/literal_types.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_1 = require(\"../model/smodel\");\nvar action_1 = require(\"../actions/action\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar dom_helper_1 = require(\"./dom-helper\");\nvar MouseTool = /** @class */ (function () {\n    function MouseTool(actionDispatcher, domHelper, mouseListeners) {\n        if (mouseListeners === void 0) { mouseListeners = []; }\n        this.actionDispatcher = actionDispatcher;\n        this.domHelper = domHelper;\n        this.mouseListeners = mouseListeners;\n    }\n    MouseTool.prototype.register = function (mouseListener) {\n        this.mouseListeners.push(mouseListener);\n    };\n    MouseTool.prototype.deregister = function (mouseListener) {\n        var index = this.mouseListeners.indexOf(mouseListener);\n        if (index >= 0)\n            this.mouseListeners.splice(index, 1);\n    };\n    MouseTool.prototype.getTargetElement = function (model, event) {\n        var target = event.target;\n        var index = model.index;\n        while (target) {\n            if (target.id) {\n                var element = index.getById(this.domHelper.findSModelIdByDOMElement(target));\n                if (element !== undefined)\n                    return element;\n            }\n            target = target.parentNode;\n        }\n        return undefined;\n    };\n    MouseTool.prototype.handleEvent = function (methodName, model, event) {\n        var _this = this;\n        this.focusOnMouseEvent(methodName, model);\n        var element = this.getTargetElement(model, event);\n        if (!element)\n            return;\n        var actions = this.mouseListeners\n            .map(function (listener) { return listener[methodName].apply(listener, [element, event]); })\n            .reduce(function (a, b) { return a.concat(b); });\n        if (actions.length > 0) {\n            event.preventDefault();\n            for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n                var actionOrPromise = actions_1[_i];\n                if (action_1.isAction(actionOrPromise)) {\n                    this.actionDispatcher.dispatch(actionOrPromise);\n                }\n                else {\n                    actionOrPromise.then(function (action) {\n                        _this.actionDispatcher.dispatch(action);\n                    });\n                }\n            }\n        }\n    };\n    MouseTool.prototype.focusOnMouseEvent = function (methodName, model) {\n        if (document) {\n            var domElement = document.getElementById(this.domHelper.createUniqueDOMElementId(model));\n            if (methodName === 'mouseDown' && domElement !== null && typeof domElement.focus === 'function')\n                domElement.focus();\n        }\n    };\n    MouseTool.prototype.mouseOver = function (model, event) {\n        this.handleEvent('mouseOver', model, event);\n    };\n    MouseTool.prototype.mouseOut = function (model, event) {\n        this.handleEvent('mouseOut', model, event);\n    };\n    MouseTool.prototype.mouseEnter = function (model, event) {\n        this.handleEvent('mouseEnter', model, event);\n    };\n    MouseTool.prototype.mouseLeave = function (model, event) {\n        this.handleEvent('mouseLeave', model, event);\n    };\n    MouseTool.prototype.mouseDown = function (model, event) {\n        this.handleEvent('mouseDown', model, event);\n    };\n    MouseTool.prototype.mouseMove = function (model, event) {\n        this.handleEvent('mouseMove', model, event);\n    };\n    MouseTool.prototype.mouseUp = function (model, event) {\n        this.handleEvent('mouseUp', model, event);\n    };\n    MouseTool.prototype.wheel = function (model, event) {\n        this.handleEvent('wheel', model, event);\n    };\n    MouseTool.prototype.doubleClick = function (model, event) {\n        this.handleEvent('doubleClick', model, event);\n    };\n    MouseTool.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot) {\n            vnode_utils_1.on(vnode, 'mouseover', this.mouseOver.bind(this), element);\n            vnode_utils_1.on(vnode, 'mouseout', this.mouseOut.bind(this), element);\n            vnode_utils_1.on(vnode, 'mouseenter', this.mouseEnter.bind(this), element);\n            vnode_utils_1.on(vnode, 'mouseleave', this.mouseLeave.bind(this), element);\n            vnode_utils_1.on(vnode, 'mousedown', this.mouseDown.bind(this), element);\n            vnode_utils_1.on(vnode, 'mouseup', this.mouseUp.bind(this), element);\n            vnode_utils_1.on(vnode, 'mousemove', this.mouseMove.bind(this), element);\n            vnode_utils_1.on(vnode, 'wheel', this.wheel.bind(this), element);\n            vnode_utils_1.on(vnode, 'contextmenu', function (target, event) {\n                event.preventDefault();\n            }, element);\n            vnode_utils_1.on(vnode, 'dblclick', this.doubleClick.bind(this), element);\n        }\n        vnode = this.mouseListeners.reduce(function (n, listener) { return listener.decorate(n, element); }, vnode);\n        return vnode;\n    };\n    MouseTool.prototype.postUpdate = function () {\n    };\n    MouseTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.DOMHelper)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.MouseListener)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Object, dom_helper_1.DOMHelper, Array])\n    ], MouseTool);\n    return MouseTool;\n}());\nexports.MouseTool = MouseTool;\nvar PopupMouseTool = /** @class */ (function (_super) {\n    __extends(PopupMouseTool, _super);\n    function PopupMouseTool(actionDispatcher, domHelper, mouseListeners) {\n        if (mouseListeners === void 0) { mouseListeners = []; }\n        var _this = _super.call(this, actionDispatcher, domHelper, mouseListeners) || this;\n        _this.actionDispatcher = actionDispatcher;\n        _this.domHelper = domHelper;\n        _this.mouseListeners = mouseListeners;\n        return _this;\n    }\n    PopupMouseTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.DOMHelper)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.PopupMouseListener)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Object, dom_helper_1.DOMHelper, Array])\n    ], PopupMouseTool);\n    return PopupMouseTool;\n}(MouseTool));\nexports.PopupMouseTool = PopupMouseTool;\nvar MouseListener = /** @class */ (function () {\n    function MouseListener() {\n    }\n    MouseListener.prototype.mouseOver = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseOut = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseEnter = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseLeave = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseDown = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseMove = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseUp = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.wheel = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.doubleClick = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    MouseListener = __decorate([\n        inversify_1.injectable()\n    ], MouseListener);\n    return MouseListener;\n}());\nexports.MouseListener = MouseListener;\n//# sourceMappingURL=mouse-tool.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/mouse-tool.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nexports.viewportFeature = Symbol('viewportFeature');\nfunction isViewport(element) {\n    return element instanceof smodel_1.SModelRoot\n        && element.hasFeature(exports.viewportFeature)\n        && 'zoom' in element\n        && 'scroll' in element;\n}\nexports.isViewport = isViewport;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/model.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction guid() {\n    function s4() {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    }\n    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" +\n        s4() + \"-\" + s4() + s4() + s4();\n}\nexports.guid = guid;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/utils/guid.js","\"use strict\";\r\n\r\nvar SVGNS = 'http://www.w3.org/2000/svg';\r\nvar modulesNS = ['hook', 'on', 'style', 'class', 'props', 'attrs', 'dataset'];\r\nvar slice = Array.prototype.slice;\r\n\r\nfunction isPrimitive(val) {\r\n  return  typeof val === 'string'   ||\r\n          typeof val === 'number'   ||\r\n          typeof val === 'boolean'  ||\r\n          typeof val === 'symbol'   ||\r\n          val === null              ||\r\n          val === undefined;\r\n}\r\n\r\nfunction normalizeAttrs(attrs, nsURI, defNS, modules) {\r\n  var map = { ns: nsURI };\r\n  for (var i = 0, len = modules.length; i < len; i++) {\r\n    var mod = modules[i];\r\n    if(attrs[mod])\r\n      map[mod] = attrs[mod];\r\n  }\r\n  for(var key in attrs) {\r\n    if(key !== 'key' && key !== 'classNames' && key !== 'selector') {\r\n      var idx = key.indexOf('-');\r\n      if(idx > 0)\r\n        addAttr(key.slice(0, idx), key.slice(idx+1), attrs[key]);\r\n      else if(!map[key])\r\n        addAttr(defNS, key, attrs[key]);\r\n    }\r\n  }\r\n  return map;\r\n\r\n  function addAttr(namespace, key, val) {\r\n    var ns = map[namespace] || (map[namespace] = {});\r\n    ns[key] = val;\r\n  }\r\n}\r\n\r\nfunction buildFromStringTag(nsURI, defNS, modules, tag, attrs, children) {\r\n\r\n  if(attrs.selector) {\r\n    tag = tag + attrs.selector;\r\n  }\r\n  if(attrs.classNames) {\r\n    var cns = attrs.classNames;\r\n    tag = tag + '.' + (\r\n      Array.isArray(cns) ? cns.join('.') : cns.replace(/\\s+/g, '.')\r\n    );\r\n  }\r\n\r\n  return {\r\n    sel       : tag,\r\n    data      : normalizeAttrs(attrs, nsURI, defNS, modules),\r\n    children  : children.map( function(c) {\r\n      return isPrimitive(c) ? {text: c} : c;\r\n    }),\r\n    key: attrs.key\r\n  };\r\n}\r\n\r\nfunction buildFromComponent(nsURI, defNS, modules, tag, attrs, children) {\r\n  var res;\r\n  if(typeof tag === 'function')\r\n    res = tag(attrs, children);\r\n  else if(tag && typeof tag.view === 'function')\r\n    res = tag.view(attrs, children);\r\n  else if(tag && typeof tag.render === 'function')\r\n    res = tag.render(attrs, children);\r\n  else\r\n    throw \"JSX tag must be either a string, a function or an object with 'view' or 'render' methods\";\r\n  res.key = attrs.key;\r\n  return res;\r\n}\r\n\r\nfunction flatten(nested, start, flat) {\r\n  for (var i = start, len = nested.length; i < len; i++) {\r\n    var item = nested[i];\r\n    if (Array.isArray(item)) {\r\n      flatten(item, 0, flat);\r\n    } else {\r\n      flat.push(item);\r\n    }\r\n  }\r\n}\r\n\r\nfunction maybeFlatten(array) {\r\n  if (array) {\r\n    for (var i = 0, len = array.length; i < len; i++) {\r\n      if (Array.isArray(array[i])) {\r\n        var flat = array.slice(0, i);\r\n        flatten(array, i, flat);\r\n        array = flat;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction buildVnode(nsURI, defNS, modules, tag, attrs, children) {\r\n  attrs = attrs || {};\r\n  children = maybeFlatten(children);\r\n  if(typeof tag === 'string') {\r\n    return buildFromStringTag(nsURI, defNS, modules, tag, attrs, children)\r\n  } else {\r\n    return buildFromComponent(nsURI, defNS, modules, tag, attrs, children)\r\n  }\r\n}\r\n\r\nfunction JSX(nsURI, defNS, modules) {\r\n  return function jsxWithCustomNS(tag, attrs, children) {\r\n    if(arguments.length > 3 || !Array.isArray(children))\r\n      children = slice.call(arguments, 2);\r\n    return buildVnode(nsURI, defNS || 'props', modules || modulesNS, tag, attrs, children);\r\n  };\r\n}\r\n\r\nmodule.exports = {\r\n  html: JSX(undefined),\r\n  svg: JSX(SVGNS, 'attrs'),\r\n  JSX: JSX\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom-jsx/snabbdom-jsx.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar easing_1 = require(\"./easing\");\n/**\n * An animation uses the rendering loop of the browser to smoothly\n * calculate a transition between two states of a model element.\n */\nvar Animation = /** @class */ (function () {\n    function Animation(context, ease) {\n        if (ease === void 0) { ease = easing_1.easeInOut; }\n        this.context = context;\n        this.ease = ease;\n    }\n    Animation.prototype.start = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var start = undefined;\n            var frames = 0;\n            var lambda = function (time) {\n                frames++;\n                var dtime;\n                if (start === undefined) {\n                    start = time;\n                    dtime = 0;\n                }\n                else {\n                    dtime = time - start;\n                }\n                var t = Math.min(1, dtime / _this.context.duration);\n                var current = _this.tween(_this.ease(t), _this.context);\n                _this.context.modelChanged.update(current);\n                if (t === 1) {\n                    _this.context.logger.log(_this, (frames * 1000 / _this.context.duration) + ' fps');\n                    resolve(current);\n                }\n                else {\n                    _this.context.syncer.onNextFrame(lambda);\n                }\n            };\n            if (_this.context.syncer.isAvailable()) {\n                _this.context.syncer.onNextFrame(lambda);\n            }\n            else {\n                var finalModel = _this.tween(1, _this.context);\n                resolve(finalModel);\n            }\n        });\n    };\n    return Animation;\n}());\nexports.Animation = Animation;\nvar CompoundAnimation = /** @class */ (function (_super) {\n    __extends(CompoundAnimation, _super);\n    function CompoundAnimation(model, context, components, ease) {\n        if (components === void 0) { components = []; }\n        if (ease === void 0) { ease = easing_1.easeInOut; }\n        var _this = _super.call(this, context, ease) || this;\n        _this.model = model;\n        _this.context = context;\n        _this.components = components;\n        _this.ease = ease;\n        return _this;\n    }\n    CompoundAnimation.prototype.include = function (animation) {\n        this.components.push(animation);\n        return this;\n    };\n    CompoundAnimation.prototype.tween = function (t, context) {\n        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {\n            var a = _a[_i];\n            a.tween(t, context);\n        }\n        return this.model;\n    };\n    return CompoundAnimation;\n}(Animation));\nexports.CompoundAnimation = CompoundAnimation;\n//# sourceMappingURL=animation.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/animations/animation.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_1 = require(\"../model/smodel\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar KeyTool = /** @class */ (function () {\n    function KeyTool(actionDispatcher, keyListeners) {\n        if (keyListeners === void 0) { keyListeners = []; }\n        this.actionDispatcher = actionDispatcher;\n        this.keyListeners = keyListeners;\n    }\n    KeyTool.prototype.register = function (keyListener) {\n        this.keyListeners.push(keyListener);\n    };\n    KeyTool.prototype.deregister = function (keyListener) {\n        var index = this.keyListeners.indexOf(keyListener);\n        if (index >= 0)\n            this.keyListeners.splice(index, 1);\n    };\n    KeyTool.prototype.handleEvent = function (methodName, model, event) {\n        var actions = this.keyListeners\n            .map(function (listener) { return listener[methodName].apply(listener, [model, event]); })\n            .reduce(function (a, b) { return a.concat(b); });\n        if (actions.length > 0) {\n            event.preventDefault();\n            this.actionDispatcher.dispatchAll(actions);\n        }\n    };\n    KeyTool.prototype.keyDown = function (element, event) {\n        this.handleEvent('keyDown', element, event);\n    };\n    KeyTool.prototype.focus = function () { };\n    KeyTool.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot) {\n            vnode_utils_1.on(vnode, 'focus', this.focus.bind(this), element);\n            vnode_utils_1.on(vnode, 'keydown', this.keyDown.bind(this), element);\n        }\n        return vnode;\n    };\n    KeyTool.prototype.postUpdate = function () {\n    };\n    KeyTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.multiInject(types_1.TYPES.KeyListener)), __param(1, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Object, Array])\n    ], KeyTool);\n    return KeyTool;\n}());\nexports.KeyTool = KeyTool;\nvar KeyListener = /** @class */ (function () {\n    function KeyListener() {\n    }\n    KeyListener.prototype.keyDown = function (element, event) {\n        return [];\n    };\n    KeyListener = __decorate([\n        inversify_1.injectable()\n    ], KeyListener);\n    return KeyListener;\n}());\nexports.KeyListener = KeyListener;\n//# sourceMappingURL=key-tool.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/key-tool.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"../select/model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../hover/model\");\nexports.editFeature = Symbol('editFeature');\nfunction isRoutable(element) {\n    return element.routingPoints !== undefined && typeof (element.route) === 'function';\n}\nexports.isRoutable = isRoutable;\nfunction canEditRouting(element) {\n    return isRoutable(element) && element.hasFeature(exports.editFeature);\n}\nexports.canEditRouting = canEditRouting;\nvar SRoutingHandle = /** @class */ (function (_super) {\n    __extends(SRoutingHandle, _super);\n    function SRoutingHandle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** Whether the routing point is being dragged. */\n        _this.editMode = false;\n        _this.hoverFeedback = false;\n        _this.selected = false;\n        return _this;\n    }\n    SRoutingHandle.prototype.hasFeature = function (feature) {\n        return feature === model_1.selectFeature || feature === model_2.moveFeature || feature === model_3.hoverFeedbackFeature;\n    };\n    return SRoutingHandle;\n}(smodel_1.SChildElement));\nexports.SRoutingHandle = SRoutingHandle;\n/** The angle in radians below which a routing handle is removed. */\nvar HANDLE_REMOVE_THRESHOLD = 0.1;\n/**\n * Remove routed points that are in edit mode and for which the angle between the preceding and\n * following points falls below a threshold.\n */\nfunction filterEditModeHandles(route, parent) {\n    if (parent.children.length === 0)\n        return route;\n    var i = 0;\n    var _loop_1 = function () {\n        var curr = route[i];\n        if (curr.pointIndex !== undefined) {\n            var handle = parent.children.find(function (child) {\n                return child instanceof SRoutingHandle && child.kind === 'junction' && child.pointIndex === curr.pointIndex;\n            });\n            if (handle !== undefined && handle.editMode && i > 0 && i < route.length - 1) {\n                var prev = route[i - 1], next = route[i + 1];\n                var prevDiff = { x: prev.x - curr.x, y: prev.y - curr.y };\n                var nextDiff = { x: next.x - curr.x, y: next.y - curr.y };\n                var angle = geometry_1.angleBetweenPoints(prevDiff, nextDiff);\n                if (Math.abs(Math.PI - angle) < HANDLE_REMOVE_THRESHOLD) {\n                    route.splice(i, 1);\n                    return \"continue\";\n                }\n            }\n        }\n        i++;\n    };\n    while (i < route.length) {\n        _loop_1();\n    }\n    return route;\n}\nexports.filterEditModeHandles = filterEditModeHandles;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/edit/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.moveFeature = Symbol('moveFeature');\nfunction isLocateable(element) {\n    return element['position'] !== undefined;\n}\nexports.isLocateable = isLocateable;\nfunction isMoveable(element) {\n    return element.hasFeature(exports.moveFeature) && isLocateable(element);\n}\nexports.isMoveable = isMoveable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/move/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar command_1 = require(\"../commands/command\");\n/**\n * The action handler registry maps actions to their handlers using the Action.kind property.\n */\nvar ActionHandlerRegistry = /** @class */ (function (_super) {\n    __extends(ActionHandlerRegistry, _super);\n    function ActionHandlerRegistry(initializers) {\n        var _this = _super.call(this) || this;\n        initializers.forEach(function (initializer) { return _this.initializeActionHandler(initializer); });\n        return _this;\n    }\n    ActionHandlerRegistry.prototype.registerCommand = function (commandType) {\n        this.register(commandType.KIND, new command_1.CommandActionHandler(commandType));\n    };\n    ActionHandlerRegistry.prototype.initializeActionHandler = function (initializer) {\n        initializer.initialize(this);\n    };\n    ActionHandlerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IActionHandlerInitializer)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ActionHandlerRegistry);\n    return ActionHandlerRegistry;\n}(registry_1.MultiInstanceRegistry));\nexports.ActionHandlerRegistry = ActionHandlerRegistry;\n//# sourceMappingURL=action-handler.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/actions/action-handler.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../bounds/model\");\nvar action_dispatcher_1 = require(\"../../base/actions/action-dispatcher\");\nvar types_1 = require(\"../../base/types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar inversify_1 = require(\"inversify\");\nvar ExportSvgAction = /** @class */ (function () {\n    function ExportSvgAction(svg) {\n        this.svg = svg;\n        this.kind = ExportSvgAction.KIND;\n    }\n    ExportSvgAction.KIND = 'exportSvg';\n    return ExportSvgAction;\n}());\nexports.ExportSvgAction = ExportSvgAction;\nvar SvgExporter = /** @class */ (function () {\n    function SvgExporter(options, actionDispatcher, log) {\n        this.options = options;\n        this.actionDispatcher = actionDispatcher;\n        this.log = log;\n    }\n    SvgExporter.prototype.export = function (root) {\n        if (typeof document !== 'undefined') {\n            var div = document.getElementById(this.options.hiddenDiv);\n            if (div !== null && div.firstElementChild && div.firstElementChild.tagName === 'svg') {\n                var svgElement = div.firstElementChild;\n                var svg = this.createSvg(svgElement, root);\n                this.actionDispatcher.dispatch(new ExportSvgAction(svg));\n            }\n        }\n    };\n    SvgExporter.prototype.createSvg = function (svgElementOrig, root) {\n        var serializer = new XMLSerializer();\n        var svgCopy = serializer.serializeToString(svgElementOrig);\n        var iframe = document.createElement('iframe');\n        document.body.appendChild(iframe);\n        if (!iframe.contentWindow)\n            throw new Error('IFrame has no contentWindow');\n        var docCopy = iframe.contentWindow.document;\n        docCopy.open();\n        docCopy.write(svgCopy);\n        docCopy.close();\n        var svgElementNew = docCopy.getElementById(svgElementOrig.id);\n        svgElementNew.removeAttribute('opacity');\n        this.copyStyles(svgElementOrig, svgElementNew, ['width', 'height', 'opacity']);\n        svgElementNew.setAttribute('version', '1.1');\n        var bounds = this.getBounds(root);\n        svgElementNew.setAttribute('viewBox', bounds.x + \" \" + bounds.y + \" \" + bounds.width + \" \" + bounds.height);\n        var svgCode = serializer.serializeToString(svgElementNew);\n        document.body.removeChild(iframe);\n        return svgCode;\n    };\n    SvgExporter.prototype.copyStyles = function (source, target, skipedProperties) {\n        var sourceStyle = getComputedStyle(source);\n        var targetStyle = getComputedStyle(target);\n        var diffStyle = '';\n        for (var i = 0; i < sourceStyle.length; i++) {\n            var key = sourceStyle[i];\n            if (skipedProperties.indexOf(key) === -1) {\n                var value = sourceStyle.getPropertyValue(key);\n                if (targetStyle.getPropertyValue(key) !== value) {\n                    diffStyle += key + \":\" + value + \";\";\n                }\n            }\n        }\n        if (diffStyle !== '')\n            target.setAttribute('style', diffStyle);\n        // IE doesn't retrun anything on source.children\n        for (var i = 0; i < source.childNodes.length; ++i) {\n            var sourceChild = source.childNodes[i];\n            var targetChild = target.childNodes[i];\n            if (sourceChild instanceof Element)\n                this.copyStyles(sourceChild, targetChild, []);\n        }\n    };\n    SvgExporter.prototype.getBounds = function (root) {\n        var allBounds = [geometry_1.EMPTY_BOUNDS];\n        root.children.forEach(function (element) {\n            if (model_1.isBoundsAware(element)) {\n                allBounds.push(element.bounds);\n            }\n        });\n        return allBounds.reduce(function (one, two) { return geometry_1.combine(one, two); });\n    };\n    SvgExporter = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(1, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(2, inversify_1.inject(types_1.TYPES.ILogger)),\n        __metadata(\"design:paramtypes\", [Object, action_dispatcher_1.ActionDispatcher, Object])\n    ], SvgExporter);\n    return SvgExporter;\n}());\nexports.SvgExporter = SvgExporter;\n//# sourceMappingURL=svg-exporter.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/export/svg-exporter.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar command_1 = require(\"../../base/commands/command\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar model_1 = require(\"./model\");\nvar ViewportAction = /** @class */ (function () {\n    function ViewportAction(elementId, newViewport, animate) {\n        this.elementId = elementId;\n        this.newViewport = newViewport;\n        this.animate = animate;\n        this.kind = ViewportCommand.KIND;\n    }\n    return ViewportAction;\n}());\nexports.ViewportAction = ViewportAction;\nvar ViewportCommand = /** @class */ (function (_super) {\n    __extends(ViewportCommand, _super);\n    function ViewportCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.newViewport = action.newViewport;\n        return _this;\n    }\n    ViewportCommand.prototype.execute = function (context) {\n        var model = context.root;\n        var element = model.index.getById(this.action.elementId);\n        if (element && model_1.isViewport(element)) {\n            this.element = element;\n            this.oldViewport = {\n                scroll: this.element.scroll,\n                zoom: this.element.zoom,\n            };\n            if (this.action.animate)\n                return new ViewportAnimation(this.element, this.oldViewport, this.newViewport, context).start();\n            else {\n                this.element.scroll = this.newViewport.scroll;\n                this.element.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    };\n    ViewportCommand.prototype.undo = function (context) {\n        return new ViewportAnimation(this.element, this.newViewport, this.oldViewport, context).start();\n    };\n    ViewportCommand.prototype.redo = function (context) {\n        return new ViewportAnimation(this.element, this.oldViewport, this.newViewport, context).start();\n    };\n    ViewportCommand.prototype.merge = function (command, context) {\n        if (!this.action.animate && command instanceof ViewportCommand && this.element === command.element) {\n            this.newViewport = command.newViewport;\n            return true;\n        }\n        return false;\n    };\n    ViewportCommand.KIND = 'viewport';\n    return ViewportCommand;\n}(command_1.MergeableCommand));\nexports.ViewportCommand = ViewportCommand;\nvar ViewportAnimation = /** @class */ (function (_super) {\n    __extends(ViewportAnimation, _super);\n    function ViewportAnimation(element, oldViewport, newViewport, context) {\n        var _this = _super.call(this, context) || this;\n        _this.element = element;\n        _this.oldViewport = oldViewport;\n        _this.newViewport = newViewport;\n        _this.context = context;\n        _this.zoomFactor = Math.log(newViewport.zoom / oldViewport.zoom);\n        return _this;\n    }\n    ViewportAnimation.prototype.tween = function (t, context) {\n        this.element.scroll = {\n            x: (1 - t) * this.oldViewport.scroll.x + t * this.newViewport.scroll.x,\n            y: (1 - t) * this.oldViewport.scroll.y + t * this.newViewport.scroll.y\n        };\n        this.element.zoom = this.oldViewport.zoom * Math.exp(t * this.zoomFactor);\n        return context.root;\n    };\n    return ViewportAnimation;\n}(animation_1.Animation));\nexports.ViewportAnimation = ViewportAnimation;\n//# sourceMappingURL=viewport.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/viewport.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar ProviderRegistry = /** @class */ (function () {\n    function ProviderRegistry() {\n        this.elements = new Map;\n    }\n    ProviderRegistry.prototype.register = function (key, cstr) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, cstr);\n    };\n    ProviderRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    ProviderRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    ProviderRegistry.prototype.get = function (key, arg) {\n        var existingCstr = this.elements.get(key);\n        if (existingCstr)\n            return new existingCstr(arg);\n        else\n            return this.missing(key, arg);\n    };\n    ProviderRegistry.prototype.missing = function (key, arg) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    ProviderRegistry = __decorate([\n        inversify_1.injectable()\n    ], ProviderRegistry);\n    return ProviderRegistry;\n}());\nexports.ProviderRegistry = ProviderRegistry;\nvar InstanceRegistry = /** @class */ (function () {\n    function InstanceRegistry() {\n        this.elements = new Map;\n    }\n    InstanceRegistry.prototype.register = function (key, instance) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, instance);\n    };\n    InstanceRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    InstanceRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    InstanceRegistry.prototype.get = function (key) {\n        var existingInstance = this.elements.get(key);\n        if (existingInstance)\n            return existingInstance;\n        else\n            return this.missing(key);\n    };\n    InstanceRegistry.prototype.missing = function (key) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    InstanceRegistry = __decorate([\n        inversify_1.injectable()\n    ], InstanceRegistry);\n    return InstanceRegistry;\n}());\nexports.InstanceRegistry = InstanceRegistry;\nvar MultiInstanceRegistry = /** @class */ (function () {\n    function MultiInstanceRegistry() {\n        this.elements = new Map;\n    }\n    MultiInstanceRegistry.prototype.register = function (key, instance) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        var instances = this.elements.get(key);\n        if (instances !== undefined)\n            instances.push(instance);\n        else\n            this.elements.set(key, [instance]);\n    };\n    MultiInstanceRegistry.prototype.deregisterAll = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    MultiInstanceRegistry.prototype.get = function (key) {\n        var existingInstances = this.elements.get(key);\n        if (existingInstances !== undefined)\n            return existingInstances;\n        else\n            return [];\n    };\n    MultiInstanceRegistry = __decorate([\n        inversify_1.injectable()\n    ], MultiInstanceRegistry);\n    return MultiInstanceRegistry;\n}());\nexports.MultiInstanceRegistry = MultiInstanceRegistry;\n//# sourceMappingURL=registry.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/registry.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./~/process/browser.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\nfunction circularDependencyToException(request, previousServiceIdentifiers) {\n    if (previousServiceIdentifiers === void 0) { previousServiceIdentifiers = []; }\n    var parentServiceIdentifier = getServiceIdentifierAsString(request.serviceIdentifier);\n    previousServiceIdentifiers.push(parentServiceIdentifier);\n    request.childRequests.forEach(function (childRequest) {\n        var childServiceIdentifier = getServiceIdentifierAsString(childRequest.serviceIdentifier);\n        if (previousServiceIdentifiers.indexOf(childServiceIdentifier) === -1) {\n            if (childRequest.childRequests.length > 0) {\n                circularDependencyToException(childRequest, previousServiceIdentifiers);\n            }\n            else {\n                previousServiceIdentifiers.push(childServiceIdentifier);\n            }\n        }\n        else {\n            previousServiceIdentifiers.push(childServiceIdentifier);\n            var services = previousServiceIdentifiers.reduce(function (prev, curr) {\n                return (prev !== \"\") ? prev + \" -> \" + curr : \"\" + curr;\n            }, \"\");\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n    });\n}\nexports.circularDependencyToException = circularDependencyToException;\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nexports.listMetadataForTarget = listMetadataForTarget;\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexports.getFunctionName = getFunctionName;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/utils/serialization.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar AnimationFrameSyncer = /** @class */ (function () {\n    function AnimationFrameSyncer() {\n        this.tasks = [];\n        this.endTasks = [];\n        this.triggered = false;\n    }\n    AnimationFrameSyncer.prototype.isAvailable = function () {\n        return typeof requestAnimationFrame === \"function\";\n    };\n    AnimationFrameSyncer.prototype.onNextFrame = function (task) {\n        this.tasks.push(task);\n        this.trigger();\n    };\n    AnimationFrameSyncer.prototype.onEndOfNextFrame = function (task) {\n        this.endTasks.push(task);\n        this.trigger();\n    };\n    AnimationFrameSyncer.prototype.trigger = function () {\n        var _this = this;\n        if (!this.triggered) {\n            this.triggered = true;\n            if (this.isAvailable())\n                requestAnimationFrame(function (time) { return _this.run(time); });\n            else\n                setTimeout(function (time) { return _this.run(time); });\n        }\n    };\n    AnimationFrameSyncer.prototype.run = function (time) {\n        var tasks = this.tasks;\n        var endTasks = this.endTasks;\n        this.triggered = false;\n        this.tasks = [];\n        this.endTasks = [];\n        tasks.forEach(function (task) { return task.call(undefined, time); });\n        endTasks.forEach(function (task) { return task.call(undefined, time); });\n    };\n    AnimationFrameSyncer = __decorate([\n        inversify_1.injectable()\n    ], AnimationFrameSyncer);\n    return AnimationFrameSyncer;\n}());\nexports.AnimationFrameSyncer = AnimationFrameSyncer;\n//# sourceMappingURL=animation-frame-syncer.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/animations/animation-frame-syncer.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../commands/command\");\nvar initialize_canvas_1 = require(\"./initialize-canvas\");\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) in order to request a model. Usually this\n * is the first message that is sent to the source, so it is also used to initiate the communication.\n * The response is a SetModelAction or an UpdateModelAction.\n */\nvar RequestModelAction = /** @class */ (function () {\n    function RequestModelAction(options) {\n        this.options = options;\n        this.kind = RequestModelAction.KIND;\n    }\n    RequestModelAction.KIND = 'requestModel';\n    return RequestModelAction;\n}());\nexports.RequestModelAction = RequestModelAction;\n/**\n * Sent from the model source to the client in order to set the model. If a model is already present, it is replaced.\n */\nvar SetModelAction = /** @class */ (function () {\n    function SetModelAction(newRoot) {\n        this.newRoot = newRoot;\n        this.kind = SetModelCommand.KIND;\n    }\n    return SetModelAction;\n}());\nexports.SetModelAction = SetModelAction;\nvar SetModelCommand = /** @class */ (function (_super) {\n    __extends(SetModelCommand, _super);\n    function SetModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetModelCommand.prototype.execute = function (context) {\n        this.oldRoot = context.modelFactory.createRoot(context.root);\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    };\n    SetModelCommand.prototype.undo = function (context) {\n        return this.oldRoot;\n    };\n    SetModelCommand.prototype.redo = function (context) {\n        return this.newRoot;\n    };\n    Object.defineProperty(SetModelCommand.prototype, \"blockUntil\", {\n        get: function () {\n            return function (action) { return action.kind === initialize_canvas_1.InitializeCanvasBoundsCommand.KIND; };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SetModelCommand.KIND = 'setModel';\n    SetModelCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [SetModelAction])\n    ], SetModelCommand);\n    return SetModelCommand;\n}(command_1.Command));\nexports.SetModelCommand = SetModelCommand;\n//# sourceMappingURL=set-model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/features/set-model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar command_1 = require(\"../../base/commands/command\");\nvar model_1 = require(\"./model\");\n/**\n * Sent from the model source (e.g. a DiagramServer) to the client to update the bounds of some\n * (or all) model elements.\n */\nvar SetBoundsAction = /** @class */ (function () {\n    function SetBoundsAction(bounds) {\n        this.bounds = bounds;\n        this.kind = SetBoundsCommand.KIND;\n    }\n    return SetBoundsAction;\n}());\nexports.SetBoundsAction = SetBoundsAction;\n/**\n * Sent from the model source to the client to request bounds for the given model. The model is\n * rendered invisibly so the bounds can derived from the DOM. The response is a ComputedBoundsAction.\n * This hidden rendering round-trip is necessary if the client is responsible for parts of the layout\n * (see `needsClientLayout` viewer option).\n */\nvar RequestBoundsAction = /** @class */ (function () {\n    function RequestBoundsAction(newRoot) {\n        this.newRoot = newRoot;\n        this.kind = RequestBoundsCommand.KIND;\n    }\n    return RequestBoundsAction;\n}());\nexports.RequestBoundsAction = RequestBoundsAction;\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) to transmit the result of bounds\n * computation as a response to a RequestBoundsAction. If the server is responsible for parts of\n * the layout (see `needsServerLayout` viewer option), it can do so after applying the computed bounds\n * received with this action. Otherwise there is no need to send the computed bounds to the server,\n * so they can be processed locally by the client.\n */\nvar ComputedBoundsAction = /** @class */ (function () {\n    function ComputedBoundsAction(bounds, revision, alignments) {\n        this.bounds = bounds;\n        this.revision = revision;\n        this.alignments = alignments;\n        this.kind = ComputedBoundsAction.KIND;\n    }\n    ComputedBoundsAction.KIND = 'computedBounds';\n    return ComputedBoundsAction;\n}());\nexports.ComputedBoundsAction = ComputedBoundsAction;\nvar SetBoundsCommand = /** @class */ (function (_super) {\n    __extends(SetBoundsCommand, _super);\n    function SetBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.bounds = [];\n        return _this;\n    }\n    SetBoundsCommand.prototype.execute = function (context) {\n        var _this = this;\n        this.action.bounds.forEach(function (b) {\n            var element = context.root.index.getById(b.elementId);\n            if (element && model_1.isBoundsAware(element)) {\n                _this.bounds.push({\n                    element: element,\n                    oldBounds: element.bounds,\n                    newBounds: b.newBounds,\n                });\n            }\n        });\n        return this.redo(context);\n    };\n    SetBoundsCommand.prototype.undo = function (context) {\n        this.bounds.forEach(function (b) { return b.element.bounds = b.oldBounds; });\n        return context.root;\n    };\n    SetBoundsCommand.prototype.redo = function (context) {\n        this.bounds.forEach(function (b) { return b.element.bounds = b.newBounds; });\n        return context.root;\n    };\n    SetBoundsCommand.KIND = 'setBounds';\n    return SetBoundsCommand;\n}(command_1.SystemCommand));\nexports.SetBoundsCommand = SetBoundsCommand;\nvar RequestBoundsCommand = /** @class */ (function (_super) {\n    __extends(RequestBoundsCommand, _super);\n    function RequestBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    RequestBoundsCommand.prototype.execute = function (context) {\n        return context.modelFactory.createRoot(this.action.newRoot);\n    };\n    Object.defineProperty(RequestBoundsCommand.prototype, \"blockUntil\", {\n        get: function () {\n            return function (action) { return action.kind === ComputedBoundsAction.KIND; };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RequestBoundsCommand.KIND = 'requestBounds';\n    return RequestBoundsCommand;\n}(command_1.HiddenCommand));\nexports.RequestBoundsCommand = RequestBoundsCommand;\n//# sourceMappingURL=bounds-manipulation.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/bounds-manipulation.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fadeFeature = Symbol('fadeFeature');\nfunction isFadeable(element) {\n    return element.hasFeature(exports.fadeFeature) && element['opacity'] !== undefined;\n}\nexports.isFadeable = isFadeable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/fade/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar types_1 = require(\"../../base/types\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_factory_1 = require(\"../../base/model/smodel-factory\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"./model\");\n/**\n * Triggered when the user puts the mouse pointer over an element.\n */\nvar HoverFeedbackAction = /** @class */ (function () {\n    function HoverFeedbackAction(mouseoverElement, mouseIsOver) {\n        this.mouseoverElement = mouseoverElement;\n        this.mouseIsOver = mouseIsOver;\n        this.kind = HoverFeedbackCommand.KIND;\n    }\n    return HoverFeedbackAction;\n}());\nexports.HoverFeedbackAction = HoverFeedbackAction;\nvar HoverFeedbackCommand = /** @class */ (function (_super) {\n    __extends(HoverFeedbackCommand, _super);\n    function HoverFeedbackCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    HoverFeedbackCommand.prototype.execute = function (context) {\n        var model = context.root;\n        var modelElement = model.index.getById(this.action.mouseoverElement);\n        if (modelElement) {\n            if (model_2.isHoverable(modelElement)) {\n                modelElement.hoverFeedback = this.action.mouseIsOver;\n            }\n        }\n        return this.redo(context);\n    };\n    HoverFeedbackCommand.prototype.undo = function (context) {\n        return context.root;\n    };\n    HoverFeedbackCommand.prototype.redo = function (context) {\n        return context.root;\n    };\n    HoverFeedbackCommand.KIND = 'hoverFeedback';\n    return HoverFeedbackCommand;\n}(command_1.Command));\nexports.HoverFeedbackCommand = HoverFeedbackCommand;\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on\n * that element. This action is sent from the client to the model source, e.g. a DiagramServer.\n * The response is a SetPopupModelAction.\n */\nvar RequestPopupModelAction = /** @class */ (function () {\n    function RequestPopupModelAction(elementId, bounds) {\n        this.elementId = elementId;\n        this.bounds = bounds;\n        this.kind = RequestPopupModelAction.KIND;\n    }\n    RequestPopupModelAction.KIND = 'requestPopupModel';\n    return RequestPopupModelAction;\n}());\nexports.RequestPopupModelAction = RequestPopupModelAction;\n/**\n * Sent from the model source to the client to display a popup in response to a RequestPopupModelAction.\n * This action can also be used to remove any existing popup by choosing EMPTY_ROOT as root element.\n */\nvar SetPopupModelAction = /** @class */ (function () {\n    function SetPopupModelAction(newRoot) {\n        this.newRoot = newRoot;\n        this.kind = SetPopupModelCommand.KIND;\n    }\n    return SetPopupModelAction;\n}());\nexports.SetPopupModelAction = SetPopupModelAction;\nvar SetPopupModelCommand = /** @class */ (function (_super) {\n    __extends(SetPopupModelCommand, _super);\n    function SetPopupModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetPopupModelCommand.prototype.execute = function (context) {\n        this.oldRoot = context.root;\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    };\n    SetPopupModelCommand.prototype.undo = function (context) {\n        return this.oldRoot;\n    };\n    SetPopupModelCommand.prototype.redo = function (context) {\n        return this.newRoot;\n    };\n    SetPopupModelCommand.KIND = 'setPopupModel';\n    return SetPopupModelCommand;\n}(command_1.PopupCommand));\nexports.SetPopupModelCommand = SetPopupModelCommand;\nvar AbstractHoverMouseListener = /** @class */ (function (_super) {\n    __extends(AbstractHoverMouseListener, _super);\n    function AbstractHoverMouseListener(options, state) {\n        var _this = _super.call(this) || this;\n        _this.options = options;\n        _this.state = state;\n        return _this;\n    }\n    AbstractHoverMouseListener.prototype.stopMouseOutTimer = function () {\n        if (this.state.mouseOutTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOutTimer);\n            this.state.mouseOutTimer = undefined;\n        }\n    };\n    AbstractHoverMouseListener.prototype.startMouseOutTimer = function () {\n        var _this = this;\n        this.stopMouseOutTimer();\n        return new Promise(function (resolve) {\n            _this.state.mouseOutTimer = window.setTimeout(function () {\n                _this.state.popupOpen = false;\n                _this.state.previousPopupElement = undefined;\n                resolve(new SetPopupModelAction({ type: smodel_factory_1.EMPTY_ROOT.type, id: smodel_factory_1.EMPTY_ROOT.id }));\n            }, _this.options.popupCloseDelay);\n        });\n    };\n    AbstractHoverMouseListener.prototype.stopMouseOverTimer = function () {\n        if (this.state.mouseOverTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOverTimer);\n            this.state.mouseOverTimer = undefined;\n        }\n    };\n    AbstractHoverMouseListener = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(1, inversify_1.inject(types_1.TYPES.HoverState)),\n        __metadata(\"design:paramtypes\", [Object, Object])\n    ], AbstractHoverMouseListener);\n    return AbstractHoverMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.AbstractHoverMouseListener = AbstractHoverMouseListener;\nvar HoverMouseListener = /** @class */ (function (_super) {\n    __extends(HoverMouseListener, _super);\n    function HoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HoverMouseListener.prototype.computePopupBounds = function (target, mousePosition) {\n        // Default position: below the mouse cursor\n        var offset = { x: -5, y: 20 };\n        var targetBounds = model_1.getAbsoluteBounds(target);\n        var canvasBounds = target.root.canvasBounds;\n        var boundsInWindow = geometry_1.translate(targetBounds, canvasBounds);\n        var distRight = boundsInWindow.x + boundsInWindow.width - mousePosition.x;\n        var distBottom = boundsInWindow.y + boundsInWindow.height - mousePosition.y;\n        if (distBottom <= distRight && this.allowSidePosition(target, 'below', distBottom)) {\n            // Put the popup below the target element\n            offset = { x: -5, y: Math.round(distBottom + 5) };\n        }\n        else if (distRight <= distBottom && this.allowSidePosition(target, 'right', distRight)) {\n            // Put the popup right of the target element\n            offset = { x: Math.round(distRight + 5), y: -5 };\n        }\n        var leftPopupPosition = mousePosition.x + offset.x;\n        var canvasRightBorderPosition = canvasBounds.x + canvasBounds.width;\n        if (leftPopupPosition > canvasRightBorderPosition) {\n            leftPopupPosition = canvasRightBorderPosition;\n        }\n        var topPopupPosition = mousePosition.y + offset.y;\n        var canvasBottomBorderPosition = canvasBounds.y + canvasBounds.height;\n        if (topPopupPosition > canvasBottomBorderPosition) {\n            topPopupPosition = canvasBottomBorderPosition;\n        }\n        return { x: leftPopupPosition, y: topPopupPosition, width: -1, height: -1 };\n    };\n    HoverMouseListener.prototype.allowSidePosition = function (target, side, distance) {\n        return !(target instanceof smodel_1.SModelRoot) && distance <= 150;\n    };\n    HoverMouseListener.prototype.startMouseOverTimer = function (target, event) {\n        var _this = this;\n        this.stopMouseOverTimer();\n        return new Promise(function (resolve) {\n            _this.state.mouseOverTimer = window.setTimeout(function () {\n                var popupBounds = _this.computePopupBounds(target, { x: event.pageX, y: event.pageY });\n                resolve(new RequestPopupModelAction(target.id, popupBounds));\n                _this.state.popupOpen = true;\n                _this.state.previousPopupElement = target;\n            }, _this.options.popupOpenDelay);\n        });\n    };\n    HoverMouseListener.prototype.mouseOver = function (target, event) {\n        var result = [];\n        var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n        if (this.state.popupOpen && (popupTarget === undefined ||\n            this.state.previousPopupElement !== undefined && this.state.previousPopupElement.id !== popupTarget.id)) {\n            result.push(this.startMouseOutTimer());\n        }\n        else {\n            this.stopMouseOverTimer();\n            this.stopMouseOutTimer();\n        }\n        if (popupTarget !== undefined &&\n            (this.state.previousPopupElement === undefined || this.state.previousPopupElement.id !== popupTarget.id)) {\n            result.push(this.startMouseOverTimer(popupTarget, event));\n        }\n        var hoverTarget = smodel_utils_1.findParentByFeature(target, model_2.isHoverable);\n        if (hoverTarget !== undefined)\n            result.push(new HoverFeedbackAction(hoverTarget.id, true));\n        return result;\n    };\n    HoverMouseListener.prototype.mouseOut = function (target, event) {\n        var result = [];\n        if (this.state.popupOpen) {\n            var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n            if (this.state.previousPopupElement !== undefined && popupTarget !== undefined\n                && this.state.previousPopupElement.id === popupTarget.id)\n                result.push(this.startMouseOutTimer());\n        }\n        this.stopMouseOverTimer();\n        var hoverTarget = smodel_utils_1.findParentByFeature(target, model_2.isHoverable);\n        if (hoverTarget !== undefined)\n            result.push(new HoverFeedbackAction(hoverTarget.id, false));\n        return result;\n    };\n    HoverMouseListener.prototype.mouseMove = function (target, event) {\n        var result = [];\n        if (this.state.previousPopupElement !== undefined && this.closeOnMouseMove(this.state.previousPopupElement, event)) {\n            result.push(this.startMouseOutTimer());\n        }\n        var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n        if (popupTarget !== undefined && (this.state.previousPopupElement === undefined\n            || this.state.previousPopupElement.id !== popupTarget.id)) {\n            result.push(this.startMouseOverTimer(popupTarget, event));\n        }\n        return result;\n    };\n    HoverMouseListener.prototype.closeOnMouseMove = function (target, event) {\n        return target instanceof smodel_1.SModelRoot;\n    };\n    HoverMouseListener = __decorate([\n        inversify_1.injectable()\n    ], HoverMouseListener);\n    return HoverMouseListener;\n}(AbstractHoverMouseListener));\nexports.HoverMouseListener = HoverMouseListener;\nvar PopupHoverMouseListener = /** @class */ (function (_super) {\n    __extends(PopupHoverMouseListener, _super);\n    function PopupHoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PopupHoverMouseListener.prototype.mouseOut = function (target, event) {\n        return [this.startMouseOutTimer()];\n    };\n    PopupHoverMouseListener.prototype.mouseOver = function (target, event) {\n        this.stopMouseOutTimer();\n        this.stopMouseOverTimer();\n        return [];\n    };\n    PopupHoverMouseListener = __decorate([\n        inversify_1.injectable()\n    ], PopupHoverMouseListener);\n    return PopupHoverMouseListener;\n}(AbstractHoverMouseListener));\nexports.PopupHoverMouseListener = PopupHoverMouseListener;\nvar HoverKeyListener = /** @class */ (function (_super) {\n    __extends(HoverKeyListener, _super);\n    function HoverKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HoverKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            return [new SetPopupModelAction({ type: smodel_factory_1.EMPTY_ROOT.type, id: smodel_factory_1.EMPTY_ROOT.id })];\n        }\n        return [];\n    };\n    return HoverKeyListener;\n}(key_tool_1.KeyListener));\nexports.HoverKeyListener = HoverKeyListener;\n//# sourceMappingURL=hover.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/hover.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hoverFeedbackFeature = Symbol('hoverFeedbackFeature');\nfunction isHoverable(element) {\n    return element.hasFeature(exports.hoverFeedbackFeature);\n}\nexports.isHoverable = isHoverable;\nexports.popupFeature = Symbol('popupFeature');\nfunction hasPopupFeature(element) {\n    return element.hasFeature(exports.popupFeature);\n}\nexports.hasPopupFeature = hasPopupFeature;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/model.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License'); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browser_1 = require(\"./browser\");\n/**\n * Returns whether the keyboard event matches the keystroke described by the given\n * code and modifiers. The code must comply to the format of the `code` property\n * of KeyboardEvent, but in contrast to that property, the actual keyboard layout is\n * considered by this function if possible.\n */\nfunction matchesKeystroke(event, code) {\n    var modifiers = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        modifiers[_i - 2] = arguments[_i];\n    }\n    if (getActualCode(event) !== code)\n        return false;\n    if (browser_1.isMac()) {\n        if (event.ctrlKey !== (modifiers.findIndex(function (m) { return m === 'ctrl'; }) >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(function (m) { return m === 'meta' || m === 'ctrlCmd'; }) >= 0))\n            return false;\n    }\n    else {\n        if (event.ctrlKey !== (modifiers.findIndex(function (m) { return m === 'ctrl' || m === 'ctrlCmd'; }) >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(function (m) { return m === 'meta'; }) >= 0))\n            return false;\n    }\n    if (event.altKey !== (modifiers.findIndex(function (m) { return m === 'alt'; }) >= 0))\n        return false;\n    if (event.shiftKey !== (modifiers.findIndex(function (m) { return m === 'shift'; }) >= 0))\n        return false;\n    return true;\n}\nexports.matchesKeystroke = matchesKeystroke;\n/**\n * Determines a key code from the given event. This is necessary because the `code` property of\n * a KeyboardEvent does not consider keyboard layouts.\n */\nfunction getActualCode(event) {\n    if (event.keyCode) {\n        var result = STRING_CODE[event.keyCode];\n        if (result !== undefined)\n            return result;\n    }\n    return event.code;\n}\nexports.getActualCode = getActualCode;\nvar STRING_CODE = new Array(256);\n(function () {\n    function addKeyCode(stringCode, numericCode) {\n        if (STRING_CODE[numericCode] === undefined)\n            STRING_CODE[numericCode] = stringCode;\n    }\n    addKeyCode('Pause', 3);\n    addKeyCode('Backspace', 8);\n    addKeyCode('Tab', 9);\n    addKeyCode('Enter', 13);\n    addKeyCode('ShiftLeft', 16);\n    addKeyCode('ShiftRight', 16);\n    addKeyCode('ControlLeft', 17);\n    addKeyCode('ControlRight', 17);\n    addKeyCode('AltLeft', 18);\n    addKeyCode('AltRight', 18);\n    addKeyCode('CapsLock', 20);\n    addKeyCode('Escape', 27);\n    addKeyCode('Space', 32);\n    addKeyCode('PageUp', 33);\n    addKeyCode('PageDown', 34);\n    addKeyCode('End', 35);\n    addKeyCode('Home', 36);\n    addKeyCode('ArrowLeft', 37);\n    addKeyCode('ArrowUp', 38);\n    addKeyCode('ArrowRight', 39);\n    addKeyCode('ArrowDown', 40);\n    addKeyCode('Insert', 45);\n    addKeyCode('Delete', 46);\n    addKeyCode('Digit1', 49);\n    addKeyCode('Digit2', 50);\n    addKeyCode('Digit3', 51);\n    addKeyCode('Digit4', 52);\n    addKeyCode('Digit5', 53);\n    addKeyCode('Digit6', 54);\n    addKeyCode('Digit7', 55);\n    addKeyCode('Digit8', 56);\n    addKeyCode('Digit9', 57);\n    addKeyCode('Digit0', 48);\n    addKeyCode('KeyA', 65);\n    addKeyCode('KeyB', 66);\n    addKeyCode('KeyC', 67);\n    addKeyCode('KeyD', 68);\n    addKeyCode('KeyE', 69);\n    addKeyCode('KeyF', 70);\n    addKeyCode('KeyG', 71);\n    addKeyCode('KeyH', 72);\n    addKeyCode('KeyI', 73);\n    addKeyCode('KeyJ', 74);\n    addKeyCode('KeyK', 75);\n    addKeyCode('KeyL', 76);\n    addKeyCode('KeyM', 77);\n    addKeyCode('KeyN', 78);\n    addKeyCode('KeyO', 79);\n    addKeyCode('KeyP', 80);\n    addKeyCode('KeyQ', 81);\n    addKeyCode('KeyR', 82);\n    addKeyCode('KeyS', 83);\n    addKeyCode('KeyT', 84);\n    addKeyCode('KeyU', 85);\n    addKeyCode('KeyV', 86);\n    addKeyCode('KeyW', 87);\n    addKeyCode('KeyX', 88);\n    addKeyCode('KeyY', 89);\n    addKeyCode('KeyZ', 90);\n    addKeyCode('OSLeft', 91);\n    addKeyCode('MetaLeft', 91);\n    addKeyCode('OSRight', 92);\n    addKeyCode('MetaRight', 92);\n    addKeyCode('ContextMenu', 93);\n    addKeyCode('Numpad0', 96);\n    addKeyCode('Numpad1', 97);\n    addKeyCode('Numpad2', 98);\n    addKeyCode('Numpad3', 99);\n    addKeyCode('Numpad4', 100);\n    addKeyCode('Numpad5', 101);\n    addKeyCode('Numpad6', 102);\n    addKeyCode('Numpad7', 103);\n    addKeyCode('Numpad8', 104);\n    addKeyCode('Numpad9', 105);\n    addKeyCode('NumpadMultiply', 106);\n    addKeyCode('NumpadAdd', 107);\n    addKeyCode('NumpadSeparator', 108);\n    addKeyCode('NumpadSubtract', 109);\n    addKeyCode('NumpadDecimal', 110);\n    addKeyCode('NumpadDivide', 111);\n    addKeyCode('F1', 112);\n    addKeyCode('F2', 113);\n    addKeyCode('F3', 114);\n    addKeyCode('F4', 115);\n    addKeyCode('F5', 116);\n    addKeyCode('F6', 117);\n    addKeyCode('F7', 118);\n    addKeyCode('F8', 119);\n    addKeyCode('F9', 120);\n    addKeyCode('F10', 121);\n    addKeyCode('F11', 122);\n    addKeyCode('F12', 123);\n    addKeyCode('F13', 124);\n    addKeyCode('F14', 125);\n    addKeyCode('F15', 126);\n    addKeyCode('F16', 127);\n    addKeyCode('F17', 128);\n    addKeyCode('F18', 129);\n    addKeyCode('F19', 130);\n    addKeyCode('F20', 131);\n    addKeyCode('F21', 132);\n    addKeyCode('F22', 133);\n    addKeyCode('F23', 134);\n    addKeyCode('F24', 135);\n    addKeyCode('NumLock', 144);\n    addKeyCode('ScrollLock', 145);\n    addKeyCode('Semicolon', 186);\n    addKeyCode('Equal', 187);\n    addKeyCode('Comma', 188);\n    addKeyCode('Minus', 189);\n    addKeyCode('Period', 190);\n    addKeyCode('Slash', 191);\n    addKeyCode('Backquote', 192);\n    addKeyCode('IntlRo', 193);\n    addKeyCode('BracketLeft', 219);\n    addKeyCode('Backslash', 220);\n    addKeyCode('BracketRight', 221);\n    addKeyCode('Quote', 222);\n    addKeyCode('IntlYen', 255);\n})();\n//# sourceMappingURL=keyboard.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/keyboard.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License'); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// ------------------ Base ------------------\n__export(require(\"./base/actions/action\"));\n__export(require(\"./base/actions/action-dispatcher\"));\n__export(require(\"./base/actions/action-handler\"));\n__export(require(\"./base/animations/animation-frame-syncer\"));\n__export(require(\"./base/animations/animation\"));\n__export(require(\"./base/animations/easing\"));\n__export(require(\"./base/commands/command-stack-options\"));\n__export(require(\"./base/commands/command-stack\"));\n__export(require(\"./base/commands/command\"));\n__export(require(\"./base/features/initialize-canvas\"));\n__export(require(\"./base/features/set-model\"));\n__export(require(\"./base/model/smodel-factory\"));\n__export(require(\"./base/model/smodel-storage\"));\n__export(require(\"./base/model/smodel-utils\"));\n__export(require(\"./base/model/smodel\"));\n__export(require(\"./base/views/key-tool\"));\n__export(require(\"./base/views/mouse-tool\"));\n__export(require(\"./base/views/thunk-view\"));\n__export(require(\"./base/views/view\"));\n__export(require(\"./base/views/viewer-cache\"));\n__export(require(\"./base/views/viewer-options\"));\n__export(require(\"./base/views/viewer\"));\n__export(require(\"./base/views/vnode-decorators\"));\n__export(require(\"./base/views/vnode-utils\"));\n__export(require(\"./base/types\"));\nvar di_config_1 = require(\"./base/di.config\");\nexports.defaultModule = di_config_1.default;\n// ------------------ Features ------------------\n__export(require(\"./features/bounds/bounds-manipulation\"));\n__export(require(\"./features/bounds/layout\"));\n__export(require(\"./features/bounds/model\"));\n__export(require(\"./features/bounds/vbox-layout\"));\n__export(require(\"./features/bounds/hbox-layout\"));\n__export(require(\"./features/bounds/stack-layout\"));\n__export(require(\"./features/button/button-handler\"));\n__export(require(\"./features/button/model\"));\n__export(require(\"./features/edit/edit-routing\"));\n__export(require(\"./features/edit/model\"));\n__export(require(\"./features/expand/expand\"));\n__export(require(\"./features/expand/model\"));\n__export(require(\"./features/expand/views\"));\n__export(require(\"./features/export/export\"));\n__export(require(\"./features/export/model\"));\n__export(require(\"./features/export/svg-exporter\"));\n__export(require(\"./features/fade/fade\"));\n__export(require(\"./features/fade/model\"));\n__export(require(\"./features/hover/hover\"));\n__export(require(\"./features/hover/model\"));\n__export(require(\"./features/move/model\"));\n__export(require(\"./features/move/move\"));\n__export(require(\"./features/open/open\"));\n__export(require(\"./features/open/model\"));\n__export(require(\"./features/select/model\"));\n__export(require(\"./features/select/select\"));\n__export(require(\"./features/undo-redo/undo-redo\"));\n__export(require(\"./features/update/model-matching\"));\n__export(require(\"./features/update/update-model\"));\n__export(require(\"./features/viewport/center-fit\"));\n__export(require(\"./features/viewport/model\"));\n__export(require(\"./features/viewport/scroll\"));\n__export(require(\"./features/viewport/viewport-root\"));\n__export(require(\"./features/viewport/viewport\"));\n__export(require(\"./features/viewport/zoom\"));\nvar di_config_2 = require(\"./features/move/di.config\");\nexports.moveModule = di_config_2.default;\nvar di_config_3 = require(\"./features/bounds/di.config\");\nexports.boundsModule = di_config_3.default;\nvar di_config_4 = require(\"./features/fade/di.config\");\nexports.fadeModule = di_config_4.default;\nvar di_config_5 = require(\"./features/select/di.config\");\nexports.selectModule = di_config_5.default;\nvar di_config_6 = require(\"./features/undo-redo/di.config\");\nexports.undoRedoModule = di_config_6.default;\nvar di_config_7 = require(\"./features/viewport/di.config\");\nexports.viewportModule = di_config_7.default;\nvar di_config_8 = require(\"./features/hover/di.config\");\nexports.hoverModule = di_config_8.default;\nvar di_config_9 = require(\"./features/edit/di.config\");\nexports.edgeEditModule = di_config_9.default;\nvar di_config_10 = require(\"./features/export/di.config\");\nexports.exportModule = di_config_10.default;\nvar di_config_11 = require(\"./features/expand/di.config\");\nexports.expandModule = di_config_11.default;\nvar di_config_12 = require(\"./features/open/di.config\");\nexports.openModule = di_config_12.default;\nvar di_config_13 = require(\"./features/button/di.config\");\nexports.buttonModule = di_config_13.default;\n// ------------------ Graph ------------------\n__export(require(\"./graph/sgraph-factory\"));\n__export(require(\"./graph/sgraph\"));\n__export(require(\"./graph/views\"));\n// ------------------ Library ------------------\n__export(require(\"./lib/generic-views\"));\n__export(require(\"./lib/html-views\"));\n__export(require(\"./lib/model\"));\n__export(require(\"./lib/svg-views\"));\n// ------------------ Model Source ------------------\n__export(require(\"./model-source/diagram-server\"));\n__export(require(\"./model-source/diagram-state\"));\n__export(require(\"./model-source/local-model-source\"));\n__export(require(\"./model-source/logging\"));\n__export(require(\"./model-source/model-source\"));\n__export(require(\"./model-source/websocket\"));\nvar di_config_14 = require(\"./model-source/di.config\");\nexports.modelSourceModule = di_config_14.default;\n// ------------------ Utilities ------------------\n__export(require(\"./utils/anchors\"));\n__export(require(\"./utils/browser\"));\n__export(require(\"./utils/color\"));\n__export(require(\"./utils/geometry\"));\n__export(require(\"./utils/logging\"));\n__export(require(\"./utils/registry\"));\n//# sourceMappingURL=index.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/index.js","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/buffer/index.js","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/inherits/inherits_browser.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\nvar keys = objectKeys(Writable.prototype);\nfor (var v = 0; v < keys.length; v++) {\n  var method = keys[v];\n  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  processNextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  processNextTick(cb, err);\n};\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/lib/_stream_duplex.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../model/smodel\");\nvar command_1 = require(\"../commands/command\");\n/**\n * Grabs the bounds from the root element in page coordinates and fires a\n * InitializeCanvasBoundsAction. This size is needed for other actions such\n * as FitToScreenAction.\n */\nvar CanvasBoundsInitializer = /** @class */ (function () {\n    function CanvasBoundsInitializer(actionDispatcher) {\n        this.actionDispatcher = actionDispatcher;\n    }\n    CanvasBoundsInitializer.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot && !geometry_1.isValidDimension(element.canvasBounds)) {\n            this.rootAndVnode = [element, vnode];\n        }\n        return vnode;\n    };\n    CanvasBoundsInitializer.prototype.postUpdate = function () {\n        if (this.rootAndVnode !== undefined) {\n            var domElement = this.rootAndVnode[1].elm;\n            var oldBounds = this.rootAndVnode[0].canvasBounds;\n            if (domElement !== undefined) {\n                var newBounds = this.getBoundsInPage(domElement);\n                if (!(geometry_1.almostEquals(newBounds.x, oldBounds.x)\n                    && geometry_1.almostEquals(newBounds.y, oldBounds.y)\n                    && geometry_1.almostEquals(newBounds.width, oldBounds.width)\n                    && geometry_1.almostEquals(newBounds.height, oldBounds.width)))\n                    this.actionDispatcher.dispatch(new InitializeCanvasBoundsAction(newBounds));\n            }\n            this.rootAndVnode = undefined;\n        }\n    };\n    CanvasBoundsInitializer.prototype.getBoundsInPage = function (element) {\n        var bounds = element.getBoundingClientRect();\n        var scroll = typeof window !== 'undefined' ? { x: window.scrollX, y: window.scrollY } : geometry_1.ORIGIN_POINT;\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    CanvasBoundsInitializer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], CanvasBoundsInitializer);\n    return CanvasBoundsInitializer;\n}());\nexports.CanvasBoundsInitializer = CanvasBoundsInitializer;\nvar InitializeCanvasBoundsAction = /** @class */ (function () {\n    function InitializeCanvasBoundsAction(newCanvasBounds) {\n        this.newCanvasBounds = newCanvasBounds;\n        this.kind = InitializeCanvasBoundsCommand.KIND;\n    }\n    return InitializeCanvasBoundsAction;\n}());\nexports.InitializeCanvasBoundsAction = InitializeCanvasBoundsAction;\nvar InitializeCanvasBoundsCommand = /** @class */ (function (_super) {\n    __extends(InitializeCanvasBoundsCommand, _super);\n    function InitializeCanvasBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    InitializeCanvasBoundsCommand.prototype.execute = function (context) {\n        this.newCanvasBounds = this.action.newCanvasBounds;\n        context.root.canvasBounds = this.newCanvasBounds;\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.prototype.undo = function (context) {\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.prototype.redo = function (context) {\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.KIND = 'initializeCanvasBounds';\n    return InitializeCanvasBoundsCommand;\n}(command_1.SystemCommand));\nexports.InitializeCanvasBoundsCommand = InitializeCanvasBoundsCommand;\n//# sourceMappingURL=initialize-canvas.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/features/initialize-canvas.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar model_1 = require(\"./model\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar animation_1 = require(\"../../base/animations/animation\");\nfunction createRoutingHandle(kind, parentId, index) {\n    var handle = new model_1.SRoutingHandle();\n    handle.type = kind === 'junction' ? 'routing-point' : 'volatile-routing-point';\n    handle.kind = kind;\n    handle.pointIndex = index;\n    return handle;\n}\nexports.createRoutingHandle = createRoutingHandle;\nfunction createRoutingHandles(editTarget) {\n    var rpCount = editTarget.routingPoints.length;\n    var targetId = editTarget.id;\n    editTarget.add(createRoutingHandle('line', targetId, -1));\n    for (var i = 0; i < rpCount; i++) {\n        editTarget.add(createRoutingHandle('junction', targetId, i));\n        editTarget.add(createRoutingHandle('line', targetId, i));\n    }\n}\nexports.createRoutingHandles = createRoutingHandles;\nvar SwitchEditModeAction = /** @class */ (function () {\n    function SwitchEditModeAction(elementsToActivate, elementsToDeactivate) {\n        if (elementsToActivate === void 0) { elementsToActivate = []; }\n        if (elementsToDeactivate === void 0) { elementsToDeactivate = []; }\n        this.elementsToActivate = elementsToActivate;\n        this.elementsToDeactivate = elementsToDeactivate;\n        this.kind = SwitchEditModeCommand.KIND;\n    }\n    return SwitchEditModeAction;\n}());\nexports.SwitchEditModeAction = SwitchEditModeAction;\nvar SwitchEditModeCommand = /** @class */ (function (_super) {\n    __extends(SwitchEditModeCommand, _super);\n    function SwitchEditModeCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.elementsToActivate = [];\n        _this.elementsToDeactivate = [];\n        _this.handlesToRemove = [];\n        return _this;\n    }\n    SwitchEditModeCommand.prototype.execute = function (context) {\n        var _this = this;\n        var index = context.root.index;\n        this.action.elementsToActivate.forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined)\n                _this.elementsToActivate.push(element);\n        });\n        this.action.elementsToDeactivate.forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined)\n                _this.elementsToDeactivate.push(element);\n            if (element instanceof model_1.SRoutingHandle && model_1.isRoutable(element.parent)) {\n                var parent_1 = element.parent;\n                if (_this.shouldRemoveHandle(element, parent_1)) {\n                    _this.handlesToRemove.push({ handle: element, parent: parent_1 });\n                    _this.elementsToDeactivate.push(parent_1);\n                    _this.elementsToActivate.push(parent_1);\n                }\n            }\n        });\n        return this.doExecute(context);\n    };\n    SwitchEditModeCommand.prototype.doExecute = function (context) {\n        this.handlesToRemove.forEach(function (entry) {\n            entry.point = entry.parent.routingPoints.splice(entry.handle.pointIndex, 1)[0];\n        });\n        this.elementsToDeactivate.forEach(function (element) {\n            if (model_1.isRoutable(element) && element instanceof smodel_1.SParentElement)\n                element.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = false;\n        });\n        this.elementsToActivate.forEach(function (element) {\n            if (model_1.canEditRouting(element) && element instanceof smodel_1.SParentElement)\n                createRoutingHandles(element);\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = true;\n        });\n        return context.root;\n    };\n    SwitchEditModeCommand.prototype.shouldRemoveHandle = function (handle, parent) {\n        if (handle.kind === 'junction') {\n            var route = parent.route();\n            return route.find(function (rp) { return rp.pointIndex === handle.pointIndex; }) === undefined;\n        }\n        return false;\n    };\n    SwitchEditModeCommand.prototype.undo = function (context) {\n        this.handlesToRemove.forEach(function (entry) {\n            if (entry.point !== undefined)\n                entry.parent.routingPoints.splice(entry.handle.pointIndex, 0, entry.point);\n        });\n        this.elementsToActivate.forEach(function (element) {\n            if (model_1.isRoutable(element) && element instanceof smodel_1.SParentElement)\n                element.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = false;\n        });\n        this.elementsToDeactivate.forEach(function (element) {\n            if (model_1.canEditRouting(element) && element instanceof smodel_1.SParentElement)\n                createRoutingHandles(element);\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = true;\n        });\n        return context.root;\n    };\n    SwitchEditModeCommand.prototype.redo = function (context) {\n        return this.doExecute(context);\n    };\n    SwitchEditModeCommand.KIND = \"switchEditMode\";\n    SwitchEditModeCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [SwitchEditModeAction])\n    ], SwitchEditModeCommand);\n    return SwitchEditModeCommand;\n}(command_1.Command));\nexports.SwitchEditModeCommand = SwitchEditModeCommand;\nvar MoveRoutingHandleAction = /** @class */ (function () {\n    function MoveRoutingHandleAction(moves, animate) {\n        if (animate === void 0) { animate = true; }\n        this.moves = moves;\n        this.animate = animate;\n        this.kind = MoveRoutingHandleCommand.KIND;\n    }\n    return MoveRoutingHandleAction;\n}());\nexports.MoveRoutingHandleAction = MoveRoutingHandleAction;\nvar MoveRoutingHandleCommand = /** @class */ (function (_super) {\n    __extends(MoveRoutingHandleCommand, _super);\n    function MoveRoutingHandleCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.resolvedMoves = new Map;\n        _this.originalRoutingPoints = new Map;\n        return _this;\n    }\n    MoveRoutingHandleCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        this.action.moves.forEach(function (move) {\n            var resolvedMove = _this.resolve(move, model.index);\n            if (resolvedMove !== undefined) {\n                _this.resolvedMoves.set(resolvedMove.elementId, resolvedMove);\n                var parent_2 = resolvedMove.parent;\n                if (model_1.isRoutable(parent_2))\n                    _this.originalRoutingPoints.set(parent_2.id, parent_2.routingPoints.slice());\n            }\n        });\n        if (this.action.animate) {\n            return new MoveHandlesAnimation(model, this.resolvedMoves, this.originalRoutingPoints, context).start();\n        }\n        else {\n            return this.doMove(context);\n        }\n    };\n    MoveRoutingHandleCommand.prototype.resolve = function (move, index) {\n        var element = index.getById(move.elementId);\n        if (element instanceof model_1.SRoutingHandle) {\n            return {\n                elementId: move.elementId,\n                element: element,\n                parent: element.parent,\n                fromPosition: move.fromPosition,\n                toPosition: move.toPosition\n            };\n        }\n        return undefined;\n    };\n    MoveRoutingHandleCommand.prototype.doMove = function (context) {\n        this.resolvedMoves.forEach(function (res) {\n            var handle = res.element;\n            var parent = res.parent;\n            if (model_1.isRoutable(parent)) {\n                var points = parent.routingPoints;\n                var index_1 = handle.pointIndex;\n                if (handle.kind === 'line') {\n                    // Upgrade to a proper routing point\n                    handle.kind = 'junction';\n                    handle.type = 'routing-point';\n                    points.splice(index_1 + 1, 0, res.fromPosition || points[Math.max(index_1, 0)]);\n                    parent.children.forEach(function (child) {\n                        if (child instanceof model_1.SRoutingHandle && (child === handle || child.pointIndex > index_1))\n                            child.pointIndex++;\n                    });\n                    parent.add(createRoutingHandle('line', parent.id, index_1));\n                    parent.add(createRoutingHandle('line', parent.id, index_1 + 1));\n                    index_1++;\n                }\n                if (index_1 >= 0 && index_1 < points.length) {\n                    points[index_1] = res.toPosition;\n                }\n            }\n        });\n        return context.root;\n    };\n    MoveRoutingHandleCommand.prototype.undo = function (context) {\n        var _this = this;\n        if (this.action.animate) {\n            return new MoveHandlesAnimation(context.root, this.resolvedMoves, this.originalRoutingPoints, context, true).start();\n        }\n        else {\n            this.resolvedMoves.forEach(function (res) {\n                var parent = res.parent;\n                var points = _this.originalRoutingPoints.get(parent.id);\n                if (points !== undefined && model_1.isRoutable(parent)) {\n                    parent.routingPoints = points;\n                    parent.removeAll(function (e) { return e instanceof model_1.SRoutingHandle; });\n                    createRoutingHandles(parent);\n                }\n            });\n            return context.root;\n        }\n    };\n    MoveRoutingHandleCommand.prototype.redo = function (context) {\n        if (this.action.animate) {\n            return new MoveHandlesAnimation(context.root, this.resolvedMoves, this.originalRoutingPoints, context, false).start();\n        }\n        else {\n            return this.doMove(context);\n        }\n    };\n    MoveRoutingHandleCommand.KIND = 'moveHandle';\n    MoveRoutingHandleCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [MoveRoutingHandleAction])\n    ], MoveRoutingHandleCommand);\n    return MoveRoutingHandleCommand;\n}(command_1.Command));\nexports.MoveRoutingHandleCommand = MoveRoutingHandleCommand;\nvar MoveHandlesAnimation = /** @class */ (function (_super) {\n    __extends(MoveHandlesAnimation, _super);\n    function MoveHandlesAnimation(model, handleMoves, originalRoutingPoints, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.handleMoves = handleMoves;\n        _this.originalRoutingPoints = originalRoutingPoints;\n        _this.reverse = reverse;\n        return _this;\n    }\n    MoveHandlesAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.handleMoves.forEach(function (handleMove) {\n            var parent = handleMove.parent;\n            if (model_1.isRoutable(parent) && handleMove.fromPosition !== undefined) {\n                if (_this.reverse && t === 1) {\n                    var revPoints = _this.originalRoutingPoints.get(parent.id);\n                    if (revPoints !== undefined) {\n                        parent.routingPoints = revPoints;\n                        parent.removeAll(function (e) { return e instanceof model_1.SRoutingHandle; });\n                        createRoutingHandles(parent);\n                        return;\n                    }\n                }\n                var points = parent.routingPoints;\n                var index = handleMove.element.pointIndex;\n                if (index >= 0 && index < points.length) {\n                    if (_this.reverse) {\n                        points[index] = {\n                            x: (1 - t) * handleMove.toPosition.x + t * handleMove.fromPosition.x,\n                            y: (1 - t) * handleMove.toPosition.y + t * handleMove.fromPosition.y\n                        };\n                    }\n                    else {\n                        points[index] = {\n                            x: (1 - t) * handleMove.fromPosition.x + t * handleMove.toPosition.x,\n                            y: (1 - t) * handleMove.fromPosition.y + t * handleMove.toPosition.y\n                        };\n                    }\n                }\n            }\n        });\n        return this.model;\n    };\n    return MoveHandlesAnimation;\n}(animation_1.Animation));\nexports.MoveHandlesAnimation = MoveHandlesAnimation;\n//# sourceMappingURL=edit-routing.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/edit/edit-routing.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\n/**\n * Sent from the client to the model source to recalculate a diagram when elements\n * are collapsed/expanded by the client.\n */\nvar CollapseExpandAction = /** @class */ (function () {\n    function CollapseExpandAction(expandIds, collapseIds) {\n        this.expandIds = expandIds;\n        this.collapseIds = collapseIds;\n        this.kind = CollapseExpandAction.KIND;\n    }\n    CollapseExpandAction.KIND = 'collapseExpand';\n    return CollapseExpandAction;\n}());\nexports.CollapseExpandAction = CollapseExpandAction;\n/**\n * Programmatic action for expanding or collapsing all elements.\n */\nvar CollapseExpandAllAction = /** @class */ (function () {\n    /**\n     * If `expand` is true, all elements are expanded, othewise they are collapsed.\n     */\n    function CollapseExpandAllAction(expand) {\n        if (expand === void 0) { expand = true; }\n        this.expand = expand;\n        this.kind = CollapseExpandAllAction.KIND;\n    }\n    CollapseExpandAllAction.KIND = 'collapseExpandAll';\n    return CollapseExpandAllAction;\n}());\nexports.CollapseExpandAllAction = CollapseExpandAllAction;\nvar ExpandButtonHandler = /** @class */ (function () {\n    function ExpandButtonHandler() {\n    }\n    ExpandButtonHandler.prototype.buttonPressed = function (button) {\n        var expandable = smodel_utils_1.findParentByFeature(button, model_1.isExpandable);\n        if (expandable !== undefined) {\n            return [new CollapseExpandAction(expandable.expanded ? [] : [expandable.id], expandable.expanded ? [expandable.id] : [])];\n        }\n        else {\n            return [];\n        }\n    };\n    ExpandButtonHandler.TYPE = 'button:expand';\n    ExpandButtonHandler = __decorate([\n        inversify_1.injectable()\n    ], ExpandButtonHandler);\n    return ExpandButtonHandler;\n}());\nexports.ExpandButtonHandler = ExpandButtonHandler;\n//# sourceMappingURL=expand.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/expand/expand.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.exportFeature = Symbol('exportFeature');\nfunction isExportable(element) {\n    return element.hasFeature(exports.exportFeature) && element['export'] !== undefined;\n}\nexports.isExportable = isExportable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/export/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_2 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar command_1 = require(\"../../base/commands/command\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar model_1 = require(\"../viewport/model\");\nvar model_2 = require(\"../select/model\");\nvar model_3 = require(\"../bounds/model\");\nvar model_4 = require(\"../edit/model\");\nvar edit_routing_1 = require(\"../edit/edit-routing\");\nvar model_5 = require(\"./model\");\nvar MoveAction = /** @class */ (function () {\n    function MoveAction(moves, animate) {\n        if (animate === void 0) { animate = true; }\n        this.moves = moves;\n        this.animate = animate;\n        this.kind = MoveCommand.KIND;\n    }\n    return MoveAction;\n}());\nexports.MoveAction = MoveAction;\nvar MoveCommand = /** @class */ (function (_super) {\n    __extends(MoveCommand, _super);\n    function MoveCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.resolvedMoves = new Map;\n        _this.resolvedRoutes = new Map;\n        return _this;\n    }\n    MoveCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        var attachedElements = new Set;\n        this.action.moves.forEach(function (move) {\n            var resolvedMove = _this.resolve(move, model.index);\n            if (resolvedMove !== undefined) {\n                _this.resolvedMoves.set(resolvedMove.elementId, resolvedMove);\n                model.index.getAttachedElements(resolvedMove.element).forEach(function (e) { return attachedElements.add(e); });\n            }\n        });\n        attachedElements.forEach(function (element) { return _this.handleAttachedElement(element); });\n        if (this.action.animate) {\n            return new MoveAnimation(model, this.resolvedMoves, this.resolvedRoutes, context).start();\n        }\n        else {\n            return this.doMove(context);\n        }\n    };\n    MoveCommand.prototype.resolve = function (move, index) {\n        var element = index.getById(move.elementId);\n        if (element !== undefined && model_5.isLocateable(element)) {\n            var fromPosition = move.fromPosition || { x: element.position.x, y: element.position.y };\n            return {\n                elementId: move.elementId,\n                element: element,\n                fromPosition: fromPosition,\n                toPosition: move.toPosition\n            };\n        }\n        return undefined;\n    };\n    MoveCommand.prototype.handleAttachedElement = function (element) {\n        if (model_4.isRoutable(element)) {\n            var source = element.source;\n            var sourceMove = source ? this.resolvedMoves.get(source.id) : undefined;\n            var target = element.target;\n            var targetMove = target ? this.resolvedMoves.get(target.id) : undefined;\n            if (sourceMove !== undefined && targetMove !== undefined) {\n                var deltaX_1 = targetMove.toPosition.x - targetMove.fromPosition.x;\n                var deltaY_1 = targetMove.toPosition.y - targetMove.fromPosition.y;\n                this.resolvedRoutes.set(element.id, {\n                    elementId: element.id,\n                    element: element,\n                    fromRoute: element.routingPoints,\n                    toRoute: element.routingPoints.map(function (rp) { return ({\n                        x: rp.x + deltaX_1,\n                        y: rp.y + deltaY_1\n                    }); })\n                });\n            }\n        }\n    };\n    MoveCommand.prototype.doMove = function (context, reverse) {\n        this.resolvedMoves.forEach(function (res) {\n            if (reverse)\n                res.element.position = res.fromPosition;\n            else\n                res.element.position = res.toPosition;\n        });\n        this.resolvedRoutes.forEach(function (res) {\n            if (reverse)\n                res.element.routingPoints = res.fromRoute;\n            else\n                res.element.routingPoints = res.toRoute;\n        });\n        return context.root;\n    };\n    MoveCommand.prototype.undo = function (context) {\n        return new MoveAnimation(context.root, this.resolvedMoves, this.resolvedRoutes, context, true).start();\n    };\n    MoveCommand.prototype.redo = function (context) {\n        return new MoveAnimation(context.root, this.resolvedMoves, this.resolvedRoutes, context, false).start();\n    };\n    MoveCommand.prototype.merge = function (command, context) {\n        var _this = this;\n        if (!this.action.animate && command instanceof MoveCommand) {\n            command.action.moves.forEach(function (otherMove) {\n                var existingMove = _this.resolvedMoves.get(otherMove.elementId);\n                if (existingMove) {\n                    existingMove.toPosition = otherMove.toPosition;\n                }\n                else {\n                    var resolvedMove = _this.resolve(otherMove, context.root.index);\n                    if (resolvedMove)\n                        _this.resolvedMoves.set(resolvedMove.elementId, resolvedMove);\n                }\n            });\n            return true;\n        }\n        return false;\n    };\n    MoveCommand.KIND = 'move';\n    return MoveCommand;\n}(command_1.MergeableCommand));\nexports.MoveCommand = MoveCommand;\nvar MoveAnimation = /** @class */ (function (_super) {\n    __extends(MoveAnimation, _super);\n    function MoveAnimation(model, elementMoves, elementRoutes, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementMoves = elementMoves;\n        _this.elementRoutes = elementRoutes;\n        _this.reverse = reverse;\n        return _this;\n    }\n    MoveAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.elementMoves.forEach(function (elementMove) {\n            if (_this.reverse) {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.toPosition.x + t * elementMove.fromPosition.x,\n                    y: (1 - t) * elementMove.toPosition.y + t * elementMove.fromPosition.y\n                };\n            }\n            else {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.fromPosition.x + t * elementMove.toPosition.x,\n                    y: (1 - t) * elementMove.fromPosition.y + t * elementMove.toPosition.y\n                };\n            }\n        });\n        this.elementRoutes.forEach(function (elementRoute) {\n            var route = [];\n            for (var i = 0; i < elementRoute.fromRoute.length && i < elementRoute.toRoute.length; i++) {\n                var fp = elementRoute.fromRoute[i];\n                var tp = elementRoute.toRoute[i];\n                if (_this.reverse) {\n                    route.push({\n                        x: (1 - t) * tp.x + t * fp.x,\n                        y: (1 - t) * tp.y + t * fp.y\n                    });\n                }\n                else {\n                    route.push({\n                        x: (1 - t) * fp.x + t * tp.x,\n                        y: (1 - t) * fp.y + t * tp.y\n                    });\n                }\n            }\n            elementRoute.element.routingPoints = route;\n        });\n        return this.model;\n    };\n    return MoveAnimation;\n}(animation_1.Animation));\nexports.MoveAnimation = MoveAnimation;\nvar MoveMouseListener = /** @class */ (function (_super) {\n    __extends(MoveMouseListener, _super);\n    function MoveMouseListener() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hasDragged = false;\n        return _this;\n    }\n    MoveMouseListener.prototype.mouseDown = function (target, event) {\n        var result = [];\n        if (event.button === 0) {\n            var moveable = smodel_utils_1.findParentByFeature(target, model_5.isMoveable);\n            var isRoutingHandle = target instanceof model_4.SRoutingHandle;\n            if (moveable !== undefined || isRoutingHandle) {\n                this.lastDragPosition = { x: event.pageX, y: event.pageY };\n            }\n            else {\n                this.lastDragPosition = undefined;\n            }\n            this.hasDragged = false;\n            if (isRoutingHandle) {\n                result.push(new edit_routing_1.SwitchEditModeAction([target.id], []));\n            }\n        }\n        return result;\n    };\n    MoveMouseListener.prototype.mouseMove = function (target, event) {\n        var _this = this;\n        var result = [];\n        if (event.buttons === 0)\n            this.mouseUp(target, event);\n        else if (this.lastDragPosition) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            this.hasDragged = true;\n            var zoom = viewport ? viewport.zoom : 1;\n            var dx_1 = (event.pageX - this.lastDragPosition.x) / zoom;\n            var dy_1 = (event.pageY - this.lastDragPosition.y) / zoom;\n            var nodeMoves_1 = [];\n            var handleMoves_1 = [];\n            target.root.index.all()\n                .filter(function (element) { return model_2.isSelectable(element) && element.selected; })\n                .forEach(function (element) {\n                if (model_5.isMoveable(element)) {\n                    nodeMoves_1.push({\n                        elementId: element.id,\n                        fromPosition: {\n                            x: element.position.x,\n                            y: element.position.y\n                        },\n                        toPosition: {\n                            x: element.position.x + dx_1,\n                            y: element.position.y + dy_1\n                        }\n                    });\n                }\n                else if (element instanceof model_4.SRoutingHandle) {\n                    var point = _this.getHandlePosition(element);\n                    if (point !== undefined) {\n                        handleMoves_1.push({\n                            elementId: element.id,\n                            fromPosition: point,\n                            toPosition: {\n                                x: point.x + dx_1,\n                                y: point.y + dy_1\n                            }\n                        });\n                    }\n                }\n            });\n            this.lastDragPosition = { x: event.pageX, y: event.pageY };\n            if (nodeMoves_1.length > 0)\n                result.push(new MoveAction(nodeMoves_1, false));\n            if (handleMoves_1.length > 0)\n                result.push(new edit_routing_1.MoveRoutingHandleAction(handleMoves_1, false));\n        }\n        return result;\n    };\n    MoveMouseListener.prototype.getHandlePosition = function (handle) {\n        var parent = handle.parent;\n        if (!model_4.isRoutable(parent)) {\n            return undefined;\n        }\n        if (handle.kind === 'line') {\n            var getIndex = function (rp) {\n                if (rp.pointIndex !== undefined)\n                    return rp.pointIndex;\n                else if (rp.kind === 'target')\n                    return parent.routingPoints.length;\n                else\n                    return -1;\n            };\n            var route = parent.route();\n            var rp1 = void 0, rp2 = void 0;\n            for (var _i = 0, route_1 = route; _i < route_1.length; _i++) {\n                var rp = route_1[_i];\n                var i = getIndex(rp);\n                if (i <= handle.pointIndex && (rp1 === undefined || i > getIndex(rp1)))\n                    rp1 = rp;\n                if (i > handle.pointIndex && (rp2 === undefined || i < getIndex(rp2)))\n                    rp2 = rp;\n            }\n            if (rp1 !== undefined && rp2 !== undefined) {\n                return geometry_1.centerOfLine(rp1, rp2);\n            }\n        }\n        else if (handle.pointIndex >= 0) {\n            return parent.routingPoints[handle.pointIndex];\n        }\n        return undefined;\n    };\n    MoveMouseListener.prototype.mouseEnter = function (target, event) {\n        if (target instanceof smodel_2.SModelRoot && event.buttons === 0)\n            this.mouseUp(target, event);\n        return [];\n    };\n    MoveMouseListener.prototype.mouseUp = function (target, event) {\n        var result = [];\n        if (this.lastDragPosition) {\n            target.root.index.all()\n                .forEach(function (element) {\n                if (element instanceof model_4.SRoutingHandle && element.editMode)\n                    result.push(new edit_routing_1.SwitchEditModeAction([], [element.id]));\n            });\n        }\n        this.hasDragged = false;\n        this.lastDragPosition = undefined;\n        return result;\n    };\n    MoveMouseListener.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    return MoveMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.MoveMouseListener = MoveMouseListener;\nvar LocationDecorator = /** @class */ (function () {\n    function LocationDecorator() {\n    }\n    LocationDecorator.prototype.decorate = function (vnode, element) {\n        var translate = '';\n        if (model_5.isLocateable(element) && element instanceof smodel_1.SChildElement && element.parent !== undefined) {\n            translate = 'translate(' + element.position.x + ', ' + element.position.y + ')';\n        }\n        if (model_3.isAlignable(element)) {\n            if (translate.length > 0)\n                translate += ' ';\n            translate += 'translate(' + element.alignment.x + ', ' + element.alignment.y + ')';\n        }\n        if (translate.length > 0)\n            vnode_utils_1.setAttr(vnode, 'transform', translate);\n        return vnode;\n    };\n    LocationDecorator.prototype.postUpdate = function () {\n    };\n    LocationDecorator = __decorate([\n        inversify_1.injectable()\n    ], LocationDecorator);\n    return LocationDecorator;\n}());\nexports.LocationDecorator = LocationDecorator;\n//# sourceMappingURL=move.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/move/move.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar iterable_1 = require(\"../utils/iterable\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar model_1 = require(\"../features/bounds/model\");\nvar model_2 = require(\"../features/fade/model\");\nvar model_3 = require(\"../features/hover/model\");\nvar model_4 = require(\"../features/move/model\");\nvar model_5 = require(\"../features/select/model\");\nvar viewport_root_1 = require(\"../features/viewport/viewport-root\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar model_6 = require(\"../features/bounds/model\");\nvar model_7 = require(\"../features/edit/model\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar routing_1 = require(\"./routing\");\n/**\n * Root element for graph-like models.\n */\nvar SGraph = /** @class */ (function (_super) {\n    __extends(SGraph, _super);\n    function SGraph(index) {\n        if (index === void 0) { index = new SGraphIndex(); }\n        return _super.call(this, index) || this;\n    }\n    return SGraph;\n}(viewport_root_1.ViewportRootElement));\nexports.SGraph = SGraph;\n/**\n * A connectable element is one that can have outgoing and incoming edges, i.e. it can be the source\n * or target element of an edge. There are two kinds of connectable elements: nodes (`SNode`) and\n * ports (`SPort`). A node represents a main entity, while a port is a connection point inside a node.\n */\nvar SConnectableElement = /** @class */ (function (_super) {\n    __extends(SConnectableElement, _super);\n    function SConnectableElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SConnectableElement.prototype, \"incomingEdges\", {\n        /**\n         * The incoming edges of this connectable element. They are resolved by the index, which must\n         * be an `SGraphIndex`.\n         */\n        get: function () {\n            return this.index.getIncomingEdges(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SConnectableElement.prototype, \"outgoingEdges\", {\n        /**\n         * The outgoing edges of this connectable element. They are resolved by the index, which must\n         * be an `SGraphIndex`.\n         */\n        get: function () {\n            return this.index.getOutgoingEdges(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Compute an anchor position for routing an edge towards this element.\n     *\n     * The default implementation returns the element's center point. If edges should be connected\n     * differently, e.g. to some point on the boundary of the element's view, the according computation\n     * should be implemented in a subclass by overriding this method.\n     *\n     * @param referencePoint The point from which the edge is routed towards this element\n     * @param offset An optional offset value to be considered in the anchor computation;\n     *               positive values should shift the anchor away from this element, negative values\n     *               should shift the anchor more to the inside.\n     */\n    SConnectableElement.prototype.getAnchor = function (referencePoint, offset) {\n        return geometry_1.center(this.bounds);\n    };\n    /**\n     * Compute an anchor position for routing an edge towards this element and correct any mismatch\n     * of the coordinate systems.\n     *\n     * @param refPoint The point from which the edge is routed towards this element\n     * @param refContainer The parent element that defines the coordinate system for `refPoint`\n     * @param edge The edge for which the anchor is computed\n     * @param offset An optional offset value (see `getAnchor`)\n     */\n    SConnectableElement.prototype.getTranslatedAnchor = function (refPoint, refContainer, edge, offset) {\n        var translatedRefPoint = smodel_utils_1.translatePoint(refPoint, refContainer, this.parent);\n        var anchor = this.getAnchor(translatedRefPoint, offset);\n        return smodel_utils_1.translatePoint(anchor, this.parent, edge.parent);\n    };\n    return SConnectableElement;\n}(model_6.SShapeElement));\nexports.SConnectableElement = SConnectableElement;\n/**\n * Model element class for nodes, which are the main entities in a graph. A node can be connected to\n * another node via an SEdge. Such a connection can be direct, i.e. the node is the source or target of\n * the edge, or indirect through a port, i.e. it contains an SPort which is the source or target of the edge.\n */\nvar SNode = /** @class */ (function (_super) {\n    __extends(SNode, _super);\n    function SNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SNode.prototype.hasFeature = function (feature) {\n        return feature === model_5.selectFeature || feature === model_4.moveFeature || feature === model_1.boundsFeature\n            || feature === model_1.layoutContainerFeature || feature === model_2.fadeFeature || feature === model_3.hoverFeedbackFeature\n            || feature === model_3.popupFeature;\n    };\n    return SNode;\n}(SConnectableElement));\nexports.SNode = SNode;\n/**\n * A port is a connection point for edges. It should always be contained in an SNode.\n */\nvar SPort = /** @class */ (function (_super) {\n    __extends(SPort, _super);\n    function SPort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SPort.prototype.hasFeature = function (feature) {\n        return feature === model_5.selectFeature || feature === model_1.boundsFeature || feature === model_2.fadeFeature\n            || feature === model_3.hoverFeedbackFeature;\n    };\n    return SPort;\n}(SConnectableElement));\nexports.SPort = SPort;\n/**\n * Model element class for edges, which are the connectors in a graph. An edge has a source and a target,\n * each of which can be either a node or a port. The source and target elements are referenced via their\n * ids and can be resolved with the index stored in the root element.\n */\nvar SEdge = /** @class */ (function (_super) {\n    __extends(SEdge, _super);\n    function SEdge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.routingPoints = [];\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    Object.defineProperty(SEdge.prototype, \"source\", {\n        get: function () {\n            return this.index.getById(this.sourceId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SEdge.prototype, \"target\", {\n        get: function () {\n            return this.index.getById(this.targetId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SEdge.prototype.route = function () {\n        if (this.router === undefined)\n            this.router = new routing_1.LinearEdgeRouter();\n        var route = this.router.route(this);\n        return model_7.filterEditModeHandles(route, this);\n    };\n    SEdge.prototype.hasFeature = function (feature) {\n        return feature === model_2.fadeFeature || feature === model_5.selectFeature ||\n            feature === model_7.editFeature || feature === model_3.hoverFeedbackFeature;\n    };\n    return SEdge;\n}(smodel_1.SChildElement));\nexports.SEdge = SEdge;\n/**\n * A label can be attached to a node, edge, or port, and contains some text to be rendered in its view.\n */\nvar SLabel = /** @class */ (function (_super) {\n    __extends(SLabel, _super);\n    function SLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.alignment = geometry_1.ORIGIN_POINT;\n        _this.opacity = 1;\n        return _this;\n    }\n    SLabel.prototype.hasFeature = function (feature) {\n        return feature === model_1.boundsFeature || feature === model_1.alignFeature || feature === model_2.fadeFeature || feature === model_1.layoutableChildFeature;\n    };\n    return SLabel;\n}(model_6.SShapeElement));\nexports.SLabel = SLabel;\n/**\n * A compartment is used to group multiple child elements such as labels of a node. Usually a `vbox`\n * or `hbox` layout is used to arrange these children.\n */\nvar SCompartment = /** @class */ (function (_super) {\n    __extends(SCompartment, _super);\n    function SCompartment() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.opacity = 1;\n        return _this;\n    }\n    SCompartment.prototype.hasFeature = function (feature) {\n        return feature === model_1.boundsFeature || feature === model_1.layoutContainerFeature || feature === model_1.layoutableChildFeature || feature === model_2.fadeFeature;\n    };\n    return SCompartment;\n}(model_6.SShapeElement));\nexports.SCompartment = SCompartment;\n/**\n * A specialized model index that tracks outgoing and incoming edges.\n */\nvar SGraphIndex = /** @class */ (function (_super) {\n    __extends(SGraphIndex, _super);\n    function SGraphIndex() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.outgoing = new Map;\n        _this.incoming = new Map;\n        return _this;\n    }\n    SGraphIndex.prototype.add = function (element) {\n        _super.prototype.add.call(this, element);\n        if (element instanceof SEdge) {\n            // Register the edge in the outgoing map\n            if (element.sourceId) {\n                var sourceArr = this.outgoing.get(element.sourceId);\n                if (sourceArr === undefined)\n                    this.outgoing.set(element.sourceId, [element]);\n                else\n                    sourceArr.push(element);\n            }\n            // Register the edge in the incoming map\n            if (element.targetId) {\n                var targetArr = this.incoming.get(element.targetId);\n                if (targetArr === undefined)\n                    this.incoming.set(element.targetId, [element]);\n                else\n                    targetArr.push(element);\n            }\n        }\n    };\n    SGraphIndex.prototype.remove = function (element) {\n        _super.prototype.remove.call(this, element);\n        if (element instanceof SEdge) {\n            // Remove the edge from the outgoing map\n            var sourceArr = this.outgoing.get(element.sourceId);\n            if (sourceArr !== undefined) {\n                var index = sourceArr.indexOf(element);\n                if (index >= 0) {\n                    if (sourceArr.length === 1)\n                        this.outgoing.delete(element.sourceId);\n                    else\n                        sourceArr.splice(index, 1);\n                }\n            }\n            // Remove the edge from the incoming map\n            var targetArr = this.incoming.get(element.targetId);\n            if (targetArr !== undefined) {\n                var index = targetArr.indexOf(element);\n                if (index >= 0) {\n                    if (targetArr.length === 1)\n                        this.incoming.delete(element.targetId);\n                    else\n                        targetArr.splice(index, 1);\n                }\n            }\n        }\n    };\n    SGraphIndex.prototype.getAttachedElements = function (element) {\n        var _this = this;\n        return new iterable_1.FluentIterableImpl(function () { return ({\n            outgoing: _this.outgoing.get(element.id),\n            incoming: _this.incoming.get(element.id),\n            nextOutgoingIndex: 0,\n            nextIncomingIndex: 0\n        }); }, function (state) {\n            var index = state.nextOutgoingIndex;\n            if (state.outgoing !== undefined && index < state.outgoing.length) {\n                state.nextOutgoingIndex = index + 1;\n                return { done: false, value: state.outgoing[index] };\n            }\n            index = state.nextIncomingIndex;\n            if (state.incoming !== undefined) {\n                // Filter out self-loops: edges that are both outgoing and incoming\n                while (index < state.incoming.length) {\n                    var edge = state.incoming[index];\n                    if (edge.sourceId !== edge.targetId) {\n                        state.nextIncomingIndex = index + 1;\n                        return { done: false, value: edge };\n                    }\n                    index++;\n                }\n            }\n            return { done: true, value: undefined };\n        });\n    };\n    SGraphIndex.prototype.getIncomingEdges = function (element) {\n        return this.incoming.get(element.id) || [];\n    };\n    SGraphIndex.prototype.getOutgoingEdges = function (element) {\n        return this.outgoing.get(element.id) || [];\n    };\n    return SGraphIndex;\n}(smodel_1.SModelIndex));\nexports.SGraphIndex = SGraphIndex;\n//# sourceMappingURL=sgraph.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/graph/sgraph.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/core-util-is/lib/util.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingOnSyntax = (function () {\n    function BindingOnSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingOnSyntax.prototype.onActivation = function (handler) {\n        this._binding.onActivation = handler;\n        return new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n    };\n    return BindingOnSyntax;\n}());\nexports.BindingOnSyntax = BindingOnSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_on_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar constraint_helpers_1 = require(\"./constraint_helpers\");\nvar BindingWhenSyntax = (function () {\n    function BindingWhenSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingWhenSyntax.prototype.when = function (constraint) {\n        this._binding.constraint = constraint;\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n        this._binding.constraint = constraint_helpers_1.namedConstraint(name);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n        this._binding.constraint = function (request) {\n            var targetIsDefault = (request.target !== null) &&\n                (request.target.isNamed() === false) &&\n                (request.target.isTagged() === false);\n            return targetIsDefault;\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n        this._binding.constraint = constraint_helpers_1.taggedConstraint(tag)(value);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.typeConstraint(parent)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.namedConstraint(name)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    return BindingWhenSyntax;\n}());\nexports.BindingWhenSyntax = BindingWhenSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_when_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar is = require(\"./is\");\nfunction addNS(data, children, sel) {\n    data.ns = 'http://www.w3.org/2000/svg';\n    if (sel !== 'foreignObject' && children !== undefined) {\n        for (var i = 0; i < children.length; ++i) {\n            var childData = children[i].data;\n            if (childData !== undefined) {\n                addNS(childData, children[i].children, children[i].sel);\n            }\n        }\n    }\n}\nfunction h(sel, b, c) {\n    var data = {}, children, text, i;\n    if (c !== undefined) {\n        data = b;\n        if (is.array(c)) {\n            children = c;\n        }\n        else if (is.primitive(c)) {\n            text = c;\n        }\n        else if (c && c.sel) {\n            children = [c];\n        }\n    }\n    else if (b !== undefined) {\n        if (is.array(b)) {\n            children = b;\n        }\n        else if (is.primitive(b)) {\n            text = b;\n        }\n        else if (b && b.sel) {\n            children = [b];\n        }\n        else {\n            data = b;\n        }\n    }\n    if (is.array(children)) {\n        for (i = 0; i < children.length; ++i) {\n            if (is.primitive(children[i]))\n                children[i] = vnode_1.vnode(undefined, undefined, undefined, children[i]);\n        }\n    }\n    if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&\n        (sel.length === 3 || sel[3] === '.' || sel[3] === '#')) {\n        addNS(data, children, sel);\n    }\n    return vnode_1.vnode(sel, data, children, text, undefined);\n}\nexports.h = h;\n;\nexports.default = h;\n//# sourceMappingURL=h.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/h.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction vnode(sel, data, children, text, elm) {\n    var key = data === undefined ? undefined : data.key;\n    return { sel: sel, data: data, children: children,\n        text: text, elm: elm, key: key };\n}\nexports.vnode = vnode;\nexports.default = vnode;\n//# sourceMappingURL=vnode.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/vnode.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\nvar set_model_1 = require(\"../features/set-model\");\nvar undo_redo_1 = require(\"../../features/undo-redo/undo-redo\");\nvar action_1 = require(\"./action\");\nvar action_handler_1 = require(\"./action-handler\");\n/**\n * Collects actions, converts them to commands and dispatches them.\n * Also acts as the proxy to model sources such as diagram servers.\n */\nvar ActionDispatcher = /** @class */ (function () {\n    function ActionDispatcher(actionHandlerRegistry, commandStack, logger, syncer) {\n        this.actionHandlerRegistry = actionHandlerRegistry;\n        this.commandStack = commandStack;\n        this.logger = logger;\n        this.syncer = syncer;\n        this.postponedActions = [];\n        this.postponedActions = [];\n        var initialCommand = new set_model_1.SetModelCommand(new set_model_1.SetModelAction(smodel_factory_1.EMPTY_ROOT));\n        this.blockUntil = initialCommand.blockUntil;\n        this.commandStack.execute(initialCommand);\n    }\n    ActionDispatcher.prototype.dispatchAll = function (actions) {\n        var _this = this;\n        return Promise.all(actions.map(function (action) { return _this.dispatch(action); }));\n    };\n    ActionDispatcher.prototype.dispatch = function (action) {\n        if (this.blockUntil !== undefined) {\n            return this.handleBlocked(action, this.blockUntil);\n        }\n        else if (action.kind === undo_redo_1.UndoAction.KIND) {\n            return this.commandStack.undo().then(function () { });\n        }\n        else if (action.kind === undo_redo_1.RedoAction.KIND) {\n            return this.commandStack.redo().then(function () { });\n        }\n        else {\n            return this.handleAction(action);\n        }\n    };\n    ActionDispatcher.prototype.handleAction = function (action) {\n        this.logger.log(this, 'handle', action);\n        var handlers = this.actionHandlerRegistry.get(action.kind);\n        if (handlers.length > 0) {\n            var promises = [];\n            for (var _i = 0, handlers_1 = handlers; _i < handlers_1.length; _i++) {\n                var handler = handlers_1[_i];\n                var result = handler.handle(action);\n                if (action_1.isAction(result)) {\n                    promises.push(this.dispatch(result));\n                }\n                else if (result !== undefined) {\n                    promises.push(this.commandStack.execute(result));\n                    this.blockUntil = result.blockUntil;\n                }\n            }\n            return Promise.all(promises);\n        }\n        else {\n            this.logger.warn(this, 'Missing handler for action', action);\n            return Promise.reject(\"Missing handler for action '\" + action.kind + \"'\");\n        }\n    };\n    ActionDispatcher.prototype.handleBlocked = function (action, predicate) {\n        var _this = this;\n        if (predicate(action)) {\n            this.blockUntil = undefined;\n            var result = this.handleAction(action);\n            var actions = this.postponedActions;\n            this.postponedActions = [];\n            for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n                var a = actions_1[_i];\n                this.dispatch(a.action).then(a.resolve, a.reject);\n            }\n            return result;\n        }\n        else {\n            this.logger.log(this, 'Action is postponed due to block condition', action);\n            return new Promise(function (resolve, reject) {\n                _this.postponedActions.push({ action: action, resolve: resolve, reject: reject });\n            });\n        }\n    };\n    ActionDispatcher = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ActionHandlerRegistry)),\n        __param(1, inversify_1.inject(types_1.TYPES.ICommandStack)),\n        __param(2, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(3, inversify_1.inject(types_1.TYPES.AnimationFrameSyncer)),\n        __metadata(\"design:paramtypes\", [action_handler_1.ActionHandlerRegistry, Object, Object, animation_frame_syncer_1.AnimationFrameSyncer])\n    ], ActionDispatcher);\n    return ActionDispatcher;\n}());\nexports.ActionDispatcher = ActionDispatcher;\n//# sourceMappingURL=action-dispatcher.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/actions/action-dispatcher.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isAction(object) {\n    return object !== undefined && object.hasOwnProperty('kind') && typeof (object['kind']) === 'string';\n}\nexports.isAction = isAction;\n//# sourceMappingURL=action.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/actions/action.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"./smodel-factory\");\nvar SModelStorage = /** @class */ (function () {\n    function SModelStorage() {\n        this.localCache = new Map;\n    }\n    SModelStorage.prototype.store = function (root) {\n        if (this.isLocalStorageAvailable())\n            localStorage.setItem(this.key, JSON.stringify(root));\n        else\n            this.localCache.set(this.key, JSON.stringify(root));\n    };\n    SModelStorage.prototype.load = function () {\n        var schema = (this.isLocalStorageAvailable())\n            ? localStorage.getItem(this.key)\n            : this.localCache.get(this.key);\n        if (schema)\n            return JSON.parse(schema);\n        else\n            return smodel_factory_1.EMPTY_ROOT;\n    };\n    SModelStorage.prototype.isLocalStorageAvailable = function () {\n        try {\n            return typeof localStorage === 'object' && localStorage !== null;\n        }\n        catch (e) {\n            return false;\n        }\n    };\n    Object.defineProperty(SModelStorage.prototype, \"key\", {\n        get: function () {\n            return this.viewerOptions.baseDiv;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], SModelStorage.prototype, \"viewerOptions\", void 0);\n    SModelStorage = __decorate([\n        inversify_1.injectable()\n    ], SModelStorage);\n    return SModelStorage;\n}());\nexports.SModelStorage = SModelStorage;\n//# sourceMappingURL=smodel-storage.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/model/smodel-storage.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar DOMHelper = /** @class */ (function () {\n    function DOMHelper(viewerOptions) {\n        this.viewerOptions = viewerOptions;\n    }\n    DOMHelper.prototype.getPrefix = function () {\n        var prefix = this.viewerOptions !== undefined && this.viewerOptions.baseDiv !== undefined ?\n            this.viewerOptions.baseDiv + \"_\" : \"\";\n        return prefix;\n    };\n    DOMHelper.prototype.createUniqueDOMElementId = function (element) {\n        return this.getPrefix() + element.id;\n    };\n    DOMHelper.prototype.findSModelIdByDOMElement = function (element) {\n        return element.id.replace(this.getPrefix(), '');\n    };\n    DOMHelper = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], DOMHelper);\n    return DOMHelper;\n}());\nexports.DOMHelper = DOMHelper;\n//# sourceMappingURL=dom-helper.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/dom-helper.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar AbstractLayout = /** @class */ (function () {\n    function AbstractLayout() {\n    }\n    AbstractLayout.prototype.layout = function (container, layouter) {\n        var boundsData = layouter.getBoundsData(container);\n        var options = this.getLayoutOptions(container);\n        var childrenSize = this.getChildrenSize(container, options, layouter);\n        var maxWidth = options.paddingFactor * (options.resizeContainer\n            ? childrenSize.width\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).width) - options.paddingLeft - options.paddingRight);\n        var maxHeight = options.paddingFactor * (options.resizeContainer\n            ? childrenSize.height\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).height) - options.paddingTop - options.paddingBottom);\n        if (maxWidth > 0 && maxHeight > 0) {\n            var offset = this.layoutChildren(container, layouter, options, maxWidth, maxHeight);\n            boundsData.bounds = this.getFinalContainerBounds(container, offset, options, maxWidth, maxHeight);\n            boundsData.boundsChanged = true;\n        }\n    };\n    AbstractLayout.prototype.getFinalContainerBounds = function (container, lastOffset, options, maxWidth, maxHeight) {\n        return {\n            x: container.bounds.x,\n            y: container.bounds.y,\n            width: maxWidth + options.paddingLeft + options.paddingRight,\n            height: maxHeight + options.paddingTop + options.paddingBottom\n        };\n    };\n    AbstractLayout.prototype.getFixedContainerBounds = function (container, layoutOptions, layouter) {\n        var currentContainer = container;\n        while (true) {\n            if (model_1.isBoundsAware(currentContainer)) {\n                var bounds = currentContainer.bounds;\n                if (model_1.isLayoutContainer(currentContainer) && layoutOptions.resizeContainer)\n                    layouter.log.error(currentContainer, 'Resizable container found while detecting fixed bounds');\n                if (geometry_1.isValidDimension(bounds))\n                    return bounds;\n            }\n            if (currentContainer instanceof smodel_1.SChildElement) {\n                currentContainer = currentContainer.parent;\n            }\n            else {\n                layouter.log.error(currentContainer, 'Cannot detect fixed bounds');\n                return geometry_1.EMPTY_BOUNDS;\n            }\n        }\n    };\n    AbstractLayout.prototype.layoutChildren = function (container, layouter, containerOptions, maxWidth, maxHeight) {\n        var _this = this;\n        var currentOffset = {\n            x: containerOptions.paddingLeft + 0.5 * (maxWidth - (maxWidth / containerOptions.paddingFactor)),\n            y: containerOptions.paddingTop + 0.5 * (maxHeight - (maxHeight / containerOptions.paddingFactor))\n        };\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var boundsData = layouter.getBoundsData(child);\n                var bounds = boundsData.bounds;\n                var childOptions = _this.getChildLayoutOptions(child, containerOptions);\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    currentOffset = _this.layoutChild(child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight);\n                }\n            }\n        });\n        return currentOffset;\n    };\n    AbstractLayout.prototype.getDx = function (hAlign, bounds, maxWidth) {\n        switch (hAlign) {\n            case 'left':\n                return 0;\n            case 'center':\n                return 0.5 * (maxWidth - bounds.width);\n            case 'right':\n                return maxWidth - bounds.width;\n        }\n    };\n    AbstractLayout.prototype.getDy = function (vAlign, bounds, maxHeight) {\n        switch (vAlign) {\n            case 'top':\n                return 0;\n            case 'center':\n                return 0.5 * (maxHeight - bounds.height);\n            case 'bottom':\n                return maxHeight - bounds.height;\n        }\n    };\n    AbstractLayout.prototype.getChildLayoutOptions = function (child, containerOptions) {\n        var layoutOptions = child.layoutOptions;\n        if (layoutOptions === undefined)\n            return containerOptions;\n        else\n            return this.spread(containerOptions, layoutOptions);\n    };\n    AbstractLayout.prototype.getLayoutOptions = function (element) {\n        var _this = this;\n        var current = element;\n        var allOptions = [];\n        while (current !== undefined) {\n            var layoutOptions = current.layoutOptions;\n            if (layoutOptions !== undefined)\n                allOptions.push(layoutOptions);\n            if (current instanceof smodel_1.SChildElement)\n                current = current.parent;\n            else\n                break;\n        }\n        return allOptions.reverse().reduce(function (a, b) { return _this.spread(a, b); }, this.getDefaultLayoutOptions());\n    };\n    return AbstractLayout;\n}());\nexports.AbstractLayout = AbstractLayout;\n//# sourceMappingURL=abstract-layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/abstract-layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"./model\");\nvar vbox_layout_1 = require(\"./vbox-layout\");\nvar hbox_layout_1 = require(\"./hbox-layout\");\nvar stack_layout_1 = require(\"./stack-layout\");\nvar LayoutRegistry = /** @class */ (function (_super) {\n    __extends(LayoutRegistry, _super);\n    function LayoutRegistry() {\n        var _this = _super.call(this) || this;\n        _this.register(vbox_layout_1.VBoxLayouter.KIND, new vbox_layout_1.VBoxLayouter());\n        _this.register(hbox_layout_1.HBoxLayouter.KIND, new hbox_layout_1.HBoxLayouter());\n        _this.register(stack_layout_1.StackLayouter.KIND, new stack_layout_1.StackLayouter());\n        return _this;\n    }\n    return LayoutRegistry;\n}(registry_1.InstanceRegistry));\nexports.LayoutRegistry = LayoutRegistry;\nvar Layouter = /** @class */ (function () {\n    function Layouter(layoutRegistry, logger) {\n        this.layoutRegistry = layoutRegistry;\n        this.logger = logger;\n    }\n    Layouter.prototype.layout = function (element2boundsData) {\n        new StatefulLayouter(element2boundsData, this.layoutRegistry, this.logger).layout();\n    };\n    Layouter = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.LayoutRegistry)),\n        __param(1, inversify_1.inject(types_1.TYPES.ILogger)),\n        __metadata(\"design:paramtypes\", [LayoutRegistry, Object])\n    ], Layouter);\n    return Layouter;\n}());\nexports.Layouter = Layouter;\nvar StatefulLayouter = /** @class */ (function () {\n    function StatefulLayouter(element2boundsData, layoutRegistry, log) {\n        var _this = this;\n        this.element2boundsData = element2boundsData;\n        this.layoutRegistry = layoutRegistry;\n        this.log = log;\n        this.toBeLayouted = [];\n        element2boundsData.forEach(function (data, element) {\n            if (model_1.isLayoutContainer(element))\n                _this.toBeLayouted.push(element);\n        });\n    }\n    StatefulLayouter.prototype.getBoundsData = function (element) {\n        var boundsData = this.element2boundsData.get(element);\n        var bounds = element.bounds;\n        if (model_1.isLayoutContainer(element) && this.toBeLayouted.indexOf(element) >= 0) {\n            bounds = this.doLayout(element);\n        }\n        if (!boundsData) {\n            boundsData = {\n                bounds: bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            };\n            this.element2boundsData.set(element, boundsData);\n        }\n        return boundsData;\n    };\n    StatefulLayouter.prototype.layout = function () {\n        while (this.toBeLayouted.length > 0) {\n            var element = this.toBeLayouted[0];\n            this.doLayout(element);\n        }\n    };\n    StatefulLayouter.prototype.doLayout = function (element) {\n        var index = this.toBeLayouted.indexOf(element);\n        if (index >= 0)\n            this.toBeLayouted.splice(index, 1);\n        var layout = this.layoutRegistry.get(element.layout);\n        if (layout)\n            layout.layout(element, this);\n        var boundsData = this.element2boundsData.get(element);\n        if (boundsData !== undefined && boundsData.bounds !== undefined) {\n            return boundsData.bounds;\n        }\n        else {\n            this.log.error(element, 'Layout failed');\n            return geometry_1.EMPTY_BOUNDS;\n        }\n    };\n    return StatefulLayouter;\n}());\nexports.StatefulLayouter = StatefulLayouter;\n//# sourceMappingURL=layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar registry_1 = require(\"../../utils/registry\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar ButtonHandlerRegistry = /** @class */ (function (_super) {\n    __extends(ButtonHandlerRegistry, _super);\n    function ButtonHandlerRegistry(buttonHandlerFactories) {\n        var _this = _super.call(this) || this;\n        buttonHandlerFactories.forEach(function (factory) { return _this.register(factory.TYPE, new factory()); });\n        return _this;\n    }\n    ButtonHandlerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IButtonHandler)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ButtonHandlerRegistry);\n    return ButtonHandlerRegistry;\n}(registry_1.InstanceRegistry));\nexports.ButtonHandlerRegistry = ButtonHandlerRegistry;\n//# sourceMappingURL=button-handler.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/button/button-handler.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../fade/model\");\nvar SButton = /** @class */ (function (_super) {\n    __extends(SButton, _super);\n    function SButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        return _this;\n    }\n    SButton.prototype.hasFeature = function (feature) {\n        return feature === model_1.boundsFeature || feature === model_2.fadeFeature || feature === model_1.layoutableChildFeature;\n    };\n    return SButton;\n}(model_1.SShapeElement));\nexports.SButton = SButton;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/button/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expandFeature = Symbol('expandFeature');\nfunction isExpandable(element) {\n    return element.hasFeature(exports.expandFeature) && 'expanded' in element;\n}\nexports.isExpandable = isExpandable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/expand/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar model_1 = require(\"./model\");\nvar FadeAnimation = /** @class */ (function (_super) {\n    __extends(FadeAnimation, _super);\n    function FadeAnimation(model, elementFades, context, removeAfterFadeOut) {\n        if (removeAfterFadeOut === void 0) { removeAfterFadeOut = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementFades = elementFades;\n        _this.removeAfterFadeOut = removeAfterFadeOut;\n        return _this;\n    }\n    FadeAnimation.prototype.tween = function (t, context) {\n        for (var _i = 0, _a = this.elementFades; _i < _a.length; _i++) {\n            var elementFade = _a[_i];\n            var element = elementFade.element;\n            if (elementFade.type === 'in') {\n                element.opacity = t;\n            }\n            else if (elementFade.type === 'out') {\n                element.opacity = 1 - t;\n                if (t === 1 && this.removeAfterFadeOut && element instanceof smodel_1.SChildElement) {\n                    element.parent.remove(element);\n                }\n            }\n        }\n        return this.model;\n    };\n    return FadeAnimation;\n}(animation_1.Animation));\nexports.FadeAnimation = FadeAnimation;\nvar ElementFader = /** @class */ (function () {\n    function ElementFader() {\n    }\n    ElementFader.prototype.decorate = function (vnode, element) {\n        if (model_1.isFadeable(element)) {\n            vnode_utils_1.setAttr(vnode, 'opacity', element.opacity);\n        }\n        return vnode;\n    };\n    ElementFader.prototype.postUpdate = function () {\n    };\n    ElementFader = __decorate([\n        inversify_1.injectable()\n    ], ElementFader);\n    return ElementFader;\n}());\nexports.ElementFader = ElementFader;\n//# sourceMappingURL=fade.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/fade/fade.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"./model\");\nvar OpenAction = /** @class */ (function () {\n    function OpenAction(elementId) {\n        this.elementId = elementId;\n        this.kind = OpenAction.KIND;\n    }\n    OpenAction.KIND = 'open';\n    return OpenAction;\n}());\nexports.OpenAction = OpenAction;\nvar OpenMouseListener = /** @class */ (function (_super) {\n    __extends(OpenMouseListener, _super);\n    function OpenMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OpenMouseListener.prototype.doubleClick = function (target, event) {\n        var openableTarget = smodel_utils_1.findParentByFeature(target, model_1.isOpenable);\n        if (openableTarget !== undefined) {\n            return [new OpenAction(openableTarget.id)];\n        }\n        return [];\n    };\n    return OpenMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.OpenMouseListener = OpenMouseListener;\n//# sourceMappingURL=open.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/open/open.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar UndoAction = /** @class */ (function () {\n    function UndoAction() {\n        this.kind = UndoAction.KIND;\n    }\n    UndoAction.KIND = 'undo';\n    return UndoAction;\n}());\nexports.UndoAction = UndoAction;\nvar RedoAction = /** @class */ (function () {\n    function RedoAction() {\n        this.kind = RedoAction.KIND;\n    }\n    RedoAction.KIND = 'redo';\n    return RedoAction;\n}());\nexports.RedoAction = RedoAction;\nvar UndoRedoKeyListener = /** @class */ (function (_super) {\n    __extends(UndoRedoKeyListener, _super);\n    function UndoRedoKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    UndoRedoKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyZ', 'ctrlCmd'))\n            return [new UndoAction];\n        if (keyboard_1.matchesKeystroke(event, 'KeyZ', 'ctrlCmd', 'shift'))\n            return [new RedoAction];\n        return [];\n    };\n    return UndoRedoKeyListener;\n}(key_tool_1.KeyListener));\nexports.UndoRedoKeyListener = UndoRedoKeyListener;\n//# sourceMappingURL=undo-redo.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/undo-redo/undo-redo.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nfunction forEachMatch(matchResult, callback) {\n    for (var id in matchResult) {\n        if (matchResult.hasOwnProperty(id))\n            callback(id, matchResult[id]);\n    }\n}\nexports.forEachMatch = forEachMatch;\nvar ModelMatcher = /** @class */ (function () {\n    function ModelMatcher() {\n    }\n    ModelMatcher.prototype.match = function (left, right) {\n        var result = {};\n        this.matchLeft(left, result);\n        this.matchRight(right, result);\n        return result;\n    };\n    ModelMatcher.prototype.matchLeft = function (element, result, parentId) {\n        var match = result[element.id];\n        if (match !== undefined) {\n            match.left = element;\n            match.leftParentId = parentId;\n        }\n        else {\n            match = {\n                left: element,\n                leftParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (smodel_1.isParent(element)) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.matchLeft(child, result, element.id);\n            }\n        }\n    };\n    ModelMatcher.prototype.matchRight = function (element, result, parentId) {\n        var match = result[element.id];\n        if (match !== undefined) {\n            match.right = element;\n            match.rightParentId = parentId;\n        }\n        else {\n            match = {\n                right: element,\n                rightParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (smodel_1.isParent(element)) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.matchRight(child, result, element.id);\n            }\n        }\n    };\n    return ModelMatcher;\n}());\nexports.ModelMatcher = ModelMatcher;\nfunction applyMatches(root, matches) {\n    var index;\n    if (root instanceof smodel_1.SModelRoot) {\n        index = root.index;\n    }\n    else {\n        index = new smodel_1.SModelIndex();\n        index.add(root);\n    }\n    for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n        var match = matches_1[_i];\n        var newElementInserted = false;\n        if (match.left !== undefined && match.leftParentId !== undefined) {\n            var parent_1 = index.getById(match.leftParentId);\n            if (parent_1 !== undefined && parent_1.children !== undefined) {\n                var i = parent_1.children.indexOf(match.left);\n                if (i >= 0) {\n                    if (match.right !== undefined && match.leftParentId === match.rightParentId) {\n                        parent_1.children.splice(i, 1, match.right);\n                        newElementInserted = true;\n                    }\n                    else {\n                        parent_1.children.splice(i, 1);\n                    }\n                }\n                index.remove(match.left);\n            }\n        }\n        if (!newElementInserted && match.right !== undefined && match.rightParentId !== undefined) {\n            var parent_2 = index.getById(match.rightParentId);\n            if (parent_2 !== undefined) {\n                if (parent_2.children === undefined)\n                    parent_2.children = [];\n                parent_2.children.push(match.right);\n            }\n        }\n    }\n}\nexports.applyMatches = applyMatches;\n//# sourceMappingURL=model-matching.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/update/model-matching.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar command_1 = require(\"../../base/commands/command\");\nvar fade_1 = require(\"../fade/fade\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar move_1 = require(\"../move/move\");\nvar model_1 = require(\"../fade/model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../bounds/model\");\nvar viewport_root_1 = require(\"../viewport/viewport-root\");\nvar model_4 = require(\"../select/model\");\nvar model_matching_1 = require(\"./model-matching\");\nvar resize_1 = require(\"../bounds/resize\");\n/**\n * Sent from the model source to the client in order to update the model. If no model is present yet,\n * this behaves the same as a SetModelAction. The transition from the old model to the new one can be animated.\n */\nvar UpdateModelAction = /** @class */ (function () {\n    function UpdateModelAction(input, animate) {\n        if (animate === void 0) { animate = true; }\n        this.animate = animate;\n        this.kind = UpdateModelCommand.KIND;\n        if (input.id !== undefined)\n            this.newRoot = input;\n        else\n            this.matches = input;\n    }\n    return UpdateModelAction;\n}());\nexports.UpdateModelAction = UpdateModelAction;\nvar UpdateModelCommand = /** @class */ (function (_super) {\n    __extends(UpdateModelCommand, _super);\n    function UpdateModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    UpdateModelCommand.prototype.execute = function (context) {\n        var newRoot;\n        if (this.action.newRoot !== undefined) {\n            newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        }\n        else {\n            newRoot = context.modelFactory.createRoot(context.root);\n            if (this.action.matches !== undefined)\n                this.applyMatches(newRoot, this.action.matches, context);\n        }\n        this.oldRoot = context.root;\n        this.newRoot = newRoot;\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    };\n    UpdateModelCommand.prototype.performUpdate = function (oldRoot, newRoot, context) {\n        if ((this.action.animate === undefined || this.action.animate) && oldRoot.id === newRoot.id) {\n            var matchResult = void 0;\n            if (this.action.matches === undefined) {\n                var matcher = new model_matching_1.ModelMatcher();\n                matchResult = matcher.match(oldRoot, newRoot);\n            }\n            else {\n                matchResult = this.convertToMatchResult(this.action.matches, oldRoot, newRoot);\n            }\n            var animationOrRoot = this.computeAnimation(newRoot, matchResult, context);\n            if (animationOrRoot instanceof animation_1.Animation)\n                return animationOrRoot.start();\n            else\n                return animationOrRoot;\n        }\n        else {\n            if (oldRoot.type === newRoot.type && geometry_1.isValidDimension(oldRoot.canvasBounds))\n                newRoot.canvasBounds = oldRoot.canvasBounds;\n            return newRoot;\n        }\n    };\n    UpdateModelCommand.prototype.applyMatches = function (root, matches, context) {\n        var index = root.index;\n        for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n            var match = matches_1[_i];\n            if (match.left !== undefined) {\n                var element = index.getById(match.left.id);\n                if (element instanceof smodel_1.SChildElement)\n                    element.parent.remove(element);\n            }\n            if (match.right !== undefined) {\n                var element = context.modelFactory.createElement(match.right);\n                var parent_1 = void 0;\n                if (match.rightParentId !== undefined)\n                    parent_1 = index.getById(match.rightParentId);\n                if (parent_1 instanceof smodel_1.SParentElement)\n                    parent_1.add(element);\n                else\n                    root.add(element);\n            }\n        }\n    };\n    UpdateModelCommand.prototype.convertToMatchResult = function (matches, leftRoot, rightRoot) {\n        var result = {};\n        for (var _i = 0, matches_2 = matches; _i < matches_2.length; _i++) {\n            var match = matches_2[_i];\n            var converted = {};\n            var id = undefined;\n            if (match.left !== undefined) {\n                id = match.left.id;\n                converted.left = leftRoot.index.getById(id);\n                converted.leftParentId = match.leftParentId;\n            }\n            if (match.right !== undefined) {\n                id = match.right.id;\n                converted.right = rightRoot.index.getById(id);\n                converted.rightParentId = match.rightParentId;\n            }\n            if (id !== undefined)\n                result[id] = converted;\n        }\n        return result;\n    };\n    UpdateModelCommand.prototype.computeAnimation = function (newRoot, matchResult, context) {\n        var _this = this;\n        var animationData = {\n            fades: []\n        };\n        model_matching_1.forEachMatch(matchResult, function (id, match) {\n            if (match.left !== undefined && match.right !== undefined) {\n                // The element is still there, but may have been moved\n                _this.updateElement(match.left, match.right, animationData);\n            }\n            else if (match.right !== undefined) {\n                // An element has been added\n                var right = match.right;\n                if (model_1.isFadeable(right)) {\n                    right.opacity = 0;\n                    animationData.fades.push({\n                        element: right,\n                        type: 'in'\n                    });\n                }\n            }\n            else if (match.left instanceof smodel_1.SChildElement) {\n                // An element has been removed\n                var left = match.left;\n                if (model_1.isFadeable(left) && match.leftParentId !== undefined) {\n                    if (newRoot.index.getById(left.id) === undefined) {\n                        var parent_2 = newRoot.index.getById(match.leftParentId);\n                        if (parent_2 instanceof smodel_1.SParentElement) {\n                            var leftCopy = context.modelFactory.createElement(left);\n                            parent_2.add(leftCopy);\n                            animationData.fades.push({\n                                element: leftCopy,\n                                type: 'out'\n                            });\n                        }\n                    }\n                }\n            }\n        });\n        var animations = this.createAnimations(animationData, newRoot, context);\n        if (animations.length >= 2) {\n            return new animation_1.CompoundAnimation(newRoot, context, animations);\n        }\n        else if (animations.length === 1) {\n            return animations[0];\n        }\n        else {\n            return newRoot;\n        }\n    };\n    UpdateModelCommand.prototype.updateElement = function (left, right, animationData) {\n        if (model_2.isLocateable(left) && model_2.isLocateable(right)) {\n            var leftPos = left.position;\n            var rightPos = right.position;\n            if (!geometry_1.almostEquals(leftPos.x, rightPos.x) || !geometry_1.almostEquals(leftPos.y, rightPos.y)) {\n                if (animationData.moves === undefined)\n                    animationData.moves = [];\n                animationData.moves.push({\n                    element: right,\n                    elementId: right.id,\n                    fromPosition: leftPos,\n                    toPosition: rightPos\n                });\n                right.position = leftPos;\n            }\n        }\n        if (model_3.isBoundsAware(left) && model_3.isBoundsAware(right)) {\n            if (!geometry_1.isValidDimension(right.bounds)) {\n                right.bounds = {\n                    x: right.bounds.x,\n                    y: right.bounds.y,\n                    width: left.bounds.width,\n                    height: left.bounds.height\n                };\n            }\n            else if (!geometry_1.almostEquals(left.bounds.width, right.bounds.width)\n                || !geometry_1.almostEquals(left.bounds.height, right.bounds.height)) {\n                if (animationData.resizes === undefined)\n                    animationData.resizes = [];\n                animationData.resizes.push({\n                    element: right,\n                    fromDimension: {\n                        width: left.bounds.width,\n                        height: left.bounds.height,\n                    },\n                    toDimension: {\n                        width: right.bounds.width,\n                        height: right.bounds.height,\n                    }\n                });\n            }\n        }\n        if (model_4.isSelectable(left) && model_4.isSelectable(right)) {\n            right.selected = left.selected;\n        }\n        if (left instanceof smodel_1.SModelRoot && right instanceof smodel_1.SModelRoot) {\n            right.canvasBounds = left.canvasBounds;\n        }\n        if (left instanceof viewport_root_1.ViewportRootElement && right instanceof viewport_root_1.ViewportRootElement) {\n            right.scroll = left.scroll;\n            right.zoom = left.zoom;\n        }\n    };\n    UpdateModelCommand.prototype.createAnimations = function (data, root, context) {\n        var animations = [];\n        if (data.fades.length > 0) {\n            animations.push(new fade_1.FadeAnimation(root, data.fades, context, true));\n        }\n        if (data.moves !== undefined && data.moves.length > 0) {\n            var movesMap = new Map;\n            for (var _i = 0, _a = data.moves; _i < _a.length; _i++) {\n                var move = _a[_i];\n                movesMap.set(move.elementId, move);\n            }\n            animations.push(new move_1.MoveAnimation(root, movesMap, new Map, context, false));\n        }\n        if (data.resizes !== undefined && data.resizes.length > 0) {\n            var resizesMap = new Map;\n            for (var _b = 0, _c = data.resizes; _b < _c.length; _b++) {\n                var resize = _c[_b];\n                resizesMap.set(resize.element.id, resize);\n            }\n            animations.push(new resize_1.ResizeAnimation(root, resizesMap, context, false));\n        }\n        return animations;\n    };\n    UpdateModelCommand.prototype.undo = function (context) {\n        return this.performUpdate(this.newRoot, this.oldRoot, context);\n    };\n    UpdateModelCommand.prototype.redo = function (context) {\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    };\n    UpdateModelCommand.KIND = 'updateModel';\n    UpdateModelCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [UpdateModelAction])\n    ], UpdateModelCommand);\n    return UpdateModelCommand;\n}(command_1.Command));\nexports.UpdateModelCommand = UpdateModelCommand;\n//# sourceMappingURL=update-model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/update/update-model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar command_1 = require(\"../../base/commands/command\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../select/model\");\nvar viewport_1 = require(\"./viewport\");\nvar model_3 = require(\"./model\");\n/**\n * Triggered when the user requests the viewer to center on the current model. The resulting\n * CenterCommand changes the scroll setting of the viewport accordingly and resets the zoom to its default.\n * This action can also be sent from the model source to the client in order to perform such a\n * viewport change programmatically.\n */\nvar CenterAction = /** @class */ (function () {\n    function CenterAction(elementIds, animate) {\n        if (animate === void 0) { animate = true; }\n        this.elementIds = elementIds;\n        this.animate = animate;\n        this.kind = CenterCommand.KIND;\n    }\n    return CenterAction;\n}());\nexports.CenterAction = CenterAction;\n/**\n * Triggered when the user requests the viewer to fit its content to the available drawing area.\n * The resulting FitToScreenCommand changes the zoom and scroll settings of the viewport so the model\n * can be shown completely. This action can also be sent from the model source to the client in order\n * to perform such a viewport change programmatically.\n */\nvar FitToScreenAction = /** @class */ (function () {\n    function FitToScreenAction(elementIds, padding, maxZoom, animate) {\n        if (animate === void 0) { animate = true; }\n        this.elementIds = elementIds;\n        this.padding = padding;\n        this.maxZoom = maxZoom;\n        this.animate = animate;\n        this.kind = FitToScreenCommand.KIND;\n    }\n    return FitToScreenAction;\n}());\nexports.FitToScreenAction = FitToScreenAction;\nvar BoundsAwareViewportCommand = /** @class */ (function (_super) {\n    __extends(BoundsAwareViewportCommand, _super);\n    function BoundsAwareViewportCommand(animate) {\n        var _this = _super.call(this) || this;\n        _this.animate = animate;\n        return _this;\n    }\n    BoundsAwareViewportCommand.prototype.initialize = function (model) {\n        var _this = this;\n        if (model_3.isViewport(model)) {\n            this.oldViewport = {\n                scroll: model.scroll,\n                zoom: model.zoom\n            };\n            var allBounds_1 = [];\n            this.getElementIds().forEach(function (id) {\n                var element = model.index.getById(id);\n                if (element && model_1.isBoundsAware(element))\n                    allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n            });\n            if (allBounds_1.length === 0) {\n                model.index.all().forEach(function (element) {\n                    if (model_2.isSelectable(element) && element.selected && model_1.isBoundsAware(element))\n                        allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n                });\n            }\n            if (allBounds_1.length === 0) {\n                model.index.all().forEach(function (element) {\n                    if (model_1.isBoundsAware(element))\n                        allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n                });\n            }\n            if (allBounds_1.length !== 0) {\n                var bounds = allBounds_1.reduce(function (b0, b1) { return geometry_1.combine(b0, b1); });\n                if (geometry_1.isValidDimension(bounds))\n                    this.newViewport = this.getNewViewport(bounds, model);\n            }\n        }\n    };\n    BoundsAwareViewportCommand.prototype.boundsInViewport = function (element, bounds, viewport) {\n        if (element instanceof smodel_1.SChildElement && element.parent !== viewport)\n            return this.boundsInViewport(element.parent, element.parent.localToParent(bounds), viewport);\n        else\n            return bounds;\n    };\n    BoundsAwareViewportCommand.prototype.execute = function (context) {\n        this.initialize(context.root);\n        return this.redo(context);\n    };\n    BoundsAwareViewportCommand.prototype.undo = function (context) {\n        var model = context.root;\n        if (model_3.isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate)\n                return new viewport_1.ViewportAnimation(model, this.newViewport, this.oldViewport, context).start();\n            else {\n                model.scroll = this.oldViewport.scroll;\n                model.zoom = this.oldViewport.zoom;\n            }\n        }\n        return model;\n    };\n    BoundsAwareViewportCommand.prototype.redo = function (context) {\n        var model = context.root;\n        if (model_3.isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate) {\n                return new viewport_1.ViewportAnimation(model, this.oldViewport, this.newViewport, context).start();\n            }\n            else {\n                model.scroll = this.newViewport.scroll;\n                model.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    };\n    BoundsAwareViewportCommand.prototype.equal = function (vp1, vp2) {\n        return vp1.zoom === vp2.zoom && vp1.scroll.x === vp2.scroll.x && vp1.scroll.y === vp2.scroll.y;\n    };\n    return BoundsAwareViewportCommand;\n}(command_1.Command));\nexports.BoundsAwareViewportCommand = BoundsAwareViewportCommand;\nvar CenterCommand = /** @class */ (function (_super) {\n    __extends(CenterCommand, _super);\n    function CenterCommand(action) {\n        var _this = _super.call(this, action.animate) || this;\n        _this.action = action;\n        return _this;\n    }\n    CenterCommand.prototype.getElementIds = function () {\n        return this.action.elementIds;\n    };\n    CenterCommand.prototype.getNewViewport = function (bounds, model) {\n        if (!geometry_1.isValidDimension(model.canvasBounds)) {\n            return undefined;\n        }\n        var c = geometry_1.center(bounds);\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width,\n                y: c.y - 0.5 * model.canvasBounds.height\n            },\n            zoom: 1\n        };\n    };\n    CenterCommand.KIND = 'center';\n    return CenterCommand;\n}(BoundsAwareViewportCommand));\nexports.CenterCommand = CenterCommand;\nvar FitToScreenCommand = /** @class */ (function (_super) {\n    __extends(FitToScreenCommand, _super);\n    function FitToScreenCommand(action) {\n        var _this = _super.call(this, action.animate) || this;\n        _this.action = action;\n        return _this;\n    }\n    FitToScreenCommand.prototype.getElementIds = function () {\n        return this.action.elementIds;\n    };\n    FitToScreenCommand.prototype.getNewViewport = function (bounds, model) {\n        if (!geometry_1.isValidDimension(model.canvasBounds)) {\n            return undefined;\n        }\n        var c = geometry_1.center(bounds);\n        var delta = this.action.padding === undefined\n            ? 0\n            : 2 * this.action.padding;\n        var zoom = Math.min(model.canvasBounds.width / (bounds.width + delta), model.canvasBounds.height / bounds.height + delta);\n        if (this.action.maxZoom !== undefined)\n            zoom = Math.min(zoom, this.action.maxZoom);\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width / zoom,\n                y: c.y - 0.5 * model.canvasBounds.height / zoom\n            },\n            zoom: zoom\n        };\n    };\n    FitToScreenCommand.KIND = 'fit';\n    return FitToScreenCommand;\n}(BoundsAwareViewportCommand));\nexports.FitToScreenCommand = FitToScreenCommand;\nvar CenterKeyboardListener = /** @class */ (function (_super) {\n    __extends(CenterKeyboardListener, _super);\n    function CenterKeyboardListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CenterKeyboardListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyC', 'ctrlCmd', 'shift'))\n            return [new CenterAction([])];\n        if (keyboard_1.matchesKeystroke(event, 'KeyF', 'ctrlCmd', 'shift'))\n            return [new FitToScreenAction([])];\n        return [];\n    };\n    return CenterKeyboardListener;\n}(key_tool_1.KeyListener));\nexports.CenterKeyboardListener = CenterKeyboardListener;\n//# sourceMappingURL=center-fit.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/center-fit.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar model_2 = require(\"../export/model\");\n/**\n * Model root element that defines a viewport, so it transforms the coordinate system with\n * a `scroll` translation and a `zoom` scaling.\n */\nvar ViewportRootElement = /** @class */ (function (_super) {\n    __extends(ViewportRootElement, _super);\n    function ViewportRootElement(index) {\n        var _this = _super.call(this, index) || this;\n        _this.scroll = { x: 0, y: 0 };\n        _this.zoom = 1;\n        _this.export = false;\n        return _this;\n    }\n    ViewportRootElement.prototype.hasFeature = function (feature) {\n        return feature === model_1.viewportFeature || feature === model_2.exportFeature;\n    };\n    ViewportRootElement.prototype.localToParent = function (point) {\n        var result = {\n            x: (point.x - this.scroll.x) * this.zoom,\n            y: (point.y - this.scroll.y) * this.zoom,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width * this.zoom;\n            result.height = point.height * this.zoom;\n        }\n        return result;\n    };\n    ViewportRootElement.prototype.parentToLocal = function (point) {\n        var result = {\n            x: (point.x / this.zoom) + this.scroll.x,\n            y: (point.y / this.zoom) + this.scroll.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point) && geometry_1.isValidDimension(point)) {\n            result.width = point.width / this.zoom;\n            result.height = point.height / this.zoom;\n        }\n        return result;\n    };\n    return ViewportRootElement;\n}(smodel_1.SModelRoot));\nexports.ViewportRootElement = ViewportRootElement;\n//# sourceMappingURL=viewport-root.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/viewport-root.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar action_handler_1 = require(\"../base/actions/action-handler\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\n/**\n * A model source is serving the model to the event cycle. It represents\n * the entry point to the client for external sources, such as model\n * editors.\n *\n * As an IActionHandler it listens to actions in and reacts to them with\n * commands or actions if necessary. This way, you can implement action\n * protocols between the client and the outside world.\n *\n * There are two default implementations for a ModelSource:\n * <ul>\n * <li>the LocalModelSource handles the actions to calculate bounds and\n * set/update the model</li>\n * <li>the DiagramServer connects via websocket to a remote source. It\n * can be used to connect to a model editor that provides the model,\n * layouts diagrams, transfers selection and answers model queries from\n * the client.</li>\n */\nvar ModelSource = /** @class */ (function () {\n    function ModelSource(actionDispatcher, actionHandlerRegistry, viewerOptions) {\n        this.actionDispatcher = actionDispatcher;\n        this.viewerOptions = viewerOptions;\n        this.initialize(actionHandlerRegistry);\n    }\n    ModelSource.prototype.initialize = function (registry) {\n        // Register model manipulation commands\n        registry.registerCommand(set_model_1.SetModelCommand);\n        // Register this model source\n        registry.register(set_model_1.RequestModelAction.KIND, this);\n        registry.register(svg_exporter_1.ExportSvgAction.KIND, this);\n    };\n    ModelSource = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.ActionHandlerRegistry)),\n        __param(2, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __metadata(\"design:paramtypes\", [Object, action_handler_1.ActionHandlerRegistry, Object])\n    ], ModelSource);\n    return ModelSource;\n}());\nexports.ModelSource = ModelSource;\n//# sourceMappingURL=model-source.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/model-source.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Returns whether the mouse or keyboard event includes the CMD key\n * on Mac or CTRL key on Linux / others.\n */\nfunction isCtrlOrCmd(event) {\n    if (isMac())\n        return event.metaKey;\n    else\n        return event.ctrlKey;\n}\nexports.isCtrlOrCmd = isCtrlOrCmd;\nfunction isMac() {\n    return window.navigator.userAgent.indexOf(\"Mac\") !== -1;\n}\nexports.isMac = isMac;\nfunction isCrossSite(url) {\n    if (url && typeof window !== 'undefined' && window.location) {\n        var baseURL = '';\n        if (window.location.protocol)\n            baseURL += window.location.protocol + '//';\n        if (window.location.host)\n            baseURL += window.location.host;\n        return baseURL.length > 0 && !url.startsWith(baseURL);\n    }\n    return false;\n}\nexports.isCrossSite = isCrossSite;\n//# sourceMappingURL=browser.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/browser.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A helper class that allows to easily create fluent iterables.\n */\nvar FluentIterableImpl = /** @class */ (function () {\n    function FluentIterableImpl(startFn, nextFn) {\n        this.startFn = startFn;\n        this.nextFn = nextFn;\n    }\n    FluentIterableImpl.prototype[Symbol.iterator] = function () {\n        var _this = this;\n        var iterator = (_a = {\n                state: this.startFn(),\n                next: function () { return _this.nextFn(iterator.state); }\n            },\n            _a[Symbol.iterator] = function () { return iterator; },\n            _a);\n        return iterator;\n        var _a;\n    };\n    FluentIterableImpl.prototype.filter = function (callback) {\n        return filterIterable(this, callback);\n    };\n    FluentIterableImpl.prototype.map = function (callback) {\n        return mapIterable(this, callback);\n    };\n    FluentIterableImpl.prototype.forEach = function (callback) {\n        var iterator = this[Symbol.iterator]();\n        var index = 0;\n        var result;\n        do {\n            result = iterator.next();\n            if (result.value !== undefined)\n                callback(result.value, index);\n            index++;\n        } while (!result.done);\n    };\n    return FluentIterableImpl;\n}());\nexports.FluentIterableImpl = FluentIterableImpl;\n/**\n * Converts a FluentIterable into an array. If the input is an array, it is returned unchanged.\n */\nfunction toArray(input) {\n    if (input.constructor === Array) {\n        return input;\n    }\n    var result = [];\n    input.forEach(function (element) { return result.push(element); });\n    return result;\n}\nexports.toArray = toArray;\nexports.DONE_RESULT = Object.freeze({ done: true, value: undefined });\n/**\n * Create a fluent iterable that filters the content of the given iterable or array.\n */\nfunction filterIterable(input, callback) {\n    return new FluentIterableImpl(function () { return createIterator(input); }, function (iterator) {\n        var result;\n        do {\n            result = iterator.next();\n        } while (!result.done && !callback(result.value));\n        return result;\n    });\n}\nexports.filterIterable = filterIterable;\n/**\n * Create a fluent iterable that maps the content of the given iterable or array.\n */\nfunction mapIterable(input, callback) {\n    return new FluentIterableImpl(function () { return createIterator(input); }, function (iterator) {\n        var _a = iterator.next(), done = _a.done, value = _a.value;\n        if (done)\n            return exports.DONE_RESULT;\n        else\n            return { done: false, value: callback(value) };\n    });\n}\nexports.mapIterable = mapIterable;\n/**\n * Create an iterator for the given iterable or array.\n */\nfunction createIterator(collection) {\n    var method = collection[Symbol.iterator];\n    if (typeof method === 'function') {\n        return method.call(collection);\n    }\n    var length = collection.length;\n    if (typeof length === 'number' && length >= 0) {\n        return new ArrayIterator(collection);\n    }\n    return { next: function () { return exports.DONE_RESULT; } };\n}\n/**\n * Iterator implementation for arrays.\n */\nvar ArrayIterator = /** @class */ (function () {\n    function ArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n    }\n    ArrayIterator.prototype.next = function () {\n        if (this.index < this.array.length)\n            return { done: false, value: this.array[this.index++] };\n        else\n            return exports.DONE_RESULT;\n    };\n    ArrayIterator.prototype[Symbol.iterator] = function () {\n        return this;\n    };\n    return ArrayIterator;\n}());\n//# sourceMappingURL=iterable.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/iterable.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"none\"] = 0] = \"none\";\n    LogLevel[LogLevel[\"error\"] = 1] = \"error\";\n    LogLevel[LogLevel[\"warn\"] = 2] = \"warn\";\n    LogLevel[LogLevel[\"info\"] = 3] = \"info\";\n    LogLevel[LogLevel[\"log\"] = 4] = \"log\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nvar NullLogger = /** @class */ (function () {\n    function NullLogger() {\n        this.logLevel = LogLevel.none;\n    }\n    NullLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger = __decorate([\n        inversify_1.injectable()\n    ], NullLogger);\n    return NullLogger;\n}());\nexports.NullLogger = NullLogger;\nvar ConsoleLogger = /** @class */ (function () {\n    function ConsoleLogger(logLevel, viewOptions) {\n        if (logLevel === void 0) { logLevel = LogLevel.log; }\n        if (viewOptions === void 0) { viewOptions = { baseDiv: '' }; }\n        this.logLevel = logLevel;\n        this.viewOptions = viewOptions;\n    }\n    ConsoleLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.error)\n            try {\n                console.error.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.warn)\n            try {\n                console.warn.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.info)\n            try {\n                console.info.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.log)\n            try {\n                console.log.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.consoleArguments = function (thisArg, message, params) {\n        var caller;\n        if (typeof thisArg === 'object')\n            caller = thisArg.constructor.name;\n        else\n            caller = thisArg;\n        var date = new Date();\n        return [date.toLocaleTimeString() + ' ' + this.viewOptions.baseDiv + ' ' + caller + ': ' + message].concat(params);\n    };\n    ConsoleLogger = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.LogLevel)),\n        __param(1, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __metadata(\"design:paramtypes\", [Number, Object])\n    ], ConsoleLogger);\n    return ConsoleLogger;\n}());\nexports.ConsoleLogger = ConsoleLogger;\n//# sourceMappingURL=logging.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/logging.js","'use strict';\n\nif (!process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = nextTick;\n} else {\n  module.exports = process.nextTick;\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/process-nextick-args/index.js","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/file-saver/FileSaver.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar MetadataReader = (function () {\n    function MetadataReader() {\n    }\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\n        return {\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\n            userGeneratedMetadata: userGeneratedMetadata || {}\n        };\n    };\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\n        return userGeneratedMetadata;\n    };\n    return MetadataReader;\n}());\nexports.MetadataReader = MetadataReader;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/metadata_reader.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar guid_1 = require(\"../utils/guid\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.guid = guid_1.guid();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new queryable_string_1.QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof metadata_1.Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var i = 0; i < this.metadata.length; i++) {\n            var m = this.metadata[i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (m) {\n            return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                (m.key !== METADATA_KEY.NAME_TAG) &&\n                (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                (m.key !== METADATA_KEY.NAMED_TAG);\n        });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (m) {\n                return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.NAME_TAG) &&\n                    (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                    (m.key !== METADATA_KEY.NAMED_TAG);\n            });\n        }\n        return null;\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var i = 0; i < _this.metadata.length; i++) {\n                var m = _this.metadata[i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexports.Target = Target;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/target.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar BindingWhenOnSyntax = (function () {\n    function BindingWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    }\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingWhenOnSyntax;\n}());\nexports.BindingWhenOnSyntax = BindingWhenOnSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_when_on_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/constraint_helpers.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.array = Array.isArray;\nfunction primitive(s) {\n    return typeof s === 'string' || typeof s === 'number';\n}\nexports.primitive = primitive;\n//# sourceMappingURL=is.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/is.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar is = require(\"./is\");\nvar htmldomapi_1 = require(\"./htmldomapi\");\nfunction isUndef(s) { return s === undefined; }\nfunction isDef(s) { return s !== undefined; }\nvar emptyNode = vnode_1.default('', {}, [], undefined, undefined);\nfunction sameVnode(vnode1, vnode2) {\n    return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\n}\nfunction isVnode(vnode) {\n    return vnode.sel !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var i, map = {}, key, ch;\n    for (i = beginIdx; i <= endIdx; ++i) {\n        ch = children[i];\n        if (ch != null) {\n            key = ch.key;\n            if (key !== undefined)\n                map[key] = i;\n        }\n    }\n    return map;\n}\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\nvar h_1 = require(\"./h\");\nexports.h = h_1.h;\nvar thunk_1 = require(\"./thunk\");\nexports.thunk = thunk_1.thunk;\nfunction init(modules, domApi) {\n    var i, j, cbs = {};\n    var api = domApi !== undefined ? domApi : htmldomapi_1.default;\n    for (i = 0; i < hooks.length; ++i) {\n        cbs[hooks[i]] = [];\n        for (j = 0; j < modules.length; ++j) {\n            var hook = modules[j][hooks[i]];\n            if (hook !== undefined) {\n                cbs[hooks[i]].push(hook);\n            }\n        }\n    }\n    function emptyNodeAt(elm) {\n        var id = elm.id ? '#' + elm.id : '';\n        var c = elm.className ? '.' + elm.className.split(' ').join('.') : '';\n        return vnode_1.default(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);\n    }\n    function createRmCb(childElm, listeners) {\n        return function rmCb() {\n            if (--listeners === 0) {\n                var parent_1 = api.parentNode(childElm);\n                api.removeChild(parent_1, childElm);\n            }\n        };\n    }\n    function createElm(vnode, insertedVnodeQueue) {\n        var i, data = vnode.data;\n        if (data !== undefined) {\n            if (isDef(i = data.hook) && isDef(i = i.init)) {\n                i(vnode);\n                data = vnode.data;\n            }\n        }\n        var children = vnode.children, sel = vnode.sel;\n        if (sel === '!') {\n            if (isUndef(vnode.text)) {\n                vnode.text = '';\n            }\n            vnode.elm = api.createComment(vnode.text);\n        }\n        else if (sel !== undefined) {\n            // Parse selector\n            var hashIdx = sel.indexOf('#');\n            var dotIdx = sel.indexOf('.', hashIdx);\n            var hash = hashIdx > 0 ? hashIdx : sel.length;\n            var dot = dotIdx > 0 ? dotIdx : sel.length;\n            var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n            var elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? api.createElementNS(i, tag)\n                : api.createElement(tag);\n            if (hash < dot)\n                elm.setAttribute('id', sel.slice(hash + 1, dot));\n            if (dotIdx > 0)\n                elm.setAttribute('class', sel.slice(dot + 1).replace(/\\./g, ' '));\n            for (i = 0; i < cbs.create.length; ++i)\n                cbs.create[i](emptyNode, vnode);\n            if (is.array(children)) {\n                for (i = 0; i < children.length; ++i) {\n                    var ch = children[i];\n                    if (ch != null) {\n                        api.appendChild(elm, createElm(ch, insertedVnodeQueue));\n                    }\n                }\n            }\n            else if (is.primitive(vnode.text)) {\n                api.appendChild(elm, api.createTextNode(vnode.text));\n            }\n            i = vnode.data.hook; // Reuse variable\n            if (isDef(i)) {\n                if (i.create)\n                    i.create(emptyNode, vnode);\n                if (i.insert)\n                    insertedVnodeQueue.push(vnode);\n            }\n        }\n        else {\n            vnode.elm = api.createTextNode(vnode.text);\n        }\n        return vnode.elm;\n    }\n    function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            var ch = vnodes[startIdx];\n            if (ch != null) {\n                api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);\n            }\n        }\n    }\n    function invokeDestroyHook(vnode) {\n        var i, j, data = vnode.data;\n        if (data !== undefined) {\n            if (isDef(i = data.hook) && isDef(i = i.destroy))\n                i(vnode);\n            for (i = 0; i < cbs.destroy.length; ++i)\n                cbs.destroy[i](vnode);\n            if (vnode.children !== undefined) {\n                for (j = 0; j < vnode.children.length; ++j) {\n                    i = vnode.children[j];\n                    if (i != null && typeof i !== \"string\") {\n                        invokeDestroyHook(i);\n                    }\n                }\n            }\n        }\n    }\n    function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            var i_1 = void 0, listeners = void 0, rm = void 0, ch = vnodes[startIdx];\n            if (ch != null) {\n                if (isDef(ch.sel)) {\n                    invokeDestroyHook(ch);\n                    listeners = cbs.remove.length + 1;\n                    rm = createRmCb(ch.elm, listeners);\n                    for (i_1 = 0; i_1 < cbs.remove.length; ++i_1)\n                        cbs.remove[i_1](ch, rm);\n                    if (isDef(i_1 = ch.data) && isDef(i_1 = i_1.hook) && isDef(i_1 = i_1.remove)) {\n                        i_1(ch, rm);\n                    }\n                    else {\n                        rm();\n                    }\n                }\n                else {\n                    api.removeChild(parentElm, ch.elm);\n                }\n            }\n        }\n    }\n    function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n        var oldStartIdx = 0, newStartIdx = 0;\n        var oldEndIdx = oldCh.length - 1;\n        var oldStartVnode = oldCh[0];\n        var oldEndVnode = oldCh[oldEndIdx];\n        var newEndIdx = newCh.length - 1;\n        var newStartVnode = newCh[0];\n        var newEndVnode = newCh[newEndIdx];\n        var oldKeyToIdx;\n        var idxInOld;\n        var elmToMove;\n        var before;\n        while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n            if (oldStartVnode == null) {\n                oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\n            }\n            else if (oldEndVnode == null) {\n                oldEndVnode = oldCh[--oldEndIdx];\n            }\n            else if (newStartVnode == null) {\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (newEndVnode == null) {\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newStartVnode)) {\n                patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n                oldStartVnode = oldCh[++oldStartIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (sameVnode(oldEndVnode, newEndVnode)) {\n                patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newEndVnode)) {\n                patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n                oldStartVnode = oldCh[++oldStartIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldEndVnode, newStartVnode)) {\n                patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else {\n                if (oldKeyToIdx === undefined) {\n                    oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n                }\n                idxInOld = oldKeyToIdx[newStartVnode.key];\n                if (isUndef(idxInOld)) {\n                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    newStartVnode = newCh[++newStartIdx];\n                }\n                else {\n                    elmToMove = oldCh[idxInOld];\n                    if (elmToMove.sel !== newStartVnode.sel) {\n                        api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    }\n                    else {\n                        patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n                        oldCh[idxInOld] = undefined;\n                        api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                    }\n                    newStartVnode = newCh[++newStartIdx];\n                }\n            }\n        }\n        if (oldStartIdx > oldEndIdx) {\n            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n        }\n        else if (newStartIdx > newEndIdx) {\n            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n        }\n    }\n    function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n        var i, hook;\n        if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {\n            i(oldVnode, vnode);\n        }\n        var elm = vnode.elm = oldVnode.elm;\n        var oldCh = oldVnode.children;\n        var ch = vnode.children;\n        if (oldVnode === vnode)\n            return;\n        if (vnode.data !== undefined) {\n            for (i = 0; i < cbs.update.length; ++i)\n                cbs.update[i](oldVnode, vnode);\n            i = vnode.data.hook;\n            if (isDef(i) && isDef(i = i.update))\n                i(oldVnode, vnode);\n        }\n        if (isUndef(vnode.text)) {\n            if (isDef(oldCh) && isDef(ch)) {\n                if (oldCh !== ch)\n                    updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n            }\n            else if (isDef(ch)) {\n                if (isDef(oldVnode.text))\n                    api.setTextContent(elm, '');\n                addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n            }\n            else if (isDef(oldCh)) {\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n            }\n            else if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n        }\n        else if (oldVnode.text !== vnode.text) {\n            api.setTextContent(elm, vnode.text);\n        }\n        if (isDef(hook) && isDef(i = hook.postpatch)) {\n            i(oldVnode, vnode);\n        }\n    }\n    return function patch(oldVnode, vnode) {\n        var i, elm, parent;\n        var insertedVnodeQueue = [];\n        for (i = 0; i < cbs.pre.length; ++i)\n            cbs.pre[i]();\n        if (!isVnode(oldVnode)) {\n            oldVnode = emptyNodeAt(oldVnode);\n        }\n        if (sameVnode(oldVnode, vnode)) {\n            patchVnode(oldVnode, vnode, insertedVnodeQueue);\n        }\n        else {\n            elm = oldVnode.elm;\n            parent = api.parentNode(elm);\n            createElm(vnode, insertedVnodeQueue);\n            if (parent !== null) {\n                api.insertBefore(parent, vnode.elm, api.nextSibling(elm));\n                removeVnodes(parent, [oldVnode], 0, 0);\n            }\n        }\n        for (i = 0; i < insertedVnodeQueue.length; ++i) {\n            insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n        }\n        for (i = 0; i < cbs.post.length; ++i)\n            cbs.post[i]();\n        return vnode;\n    };\n}\nexports.init = init;\n//# sourceMappingURL=snabbdom.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/snabbdom.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Slows down animations towards the begin and the end.\n *\n * @param x the value between 0 (start of animation) and 1 (end of\n *     animation) linearly interpolated in time.\n * @returns {number} the eased value between 0 and 1\n */\nfunction easeInOut(x) {\n    if (x < 0.5)\n        return x * x * 2;\n    else\n        return 1 - (1 - x) * (1 - x) * 2;\n}\nexports.easeInOut = easeInOut;\n//# sourceMappingURL=easing.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/animations/easing.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\nvar command_1 = require(\"./command\");\n/**\n * The implementation of the ICommandStack. Clients should not use this\n * class directly.\n *\n * The command stack holds the current model as the result of the current\n * promise. When a new command is executed/undone/redone, its execution is\n * chained using <code>Promise#then()</code> to the current Promise. This\n * way we can handle long running commands without blocking the current\n * thread.\n *\n * The command stack also does the special handling for special commands:\n *\n * System commands should be transparent to the user and as such be\n * automatically undone/redone with the next plain command. Additional care\n * must be taken that system commands that are executed after undo don't\n * break the correspondence between the topmost commands on the undo and\n * redo stacks.\n *\n * Hidden commands only tell the viewer to render a hidden model such that\n * its bounds can be extracted from the DOM and forwarded as separate actions.\n * Hidden commands should not leave any trace on the undo/redo/off stacks.\n *\n * Mergeable commands should be merged with their predecessor if possible,\n * such that e.g. multiple subsequent moves of the smae element can be undone\n * in one single step.\n */\nvar CommandStack = /** @class */ (function () {\n    function CommandStack(modelFactory, viewerProvider, logger, syncer, options) {\n        this.modelFactory = modelFactory;\n        this.viewerProvider = viewerProvider;\n        this.logger = logger;\n        this.syncer = syncer;\n        this.options = options;\n        this.undoStack = [];\n        this.redoStack = [];\n        /**\n         * System commands should be transparent to the user in undo/redo\n         * operations. When a system command is executed when the redo\n         * stack is not empty, it is pushed to offStack instead.\n         *\n         * On redo, all commands form this stack are undone such that the\n         * redo operation gets the exact same model as when it was executed\n         * first.\n         *\n         * On undo, all commands form this stack are undone as well as\n         * system ommands should be transparent to the user.\n         */\n        this.offStack = [];\n        this.currentPromise = Promise.resolve({\n            root: modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT),\n            hiddenRoot: undefined,\n            popupRoot: undefined,\n            rootChanged: false,\n            hiddenRootChanged: false,\n            popupChanged: false\n        });\n    }\n    Object.defineProperty(CommandStack.prototype, \"currentModel\", {\n        get: function () {\n            return this.currentPromise.then(function (state) { return state.root; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CommandStack.prototype.executeAll = function (commands) {\n        var _this = this;\n        commands.forEach(function (command) {\n            _this.logger.log(_this, 'Executing', command);\n            _this.handleCommand(command, command.execute, _this.mergeOrPush);\n        });\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.execute = function (command) {\n        this.logger.log(this, 'Executing', command);\n        this.handleCommand(command, command.execute, this.mergeOrPush);\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.undo = function () {\n        var _this = this;\n        this.undoOffStackSystemCommands();\n        this.undoPreceedingSystemCommands();\n        var command = this.undoStack.pop();\n        if (command !== undefined) {\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, function (c, context) {\n                _this.redoStack.push(c);\n            });\n        }\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.redo = function () {\n        var _this = this;\n        this.undoOffStackSystemCommands();\n        var command = this.redoStack.pop();\n        if (command !== undefined) {\n            this.logger.log(this, 'Redoing', command);\n            this.handleCommand(command, command.redo, function (c, context) {\n                _this.pushToUndoStack(c);\n            });\n        }\n        this.redoFollowingSystemCommands();\n        return this.thenUpdate();\n    };\n    /**\n     * Chains the current promise with another Promise that performs the\n     * given operation on the given command.\n     *\n     * @param beforeResolve a function that is called directly before\n     * resolving the Promise to return the new model. Usually puts the\n     * command on the appropriate stack.\n     */\n    CommandStack.prototype.handleCommand = function (command, operation, beforeResolve) {\n        var _this = this;\n        this.currentPromise = this.currentPromise.then(function (state) {\n            return new Promise(function (resolve, reject) {\n                var context = _this.createContext(state.root);\n                var newResult;\n                try {\n                    newResult = operation.call(command, context);\n                }\n                catch (error) {\n                    _this.logger.error(_this, \"Failed to execute command:\", error);\n                    newResult = state.root;\n                }\n                if (command instanceof command_1.HiddenCommand) {\n                    resolve(__assign({}, state, {\n                        hiddenRoot: newResult,\n                        hiddenRootChanged: true\n                    }));\n                }\n                else if (command instanceof command_1.PopupCommand) {\n                    resolve(__assign({}, state, {\n                        popupRoot: newResult,\n                        popupChanged: true\n                    }));\n                }\n                else if (newResult instanceof Promise) {\n                    newResult.then(function (newModel) {\n                        beforeResolve.call(_this, command, context);\n                        resolve(__assign({}, state, {\n                            root: newModel,\n                            rootChanged: true\n                        }));\n                    });\n                }\n                else {\n                    beforeResolve.call(_this, command, context);\n                    resolve(__assign({}, state, {\n                        root: newResult,\n                        rootChanged: true\n                    }));\n                }\n            });\n        });\n    };\n    CommandStack.prototype.pushToUndoStack = function (command) {\n        this.undoStack.push(command);\n        if (this.options.undoHistoryLimit >= 0 && this.undoStack.length > this.options.undoHistoryLimit)\n            this.undoStack.splice(0, this.undoStack.length - this.options.undoHistoryLimit);\n    };\n    /**\n     * Notifies the Viewer to render the new model and/or the new hidden model\n     * and returns a Promise for the new model.\n     */\n    CommandStack.prototype.thenUpdate = function () {\n        var _this = this;\n        this.currentPromise = this.currentPromise.then(function (state) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(state.hiddenRootChanged && state.hiddenRoot !== undefined)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.updateHidden(state.hiddenRoot)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (!state.rootChanged) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.update(state.root)];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        if (!(state.popupChanged && state.popupRoot !== undefined)) return [3 /*break*/, 6];\n                        return [4 /*yield*/, this.updatePopup(state.popupRoot)];\n                    case 5:\n                        _a.sent();\n                        _a.label = 6;\n                    case 6: return [2 /*return*/, {\n                            root: state.root,\n                            hiddenRoot: undefined,\n                            popupRoot: undefined,\n                            rootChanged: false,\n                            hiddenRootChanged: false,\n                            popupChanged: false\n                        }];\n                }\n            });\n        }); });\n        return this.currentModel;\n    };\n    /**\n     * Notify the <code>Viewer</code> that the model has changed.\n     */\n    CommandStack.prototype.update = function (model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.viewer === undefined)) return [3 /*break*/, 2];\n                        _a = this;\n                        return [4 /*yield*/, this.viewerProvider()];\n                    case 1:\n                        _a.viewer = _b.sent();\n                        _b.label = 2;\n                    case 2:\n                        this.viewer.update(model);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Notify the <code>Viewer</code> that the hidden model has changed.\n     */\n    CommandStack.prototype.updateHidden = function (model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.viewer === undefined)) return [3 /*break*/, 2];\n                        _a = this;\n                        return [4 /*yield*/, this.viewerProvider()];\n                    case 1:\n                        _a.viewer = _b.sent();\n                        _b.label = 2;\n                    case 2:\n                        this.viewer.updateHidden(model);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Notify the <code>Viewer</code> that the model has changed.\n     */\n    CommandStack.prototype.updatePopup = function (model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.viewer === undefined)) return [3 /*break*/, 2];\n                        _a = this;\n                        return [4 /*yield*/, this.viewerProvider()];\n                    case 1:\n                        _a.viewer = _b.sent();\n                        _b.label = 2;\n                    case 2:\n                        this.viewer.updatePopup(model);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Handling of commands after their execution.\n     *\n     * Hidden commands are not pushed to any stack.\n     *\n     * System commands are pushed to the <code>offStack</code> when the redo\n     * stack is not empty, allowing to undo the before a redo to keep the chain\n     * of commands consistent.\n     *\n     * Mergable commands are merged if possible.\n     */\n    CommandStack.prototype.mergeOrPush = function (command, context) {\n        var _this = this;\n        if (command instanceof command_1.HiddenCommand)\n            return;\n        if (command instanceof command_1.SystemCommand && this.redoStack.length > 0) {\n            this.offStack.push(command);\n        }\n        else {\n            this.offStack.forEach(function (c) { return _this.undoStack.push(c); });\n            this.offStack = [];\n            this.redoStack = [];\n            if (this.undoStack.length > 0) {\n                var lastCommand = this.undoStack[this.undoStack.length - 1];\n                if (lastCommand instanceof command_1.MergeableCommand && lastCommand.merge(command, context))\n                    return;\n            }\n            this.pushToUndoStack(command);\n        }\n    };\n    /**\n     * Reverts all system commands on the offStack.\n     */\n    CommandStack.prototype.undoOffStackSystemCommands = function () {\n        var command = this.offStack.pop();\n        while (command !== undefined) {\n            this.logger.log(this, 'Undoing off-stack', command);\n            this.handleCommand(command, command.undo, function () { });\n            command = this.offStack.pop();\n        }\n    };\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>undo()</code> to revert all system commands\n     * at the top of the undoStack.\n     */\n    CommandStack.prototype.undoPreceedingSystemCommands = function () {\n        var _this = this;\n        var command = this.undoStack[this.undoStack.length - 1];\n        while (command !== undefined && command instanceof command_1.SystemCommand) {\n            this.undoStack.pop();\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, function (c, context) {\n                _this.redoStack.push(c);\n            });\n            command = this.undoStack[this.undoStack.length - 1];\n        }\n    };\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>redo()</code> to re-execute all system commands\n     * at the top of the redoStack.\n     */\n    CommandStack.prototype.redoFollowingSystemCommands = function () {\n        var _this = this;\n        var command = this.redoStack[this.redoStack.length - 1];\n        while (command !== undefined && command instanceof command_1.SystemCommand) {\n            this.redoStack.pop();\n            this.logger.log(this, 'Redoing ', command);\n            this.handleCommand(command, command.redo, function (c, context) {\n                _this.pushToUndoStack(c);\n            });\n            command = this.redoStack[this.redoStack.length - 1];\n        }\n    };\n    /**\n     * Assembles the context object that is passed to the commands execution method.\n     */\n    CommandStack.prototype.createContext = function (currentModel) {\n        return {\n            root: currentModel,\n            modelChanged: this,\n            modelFactory: this.modelFactory,\n            duration: this.options.defaultDuration,\n            logger: this.logger,\n            syncer: this.syncer\n        };\n    };\n    CommandStack = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IModelFactory)),\n        __param(1, inversify_1.inject(types_1.TYPES.IViewerProvider)),\n        __param(2, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(3, inversify_1.inject(types_1.TYPES.AnimationFrameSyncer)),\n        __param(4, inversify_1.inject(types_1.TYPES.CommandStackOptions)),\n        __metadata(\"design:paramtypes\", [Object, Function, Object, animation_frame_syncer_1.AnimationFrameSyncer, Object])\n    ], CommandStack);\n    return CommandStack;\n}());\nexports.CommandStack = CommandStack;\n//# sourceMappingURL=command-stack.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/commands/command-stack.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom_1 = require(\"snabbdom\");\n/**\n * An view that avoids calculation and patching of VNodes unless some model properties have changed.\n * Based on snabbdom's thunks.\n */\nvar ThunkView = /** @class */ (function () {\n    function ThunkView() {\n    }\n    ThunkView.prototype.render = function (model, context) {\n        var _this = this;\n        return snabbdom_1.h(this.selector(model), {\n            key: model.id,\n            hook: {\n                init: this.init.bind(this),\n                prepatch: this.prepatch.bind(this)\n            },\n            fn: function () { return _this.renderAndDecorate(model, context); },\n            args: this.watchedArgs(model),\n            thunk: true\n        });\n    };\n    ThunkView.prototype.renderAndDecorate = function (model, context) {\n        var vnode = this.doRender(model, context);\n        context.decorate(vnode, model);\n        return vnode;\n    };\n    ThunkView.prototype.copyToThunk = function (vnode, thunk) {\n        thunk.elm = vnode.elm;\n        vnode.data.fn = thunk.data.fn;\n        vnode.data.args = thunk.data.args;\n        thunk.data = vnode.data;\n        thunk.children = vnode.children;\n        thunk.text = vnode.text;\n        thunk.elm = vnode.elm;\n    };\n    ThunkView.prototype.init = function (thunk) {\n        var cur = thunk.data;\n        var vnode = cur.fn.apply(undefined, cur.args);\n        this.copyToThunk(vnode, thunk);\n    };\n    ThunkView.prototype.prepatch = function (oldVnode, thunk) {\n        var old = oldVnode.data, cur = thunk.data;\n        if (!this.equals(old.args, cur.args))\n            this.copyToThunk(cur.fn.apply(undefined, cur.args), thunk);\n        else\n            this.copyToThunk(oldVnode, thunk);\n    };\n    ThunkView.prototype.equals = function (oldArg, newArg) {\n        if (Array.isArray(oldArg) && Array.isArray(newArg)) {\n            if (oldArg.length !== newArg.length)\n                return false;\n            for (var i = 0; i < newArg.length; ++i) {\n                if (!this.equals(oldArg[i], newArg[i]))\n                    return false;\n            }\n        }\n        else if (typeof oldArg === 'object' && typeof newArg === 'object') {\n            if (Object.keys(oldArg).length !== Object.keys(newArg).length)\n                return false;\n            for (var key in oldArg) {\n                if (key !== 'parent' && key !== 'root' && (!(key in newArg) || !this.equals(oldArg[key], newArg[key])))\n                    return false;\n            }\n        }\n        else if (oldArg !== newArg) {\n            return false;\n        }\n        return true;\n    };\n    return ThunkView;\n}());\nexports.ThunkView = ThunkView;\nfunction isThunk(vnode) {\n    return 'thunk' in vnode;\n}\nexports.isThunk = isThunk;\n//# sourceMappingURL=thunk-view.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/thunk-view.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar registry_1 = require(\"../../utils/registry\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar JSX = { createElement: snabbdom.svg };\n/**\n * Allows to look up the IView for a given SModelElement based on its type.\n */\nvar ViewRegistry = /** @class */ (function (_super) {\n    __extends(ViewRegistry, _super);\n    function ViewRegistry(registrations) {\n        var _this = _super.call(this) || this;\n        _this.registerDefaults();\n        registrations.forEach(function (registration) { return _this.register(registration.type, registration.constr); });\n        return _this;\n    }\n    ViewRegistry.prototype.registerDefaults = function () {\n        this.register(smodel_factory_1.EMPTY_ROOT.type, EmptyView);\n    };\n    ViewRegistry.prototype.missing = function (key) {\n        return new MissingView();\n    };\n    ViewRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ViewRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ViewRegistry);\n    return ViewRegistry;\n}(registry_1.ProviderRegistry));\nexports.ViewRegistry = ViewRegistry;\n/**\n * Utility function to register model and view constructors for a model element type.\n */\nfunction configureModelElement(context, type, modelConstr, viewConstr) {\n    context.bind(types_1.TYPES.SModelElementRegistration).toConstantValue({\n        type: type,\n        constr: modelConstr\n    });\n    context.bind(types_1.TYPES.ViewRegistration).toConstantValue({\n        type: type,\n        constr: viewConstr\n    });\n}\nexports.configureModelElement = configureModelElement;\n/**\n * This view is used when the model is the EMPTY_ROOT.\n */\nvar EmptyView = /** @class */ (function () {\n    function EmptyView() {\n    }\n    EmptyView.prototype.render = function (model, context) {\n        return JSX.createElement(\"svg\", { \"class-sprotty-empty\": true });\n    };\n    return EmptyView;\n}());\nexports.EmptyView = EmptyView;\n/**\n * This view is used when no view has been registered for a model element type.\n */\nvar MissingView = /** @class */ (function () {\n    function MissingView() {\n    }\n    MissingView.prototype.render = function (model, context) {\n        var position = model.position || geometry_1.ORIGIN_POINT;\n        return JSX.createElement(\"text\", { \"class-sprotty-missing\": true, x: position.x, y: position.y },\n            \"?\",\n            model.id,\n            \"?\");\n    };\n    return MissingView;\n}());\nexports.MissingView = MissingView;\n//# sourceMappingURL=view.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/view.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\n/**\n * Updating the view is rather expensive, and it doesn't make sense to calculate\n * more then one update per animation (rendering) frame. So this class batches\n * all incoming model changes and only renders the last one when the next animation\n * frame comes.\n */\nvar ViewerCache = /** @class */ (function () {\n    function ViewerCache(delegate, syncer) {\n        this.delegate = delegate;\n        this.syncer = syncer;\n    }\n    ViewerCache.prototype.isCacheEmpty = function () {\n        return this.cachedModelRoot === undefined && this.cachedHiddenModelRoot === undefined &&\n            this.cachedPopup === undefined;\n    };\n    ViewerCache.prototype.updatePopup = function (model) {\n        var isCacheEmpty = this.isCacheEmpty();\n        this.cachedPopup = model;\n        if (isCacheEmpty)\n            this.scheduleUpdate();\n    };\n    ViewerCache.prototype.update = function (model) {\n        var isCacheEmpty = this.isCacheEmpty();\n        this.cachedModelRoot = model;\n        if (isCacheEmpty)\n            this.scheduleUpdate();\n    };\n    ViewerCache.prototype.updateHidden = function (hiddenModel) {\n        var isCacheEmpty = this.isCacheEmpty();\n        this.cachedHiddenModelRoot = hiddenModel;\n        if (isCacheEmpty)\n            this.scheduleUpdate();\n    };\n    ViewerCache.prototype.scheduleUpdate = function () {\n        var _this = this;\n        this.syncer.onEndOfNextFrame(function () {\n            if (_this.cachedHiddenModelRoot) {\n                var nextHiddenModelRoot = _this.cachedHiddenModelRoot;\n                _this.delegate.updateHidden(nextHiddenModelRoot);\n                _this.cachedHiddenModelRoot = undefined;\n            }\n            if (_this.cachedModelRoot) {\n                var nextModelRoot = _this.cachedModelRoot;\n                _this.delegate.update(nextModelRoot);\n                _this.cachedModelRoot = undefined;\n            }\n            if (_this.cachedPopup) {\n                var nextModelRoot = _this.cachedPopup;\n                _this.delegate.updatePopup(nextModelRoot);\n                _this.cachedPopup = undefined;\n            }\n        });\n    };\n    ViewerCache = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IViewer)), __param(0, inversify_1.named('delegate')),\n        __param(1, inversify_1.inject(types_1.TYPES.AnimationFrameSyncer)),\n        __metadata(\"design:paramtypes\", [Object, animation_frame_syncer_1.AnimationFrameSyncer])\n    ], ViewerCache);\n    return ViewerCache;\n}());\nexports.ViewerCache = ViewerCache;\n//# sourceMappingURL=viewer-cache.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/viewer-cache.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../types\");\nexports.defaultViewerOptions = function () { return ({\n    baseDiv: 'sprotty',\n    baseClass: 'sprotty',\n    hiddenDiv: 'sprotty-hidden',\n    hiddenClass: 'sprotty-hidden',\n    popupDiv: 'sprotty-popup',\n    popupClass: 'sprotty-popup',\n    popupClosedClass: 'sprotty-popup-closed',\n    needsClientLayout: true,\n    needsServerLayout: false,\n    popupOpenDelay: 1000,\n    popupCloseDelay: 300\n}); };\n/**\n * Utility function to partially set viewer options. Default values (from `defaultViewerOptions`) are used for\n * options that are not specified.\n */\nfunction configureViewerOptions(context, options) {\n    var opt = __assign({}, exports.defaultViewerOptions(), options);\n    if (context.isBound(types_1.TYPES.ViewerOptions))\n        context.rebind(types_1.TYPES.ViewerOptions).toConstantValue(opt);\n    else\n        context.bind(types_1.TYPES.ViewerOptions).toConstantValue(opt);\n}\nexports.configureViewerOptions = configureViewerOptions;\n/**\n * Utility function to partially override the currently configured viewer options in a DI container.\n */\nfunction overrideViewerOptions(container, options) {\n    var opt = container.get(types_1.TYPES.ViewerOptions);\n    for (var p in options) {\n        if (options.hasOwnProperty(p))\n            opt[p] = options[p];\n    }\n    return opt;\n}\nexports.overrideViewerOptions = overrideViewerOptions;\n//# sourceMappingURL=viewer-options.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/viewer-options.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar snabbdom_1 = require(\"snabbdom\");\nvar props_1 = require(\"snabbdom/modules/props\");\nvar attributes_1 = require(\"snabbdom/modules/attributes\");\nvar style_1 = require(\"snabbdom/modules/style\");\nvar eventlisteners_1 = require(\"snabbdom/modules/eventlisteners\");\nvar class_1 = require(\"snabbdom/modules/class\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar initialize_canvas_1 = require(\"../features/initialize-canvas\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar thunk_view_1 = require(\"./thunk-view\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar JSX = { createElement: snabbdom.html }; // must be html here, as we're creating a div\nvar ModelRenderer = /** @class */ (function () {\n    function ModelRenderer(viewRegistry, decorators) {\n        this.viewRegistry = viewRegistry;\n        this.decorators = decorators;\n    }\n    ModelRenderer.prototype.decorate = function (vnode, element) {\n        if (thunk_view_1.isThunk(vnode))\n            return vnode;\n        return this.decorators.reduce(function (n, decorator) { return decorator.decorate(n, element); }, vnode);\n    };\n    ModelRenderer.prototype.renderElement = function (element, args) {\n        var vNode = this.viewRegistry.get(element.type, undefined).render(element, this, args);\n        return this.decorate(vNode, element);\n    };\n    ModelRenderer.prototype.renderChildren = function (element, args) {\n        var _this = this;\n        return element.children.map(function (child) { return _this.renderElement(child, args); });\n    };\n    ModelRenderer.prototype.postUpdate = function () {\n        this.decorators.forEach(function (decorator) { return decorator.postUpdate(); });\n    };\n    return ModelRenderer;\n}());\nexports.ModelRenderer = ModelRenderer;\n/**\n * The component that turns the model into an SVG DOM.\n * Uses a VDOM based on snabbdom.js for performance.\n */\nvar Viewer = /** @class */ (function () {\n    function Viewer(modelRendererFactory, decorators, hiddenDecorators, popupDecorators, options, logger, actiondispatcher) {\n        var _this = this;\n        this.decorators = decorators;\n        this.hiddenDecorators = hiddenDecorators;\n        this.popupDecorators = popupDecorators;\n        this.options = options;\n        this.logger = logger;\n        this.actiondispatcher = actiondispatcher;\n        this.onWindowResize = function (vdom) {\n            var baseDiv = document.getElementById(_this.options.baseDiv);\n            if (baseDiv !== null) {\n                var newBounds = _this.getBoundsInPage(baseDiv);\n                _this.actiondispatcher.dispatch(new initialize_canvas_1.InitializeCanvasBoundsAction(newBounds));\n            }\n        };\n        this.patcher = this.createPatcher();\n        this.renderer = modelRendererFactory(decorators);\n        this.hiddenRenderer = modelRendererFactory(hiddenDecorators);\n        this.popupRenderer = modelRendererFactory(popupDecorators);\n    }\n    Viewer.prototype.createModules = function () {\n        return [\n            props_1.propsModule,\n            attributes_1.attributesModule,\n            class_1.classModule,\n            style_1.styleModule,\n            eventlisteners_1.eventListenersModule\n        ];\n    };\n    Viewer.prototype.createPatcher = function () {\n        return snabbdom_1.init(this.createModules());\n    };\n    Viewer.prototype.getBoundsInPage = function (element) {\n        var bounds = element.getBoundingClientRect();\n        var scroll = typeof window !== 'undefined' ? { x: window.scrollX, y: window.scrollY } : geometry_1.ORIGIN_POINT;\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    Viewer.prototype.update = function (model) {\n        var _this = this;\n        this.logger.log(this, 'rendering', model);\n        var newVDOM = JSX.createElement(\"div\", { id: this.options.baseDiv }, this.renderer.renderElement(model));\n        if (this.lastVDOM !== undefined) {\n            var hadFocus = this.hasFocus();\n            vnode_utils_1.copyClassesFromVNode(this.lastVDOM, newVDOM);\n            this.lastVDOM = this.patcher.call(this, this.lastVDOM, newVDOM);\n            this.restoreFocus(hadFocus);\n        }\n        else if (typeof document !== 'undefined') {\n            var placeholder = document.getElementById(this.options.baseDiv);\n            if (placeholder !== null) {\n                if (typeof window !== 'undefined') {\n                    window.addEventListener('resize', function () {\n                        _this.onWindowResize(newVDOM);\n                    });\n                }\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n                vnode_utils_1.setClass(newVDOM, this.options.baseClass, true);\n                this.lastVDOM = this.patcher.call(this, placeholder, newVDOM);\n            }\n            else {\n                this.logger.error(this, 'element not in DOM:', this.options.baseDiv);\n            }\n        }\n        this.renderer.postUpdate();\n    };\n    Viewer.prototype.hasFocus = function () {\n        if (typeof document !== 'undefined' && document.activeElement && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            var lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                var lastElement = lastRootVNode.elm;\n                return document.activeElement === lastElement;\n            }\n        }\n        return false;\n    };\n    Viewer.prototype.restoreFocus = function (focus) {\n        if (focus && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            var lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                var lastElement = lastRootVNode.elm;\n                if (lastElement && typeof lastElement.focus === 'function')\n                    lastElement.focus();\n            }\n        }\n    };\n    Viewer.prototype.updateHidden = function (hiddenModel) {\n        this.logger.log(this, 'rendering hidden');\n        var newVDOM;\n        if (hiddenModel.type === smodel_factory_1.EMPTY_ROOT.type) {\n            newVDOM = JSX.createElement(\"div\", { id: this.options.hiddenDiv });\n        }\n        else {\n            var hiddenVNode = this.hiddenRenderer.renderElement(hiddenModel);\n            vnode_utils_1.setAttr(hiddenVNode, 'opacity', 0);\n            newVDOM = JSX.createElement(\"div\", { id: this.options.hiddenDiv }, hiddenVNode);\n        }\n        if (this.lastHiddenVDOM !== undefined) {\n            vnode_utils_1.copyClassesFromVNode(this.lastHiddenVDOM, newVDOM);\n            this.lastHiddenVDOM = this.patcher.call(this, this.lastHiddenVDOM, newVDOM);\n        }\n        else {\n            var placeholder = document.getElementById(this.options.hiddenDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement(\"div\");\n                document.body.appendChild(placeholder);\n            }\n            else {\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n            }\n            vnode_utils_1.setClass(newVDOM, this.options.baseClass, true);\n            vnode_utils_1.setClass(newVDOM, this.options.hiddenClass, true);\n            this.lastHiddenVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.hiddenRenderer.postUpdate();\n    };\n    Viewer.prototype.updatePopup = function (model) {\n        this.logger.log(this, 'rendering popup', model);\n        var popupClosed = model.type === smodel_factory_1.EMPTY_ROOT.type;\n        var newVDOM;\n        if (popupClosed) {\n            newVDOM = JSX.createElement(\"div\", { id: this.options.popupDiv });\n        }\n        else {\n            var position = model.canvasBounds;\n            var inlineStyle = {\n                top: position.y + 'px',\n                left: position.x + 'px'\n            };\n            newVDOM = JSX.createElement(\"div\", { id: this.options.popupDiv, style: inlineStyle }, this.popupRenderer.renderElement(model));\n        }\n        if (this.lastPopupVDOM !== undefined) {\n            vnode_utils_1.copyClassesFromVNode(this.lastPopupVDOM, newVDOM);\n            vnode_utils_1.setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, this.lastPopupVDOM, newVDOM);\n        }\n        else if (typeof document !== 'undefined') {\n            var placeholder = document.getElementById(this.options.popupDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement(\"div\");\n                document.body.appendChild(placeholder);\n            }\n            else {\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n            }\n            vnode_utils_1.setClass(newVDOM, this.options.popupClass, true);\n            vnode_utils_1.setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.popupRenderer.postUpdate();\n    };\n    Viewer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelRendererFactory)),\n        __param(1, inversify_1.multiInject(types_1.TYPES.IVNodeDecorator)), __param(1, inversify_1.optional()),\n        __param(2, inversify_1.multiInject(types_1.TYPES.HiddenVNodeDecorator)), __param(2, inversify_1.optional()),\n        __param(3, inversify_1.multiInject(types_1.TYPES.PopupVNodeDecorator)), __param(3, inversify_1.optional()),\n        __param(4, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(5, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(6, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __metadata(\"design:paramtypes\", [Function, Array, Array, Array, Object, Object, Object])\n    ], Viewer);\n    return Viewer;\n}());\nexports.Viewer = Viewer;\n//# sourceMappingURL=viewer.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/viewer.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar FocusFixDecorator = /** @class */ (function () {\n    function FocusFixDecorator() {\n    }\n    FocusFixDecorator_1 = FocusFixDecorator;\n    FocusFixDecorator.prototype.decorate = function (vnode, element) {\n        if (vnode.sel && vnode.sel.startsWith('svg'))\n            // allows to set focus in Firefox\n            vnode_utils_1.setAttr(vnode, 'tabindex', ++FocusFixDecorator_1.tabIndex);\n        return vnode;\n    };\n    FocusFixDecorator.prototype.postUpdate = function () {\n    };\n    FocusFixDecorator.tabIndex = 1000;\n    FocusFixDecorator = FocusFixDecorator_1 = __decorate([\n        inversify_1.injectable()\n    ], FocusFixDecorator);\n    return FocusFixDecorator;\n    var FocusFixDecorator_1;\n}());\nexports.FocusFixDecorator = FocusFixDecorator;\n//# sourceMappingURL=vnode-decorators.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/vnode-decorators.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\n/**\n * Layouts children of a container in horizontal (left->right) direction.\n */\nvar HBoxLayouter = /** @class */ (function (_super) {\n    __extends(HBoxLayouter, _super);\n    function HBoxLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HBoxLayouter.prototype.getChildrenSize = function (container, containerOptions, layouter) {\n        var maxWidth = 0;\n        var maxHeight = -1;\n        var isFirst = true;\n        container.children.forEach(function (child) {\n            var bounds = layouter.getBoundsData(child).bounds;\n            if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                if (isFirst)\n                    isFirst = false;\n                else\n                    maxWidth += containerOptions.hGap;\n                maxWidth += bounds.width;\n                maxHeight = Math.max(maxHeight, bounds.height);\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    HBoxLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: currentOffset.x + child.bounds.x - bounds.x,\n            y: containerOptions.paddingTop + child.bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x + bounds.width + containerOptions.hGap,\n            y: currentOffset.y\n        };\n    };\n    HBoxLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hGap: 1,\n            vAlign: 'center'\n        };\n    };\n    HBoxLayouter.prototype.spread = function (a, b) {\n        return __assign({}, a, b);\n    };\n    HBoxLayouter.KIND = 'hbox';\n    return HBoxLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.HBoxLayouter = HBoxLayouter;\n//# sourceMappingURL=hbox-layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/hbox-layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\nvar StackLayouter = /** @class */ (function (_super) {\n    __extends(StackLayouter, _super);\n    function StackLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StackLayouter.prototype.getChildrenSize = function (container, options, layouter) {\n        var maxWidth = -1;\n        var maxHeight = -1;\n        container.children.forEach(function (child) {\n            var bounds = layouter.getBoundsData(child).bounds;\n            if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                maxWidth = Math.max(maxWidth, bounds.width);\n                maxHeight = Math.max(maxHeight, bounds.height);\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    StackLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        var dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + child.bounds.x - bounds.x + dx,\n            y: containerOptions.paddingTop + child.bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return currentOffset;\n    };\n    StackLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hAlign: 'center',\n            vAlign: 'center'\n        };\n    };\n    StackLayouter.prototype.spread = function (a, b) {\n        return __assign({}, a, b);\n    };\n    StackLayouter.KIND = 'stack';\n    return StackLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.StackLayouter = StackLayouter;\n//# sourceMappingURL=stack-layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/stack-layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\n/**\n * Layouts children of a container in vertical (top->bottom) direction.\n */\nvar VBoxLayouter = /** @class */ (function (_super) {\n    __extends(VBoxLayouter, _super);\n    function VBoxLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VBoxLayouter.prototype.getChildrenSize = function (container, containerOptions, layouter) {\n        var maxWidth = -1;\n        var maxHeight = 0;\n        var isFirst = true;\n        container.children.forEach(function (child) {\n            var bounds = layouter.getBoundsData(child).bounds;\n            if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                maxHeight += bounds.height;\n                if (isFirst)\n                    isFirst = false;\n                else\n                    maxHeight += containerOptions.vGap;\n                maxWidth = Math.max(maxWidth, bounds.width);\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    VBoxLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + child.bounds.x - bounds.x + dx,\n            y: currentOffset.y + child.bounds.y - bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x,\n            y: currentOffset.y + bounds.height + containerOptions.vGap\n        };\n    };\n    VBoxLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            vGap: 1,\n            hAlign: 'center'\n        };\n    };\n    VBoxLayouter.prototype.spread = function (a, b) {\n        return __assign({}, a, b);\n    };\n    VBoxLayouter.KIND = 'vbox';\n    return VBoxLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.VBoxLayouter = VBoxLayouter;\n//# sourceMappingURL=vbox-layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/vbox-layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../../base/commands/command\");\nvar model_1 = require(\"../select/model\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_2 = require(\"./model\");\nvar svg_exporter_1 = require(\"./svg-exporter\");\nvar smodel_factory_1 = require(\"../../base/model/smodel-factory\");\nvar model_3 = require(\"../viewport/model\");\nvar model_4 = require(\"../hover/model\");\nvar types_1 = require(\"../../base/types\");\nvar ExportSvgKeyListener = /** @class */ (function (_super) {\n    __extends(ExportSvgKeyListener, _super);\n    function ExportSvgKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExportSvgKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyE', 'ctrlCmd', 'shift'))\n            return [new RequestExportSvgAction()];\n        else\n            return [];\n    };\n    ExportSvgKeyListener = __decorate([\n        inversify_1.injectable()\n    ], ExportSvgKeyListener);\n    return ExportSvgKeyListener;\n}(key_tool_1.KeyListener));\nexports.ExportSvgKeyListener = ExportSvgKeyListener;\nvar RequestExportSvgAction = /** @class */ (function () {\n    function RequestExportSvgAction() {\n        this.kind = ExportSvgCommand.KIND;\n    }\n    return RequestExportSvgAction;\n}());\nexports.RequestExportSvgAction = RequestExportSvgAction;\nvar ExportSvgCommand = /** @class */ (function (_super) {\n    __extends(ExportSvgCommand, _super);\n    function ExportSvgCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExportSvgCommand.prototype.execute = function (context) {\n        if (model_2.isExportable(context.root)) {\n            var root = context.modelFactory.createRoot(context.modelFactory.createSchema(context.root));\n            if (model_2.isExportable(root)) {\n                root.export = true;\n                if (model_3.isViewport(root)) {\n                    root.zoom = 1;\n                    root.scroll = {\n                        x: 0,\n                        y: 0\n                    };\n                }\n                root.index.all().forEach(function (element) {\n                    if (model_1.isSelectable(element) && element.selected)\n                        element.selected = false;\n                    if (model_4.isHoverable(element) && element.hoverFeedback)\n                        element.hoverFeedback = false;\n                });\n                return root;\n            }\n        }\n        return context.modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT);\n    };\n    ExportSvgCommand.KIND = 'requestExportSvg';\n    return ExportSvgCommand;\n}(command_1.HiddenCommand));\nexports.ExportSvgCommand = ExportSvgCommand;\nvar ExportSvgDecorator = /** @class */ (function () {\n    function ExportSvgDecorator(svgExporter) {\n        this.svgExporter = svgExporter;\n    }\n    ExportSvgDecorator.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot)\n            this.root = element;\n        return vnode;\n    };\n    ExportSvgDecorator.prototype.postUpdate = function () {\n        if (this.root && model_2.isExportable(this.root) && this.root.export)\n            this.svgExporter.export(this.root);\n    };\n    ExportSvgDecorator = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.SvgExporter)),\n        __metadata(\"design:paramtypes\", [svg_exporter_1.SvgExporter])\n    ], ExportSvgDecorator);\n    return ExportSvgDecorator;\n}());\nexports.ExportSvgDecorator = ExportSvgDecorator;\n//# sourceMappingURL=export.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/export/export.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.openFeature = Symbol('openFeature');\nfunction isOpenable(element) {\n    return element.hasFeature(exports.openFeature);\n}\nexports.isOpenable = isOpenable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/open/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar browser_1 = require(\"../../utils/browser\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar command_1 = require(\"../../base/commands/command\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar button_handler_1 = require(\"../button/button-handler\");\nvar model_1 = require(\"../button/model\");\nvar model_2 = require(\"../edit/model\");\nvar edit_routing_1 = require(\"../edit/edit-routing\");\nvar model_3 = require(\"./model\");\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The resulting\n * SelectCommand changes the `selected` state accordingly, so the elements can be rendered differently.\n * This action is also forwarded to the diagram server, if present, so it may react on the selection change.\n * Furthermore, the server can send such an action to the client in order to change the selection programmatically.\n */\nvar SelectAction = /** @class */ (function () {\n    function SelectAction(selectedElementsIDs, deselectedElementsIDs) {\n        if (selectedElementsIDs === void 0) { selectedElementsIDs = []; }\n        if (deselectedElementsIDs === void 0) { deselectedElementsIDs = []; }\n        this.selectedElementsIDs = selectedElementsIDs;\n        this.deselectedElementsIDs = deselectedElementsIDs;\n        this.kind = SelectCommand.KIND;\n    }\n    return SelectAction;\n}());\nexports.SelectAction = SelectAction;\n/**\n * Programmatic action for selecting or deselecting all elements.\n */\nvar SelectAllAction = /** @class */ (function () {\n    /**\n     * If `select` is true, all elements are selected, othewise they are deselected.\n     */\n    function SelectAllAction(select) {\n        if (select === void 0) { select = true; }\n        this.select = select;\n        this.kind = SelectAllCommand.KIND;\n    }\n    return SelectAllAction;\n}());\nexports.SelectAllAction = SelectAllAction;\nvar SelectCommand = /** @class */ (function (_super) {\n    __extends(SelectCommand, _super);\n    function SelectCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.selected = [];\n        _this.deselected = [];\n        return _this;\n    }\n    SelectCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        this.action.selectedElementsIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof smodel_1.SChildElement && model_3.isSelectable(element)) {\n                _this.selected.push({\n                    element: element,\n                    parent: element.parent,\n                    index: element.parent.children.indexOf(element)\n                });\n            }\n        });\n        this.action.deselectedElementsIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof smodel_1.SChildElement && model_3.isSelectable(element)) {\n                _this.deselected.push({\n                    element: element,\n                    parent: element.parent,\n                    index: element.parent.children.indexOf(element)\n                });\n            }\n        });\n        return this.redo(context);\n    };\n    SelectCommand.prototype.undo = function (context) {\n        for (var i = this.selected.length - 1; i >= 0; --i) {\n            var selection = this.selected[i];\n            var element = selection.element;\n            if (model_3.isSelectable(element))\n                element.selected = false;\n            selection.parent.move(element, selection.index);\n        }\n        this.deselected.reverse().forEach(function (selection) {\n            if (model_3.isSelectable(selection.element))\n                selection.element.selected = true;\n        });\n        return context.root;\n    };\n    SelectCommand.prototype.redo = function (context) {\n        for (var i = 0; i < this.selected.length; ++i) {\n            var selection = this.selected[i];\n            var element = selection.element;\n            var childrenLength = selection.parent.children.length;\n            selection.parent.move(element, childrenLength - 1);\n        }\n        this.deselected.forEach(function (selection) {\n            if (model_3.isSelectable(selection.element))\n                selection.element.selected = false;\n        });\n        this.selected.forEach(function (selection) {\n            if (model_3.isSelectable(selection.element))\n                selection.element.selected = true;\n        });\n        return context.root;\n    };\n    SelectCommand.KIND = 'elementSelected';\n    return SelectCommand;\n}(command_1.Command));\nexports.SelectCommand = SelectCommand;\nvar SelectAllCommand = /** @class */ (function (_super) {\n    __extends(SelectAllCommand, _super);\n    function SelectAllCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.previousSelection = {};\n        return _this;\n    }\n    SelectAllCommand.prototype.execute = function (context) {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    };\n    SelectAllCommand.prototype.selectAll = function (element, newState) {\n        if (model_3.isSelectable(element)) {\n            this.previousSelection[element.id] = element.selected;\n            element.selected = newState;\n        }\n        for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            this.selectAll(child, newState);\n        }\n    };\n    SelectAllCommand.prototype.undo = function (context) {\n        var index = context.root.index;\n        for (var id in this.previousSelection) {\n            if (this.previousSelection.hasOwnProperty(id)) {\n                var element = index.getById(id);\n                if (element !== undefined && model_3.isSelectable(element))\n                    element.selected = this.previousSelection[id];\n            }\n        }\n        return context.root;\n    };\n    SelectAllCommand.prototype.redo = function (context) {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    };\n    SelectAllCommand.KIND = 'allSelected';\n    return SelectAllCommand;\n}(command_1.Command));\nexports.SelectAllCommand = SelectAllCommand;\nvar SelectMouseListener = /** @class */ (function (_super) {\n    __extends(SelectMouseListener, _super);\n    function SelectMouseListener(buttonHandlerRegistry) {\n        var _this = _super.call(this) || this;\n        _this.buttonHandlerRegistry = buttonHandlerRegistry;\n        _this.wasSelected = false;\n        _this.hasDragged = false;\n        return _this;\n    }\n    SelectMouseListener.prototype.mouseDown = function (target, event) {\n        var result = [];\n        if (event.button === 0) {\n            if (this.buttonHandlerRegistry !== undefined && target instanceof model_1.SButton && target.enabled) {\n                var buttonHandler = this.buttonHandlerRegistry.get(target.type);\n                if (buttonHandler !== undefined)\n                    return buttonHandler.buttonPressed(target);\n            }\n            var selectableTarget_1 = smodel_utils_1.findParentByFeature(target, model_3.isSelectable);\n            if (selectableTarget_1 !== undefined || target instanceof smodel_1.SModelRoot) {\n                this.hasDragged = false;\n                var deselect = [];\n                // multi-selection?\n                if (!browser_1.isCtrlOrCmd(event)) {\n                    deselect = iterable_1.toArray(target.root.index.all()\n                        .filter(function (element) { return model_3.isSelectable(element) && element.selected\n                        && !(selectableTarget_1 instanceof model_2.SRoutingHandle && element === selectableTarget_1.parent); }));\n                }\n                if (selectableTarget_1 !== undefined) {\n                    if (!selectableTarget_1.selected) {\n                        this.wasSelected = false;\n                        result.push(new SelectAction([selectableTarget_1.id], deselect.map(function (e) { return e.id; })));\n                        var routableDeselect = deselect.filter(function (e) { return model_2.isRoutable(e); }).map(function (e) { return e.id; });\n                        if (model_2.isRoutable(selectableTarget_1))\n                            result.push(new edit_routing_1.SwitchEditModeAction([selectableTarget_1.id], routableDeselect));\n                        else if (routableDeselect.length > 0)\n                            result.push(new edit_routing_1.SwitchEditModeAction([], routableDeselect));\n                    }\n                    else if (browser_1.isCtrlOrCmd(event)) {\n                        this.wasSelected = false;\n                        result.push(new SelectAction([], [selectableTarget_1.id]));\n                        if (model_2.isRoutable(selectableTarget_1))\n                            result.push(new edit_routing_1.SwitchEditModeAction([], [selectableTarget_1.id]));\n                    }\n                    else {\n                        this.wasSelected = true;\n                    }\n                }\n                else {\n                    result.push(new SelectAction([], deselect.map(function (e) { return e.id; })));\n                    var routableDeselect = deselect.filter(function (e) { return model_2.isRoutable(e); }).map(function (e) { return e.id; });\n                    if (routableDeselect.length > 0)\n                        result.push(new edit_routing_1.SwitchEditModeAction([], routableDeselect));\n                }\n            }\n        }\n        return result;\n    };\n    SelectMouseListener.prototype.mouseMove = function (target, event) {\n        this.hasDragged = true;\n        return [];\n    };\n    SelectMouseListener.prototype.mouseUp = function (target, event) {\n        if (event.button === 0) {\n            if (!this.hasDragged) {\n                var selectableTarget = smodel_utils_1.findParentByFeature(target, model_3.isSelectable);\n                if (selectableTarget !== undefined && this.wasSelected) {\n                    return [new SelectAction([selectableTarget.id], [])];\n                }\n            }\n        }\n        this.hasDragged = false;\n        return [];\n    };\n    SelectMouseListener.prototype.decorate = function (vnode, element) {\n        var selectableTarget = smodel_utils_1.findParentByFeature(element, model_3.isSelectable);\n        if (selectableTarget !== undefined)\n            vnode_utils_1.setClass(vnode, 'selected', selectableTarget.selected);\n        return vnode;\n    };\n    SelectMouseListener = __decorate([\n        __param(0, inversify_1.inject(button_handler_1.ButtonHandlerRegistry)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [button_handler_1.ButtonHandlerRegistry])\n    ], SelectMouseListener);\n    return SelectMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.SelectMouseListener = SelectMouseListener;\nvar SelectKeyboardListener = /** @class */ (function (_super) {\n    __extends(SelectKeyboardListener, _super);\n    function SelectKeyboardListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SelectKeyboardListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyA', 'ctrlCmd')) {\n            var selected = iterable_1.toArray(element.root.index.all().filter(function (e) { return model_3.isSelectable(e); }).map(function (e) { return e.id; }));\n            return [new SelectAction(selected, [])];\n        }\n        return [];\n    };\n    return SelectKeyboardListener;\n}(key_tool_1.KeyListener));\nexports.SelectKeyboardListener = SelectKeyboardListener;\n//# sourceMappingURL=select.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/select/select.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar viewport_1 = require(\"./viewport\");\nvar model_1 = require(\"./model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../edit/model\");\nfunction isScrollable(element) {\n    return 'scroll' in element;\n}\nexports.isScrollable = isScrollable;\nvar ScrollMouseListener = /** @class */ (function (_super) {\n    __extends(ScrollMouseListener, _super);\n    function ScrollMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ScrollMouseListener.prototype.mouseDown = function (target, event) {\n        var moveable = smodel_utils_1.findParentByFeature(target, model_2.isMoveable);\n        if (moveable === undefined && !(target instanceof model_3.SRoutingHandle)) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport)\n                this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n            else\n                this.lastScrollPosition = undefined;\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseMove = function (target, event) {\n        if (event.buttons === 0)\n            this.mouseUp(target, event);\n        else if (this.lastScrollPosition) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport) {\n                var dx = (event.pageX - this.lastScrollPosition.x) / viewport.zoom;\n                var dy = (event.pageY - this.lastScrollPosition.y) / viewport.zoom;\n                var newViewport = {\n                    scroll: {\n                        x: viewport.scroll.x - dx,\n                        y: viewport.scroll.y - dy,\n                    },\n                    zoom: viewport.zoom\n                };\n                this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n                return [new viewport_1.ViewportAction(viewport.id, newViewport, false)];\n            }\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseEnter = function (target, event) {\n        if (target instanceof smodel_1.SModelRoot && event.buttons === 0)\n            this.mouseUp(target, event);\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseUp = function (target, event) {\n        this.lastScrollPosition = undefined;\n        return [];\n    };\n    return ScrollMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ScrollMouseListener = ScrollMouseListener;\n//# sourceMappingURL=scroll.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/scroll.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar viewport_1 = require(\"./viewport\");\nvar model_1 = require(\"./model\");\nfunction isZoomable(element) {\n    return 'zoom' in element;\n}\nexports.isZoomable = isZoomable;\nvar ZoomMouseListener = /** @class */ (function (_super) {\n    __extends(ZoomMouseListener, _super);\n    function ZoomMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZoomMouseListener.prototype.wheel = function (target, event) {\n        var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n        if (viewport) {\n            var newZoom = Math.exp(-event.deltaY * 0.005);\n            var factor = 1. / (newZoom * viewport.zoom) - 1. / viewport.zoom;\n            var newViewport = {\n                scroll: {\n                    x: -(factor * event.offsetX - viewport.scroll.x),\n                    y: -(factor * event.offsetY - viewport.scroll.y)\n                },\n                zoom: viewport.zoom * newZoom\n            };\n            return [new viewport_1.ViewportAction(viewport.id, newViewport, false)];\n        }\n        return [];\n    };\n    return ZoomMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ZoomMouseListener = ZoomMouseListener;\n//# sourceMappingURL=zoom.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/zoom.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar smodel_storage_1 = require(\"../base/model/smodel-storage\");\nvar action_handler_1 = require(\"../base/actions/action-handler\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar update_model_1 = require(\"../features/update/update-model\");\nvar bounds_manipulation_1 = require(\"../features/bounds/bounds-manipulation\");\nvar hover_1 = require(\"../features/hover/hover\");\nvar model_source_1 = require(\"./model-source\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar file_saver_1 = require(\"file-saver\");\nvar expand_1 = require(\"../features/expand/expand\");\nvar open_1 = require(\"../features/open/open\");\nfunction isActionMessage(object) {\n    return object !== undefined && object.hasOwnProperty('clientId') && object.hasOwnProperty('action');\n}\nexports.isActionMessage = isActionMessage;\n/**\n * Sent by the external server when to signal a state change.\n */\nvar ServerStatusAction = /** @class */ (function () {\n    function ServerStatusAction() {\n        this.kind = ServerStatusAction.KIND;\n    }\n    ServerStatusAction.KIND = 'serverStatus';\n    return ServerStatusAction;\n}());\nexports.ServerStatusAction = ServerStatusAction;\nvar receivedFromServerProperty = '__receivedFromServer';\n/**\n * A ModelSource that communicates with an external model provider, e.g.\n * a model editor.\n *\n * This class defines which actions are sent to and received from the\n * external model source.\n */\nvar DiagramServer = /** @class */ (function (_super) {\n    __extends(DiagramServer, _super);\n    function DiagramServer(actionDispatcher, actionHandlerRegistry, viewerOptions, storage, logger) {\n        var _this = _super.call(this, actionDispatcher, actionHandlerRegistry, viewerOptions) || this;\n        _this.storage = storage;\n        _this.logger = logger;\n        _this.currentRoot = {\n            type: 'NONE',\n            id: 'ROOT'\n        };\n        _this.clientId = _this.viewerOptions.baseDiv;\n        return _this;\n    }\n    DiagramServer.prototype.initialize = function (registry) {\n        _super.prototype.initialize.call(this, registry);\n        // Register model manipulation commands\n        registry.registerCommand(update_model_1.UpdateModelCommand);\n        // Register this model source\n        registry.register(bounds_manipulation_1.ComputedBoundsAction.KIND, this);\n        registry.register(bounds_manipulation_1.RequestBoundsCommand.KIND, this);\n        registry.register(hover_1.RequestPopupModelAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAllAction.KIND, this);\n        registry.register(open_1.OpenAction.KIND, this);\n        registry.register(ServerStatusAction.KIND, this);\n    };\n    DiagramServer.prototype.handle = function (action) {\n        var forwardToServer = this.handleLocally(action);\n        if (forwardToServer) {\n            var message = {\n                clientId: this.clientId,\n                action: action\n            };\n            this.logger.log(this, 'sending', message);\n            this.sendMessage(message);\n        }\n    };\n    DiagramServer.prototype.messageReceived = function (data) {\n        var _this = this;\n        var object = typeof (data) === 'string' ? JSON.parse(data) : data;\n        if (isActionMessage(object) && object.action) {\n            if (!object.clientId || object.clientId === this.clientId) {\n                object.action[receivedFromServerProperty] = true;\n                this.logger.log(this, 'receiving', object);\n                this.actionDispatcher.dispatch(object.action).then(function () {\n                    _this.storeNewModel(object.action);\n                });\n            }\n        }\n        else {\n            this.logger.error(this, 'received data is not an action message', object);\n        }\n    };\n    /**\n     * Check whether the given action should be handled locally. Returns true if the action should\n     * still be sent to the server, and false if it's only handled locally.\n     */\n    DiagramServer.prototype.handleLocally = function (action) {\n        this.storeNewModel(action);\n        switch (action.kind) {\n            case bounds_manipulation_1.ComputedBoundsAction.KIND:\n                return this.handleComputedBounds(action);\n            case bounds_manipulation_1.RequestBoundsCommand.KIND:\n                return false;\n            case svg_exporter_1.ExportSvgAction.KIND:\n                return this.handleExportSvgAction(action);\n            case ServerStatusAction.KIND:\n                return this.handleServerStateAction(action);\n        }\n        return !action[receivedFromServerProperty];\n    };\n    /**\n     * Put the new model contained in the given action into the model storage, if there is any.\n     */\n    DiagramServer.prototype.storeNewModel = function (action) {\n        if (action.kind === set_model_1.SetModelCommand.KIND\n            || action.kind === update_model_1.UpdateModelCommand.KIND\n            || action.kind === bounds_manipulation_1.RequestBoundsCommand.KIND) {\n            var newRoot = action.newRoot;\n            if (newRoot) {\n                this.currentRoot = newRoot;\n                if (action.kind === set_model_1.SetModelCommand.KIND || action.kind === update_model_1.UpdateModelCommand.KIND) {\n                    this.lastSubmittedModelType = newRoot.type;\n                }\n                this.storage.store(this.currentRoot);\n            }\n        }\n    };\n    /**\n     * If the server requires to compute a layout, the computed bounds are forwarded. Otherwise they\n     * are applied to the current model locally and a model update is triggered.\n     */\n    DiagramServer.prototype.handleComputedBounds = function (action) {\n        if (this.viewerOptions.needsServerLayout) {\n            return true;\n        }\n        else {\n            var index = new smodel_1.SModelIndex();\n            var root = this.currentRoot;\n            index.add(root);\n            for (var _i = 0, _a = action.bounds; _i < _a.length; _i++) {\n                var b = _a[_i];\n                var element = index.getById(b.elementId);\n                if (element !== undefined)\n                    this.applyBounds(element, b.newBounds);\n            }\n            if (action.alignments !== undefined) {\n                for (var _b = 0, _c = action.alignments; _b < _c.length; _b++) {\n                    var a = _c[_b];\n                    var element = index.getById(a.elementId);\n                    if (element !== undefined)\n                        this.applyAlignment(element, a.newAlignment);\n                }\n            }\n            if (root.type === this.lastSubmittedModelType) {\n                this.actionDispatcher.dispatch(new update_model_1.UpdateModelAction(root));\n            }\n            else {\n                this.actionDispatcher.dispatch(new set_model_1.SetModelAction(root));\n            }\n            this.lastSubmittedModelType = root.type;\n            return false;\n        }\n    };\n    DiagramServer.prototype.applyBounds = function (element, newBounds) {\n        var e = element;\n        e.position = { x: newBounds.x, y: newBounds.y };\n        e.size = { width: newBounds.width, height: newBounds.height };\n    };\n    DiagramServer.prototype.applyAlignment = function (element, newAlignment) {\n        var e = element;\n        e.alignment = { x: newAlignment.x, y: newAlignment.y };\n    };\n    DiagramServer.prototype.handleExportSvgAction = function (action) {\n        var blob = new Blob([action.svg], { type: \"text/plain;charset=utf-8\" });\n        file_saver_1.saveAs(blob, \"diagram.svg\");\n        return false;\n    };\n    DiagramServer.prototype.handleServerStateAction = function (action) {\n        return false;\n    };\n    DiagramServer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.ActionHandlerRegistry)),\n        __param(2, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(3, inversify_1.inject(types_1.TYPES.SModelStorage)),\n        __param(4, inversify_1.inject(types_1.TYPES.ILogger)),\n        __metadata(\"design:paramtypes\", [Object, action_handler_1.ActionHandlerRegistry, Object, smodel_storage_1.SModelStorage, Object])\n    ], DiagramServer);\n    return DiagramServer;\n}(model_source_1.ModelSource));\nexports.DiagramServer = DiagramServer;\n//# sourceMappingURL=diagram-server.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/diagram-server.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ExpansionState = /** @class */ (function () {\n    function ExpansionState(root) {\n        this.expandedElementIds = [];\n        this.initialize(root);\n    }\n    ExpansionState.prototype.initialize = function (element) {\n        var _this = this;\n        if (element.expanded)\n            this.expandedElementIds.push(element.id);\n        if (element.children !== undefined)\n            element.children.forEach(function (child) { return _this.initialize(child); });\n    };\n    ExpansionState.prototype.apply = function (action) {\n        for (var _i = 0, _a = action.collapseIds; _i < _a.length; _i++) {\n            var collapsed = _a[_i];\n            var index = this.expandedElementIds.indexOf(collapsed);\n            if (index !== -1)\n                this.expandedElementIds.splice(index, 1);\n        }\n        for (var _b = 0, _c = action.expandIds; _b < _c.length; _b++) {\n            var expanded = _c[_b];\n            this.expandedElementIds.push(expanded);\n        }\n    };\n    ExpansionState.prototype.collapseAll = function () {\n        this.expandedElementIds = [];\n    };\n    return ExpansionState;\n}());\nexports.ExpansionState = ExpansionState;\n//# sourceMappingURL=diagram-state.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/diagram-state.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"./geometry\");\nfunction computeCircleAnchor(position, radius, refPoint, offset) {\n    if (offset === void 0) { offset = 0; }\n    var cx = position.x + radius;\n    var cy = position.y + radius;\n    var dx = cx - refPoint.x;\n    var dy = cy - refPoint.y;\n    var distance = Math.sqrt(dx * dx + dy * dy);\n    var normX = (dx / distance) || 0;\n    var normY = (dy / distance) || 0;\n    return {\n        x: cx - normX * (radius + offset),\n        y: cy - normY * (radius + offset)\n    };\n}\nexports.computeCircleAnchor = computeCircleAnchor;\nfunction getXIntersection(yIntersection, centerPoint, point) {\n    var t = (yIntersection - centerPoint.y) / (point.y - centerPoint.y);\n    return (point.x - centerPoint.x) * t + centerPoint.x;\n}\nfunction getYIntersection(xIntersection, centerPoint, point) {\n    var t = (xIntersection - centerPoint.x) / (point.x - centerPoint.x);\n    return (point.y - centerPoint.y) * t + centerPoint.y;\n}\nvar NearestPointFinder = /** @class */ (function () {\n    function NearestPointFinder(centerPoint, refPoint) {\n        this.centerPoint = centerPoint;\n        this.refPoint = refPoint;\n        this.currentDist = -1;\n    }\n    NearestPointFinder.prototype.addCandidate = function (x, y) {\n        var dx = this.refPoint.x - x;\n        var dy = this.refPoint.y - y;\n        var dist = dx * dx + dy * dy;\n        if (this.currentDist < 0 || dist < this.currentDist) {\n            this.currentBest = {\n                x: x,\n                y: y\n            };\n            this.currentDist = dist;\n        }\n    };\n    Object.defineProperty(NearestPointFinder.prototype, \"best\", {\n        get: function () {\n            if (this.currentBest === undefined)\n                return this.centerPoint;\n            else\n                return this.currentBest;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return NearestPointFinder;\n}());\nfunction computeRectangleAnchor(bounds, refPoint, offset) {\n    var c = geometry_1.center(bounds);\n    var finder = new NearestPointFinder(c, refPoint);\n    if (!geometry_1.almostEquals(c.y, refPoint.y)) {\n        var xTop = getXIntersection(bounds.y, c, refPoint);\n        if (xTop >= bounds.x && xTop <= bounds.x + bounds.width)\n            finder.addCandidate(xTop, bounds.y - offset);\n        var xBottom = getXIntersection(bounds.y + bounds.height, c, refPoint);\n        if (xBottom >= bounds.x && xBottom <= bounds.x + bounds.width)\n            finder.addCandidate(xBottom, bounds.y + bounds.height + offset);\n    }\n    if (!geometry_1.almostEquals(c.x, refPoint.x)) {\n        var yLeft = getYIntersection(bounds.x, c, refPoint);\n        if (yLeft >= bounds.y && yLeft <= bounds.y + bounds.height)\n            finder.addCandidate(bounds.x - offset, yLeft);\n        var yRight = getYIntersection(bounds.x + bounds.width, c, refPoint);\n        if (yRight >= bounds.y && yRight <= bounds.y + bounds.height)\n            finder.addCandidate(bounds.x + bounds.width + offset, yRight);\n    }\n    return finder.best;\n}\nexports.computeRectangleAnchor = computeRectangleAnchor;\n//# sourceMappingURL=anchors.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/anchors.js","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 99\n// module chunks = 0 1 2","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/safe-buffer/index.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/events/events.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : processNextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  processNextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    processNextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = _isUint8Array(chunk) && !state.objectMode;\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    processNextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    processNextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequestCount = 0;\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      processNextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) processNextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/lib/_stream_writable.js","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/readable-browser.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar lib_1 = require(\"sprotty/lib\");\nvar views_1 = require(\"./views\");\nvar sprotty_model_1 = require(\"./sprotty-model\");\nvar FilteringSvgExporter = /** @class */ (function (_super) {\n    __extends(FilteringSvgExporter, _super);\n    function FilteringSvgExporter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FilteringSvgExporter.prototype.isExported = function (styleSheet) {\n        return styleSheet.href !== null && (styleSheet.href.endsWith('diagram.css') || styleSheet.href.endsWith('sprotty.css'));\n    };\n    return FilteringSvgExporter;\n}(lib_1.SvgExporter));\nexports.default = (function () {\n    var elkGraphModule = new inversify_1.ContainerModule(function (bind, unbind, isBound, rebind) {\n        rebind(lib_1.TYPES.ILogger).to(lib_1.ConsoleLogger).inSingletonScope();\n        rebind(lib_1.TYPES.LogLevel).toConstantValue(lib_1.LogLevel.warn);\n        rebind(lib_1.TYPES.IModelFactory).to(lib_1.SGraphFactory).inSingletonScope();\n        rebind(lib_1.TYPES.SvgExporter).to(FilteringSvgExporter).inSingletonScope();\n        var context = { bind: bind, unbind: unbind, isBound: isBound, rebind: rebind };\n        lib_1.configureModelElement(context, 'graph', lib_1.SGraph, lib_1.SGraphView);\n        lib_1.configureModelElement(context, 'node', sprotty_model_1.ElkNode, views_1.ElkNodeView);\n        lib_1.configureModelElement(context, 'port', sprotty_model_1.ElkPort, views_1.ElkPortView);\n        lib_1.configureModelElement(context, 'edge', sprotty_model_1.ElkEdge, views_1.ElkEdgeView);\n        lib_1.configureModelElement(context, 'label', lib_1.SLabel, views_1.ElkLabelView);\n        lib_1.configureModelElement(context, 'junction', sprotty_model_1.ElkJunction, views_1.JunctionView);\n        lib_1.configureViewerOptions(context, {\n            needsClientLayout: false\n        });\n    });\n    var container = new inversify_1.Container();\n    container.load(lib_1.defaultModule, lib_1.selectModule, lib_1.boundsModule, lib_1.moveModule, lib_1.fadeModule, lib_1.hoverModule, lib_1.viewportModule, lib_1.exportModule, lib_1.edgeEditModule, elkGraphModule);\n    return container;\n});\n//# sourceMappingURL=sprotty-config.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/sprotty-config.js","\"use strict\";\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getParameters() {\n    var search = window.location.search.substring(1);\n    var result = {};\n    while (search.length > 0) {\n        var nextParamIndex = search.indexOf('&');\n        var param = void 0;\n        if (nextParamIndex < 0) {\n            param = search;\n            search = '';\n        }\n        else {\n            param = search.substring(0, nextParamIndex);\n            search = search.substring(nextParamIndex + 1);\n        }\n        var valueIndex = param.indexOf('=');\n        if (valueIndex > 0 && valueIndex < param.length - 1) {\n            result[param.substring(0, valueIndex)] = param.substring(valueIndex + 1);\n        }\n    }\n    return result;\n}\nexports.getParameters = getParameters;\nfunction setupModelLink(editor, getParameters) {\n    var contentChangeTimeout;\n    var listener = function (event) {\n        if (contentChangeTimeout !== undefined) {\n            window.clearTimeout(contentChangeTimeout);\n        }\n        contentChangeTimeout = window.setTimeout(function () {\n            var anchor = document.getElementById('model-link');\n            if (anchor !== null) {\n                var parameters = getParameters(event);\n                var newHref = assembleHref(parameters);\n                anchor.setAttribute('href', newHref);\n            }\n        }, 400);\n    };\n    editor.onDidChangeModelContent(listener);\n    listener({});\n}\nexports.setupModelLink = setupModelLink;\nfunction assembleHref(parameters) {\n    var newHref = window.location.href;\n    var queryIndex = newHref.indexOf('?');\n    if (queryIndex > 0)\n        newHref = newHref.substring(0, queryIndex);\n    newHref += combineParameters(parameters);\n    return newHref;\n}\nexports.assembleHref = assembleHref;\nfunction combineParameters(parameters) {\n    var result = '';\n    var i = 0;\n    for (var param in parameters) {\n        result += \"\" + (i === 0 ? '?' : '&') + param + \"=\" + parameters[param];\n        i++;\n    }\n    return result;\n}\nexports.combineParameters = combineParameters;\n//# sourceMappingURL=url-parameters.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/url-parameters.js","/*! *****************************************************************************\r\nCopyright (C) Microsoft. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\nvar Reflect;\r\n(function (Reflect) {\r\n    \"use strict\";\r\n    var hasOwn = Object.prototype.hasOwnProperty;\r\n    // feature test for Symbol support\r\n    var supportsSymbol = typeof Symbol === \"function\";\r\n    var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\r\n    var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\r\n    var HashMap;\r\n    (function (HashMap) {\r\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\r\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\r\n        var downLevel = !supportsCreate && !supportsProto;\r\n        // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\r\n        HashMap.create = supportsCreate\r\n            ? function () { return MakeDictionary(Object.create(null)); }\r\n            : supportsProto\r\n                ? function () { return MakeDictionary({ __proto__: null }); }\r\n                : function () { return MakeDictionary({}); };\r\n        HashMap.has = downLevel\r\n            ? function (map, key) { return hasOwn.call(map, key); }\r\n            : function (map, key) { return key in map; };\r\n        HashMap.get = downLevel\r\n            ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\r\n            : function (map, key) { return map[key]; };\r\n    })(HashMap || (HashMap = {}));\r\n    // Load global or shim versions of Map, Set, and WeakMap\r\n    var functionPrototype = Object.getPrototypeOf(Function);\r\n    var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\r\n    var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\r\n    var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\r\n    var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\r\n    // [[Metadata]] internal slot\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\r\n    var Metadata = new _WeakMap();\r\n    /**\r\n      * Applies a set of decorators to a property of a target object.\r\n      * @param decorators An array of decorators.\r\n      * @param target The target object.\r\n      * @param propertyKey (Optional) The property key to decorate.\r\n      * @param attributes (Optional) The property descriptor for the target key.\r\n      * @remarks Decorators are applied in reverse order.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     Example = Reflect.decorate(decoratorsArray, Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     Object.defineProperty(Example, \"staticMethod\",\r\n      *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\r\n      *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\r\n      *\r\n      *     // method (on prototype)\r\n      *     Object.defineProperty(Example.prototype, \"method\",\r\n      *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\r\n      *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\r\n      *\r\n      */\r\n    function decorate(decorators, target, propertyKey, attributes) {\r\n        if (!IsUndefined(propertyKey)) {\r\n            if (!IsArray(decorators))\r\n                throw new TypeError();\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\r\n                throw new TypeError();\r\n            if (IsNull(attributes))\r\n                attributes = undefined;\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n            return DecorateProperty(decorators, target, propertyKey, attributes);\r\n        }\r\n        else {\r\n            if (!IsArray(decorators))\r\n                throw new TypeError();\r\n            if (!IsConstructor(target))\r\n                throw new TypeError();\r\n            return DecorateConstructor(decorators, target);\r\n        }\r\n    }\r\n    Reflect.decorate = decorate;\r\n    // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\r\n    // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\r\n    /**\r\n      * A default metadata decorator factory that can be used on a class, class member, or parameter.\r\n      * @param metadataKey The key for the metadata entry.\r\n      * @param metadataValue The value for the metadata entry.\r\n      * @returns A decorator function.\r\n      * @remarks\r\n      * If `metadataKey` is already defined for the target and target key, the\r\n      * metadataValue for that key will be overwritten.\r\n      * @example\r\n      *\r\n      *     // constructor\r\n      *     @Reflect.metadata(key, value)\r\n      *     class Example {\r\n      *     }\r\n      *\r\n      *     // property (on constructor, TypeScript only)\r\n      *     class Example {\r\n      *         @Reflect.metadata(key, value)\r\n      *         static staticProperty;\r\n      *     }\r\n      *\r\n      *     // property (on prototype, TypeScript only)\r\n      *     class Example {\r\n      *         @Reflect.metadata(key, value)\r\n      *         property;\r\n      *     }\r\n      *\r\n      *     // method (on constructor)\r\n      *     class Example {\r\n      *         @Reflect.metadata(key, value)\r\n      *         static staticMethod() { }\r\n      *     }\r\n      *\r\n      *     // method (on prototype)\r\n      *     class Example {\r\n      *         @Reflect.metadata(key, value)\r\n      *         method() { }\r\n      *     }\r\n      *\r\n      */\r\n    function metadata(metadataKey, metadataValue) {\r\n        function decorator(target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\r\n                throw new TypeError();\r\n            OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n        }\r\n        return decorator;\r\n    }\r\n    Reflect.metadata = metadata;\r\n    /**\r\n      * Define a unique metadata entry on the target.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param metadataValue A value that contains attached metadata.\r\n      * @param target The target object on which to define metadata.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\r\n      *\r\n      *     // decorator factory as metadata-producing annotation.\r\n      *     function MyAnnotation(options): Decorator {\r\n      *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\r\n      *     }\r\n      *\r\n      */\r\n    function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n    }\r\n    Reflect.defineMetadata = defineMetadata;\r\n    /**\r\n      * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function hasMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryHasMetadata(metadataKey, target, propertyKey);\r\n    }\r\n    Reflect.hasMetadata = hasMetadata;\r\n    /**\r\n      * Gets a value indicating whether the target object has the provided metadata key defined.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function hasOwnMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\r\n    }\r\n    Reflect.hasOwnMetadata = hasOwnMetadata;\r\n    /**\r\n      * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function getMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryGetMetadata(metadataKey, target, propertyKey);\r\n    }\r\n    Reflect.getMetadata = getMetadata;\r\n    /**\r\n      * Gets the metadata value for the provided metadata key on the target object.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function getOwnMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\r\n    }\r\n    Reflect.getOwnMetadata = getOwnMetadata;\r\n    /**\r\n      * Gets the metadata keys defined on the target object or its prototype chain.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns An array of unique metadata keys.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.getMetadataKeys(Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function getMetadataKeys(target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryMetadataKeys(target, propertyKey);\r\n    }\r\n    Reflect.getMetadataKeys = getMetadataKeys;\r\n    /**\r\n      * Gets the unique metadata keys defined on the target object.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns An array of unique metadata keys.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.getOwnMetadataKeys(Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function getOwnMetadataKeys(target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryOwnMetadataKeys(target, propertyKey);\r\n    }\r\n    Reflect.getOwnMetadataKeys = getOwnMetadataKeys;\r\n    /**\r\n      * Deletes the metadata entry from the target object with the provided key.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns `true` if the metadata entry was found and deleted; otherwise, false.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function deleteMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\r\n        if (IsUndefined(metadataMap))\r\n            return false;\r\n        if (!metadataMap.delete(metadataKey))\r\n            return false;\r\n        if (metadataMap.size > 0)\r\n            return true;\r\n        var targetMetadata = Metadata.get(target);\r\n        targetMetadata.delete(propertyKey);\r\n        if (targetMetadata.size > 0)\r\n            return true;\r\n        Metadata.delete(target);\r\n        return true;\r\n    }\r\n    Reflect.deleteMetadata = deleteMetadata;\r\n    function DecorateConstructor(decorators, target) {\r\n        for (var i = decorators.length - 1; i >= 0; --i) {\r\n            var decorator = decorators[i];\r\n            var decorated = decorator(target);\r\n            if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                if (!IsConstructor(decorated))\r\n                    throw new TypeError();\r\n                target = decorated;\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    function DecorateProperty(decorators, target, propertyKey, descriptor) {\r\n        for (var i = decorators.length - 1; i >= 0; --i) {\r\n            var decorator = decorators[i];\r\n            var decorated = decorator(target, propertyKey, descriptor);\r\n            if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                if (!IsObject(decorated))\r\n                    throw new TypeError();\r\n                descriptor = decorated;\r\n            }\r\n        }\r\n        return descriptor;\r\n    }\r\n    function GetOrCreateMetadataMap(O, P, Create) {\r\n        var targetMetadata = Metadata.get(O);\r\n        if (IsUndefined(targetMetadata)) {\r\n            if (!Create)\r\n                return undefined;\r\n            targetMetadata = new _Map();\r\n            Metadata.set(O, targetMetadata);\r\n        }\r\n        var metadataMap = targetMetadata.get(P);\r\n        if (IsUndefined(metadataMap)) {\r\n            if (!Create)\r\n                return undefined;\r\n            metadataMap = new _Map();\r\n            targetMetadata.set(P, metadataMap);\r\n        }\r\n        return metadataMap;\r\n    }\r\n    // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\r\n    function OrdinaryHasMetadata(MetadataKey, O, P) {\r\n        var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n        if (hasOwn)\r\n            return true;\r\n        var parent = OrdinaryGetPrototypeOf(O);\r\n        if (!IsNull(parent))\r\n            return OrdinaryHasMetadata(MetadataKey, parent, P);\r\n        return false;\r\n    }\r\n    // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\r\n    function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\r\n        var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n        if (IsUndefined(metadataMap))\r\n            return false;\r\n        return ToBoolean(metadataMap.has(MetadataKey));\r\n    }\r\n    // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\r\n    function OrdinaryGetMetadata(MetadataKey, O, P) {\r\n        var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n        if (hasOwn)\r\n            return OrdinaryGetOwnMetadata(MetadataKey, O, P);\r\n        var parent = OrdinaryGetPrototypeOf(O);\r\n        if (!IsNull(parent))\r\n            return OrdinaryGetMetadata(MetadataKey, parent, P);\r\n        return undefined;\r\n    }\r\n    // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\r\n    function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\r\n        var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n        if (IsUndefined(metadataMap))\r\n            return undefined;\r\n        return metadataMap.get(MetadataKey);\r\n    }\r\n    // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\r\n    function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\r\n        var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\r\n        metadataMap.set(MetadataKey, MetadataValue);\r\n    }\r\n    // 3.1.6.1 OrdinaryMetadataKeys(O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\r\n    function OrdinaryMetadataKeys(O, P) {\r\n        var ownKeys = OrdinaryOwnMetadataKeys(O, P);\r\n        var parent = OrdinaryGetPrototypeOf(O);\r\n        if (parent === null)\r\n            return ownKeys;\r\n        var parentKeys = OrdinaryMetadataKeys(parent, P);\r\n        if (parentKeys.length <= 0)\r\n            return ownKeys;\r\n        if (ownKeys.length <= 0)\r\n            return parentKeys;\r\n        var set = new _Set();\r\n        var keys = [];\r\n        for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\r\n            var key = ownKeys_1[_i];\r\n            var hasKey = set.has(key);\r\n            if (!hasKey) {\r\n                set.add(key);\r\n                keys.push(key);\r\n            }\r\n        }\r\n        for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\r\n            var key = parentKeys_1[_a];\r\n            var hasKey = set.has(key);\r\n            if (!hasKey) {\r\n                set.add(key);\r\n                keys.push(key);\r\n            }\r\n        }\r\n        return keys;\r\n    }\r\n    // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\r\n    function OrdinaryOwnMetadataKeys(O, P) {\r\n        var keys = [];\r\n        var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n        if (IsUndefined(metadataMap))\r\n            return keys;\r\n        var keysObj = metadataMap.keys();\r\n        var iterator = GetIterator(keysObj);\r\n        var k = 0;\r\n        while (true) {\r\n            var next = IteratorStep(iterator);\r\n            if (!next) {\r\n                keys.length = k;\r\n                return keys;\r\n            }\r\n            var nextValue = IteratorValue(next);\r\n            try {\r\n                keys[k] = nextValue;\r\n            }\r\n            catch (e) {\r\n                try {\r\n                    IteratorClose(iterator);\r\n                }\r\n                finally {\r\n                    throw e;\r\n                }\r\n            }\r\n            k++;\r\n        }\r\n    }\r\n    // 6 ECMAScript Data Typ0es and Values\r\n    // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\r\n    function Type(x) {\r\n        if (x === null)\r\n            return 1 /* Null */;\r\n        switch (typeof x) {\r\n            case \"undefined\": return 0 /* Undefined */;\r\n            case \"boolean\": return 2 /* Boolean */;\r\n            case \"string\": return 3 /* String */;\r\n            case \"symbol\": return 4 /* Symbol */;\r\n            case \"number\": return 5 /* Number */;\r\n            case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\r\n            default: return 6 /* Object */;\r\n        }\r\n    }\r\n    // 6.1.1 The Undefined Type\r\n    // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\r\n    function IsUndefined(x) {\r\n        return x === undefined;\r\n    }\r\n    // 6.1.2 The Null Type\r\n    // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\r\n    function IsNull(x) {\r\n        return x === null;\r\n    }\r\n    // 6.1.5 The Symbol Type\r\n    // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\r\n    function IsSymbol(x) {\r\n        return typeof x === \"symbol\";\r\n    }\r\n    // 6.1.7 The Object Type\r\n    // https://tc39.github.io/ecma262/#sec-object-type\r\n    function IsObject(x) {\r\n        return typeof x === \"object\" ? x !== null : typeof x === \"function\";\r\n    }\r\n    // 7.1 Type Conversion\r\n    // https://tc39.github.io/ecma262/#sec-type-conversion\r\n    // 7.1.1 ToPrimitive(input [, PreferredType])\r\n    // https://tc39.github.io/ecma262/#sec-toprimitive\r\n    function ToPrimitive(input, PreferredType) {\r\n        switch (Type(input)) {\r\n            case 0 /* Undefined */: return input;\r\n            case 1 /* Null */: return input;\r\n            case 2 /* Boolean */: return input;\r\n            case 3 /* String */: return input;\r\n            case 4 /* Symbol */: return input;\r\n            case 5 /* Number */: return input;\r\n        }\r\n        var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\r\n        var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\r\n        if (exoticToPrim !== undefined) {\r\n            var result = exoticToPrim.call(input, hint);\r\n            if (IsObject(result))\r\n                throw new TypeError();\r\n            return result;\r\n        }\r\n        return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\r\n    }\r\n    // 7.1.1.1 OrdinaryToPrimitive(O, hint)\r\n    // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\r\n    function OrdinaryToPrimitive(O, hint) {\r\n        if (hint === \"string\") {\r\n            var toString_1 = O.toString;\r\n            if (IsCallable(toString_1)) {\r\n                var result = toString_1.call(O);\r\n                if (!IsObject(result))\r\n                    return result;\r\n            }\r\n            var valueOf = O.valueOf;\r\n            if (IsCallable(valueOf)) {\r\n                var result = valueOf.call(O);\r\n                if (!IsObject(result))\r\n                    return result;\r\n            }\r\n        }\r\n        else {\r\n            var valueOf = O.valueOf;\r\n            if (IsCallable(valueOf)) {\r\n                var result = valueOf.call(O);\r\n                if (!IsObject(result))\r\n                    return result;\r\n            }\r\n            var toString_2 = O.toString;\r\n            if (IsCallable(toString_2)) {\r\n                var result = toString_2.call(O);\r\n                if (!IsObject(result))\r\n                    return result;\r\n            }\r\n        }\r\n        throw new TypeError();\r\n    }\r\n    // 7.1.2 ToBoolean(argument)\r\n    // https://tc39.github.io/ecma262/2016/#sec-toboolean\r\n    function ToBoolean(argument) {\r\n        return !!argument;\r\n    }\r\n    // 7.1.12 ToString(argument)\r\n    // https://tc39.github.io/ecma262/#sec-tostring\r\n    function ToString(argument) {\r\n        return \"\" + argument;\r\n    }\r\n    // 7.1.14 ToPropertyKey(argument)\r\n    // https://tc39.github.io/ecma262/#sec-topropertykey\r\n    function ToPropertyKey(argument) {\r\n        var key = ToPrimitive(argument, 3 /* String */);\r\n        if (IsSymbol(key))\r\n            return key;\r\n        return ToString(key);\r\n    }\r\n    // 7.2 Testing and Comparison Operations\r\n    // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\r\n    // 7.2.2 IsArray(argument)\r\n    // https://tc39.github.io/ecma262/#sec-isarray\r\n    function IsArray(argument) {\r\n        return Array.isArray\r\n            ? Array.isArray(argument)\r\n            : argument instanceof Object\r\n                ? argument instanceof Array\r\n                : Object.prototype.toString.call(argument) === \"[object Array]\";\r\n    }\r\n    // 7.2.3 IsCallable(argument)\r\n    // https://tc39.github.io/ecma262/#sec-iscallable\r\n    function IsCallable(argument) {\r\n        // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\r\n        return typeof argument === \"function\";\r\n    }\r\n    // 7.2.4 IsConstructor(argument)\r\n    // https://tc39.github.io/ecma262/#sec-isconstructor\r\n    function IsConstructor(argument) {\r\n        // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\r\n        return typeof argument === \"function\";\r\n    }\r\n    // 7.2.7 IsPropertyKey(argument)\r\n    // https://tc39.github.io/ecma262/#sec-ispropertykey\r\n    function IsPropertyKey(argument) {\r\n        switch (Type(argument)) {\r\n            case 3 /* String */: return true;\r\n            case 4 /* Symbol */: return true;\r\n            default: return false;\r\n        }\r\n    }\r\n    // 7.3 Operations on Objects\r\n    // https://tc39.github.io/ecma262/#sec-operations-on-objects\r\n    // 7.3.9 GetMethod(V, P)\r\n    // https://tc39.github.io/ecma262/#sec-getmethod\r\n    function GetMethod(V, P) {\r\n        var func = V[P];\r\n        if (func === undefined || func === null)\r\n            return undefined;\r\n        if (!IsCallable(func))\r\n            throw new TypeError();\r\n        return func;\r\n    }\r\n    // 7.4 Operations on Iterator Objects\r\n    // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\r\n    function GetIterator(obj) {\r\n        var method = GetMethod(obj, iteratorSymbol);\r\n        if (!IsCallable(method))\r\n            throw new TypeError(); // from Call\r\n        var iterator = method.call(obj);\r\n        if (!IsObject(iterator))\r\n            throw new TypeError();\r\n        return iterator;\r\n    }\r\n    // 7.4.4 IteratorValue(iterResult)\r\n    // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\r\n    function IteratorValue(iterResult) {\r\n        return iterResult.value;\r\n    }\r\n    // 7.4.5 IteratorStep(iterator)\r\n    // https://tc39.github.io/ecma262/#sec-iteratorstep\r\n    function IteratorStep(iterator) {\r\n        var result = iterator.next();\r\n        return result.done ? false : result;\r\n    }\r\n    // 7.4.6 IteratorClose(iterator, completion)\r\n    // https://tc39.github.io/ecma262/#sec-iteratorclose\r\n    function IteratorClose(iterator) {\r\n        var f = iterator[\"return\"];\r\n        if (f)\r\n            f.call(iterator);\r\n    }\r\n    // 9.1 Ordinary Object Internal Methods and Internal Slots\r\n    // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\r\n    // 9.1.1.1 OrdinaryGetPrototypeOf(O)\r\n    // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\r\n    function OrdinaryGetPrototypeOf(O) {\r\n        var proto = Object.getPrototypeOf(O);\r\n        if (typeof O !== \"function\" || O === functionPrototype)\r\n            return proto;\r\n        // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\r\n        // Try to determine the superclass constructor. Compatible implementations\r\n        // must either set __proto__ on a subclass constructor to the superclass constructor,\r\n        // or ensure each class has a valid `constructor` property on its prototype that\r\n        // points back to the constructor.\r\n        // If this is not the same as Function.[[Prototype]], then this is definately inherited.\r\n        // This is the case when in ES6 or when using __proto__ in a compatible browser.\r\n        if (proto !== functionPrototype)\r\n            return proto;\r\n        // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\r\n        var prototype = O.prototype;\r\n        var prototypeProto = prototype && Object.getPrototypeOf(prototype);\r\n        if (prototypeProto == null || prototypeProto === Object.prototype)\r\n            return proto;\r\n        // If the constructor was not a function, then we cannot determine the heritage.\r\n        var constructor = prototypeProto.constructor;\r\n        if (typeof constructor !== \"function\")\r\n            return proto;\r\n        // If we have some kind of self-reference, then we cannot determine the heritage.\r\n        if (constructor === O)\r\n            return proto;\r\n        // we have a pretty good guess at the heritage.\r\n        return constructor;\r\n    }\r\n    // naive Map shim\r\n    function CreateMapPolyfill() {\r\n        var cacheSentinel = {};\r\n        var arraySentinel = [];\r\n        var MapIterator = (function () {\r\n            function MapIterator(keys, values, selector) {\r\n                this._index = 0;\r\n                this._keys = keys;\r\n                this._values = values;\r\n                this._selector = selector;\r\n            }\r\n            MapIterator.prototype[\"@@iterator\"] = function () { return this; };\r\n            MapIterator.prototype[iteratorSymbol] = function () { return this; };\r\n            MapIterator.prototype.next = function () {\r\n                var index = this._index;\r\n                if (index >= 0 && index < this._keys.length) {\r\n                    var result = this._selector(this._keys[index], this._values[index]);\r\n                    if (index + 1 >= this._keys.length) {\r\n                        this._index = -1;\r\n                        this._keys = arraySentinel;\r\n                        this._values = arraySentinel;\r\n                    }\r\n                    else {\r\n                        this._index++;\r\n                    }\r\n                    return { value: result, done: false };\r\n                }\r\n                return { value: undefined, done: true };\r\n            };\r\n            MapIterator.prototype.throw = function (error) {\r\n                if (this._index >= 0) {\r\n                    this._index = -1;\r\n                    this._keys = arraySentinel;\r\n                    this._values = arraySentinel;\r\n                }\r\n                throw error;\r\n            };\r\n            MapIterator.prototype.return = function (value) {\r\n                if (this._index >= 0) {\r\n                    this._index = -1;\r\n                    this._keys = arraySentinel;\r\n                    this._values = arraySentinel;\r\n                }\r\n                return { value: value, done: true };\r\n            };\r\n            return MapIterator;\r\n        }());\r\n        return (function () {\r\n            function Map() {\r\n                this._keys = [];\r\n                this._values = [];\r\n                this._cacheKey = cacheSentinel;\r\n                this._cacheIndex = -2;\r\n            }\r\n            Object.defineProperty(Map.prototype, \"size\", {\r\n                get: function () { return this._keys.length; },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\r\n            Map.prototype.get = function (key) {\r\n                var index = this._find(key, /*insert*/ false);\r\n                return index >= 0 ? this._values[index] : undefined;\r\n            };\r\n            Map.prototype.set = function (key, value) {\r\n                var index = this._find(key, /*insert*/ true);\r\n                this._values[index] = value;\r\n                return this;\r\n            };\r\n            Map.prototype.delete = function (key) {\r\n                var index = this._find(key, /*insert*/ false);\r\n                if (index >= 0) {\r\n                    var size = this._keys.length;\r\n                    for (var i = index + 1; i < size; i++) {\r\n                        this._keys[i - 1] = this._keys[i];\r\n                        this._values[i - 1] = this._values[i];\r\n                    }\r\n                    this._keys.length--;\r\n                    this._values.length--;\r\n                    if (key === this._cacheKey) {\r\n                        this._cacheKey = cacheSentinel;\r\n                        this._cacheIndex = -2;\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            };\r\n            Map.prototype.clear = function () {\r\n                this._keys.length = 0;\r\n                this._values.length = 0;\r\n                this._cacheKey = cacheSentinel;\r\n                this._cacheIndex = -2;\r\n            };\r\n            Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\r\n            Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\r\n            Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\r\n            Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\r\n            Map.prototype[iteratorSymbol] = function () { return this.entries(); };\r\n            Map.prototype._find = function (key, insert) {\r\n                if (this._cacheKey !== key) {\r\n                    this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\r\n                }\r\n                if (this._cacheIndex < 0 && insert) {\r\n                    this._cacheIndex = this._keys.length;\r\n                    this._keys.push(key);\r\n                    this._values.push(undefined);\r\n                }\r\n                return this._cacheIndex;\r\n            };\r\n            return Map;\r\n        }());\r\n        function getKey(key, _) {\r\n            return key;\r\n        }\r\n        function getValue(_, value) {\r\n            return value;\r\n        }\r\n        function getEntry(key, value) {\r\n            return [key, value];\r\n        }\r\n    }\r\n    // naive Set shim\r\n    function CreateSetPolyfill() {\r\n        return (function () {\r\n            function Set() {\r\n                this._map = new _Map();\r\n            }\r\n            Object.defineProperty(Set.prototype, \"size\", {\r\n                get: function () { return this._map.size; },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            Set.prototype.has = function (value) { return this._map.has(value); };\r\n            Set.prototype.add = function (value) { return this._map.set(value, value), this; };\r\n            Set.prototype.delete = function (value) { return this._map.delete(value); };\r\n            Set.prototype.clear = function () { this._map.clear(); };\r\n            Set.prototype.keys = function () { return this._map.keys(); };\r\n            Set.prototype.values = function () { return this._map.values(); };\r\n            Set.prototype.entries = function () { return this._map.entries(); };\r\n            Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\r\n            Set.prototype[iteratorSymbol] = function () { return this.keys(); };\r\n            return Set;\r\n        }());\r\n    }\r\n    // naive WeakMap shim\r\n    function CreateWeakMapPolyfill() {\r\n        var UUID_SIZE = 16;\r\n        var keys = HashMap.create();\r\n        var rootKey = CreateUniqueKey();\r\n        return (function () {\r\n            function WeakMap() {\r\n                this._key = CreateUniqueKey();\r\n            }\r\n            WeakMap.prototype.has = function (target) {\r\n                var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                return table !== undefined ? HashMap.has(table, this._key) : false;\r\n            };\r\n            WeakMap.prototype.get = function (target) {\r\n                var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                return table !== undefined ? HashMap.get(table, this._key) : undefined;\r\n            };\r\n            WeakMap.prototype.set = function (target, value) {\r\n                var table = GetOrCreateWeakMapTable(target, /*create*/ true);\r\n                table[this._key] = value;\r\n                return this;\r\n            };\r\n            WeakMap.prototype.delete = function (target) {\r\n                var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                return table !== undefined ? delete table[this._key] : false;\r\n            };\r\n            WeakMap.prototype.clear = function () {\r\n                // NOTE: not a real clear, just makes the previous data unreachable\r\n                this._key = CreateUniqueKey();\r\n            };\r\n            return WeakMap;\r\n        }());\r\n        function CreateUniqueKey() {\r\n            var key;\r\n            do\r\n                key = \"@@WeakMap@@\" + CreateUUID();\r\n            while (HashMap.has(keys, key));\r\n            keys[key] = true;\r\n            return key;\r\n        }\r\n        function GetOrCreateWeakMapTable(target, create) {\r\n            if (!hasOwn.call(target, rootKey)) {\r\n                if (!create)\r\n                    return undefined;\r\n                Object.defineProperty(target, rootKey, { value: HashMap.create() });\r\n            }\r\n            return target[rootKey];\r\n        }\r\n        function FillRandomBytes(buffer, size) {\r\n            for (var i = 0; i < size; ++i)\r\n                buffer[i] = Math.random() * 0xff | 0;\r\n            return buffer;\r\n        }\r\n        function GenRandomBytes(size) {\r\n            if (typeof Uint8Array === \"function\") {\r\n                if (typeof crypto !== \"undefined\")\r\n                    return crypto.getRandomValues(new Uint8Array(size));\r\n                if (typeof msCrypto !== \"undefined\")\r\n                    return msCrypto.getRandomValues(new Uint8Array(size));\r\n                return FillRandomBytes(new Uint8Array(size), size);\r\n            }\r\n            return FillRandomBytes(new Array(size), size);\r\n        }\r\n        function CreateUUID() {\r\n            var data = GenRandomBytes(UUID_SIZE);\r\n            // mark as random - RFC 4122 § 4.4\r\n            data[6] = data[6] & 0x4f | 0x40;\r\n            data[8] = data[8] & 0xbf | 0x80;\r\n            var result = \"\";\r\n            for (var offset = 0; offset < UUID_SIZE; ++offset) {\r\n                var byte = data[offset];\r\n                if (offset === 4 || offset === 6 || offset === 8)\r\n                    result += \"-\";\r\n                if (byte < 16)\r\n                    result += \"0\";\r\n                result += byte.toString(16).toLowerCase();\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\r\n    function MakeDictionary(obj) {\r\n        obj.__ = undefined;\r\n        delete obj.__;\r\n        return obj;\r\n    }\r\n    // patch global Reflect\r\n    (function (__global) {\r\n        if (typeof __global.Reflect !== \"undefined\") {\r\n            if (__global.Reflect !== Reflect) {\r\n                for (var p in Reflect) {\r\n                    if (hasOwn.call(Reflect, p)) {\r\n                        __global.Reflect[p] = Reflect[p];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            __global.Reflect = Reflect;\r\n        }\r\n    })(typeof global !== \"undefined\" ? global :\r\n        typeof self !== \"undefined\" ? self :\r\n            Function(\"return this;\")());\r\n})(Reflect || (Reflect = {}));\r\n//# sourceMappingURL=Reflect.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/reflect-metadata/Reflect.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nvar lib_1 = require(\"sprotty/lib\");\nvar ElkNode = /** @class */ (function (_super) {\n    __extends(ElkNode, _super);\n    function ElkNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkNode.prototype.hasFeature = function (feature) {\n        if (feature === lib_1.moveFeature)\n            return false;\n        else\n            return _super.prototype.hasFeature.call(this, feature);\n    };\n    return ElkNode;\n}(lib_1.RectangularNode));\nexports.ElkNode = ElkNode;\nvar ElkPort = /** @class */ (function (_super) {\n    __extends(ElkPort, _super);\n    function ElkPort() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkPort.prototype.hasFeature = function (feature) {\n        if (feature === lib_1.moveFeature)\n            return false;\n        else\n            return _super.prototype.hasFeature.call(this, feature);\n    };\n    return ElkPort;\n}(lib_1.RectangularPort));\nexports.ElkPort = ElkPort;\nvar ElkEdge = /** @class */ (function (_super) {\n    __extends(ElkEdge, _super);\n    function ElkEdge() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkEdge.prototype.hasFeature = function (feature) {\n        if (feature === lib_1.editFeature)\n            return false;\n        else\n            return _super.prototype.hasFeature.call(this, feature);\n    };\n    return ElkEdge;\n}(lib_1.SEdge));\nexports.ElkEdge = ElkEdge;\nvar ElkJunction = /** @class */ (function (_super) {\n    __extends(ElkJunction, _super);\n    function ElkJunction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkJunction.prototype.hasFeature = function (feature) {\n        if (feature === lib_1.moveFeature || feature === lib_1.selectFeature || feature === lib_1.hoverFeedbackFeature)\n            return false;\n        else\n            return _super.prototype.hasFeature.call(this, feature);\n    };\n    return ElkJunction;\n}(lib_1.SNode));\nexports.ElkJunction = ElkJunction;\n//# sourceMappingURL=sprotty-model.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/sprotty-model.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nvar snabbdom = require(\"snabbdom-jsx\");\nvar lib_1 = require(\"sprotty/lib\");\nvar JSX = { createElement: snabbdom.svg };\nvar ElkNodeView = /** @class */ (function (_super) {\n    __extends(ElkNodeView, _super);\n    function ElkNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkNodeView.prototype.render = function (node, context) {\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"rect\", { \"class-elknode\": true, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, x: \"0\", y: \"0\", width: node.bounds.width, height: node.bounds.height }),\n            context.renderChildren(node));\n    };\n    return ElkNodeView;\n}(lib_1.RectangularNodeView));\nexports.ElkNodeView = ElkNodeView;\nvar ElkPortView = /** @class */ (function (_super) {\n    __extends(ElkPortView, _super);\n    function ElkPortView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkPortView.prototype.render = function (port, context) {\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"rect\", { \"class-elkport\": true, \"class-mouseover\": port.hoverFeedback, \"class-selected\": port.selected, x: \"0\", y: \"0\", width: port.bounds.width, height: port.bounds.height }),\n            context.renderChildren(port));\n    };\n    return ElkPortView;\n}(lib_1.RectangularNodeView));\nexports.ElkPortView = ElkPortView;\nvar ElkEdgeView = /** @class */ (function (_super) {\n    __extends(ElkEdgeView, _super);\n    function ElkEdgeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkEdgeView.prototype.renderLine = function (edge, segments, context) {\n        var firstPoint = segments[0];\n        var path = \"M \" + firstPoint.x + \",\" + firstPoint.y;\n        for (var i = 1; i < segments.length; i++) {\n            var p = segments[i];\n            path += \" L \" + p.x + \",\" + p.y;\n        }\n        return JSX.createElement(\"path\", { \"class-elkedge\": true, d: path });\n    };\n    ElkEdgeView.prototype.renderAdditionals = function (edge, segments, context) {\n        var p1 = segments[segments.length - 2];\n        var p2 = segments[segments.length - 1];\n        return [\n            JSX.createElement(\"path\", { \"class-edge\": true, \"class-arrow\": true, d: \"M 0,0 L 8,-3 L 8,3 Z\", transform: \"rotate(\" + lib_1.toDegrees(lib_1.angleOfPoint({ x: p1.x - p2.x, y: p1.y - p2.y })) + \" \" + p2.x + \" \" + p2.y + \") translate(\" + p2.x + \" \" + p2.y + \")\" })\n        ];\n    };\n    return ElkEdgeView;\n}(lib_1.PolylineEdgeView));\nexports.ElkEdgeView = ElkEdgeView;\nvar ElkLabelView = /** @class */ (function () {\n    function ElkLabelView() {\n    }\n    ElkLabelView.prototype.render = function (label, context) {\n        return JSX.createElement(\"text\", { \"class-elklabel\": true }, label.text);\n    };\n    return ElkLabelView;\n}());\nexports.ElkLabelView = ElkLabelView;\nvar JunctionView = /** @class */ (function (_super) {\n    __extends(JunctionView, _super);\n    function JunctionView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    JunctionView.prototype.render = function (node, context) {\n        var radius = this.getRadius(node);\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"circle\", { \"class-elkjunction\": true, r: radius }));\n    };\n    JunctionView.prototype.getRadius = function (node) {\n        return 2;\n    };\n    return JunctionView;\n}(lib_1.CircularNodeView));\nexports.JunctionView = JunctionView;\n//# sourceMappingURL=views.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/views.js","var attrRE = /([\\w-]+)|=|(['\"])([.\\s\\S]*?)\\2/g;\nvar voidElements = require('void-elements');\n\nmodule.exports = function (tag) {\n    var i = 0;\n    var key;\n    var expectingValueAfterEquals = true;\n    var res = {\n        type: 'tag',\n        name: '',\n        voidElement: false,\n        attrs: {},\n        children: []\n    };\n\n    tag.replace(attrRE, function (match) {\n        if (match === '=') {\n            expectingValueAfterEquals = true;\n            i++;\n            return;\n        }\n\n        if (!expectingValueAfterEquals) {\n            if (key) {\n                res.attrs[key] = key; // boolean attribute\n            }\n            key=match;\n        } else {\n            if (i === 0) {\n                if (voidElements[match] || tag.charAt(tag.length - 2) === '/') {\n                    res.voidElement = true;\n                }\n                res.name = match;\n            } else {\n                res.attrs[key] = match.replace(/^['\"]|['\"]$/g, '');\n                key=undefined;\n            }\n        }\n        i++;\n        expectingValueAfterEquals = false;\n    });\n\n    return res;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/html-parse-stringify2/lib/parse-tag.js","/*jshint -W030 */\nvar tagRE = /(?:<!--[\\S\\s]*?-->|<(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>)/g;\nvar parseTag = require('./parse-tag');\n// re-used obj for quick lookups of components\nvar empty = Object.create ? Object.create(null) : {};\n// common logic for pushing a child node onto a list\nfunction pushTextNode(list, html, level, start, ignoreWhitespace) {\n    // calculate correct end of the content slice in case there's\n    // no tag after the text node.\n    var end = html.indexOf('<', start);\n    var content = html.slice(start, end === -1 ? undefined : end);\n    // if a node is nothing but whitespace, collapse it as the spec states:\n    // https://www.w3.org/TR/html4/struct/text.html#h-9.1\n    if (/^\\s*$/.test(content)) {\n        content = ' ';\n    }\n    // don't add whitespace-only text nodes if they would be trailing text nodes\n    // or if they would be leading whitespace-only text nodes:\n    //  * end > -1 indicates this is not a trailing text node\n    //  * leading node is when level is -1 and list has length 0\n    if ((!ignoreWhitespace && end > -1 && level + list.length >= 0) || content !== ' ') {\n        list.push({\n            type: 'text',\n            content: content\n        });\n    }\n}\n\nmodule.exports = function parse(html, options) {\n    options || (options = {});\n    options.components || (options.components = empty);\n    var result = [];\n    var current;\n    var level = -1;\n    var arr = [];\n    var byTag = {};\n    var inComponent = false;\n\n    html.replace(tagRE, function (tag, index) {\n        if (inComponent) {\n            if (tag !== ('</' + current.name + '>')) {\n                return;\n            } else {\n                inComponent = false;\n            }\n        }\n\n        var isOpen = tag.charAt(1) !== '/';\n        var isComment = tag.indexOf('<!--') === 0;\n        var start = index + tag.length;\n        var nextChar = html.charAt(start);\n        var parent;\n\n        if (isOpen && !isComment) {\n            level++;\n\n            current = parseTag(tag);\n            if (current.type === 'tag' && options.components[current.name]) {\n                current.type = 'component';\n                inComponent = true;\n            }\n\n            if (!current.voidElement && !inComponent && nextChar && nextChar !== '<') {\n                pushTextNode(current.children, html, level, start, options.ignoreWhitespace);\n            }\n\n            byTag[current.tagName] = current;\n\n            // if we're at root, push new base node\n            if (level === 0) {\n                result.push(current);\n            }\n\n            parent = arr[level - 1];\n\n            if (parent) {\n                parent.children.push(current);\n            }\n\n            arr[level] = current;\n        }\n\n        if (isComment || !isOpen || current.voidElement) {\n            if (!isComment) {\n                level--;\n            }\n            if (!inComponent && nextChar !== '<' && nextChar) {\n                // trailing text node\n                // if we're at the root, push a base text node. otherwise add as\n                // a child to the current node.\n                parent = level === -1 ? result : arr[level].children;\n                pushTextNode(parent, html, level, start, options.ignoreWhitespace);\n            }\n        }\n    });\n\n    // If the \"html\" passed isn't actually html, add it as a text node.\n    if (!result.length && html.length) {\n        pushTextNode(result, html, 0, 0, options.ignoreWhitespace);\n    }\n\n    return result;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/html-parse-stringify2/lib/parse.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction inject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.inject = inject;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/inject.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nfunction injectable() {\n    return function (target) {\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target) === true) {\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\n        }\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\n        return target;\n    };\n}\nexports.injectable = injectable;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/injectable.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction multiInject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.multiInject = multiInject;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/multi_inject.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction named(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, name);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.named = named;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/named.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction optional() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG, true);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.optional = optional;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/optional.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nfunction postConstruct() {\n    return function (target, propertyKey, descriptor) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT, propertyKey);\n        if (Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT, target.constructor)) {\n            throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\n        }\n        Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT, metadata, target.constructor);\n    };\n}\nexports.postConstruct = postConstruct;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/post_construct.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction tagged(metadataKey, metadataValue) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(metadataKey, metadataValue);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.tagged = tagged;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/tagged.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction targetName(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAME_TAG, name);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.targetName = targetName;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/target_name.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction unmanaged() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG, true);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.unmanaged = unmanaged;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/unmanaged.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar guid_1 = require(\"../utils/guid\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar Binding = (function () {\n    function Binding(serviceIdentifier, defaultScope) {\n        this.guid = guid_1.guid();\n        this.activated = false;\n        this.serviceIdentifier = serviceIdentifier;\n        this.scope = defaultScope;\n        this.type = literal_types_1.BindingTypeEnum.Invalid;\n        this.constraint = function (request) { return true; };\n        this.implementationType = null;\n        this.cache = null;\n        this.factory = null;\n        this.provider = null;\n        this.onActivation = null;\n        this.dynamicValue = null;\n    }\n    Binding.prototype.clone = function () {\n        var clone = new Binding(this.serviceIdentifier, this.scope);\n        clone.activated = false;\n        clone.implementationType = this.implementationType;\n        clone.dynamicValue = this.dynamicValue;\n        clone.scope = this.scope;\n        clone.type = this.type;\n        clone.factory = this.factory;\n        clone.provider = this.provider;\n        clone.constraint = this.constraint;\n        clone.onActivation = this.onActivation;\n        clone.cache = this.cache;\n        return clone;\n    };\n    return Binding;\n}());\nexports.Binding = Binding;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/bindings/binding.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BindingCount = {\n    MultipleBindingsAvailable: 2,\n    NoBindingsAvailable: 0,\n    OnlyOneBindingAvailable: 1\n};\nexports.BindingCount = BindingCount;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/bindings/binding_count.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_1 = require(\"../bindings/binding\");\nvar lookup_1 = require(\"./lookup\");\nvar planner_1 = require(\"../planning/planner\");\nvar resolver_1 = require(\"../resolution/resolver\");\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar container_snapshot_1 = require(\"./container_snapshot\");\nvar guid_1 = require(\"../utils/guid\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\nvar Container = (function () {\n    function Container(containerOptions) {\n        if (containerOptions !== undefined) {\n            if (typeof containerOptions !== \"object\") {\n                throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n            }\n            else if (containerOptions.defaultScope === undefined) {\n                throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n            }\n            else if (containerOptions.defaultScope !== literal_types_1.BindingScopeEnum.Singleton &&\n                containerOptions.defaultScope !== literal_types_1.BindingScopeEnum.Transient) {\n                throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n            }\n            this.options = {\n                defaultScope: containerOptions.defaultScope\n            };\n        }\n        else {\n            this.options = {\n                defaultScope: literal_types_1.BindingScopeEnum.Transient\n            };\n        }\n        this.guid = guid_1.guid();\n        this._bindingDictionary = new lookup_1.Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new metadata_reader_1.MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container = new Container();\n        var bindingDictionary = planner_1.getBindingDictionary(container);\n        var bindingDictionary1 = planner_1.getBindingDictionary(container1);\n        var bindingDictionary2 = planner_1.getBindingDictionary(container2);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        copyDictionary(bindingDictionary1, bindingDictionary);\n        copyDictionary(bindingDictionary2, bindingDictionary);\n        return container;\n    };\n    Container.prototype.load = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var bindingToSyntax = _this.bind.call(_this, serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var bindingToSyntax = _this.rebind.call(_this, serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        modules.forEach(function (module) {\n            var bindFunction = getBindFunction(module.guid);\n            var unbindFunction = getUnbindFunction(module.guid);\n            var isboundFunction = getIsboundFunction(module.guid);\n            var rebindFunction = getRebindFunction(module.guid);\n            module.registry(bindFunction, unbindFunction, isboundFunction, rebindFunction);\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.guid);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var defaultScope = literal_types_1.BindingScopeEnum.Transient;\n        defaultScope = (this.options.defaultScope === defaultScope) ? defaultScope : literal_types_1.BindingScopeEnum.Singleton;\n        var binding = new binding_1.Binding(serviceIdentifier, defaultScope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new binding_to_syntax_1.BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new lookup_1.Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function () {\n        var child = new Container();\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) {\n            return curr(prev);\n        }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = new Container();\n        tempContainer.bind(constructorFunction).toSelf();\n        tempContainer.parent = this;\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolver_1.resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexports.Container = Container;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/container/container.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar guid_1 = require(\"../utils/guid\");\nvar ContainerModule = (function () {\n    function ContainerModule(registry) {\n        this.guid = guid_1.guid();\n        this.registry = registry;\n    }\n    return ContainerModule;\n}());\nexports.ContainerModule = ContainerModule;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/container/container_module.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContainerSnapshot = (function () {\n    function ContainerSnapshot() {\n    }\n    ContainerSnapshot.of = function (bindings, middleware) {\n        var snapshot = new ContainerSnapshot();\n        snapshot.bindings = bindings;\n        snapshot.middleware = middleware;\n        return snapshot;\n    };\n    return ContainerSnapshot;\n}());\nexports.ContainerSnapshot = ContainerSnapshot;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/container/container_snapshot.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar Lookup = (function () {\n    function Lookup() {\n        this._map = new Map();\n    }\n    Lookup.prototype.getMap = function () {\n        return this._map;\n    };\n    Lookup.prototype.add = function (serviceIdentifier, value) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (value === null || value === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            entry.push(value);\n            this._map.set(serviceIdentifier, entry);\n        }\n        else {\n            this._map.set(serviceIdentifier, [value]);\n        }\n    };\n    Lookup.prototype.get = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            return entry;\n        }\n        else {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.remove = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (!this._map.delete(serviceIdentifier)) {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.removeByCondition = function (condition) {\n        var _this = this;\n        this._map.forEach(function (entries, key) {\n            var updatedEntries = entries.filter(function (entry) { return !condition(entry); });\n            if (updatedEntries.length > 0) {\n                _this._map.set(key, updatedEntries);\n            }\n            else {\n                _this._map.delete(key);\n            }\n        });\n    };\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        return this._map.has(serviceIdentifier);\n    };\n    Lookup.prototype.clone = function () {\n        var copy = new Lookup();\n        this._map.forEach(function (value, key) {\n            value.forEach(function (b) { return copy.add(key, b.clone()); });\n        });\n        return copy;\n    };\n    Lookup.prototype.traverse = function (func) {\n        this._map.forEach(function (value, key) {\n            func(key, value);\n        });\n    };\n    return Lookup;\n}());\nexports.Lookup = Lookup;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/container/lookup.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar guid_1 = require(\"../utils/guid\");\nvar Context = (function () {\n    function Context(container) {\n        this.guid = guid_1.guid();\n        this.container = container;\n    }\n    Context.prototype.addPlan = function (plan) {\n        this.plan = plan;\n    };\n    return Context;\n}());\nexports.Context = Context;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/context.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Plan = (function () {\n    function Plan(parentContext, rootRequest) {\n        this.parentContext = parentContext;\n        this.rootRequest = rootRequest;\n    }\n    return Plan;\n}());\nexports.Plan = Plan;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/plan.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plan_1 = require(\"./plan\");\nvar context_1 = require(\"./context\");\nvar request_1 = require(\"./request\");\nvar target_1 = require(\"./target\");\nvar binding_count_1 = require(\"../bindings/binding_count\");\nvar reflection_utils_1 = require(\"./reflection_utils\");\nvar metadata_1 = require(\"./metadata\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar serialization_1 = require(\"../utils/serialization\");\nfunction getBindingDictionary(cntnr) {\n    return cntnr._bindingDictionary;\n}\nexports.getBindingDictionary = getBindingDictionary;\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\n    var injectMetadata = new metadata_1.Metadata(metadataKey, serviceIdentifier);\n    var target = new target_1.Target(targetType, name, serviceIdentifier, injectMetadata);\n    if (key !== undefined) {\n        var tagMetadata = new metadata_1.Metadata(key, value);\n        target.metadata.push(tagMetadata);\n    }\n    return target;\n}\nfunction _getActiveBindings(avoidConstraints, context, parentRequest, target) {\n    var bindings = getBindings(context.container, target.serviceIdentifier);\n    var activeBindings = [];\n    if (avoidConstraints === false) {\n        activeBindings = bindings.filter(function (binding) {\n            var request = new request_1.Request(binding.serviceIdentifier, context, parentRequest, binding, target);\n            return binding.constraint(request);\n        });\n    }\n    else {\n        activeBindings = bindings;\n    }\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\n    return activeBindings;\n}\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\n    switch (bindings.length) {\n        case binding_count_1.BindingCount.NoBindingsAvailable:\n            if (target.isOptional() === true) {\n                return bindings;\n            }\n            else {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.NOT_REGISTERED;\n                msg += serialization_1.listMetadataForTarget(serviceIdentifierString, target);\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n        case binding_count_1.BindingCount.OnlyOneBindingAvailable:\n            if (target.isArray() === false) {\n                return bindings;\n            }\n        case binding_count_1.BindingCount.MultipleBindingsAvailable:\n        default:\n            if (target.isArray() === false) {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier), msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n            else {\n                return bindings;\n            }\n    }\n}\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\n    try {\n        var activeBindings = void 0;\n        var childRequest_1;\n        if (parentRequest === null) {\n            activeBindings = _getActiveBindings(avoidConstraints, context, null, target);\n            childRequest_1 = new request_1.Request(serviceIdentifier, context, null, activeBindings, target);\n            var thePlan = new plan_1.Plan(context, childRequest_1);\n            context.addPlan(thePlan);\n        }\n        else {\n            activeBindings = _getActiveBindings(avoidConstraints, context, parentRequest, target);\n            childRequest_1 = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\n        }\n        activeBindings.forEach(function (binding) {\n            var subChildRequest = null;\n            if (target.isArray()) {\n                subChildRequest = childRequest_1.addChildRequest(binding.serviceIdentifier, binding, target);\n            }\n            else {\n                subChildRequest = childRequest_1;\n            }\n            if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n                var dependencies = reflection_utils_1.getDependencies(metadataReader, binding.implementationType);\n                dependencies.forEach(function (dependency) {\n                    _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\n                });\n            }\n        });\n    }\n    catch (error) {\n        if (error instanceof RangeError && parentRequest !== null) {\n            serialization_1.circularDependencyToException(parentRequest.parentContext.plan.rootRequest);\n        }\n        else {\n            throw new Error(error.message);\n        }\n    }\n}\nfunction getBindings(container, serviceIdentifier) {\n    var bindings = [];\n    var bindingDictionary = getBindingDictionary(container);\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\n        bindings = bindingDictionary.get(serviceIdentifier);\n    }\n    else if (container.parent !== null) {\n        bindings = getBindings(container.parent, serviceIdentifier);\n    }\n    return bindings;\n}\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\n    var context = new context_1.Context(container);\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, \"\", key, value);\n    _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\n    return context;\n}\nexports.plan = plan;\nfunction createMockRequest(container, serviceIdentifier, key, value) {\n    var target = new target_1.Target(literal_types_1.TargetTypeEnum.Variable, \"\", serviceIdentifier, new metadata_1.Metadata(key, value));\n    var context = new context_1.Context(container);\n    var request = new request_1.Request(serviceIdentifier, context, null, [], target);\n    return request;\n}\nexports.createMockRequest = createMockRequest;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/planner.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar QueryableString = (function () {\n    function QueryableString(str) {\n        this.str = str;\n    }\n    QueryableString.prototype.startsWith = function (searchString) {\n        return this.str.indexOf(searchString) === 0;\n    };\n    QueryableString.prototype.endsWith = function (searchString) {\n        var reverseString = \"\";\n        var reverseSearchString = searchString.split(\"\").reverse().join(\"\");\n        reverseString = this.str.split(\"\").reverse().join(\"\");\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\n    };\n    QueryableString.prototype.contains = function (searchString) {\n        return (this.str.indexOf(searchString) !== -1);\n    };\n    QueryableString.prototype.equals = function (compareString) {\n        return this.str === compareString;\n    };\n    QueryableString.prototype.value = function () {\n        return this.str;\n    };\n    return QueryableString;\n}());\nexports.QueryableString = QueryableString;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/queryable_string.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar serialization_1 = require(\"../utils/serialization\");\nvar target_1 = require(\"./target\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nfunction getDependencies(metadataReader, func) {\n    var constructorName = serialization_1.getFunctionName(func);\n    var targets = getTargets(metadataReader, constructorName, func, false);\n    return targets;\n}\nexports.getDependencies = getDependencies;\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\n    var metadata = metadataReader.getConstructorMetadata(func);\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\n    if (serviceIdentifiers === undefined) {\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\n        throw new Error(msg);\n    }\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\n    var keys = Object.keys(constructorArgsMetadata);\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\n    var iterations = (hasUserDeclaredUnknownInjections) ? keys.length : func.length;\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func);\n    var targets = constructorTargets.concat(propertyTargets);\n    var baseClassDependencyCount = getBaseClassDependencyCount(metadataReader, func);\n    if (targets.length < baseClassDependencyCount) {\n        var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH_1 +\n            constructorName + ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH_2;\n        throw new Error(error);\n    }\n    return targets;\n}\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\n    var metadata = formatTargetMetadata(targetMetadata);\n    var isManaged = metadata.unmanaged !== true;\n    var serviceIdentifier = serviceIdentifiers[index];\n    var injectIdentifier = (metadata.inject || metadata.multiInject);\n    serviceIdentifier = (injectIdentifier) ? (injectIdentifier) : serviceIdentifier;\n    if (isManaged === true) {\n        var isObject = serviceIdentifier === Object;\n        var isFunction = serviceIdentifier === Function;\n        var isUndefined = serviceIdentifier === undefined;\n        var isUnknownType = (isObject || isFunction || isUndefined);\n        if (isBaseClass === false && isUnknownType) {\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\n            throw new Error(msg);\n        }\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        return target;\n    }\n    return null;\n}\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\n    var targets = [];\n    for (var i = 0; i < iterations; i++) {\n        var index = i;\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\n        if (target !== null) {\n            targets.push(target);\n        }\n    }\n    return targets;\n}\nfunction getClassPropsAsTargets(metadataReader, constructorFunc) {\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\n    var targets = [];\n    var keys = Object.keys(classPropsMetadata);\n    for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        var targetMetadata = classPropsMetadata[key];\n        var metadata = formatTargetMetadata(classPropsMetadata[key]);\n        var targetName = metadata.targetName || key;\n        var serviceIdentifier = (metadata.inject || metadata.multiInject);\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty, targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        targets.push(target);\n    }\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor);\n        targets = targets.concat(baseTargets);\n    }\n    return targets;\n}\nfunction getBaseClassDependencyCount(metadataReader, func) {\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseConstructorName = serialization_1.getFunctionName(baseConstructor);\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\n        var metadata = targets.map(function (t) {\n            return t.metadata.filter(function (m) {\n                return m.key === METADATA_KEY.UNMANAGED_TAG;\n            });\n        });\n        var unmanagedCount = [].concat.apply([], metadata).length;\n        var dependencyCount = targets.length - unmanagedCount;\n        if (dependencyCount > 0) {\n            return dependencyCount;\n        }\n        else {\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\n        }\n    }\n    else {\n        return 0;\n    }\n}\nfunction formatTargetMetadata(targetMetadata) {\n    var targetMetadataMap = {};\n    targetMetadata.forEach(function (m) {\n        targetMetadataMap[m.key.toString()] = m.value;\n    });\n    return {\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/reflection_utils.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar guid_1 = require(\"../utils/guid\");\nvar Request = (function () {\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\n        this.guid = guid_1.guid();\n        this.serviceIdentifier = serviceIdentifier;\n        this.parentContext = parentContext;\n        this.parentRequest = parentRequest;\n        this.target = target;\n        this.childRequests = [];\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\n    }\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\n        this.childRequests.push(child);\n        return child;\n    };\n    return Request;\n}());\nexports.Request = Request;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/request.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nfunction _injectProperties(instance, childRequests, resolveRequest) {\n    var propertyInjectionsRequests = childRequests.filter(function (childRequest) {\n        return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ClassProperty);\n    });\n    var propertyInjections = propertyInjectionsRequests.map(function (childRequest) {\n        return resolveRequest(childRequest);\n    });\n    propertyInjectionsRequests.forEach(function (r, index) {\n        var propertyName = \"\";\n        propertyName = r.target.name.value();\n        var injection = propertyInjections[index];\n        instance[propertyName] = injection;\n    });\n    return instance;\n}\nfunction _createInstance(Func, injections) {\n    return new (Func.bind.apply(Func, [void 0].concat(injections)))();\n}\nfunction _postConstruct(constr, result) {\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\n        try {\n            result[data.value]();\n        }\n        catch (e) {\n            throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name, e.message));\n        }\n    }\n}\nfunction resolveInstance(constr, childRequests, resolveRequest) {\n    var result = null;\n    if (childRequests.length > 0) {\n        var constructorInjectionsRequests = childRequests.filter(function (childRequest) {\n            return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ConstructorArgument);\n        });\n        var constructorInjections = constructorInjectionsRequests.map(function (childRequest) {\n            return resolveRequest(childRequest);\n        });\n        result = _createInstance(constr, constructorInjections);\n        result = _injectProperties(result, childRequests, resolveRequest);\n    }\n    else {\n        result = new constr();\n    }\n    _postConstruct(constr, result);\n    return result;\n}\nexports.resolveInstance = resolveInstance;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/resolution/instantiation.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar instantiation_1 = require(\"./instantiation\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction _resolveRequest(request) {\n    var bindings = request.bindings;\n    var childRequests = request.childRequests;\n    var targetIsAnArray = request.target && request.target.isArray();\n    var targetParentIsNotAnArray = !request.parentRequest ||\n        !request.parentRequest.target ||\n        !request.target ||\n        !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n    if (targetIsAnArray && targetParentIsNotAnArray) {\n        return childRequests.map(function (childRequest) {\n            return _resolveRequest(childRequest);\n        });\n    }\n    else {\n        var result = null;\n        if (request.target.isOptional() === true && bindings.length === 0) {\n            return undefined;\n        }\n        var binding = bindings[0];\n        var isSingleton = binding.scope === literal_types_1.BindingScopeEnum.Singleton;\n        if (isSingleton && binding.activated === true) {\n            return binding.cache;\n        }\n        if (binding.type === literal_types_1.BindingTypeEnum.ConstantValue) {\n            result = binding.cache;\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Function) {\n            result = binding.cache;\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Constructor) {\n            result = binding.implementationType;\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.DynamicValue && binding.dynamicValue !== null) {\n            result = binding.dynamicValue(request.parentContext);\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Factory && binding.factory !== null) {\n            result = binding.factory(request.parentContext);\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Provider && binding.provider !== null) {\n            result = binding.provider(request.parentContext);\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n            result = instantiation_1.resolveInstance(binding.implementationType, childRequests, _resolveRequest);\n        }\n        else {\n            var serviceIdentifier = serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);\n            throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n        }\n        if (typeof binding.onActivation === \"function\") {\n            result = binding.onActivation(request.parentContext, result);\n        }\n        if (isSingleton) {\n            binding.cache = result;\n            binding.activated = true;\n        }\n        return result;\n    }\n}\nfunction resolve(context) {\n    return _resolveRequest(context.plan.rootRequest);\n}\nexports.resolve = resolve;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/resolution/resolver.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingInSyntax = (function () {\n    function BindingInSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingInSyntax.prototype.inSingletonScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inTransientScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Transient;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingInSyntax;\n}());\nexports.BindingInSyntax = BindingInSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_in_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_in_syntax_1 = require(\"./binding_in_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar BindingInWhenOnSyntax = (function () {\n    function BindingInWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n        this._bindingInSyntax = new binding_in_syntax_1.BindingInSyntax(binding);\n    }\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\n        return this._bindingInSyntax.inSingletonScope();\n    };\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\n        return this._bindingInSyntax.inTransientScope();\n    };\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingInWhenOnSyntax;\n}());\nexports.BindingInWhenOnSyntax = BindingInWhenOnSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_in_when_on_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = literal_types_1.BindingTypeEnum.Function;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            return function () {\n                return context.container.get(serviceIdentifier);\n            };\n        };\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingToSyntax;\n}());\nexports.BindingToSyntax = BindingToSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_to_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction template(strings) {\n    var keys = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        keys[_i - 1] = arguments[_i];\n    }\n    return (function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        var result = [strings[0]];\n        keys.forEach(function (key, i) {\n            var value = Number.isInteger(key) ? values[key] : values[keys.indexOf(key)];\n            result.push(value, strings[i + 1]);\n        });\n        return result.join(\"\");\n    });\n}\nexports.template = template;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/utils/template.js","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/isarray/index.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n// TODO(bmeurer): Change this back to const once hole checks are\n// properly optimized away early in Ignition+TurboFan.\n/*<replacement>*/\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') {\n    return emitter.prependListener(event, fn);\n  } else {\n    // This is a hack to make sure that our error handler is attached before any\n    // userland ones.  NEVER DO THIS. This is here only because this code needs\n    // to continue to work with older versions of Node.js that do not include\n    // the prependListener() method. The goal is to eventually remove this hack.\n    if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n  }\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) processNextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    processNextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) processNextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        processNextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    processNextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], self.emit.bind(self, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    processNextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/lib/_stream_readable.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction TransformState(stream) {\n  this.afterTransform = function (er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n  this.writeencoding = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return stream.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data !== null && data !== undefined) stream.push(data);\n\n  cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = new TransformState(this);\n\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.once('prefinish', function () {\n    if (typeof this._flush === 'function') this._flush(function (er, data) {\n      done(stream, er, data);\n    });else done(stream);\n  });\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data !== null && data !== undefined) stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var ts = stream._transformState;\n\n  if (ws.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (ts.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/lib/_stream_transform.js","'use strict';\n\n/*<replacement>*/\n\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      processNextTick(emitErrorNT, this, err);\n    }\n    return;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      processNextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/lib/internal/streams/destroy.js","module.exports = require('events').EventEmitter;\n\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/lib/internal/streams/stream-browser.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (html) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n\n    var context = options.context || document;\n\n    // If there's nothing here, return null;\n    if (!html) {\n        return null;\n    }\n\n    // Maintain a list of created vnodes so we can call the create hook.\n    var createdVNodes = [];\n\n    // Parse the string into the AST and convert to VNodes.\n    var vnodes = convertNodes((0, _parse2.default)(html), createdVNodes, context);\n\n    var res = void 0;\n    if (!vnodes) {\n        // If there are no vnodes but there is string content, then the string\n        // must be just text or at least invalid HTML that we should treat as\n        // text (since the AST parser didn't find any well-formed HTML).\n        res = toVNode({ type: 'text', content: html }, createdVNodes, context);\n    } else if (vnodes.length === 1) {\n        // If there's only one root node, just return it as opposed to an array.\n        res = vnodes[0];\n    } else {\n        // Otherwise we have an array of VNodes, which we should return.\n        res = vnodes;\n    }\n\n    // Call the 'create' hook for each created node.\n    options.hooks && options.hooks.create && createdVNodes.forEach(function (node) {\n        options.hooks.create(node);\n    });\n    return res;\n};\n\nvar _parse = require('html-parse-stringify2/lib/parse');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _h = require('snabbdom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction convertNodes(nodes, createdVNodes, context) {\n    if (nodes instanceof Array && nodes.length > 0) {\n        return nodes.map(function (node) {\n            return toVNode(node, createdVNodes, context);\n        });\n    } else {\n        return undefined;\n    }\n}\n\nfunction toVNode(node, createdVNodes, context) {\n    var newNode = void 0;\n    if (node.type === 'text') {\n        newNode = (0, _utils.createTextVNode)(node.content, context);\n    } else {\n        newNode = (0, _h2.default)(node.name, buildVNodeData(node, context), convertNodes(node.children, createdVNodes, context));\n    }\n    createdVNodes.push(newNode);\n    return newNode;\n}\n\nfunction buildVNodeData(node, context) {\n    var data = {};\n    if (!node.attrs) {\n        return data;\n    }\n\n    var attrs = Object.keys(node.attrs).reduce(function (memo, name) {\n        if (name !== 'style' && name !== 'class') {\n            var val = (0, _utils.unescapeEntities)(node.attrs[name], context);\n            memo ? memo[name] = val : memo = _defineProperty({}, name, val);\n        }\n        return memo;\n    }, null);\n    if (attrs) {\n        data.attrs = attrs;\n    }\n\n    var style = parseStyle(node);\n    if (style) {\n        data.style = style;\n    }\n\n    var classes = parseClass(node);\n    if (classes) {\n        data.class = classes;\n    }\n\n    return data;\n}\n\nfunction parseStyle(node) {\n    try {\n        return node.attrs.style.split(';').reduce(function (memo, styleProp) {\n            var res = styleProp.split(':');\n            var name = (0, _utils.transformName)(res[0].trim());\n            if (name) {\n                var val = res[1].replace('!important', '').trim();\n                memo ? memo[name] = val : memo = _defineProperty({}, name, val);\n            }\n            return memo;\n        }, null);\n    } catch (e) {\n        return null;\n    }\n}\n\nfunction parseClass(node) {\n    try {\n        return node.attrs.class.split(' ').reduce(function (memo, className) {\n            className = className.trim();\n            if (className) {\n                memo ? memo[className] = true : memo = _defineProperty({}, className, true);\n            }\n            return memo;\n        }, null);\n    } catch (e) {\n        return null;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom-virtualize/lib/strings.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.createTextVNode = createTextVNode;\nexports.transformName = transformName;\nexports.unescapeEntities = unescapeEntities;\n\nvar _vnode = require('snabbdom/vnode');\n\nvar _vnode2 = _interopRequireDefault(_vnode);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createTextVNode(text, context) {\n    return (0, _vnode2.default)(undefined, undefined, undefined, unescapeEntities(text, context));\n}\n\nfunction transformName(name) {\n    // Replace -a with A to help camel case style property names.\n    name = name.replace(/-(\\w)/g, function _replace($1, $2) {\n        return $2.toUpperCase();\n    });\n    // Handle properties that start with a -.\n    var firstChar = name.charAt(0).toLowerCase();\n    return '' + firstChar + name.substring(1);\n}\n\n// Regex for matching HTML entities.\nvar entityRegex = new RegExp('&[a-z0-9#]+;', 'gi');\n// Element for setting innerHTML for transforming entities.\nvar el = null;\n\nfunction unescapeEntities(text, context) {\n    // Create the element using the context if it doesn't exist.\n    if (!el) {\n        el = context.createElement('div');\n    }\n    return text.replace(entityRegex, function (entity) {\n        el.innerHTML = entity;\n        return el.textContent;\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom-virtualize/lib/utils.js","module.exports = require('./lib/strings');\n\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom-virtualize/strings.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction createElement(tagName) {\n    return document.createElement(tagName);\n}\nfunction createElementNS(namespaceURI, qualifiedName) {\n    return document.createElementNS(namespaceURI, qualifiedName);\n}\nfunction createTextNode(text) {\n    return document.createTextNode(text);\n}\nfunction createComment(text) {\n    return document.createComment(text);\n}\nfunction insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nfunction removeChild(node, child) {\n    node.removeChild(child);\n}\nfunction appendChild(node, child) {\n    node.appendChild(child);\n}\nfunction parentNode(node) {\n    return node.parentNode;\n}\nfunction nextSibling(node) {\n    return node.nextSibling;\n}\nfunction tagName(elm) {\n    return elm.tagName;\n}\nfunction setTextContent(node, text) {\n    node.textContent = text;\n}\nfunction getTextContent(node) {\n    return node.textContent;\n}\nfunction isElement(node) {\n    return node.nodeType === 1;\n}\nfunction isText(node) {\n    return node.nodeType === 3;\n}\nfunction isComment(node) {\n    return node.nodeType === 8;\n}\nexports.htmlDomApi = {\n    createElement: createElement,\n    createElementNS: createElementNS,\n    createTextNode: createTextNode,\n    createComment: createComment,\n    insertBefore: insertBefore,\n    removeChild: removeChild,\n    appendChild: appendChild,\n    parentNode: parentNode,\n    nextSibling: nextSibling,\n    tagName: tagName,\n    setTextContent: setTextContent,\n    getTextContent: getTextContent,\n    isElement: isElement,\n    isText: isText,\n    isComment: isComment,\n};\nexports.default = exports.htmlDomApi;\n//# sourceMappingURL=htmldomapi.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/htmldomapi.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\nvar xmlNS = 'http://www.w3.org/XML/1998/namespace';\nvar colonChar = 58;\nvar xChar = 120;\nfunction updateAttrs(oldVnode, vnode) {\n    var key, elm = vnode.elm, oldAttrs = oldVnode.data.attrs, attrs = vnode.data.attrs;\n    if (!oldAttrs && !attrs)\n        return;\n    if (oldAttrs === attrs)\n        return;\n    oldAttrs = oldAttrs || {};\n    attrs = attrs || {};\n    // update modified attributes, add new attributes\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, \"\");\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    // Assume xml namespace\n                    elm.setAttributeNS(xmlNS, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    // Assume xlink namespace\n                    elm.setAttributeNS(xlinkNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    // remove removed attributes\n    // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n    // the other option is to remove all attributes with value == undefined\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nexports.attributesModule = { create: updateAttrs, update: updateAttrs };\nexports.default = exports.attributesModule;\n//# sourceMappingURL=attributes.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/attributes.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction updateClass(oldVnode, vnode) {\n    var cur, name, elm = vnode.elm, oldClass = oldVnode.data.class, klass = vnode.data.class;\n    if (!oldClass && !klass)\n        return;\n    if (oldClass === klass)\n        return;\n    oldClass = oldClass || {};\n    klass = klass || {};\n    for (name in oldClass) {\n        if (!klass[name]) {\n            elm.classList.remove(name);\n        }\n    }\n    for (name in klass) {\n        cur = klass[name];\n        if (cur !== oldClass[name]) {\n            elm.classList[cur ? 'add' : 'remove'](name);\n        }\n    }\n}\nexports.classModule = { create: updateClass, update: updateClass };\nexports.default = exports.classModule;\n//# sourceMappingURL=class.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/class.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction invokeHandler(handler, vnode, event) {\n    if (typeof handler === \"function\") {\n        // call function handler\n        handler.call(vnode, event, vnode);\n    }\n    else if (typeof handler === \"object\") {\n        // call handler with arguments\n        if (typeof handler[0] === \"function\") {\n            // special case for single argument for performance\n            if (handler.length === 2) {\n                handler[0].call(vnode, handler[1], event, vnode);\n            }\n            else {\n                var args = handler.slice(1);\n                args.push(event);\n                args.push(vnode);\n                handler[0].apply(vnode, args);\n            }\n        }\n        else {\n            // call multiple handlers\n            for (var i = 0; i < handler.length; i++) {\n                invokeHandler(handler[i]);\n            }\n        }\n    }\n}\nfunction handleEvent(event, vnode) {\n    var name = event.type, on = vnode.data.on;\n    // call event handler(s) if exists\n    if (on && on[name]) {\n        invokeHandler(on[name], vnode, event);\n    }\n}\nfunction createListener() {\n    return function handler(event) {\n        handleEvent(event, handler.vnode);\n    };\n}\nfunction updateEventListeners(oldVnode, vnode) {\n    var oldOn = oldVnode.data.on, oldListener = oldVnode.listener, oldElm = oldVnode.elm, on = vnode && vnode.data.on, elm = (vnode && vnode.elm), name;\n    // optimization for reused immutable handlers\n    if (oldOn === on) {\n        return;\n    }\n    // remove existing listeners which no longer used\n    if (oldOn && oldListener) {\n        // if element changed or deleted we remove all existing listeners unconditionally\n        if (!on) {\n            for (name in oldOn) {\n                // remove listener if element was changed or existing listeners removed\n                oldElm.removeEventListener(name, oldListener, false);\n            }\n        }\n        else {\n            for (name in oldOn) {\n                // remove listener if existing listener removed\n                if (!on[name]) {\n                    oldElm.removeEventListener(name, oldListener, false);\n                }\n            }\n        }\n    }\n    // add new listeners which has not already attached\n    if (on) {\n        // reuse existing listener or create new\n        var listener = vnode.listener = oldVnode.listener || createListener();\n        // update vnode for listener\n        listener.vnode = vnode;\n        // if element changed or added we add all needed listeners unconditionally\n        if (!oldOn) {\n            for (name in on) {\n                // add listener if element was changed or new listeners added\n                elm.addEventListener(name, listener, false);\n            }\n        }\n        else {\n            for (name in on) {\n                // add listener if new listener added\n                if (!oldOn[name]) {\n                    elm.addEventListener(name, listener, false);\n                }\n            }\n        }\n    }\n}\nexports.eventListenersModule = {\n    create: updateEventListeners,\n    update: updateEventListeners,\n    destroy: updateEventListeners\n};\nexports.default = exports.eventListenersModule;\n//# sourceMappingURL=eventlisteners.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/eventlisteners.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction updateProps(oldVnode, vnode) {\n    var key, cur, old, elm = vnode.elm, oldProps = oldVnode.data.props, props = vnode.data.props;\n    if (!oldProps && !props)\n        return;\n    if (oldProps === props)\n        return;\n    oldProps = oldProps || {};\n    props = props || {};\n    for (key in oldProps) {\n        if (!props[key]) {\n            delete elm[key];\n        }\n    }\n    for (key in props) {\n        cur = props[key];\n        old = oldProps[key];\n        if (old !== cur && (key !== 'value' || elm[key] !== cur)) {\n            elm[key] = cur;\n        }\n    }\n}\nexports.propsModule = { create: updateProps, update: updateProps };\nexports.default = exports.propsModule;\n//# sourceMappingURL=props.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/props.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar raf = (typeof window !== 'undefined' && window.requestAnimationFrame) || setTimeout;\nvar nextFrame = function (fn) { raf(function () { raf(fn); }); };\nfunction setNextFrame(obj, prop, val) {\n    nextFrame(function () { obj[prop] = val; });\n}\nfunction updateStyle(oldVnode, vnode) {\n    var cur, name, elm = vnode.elm, oldStyle = oldVnode.data.style, style = vnode.data.style;\n    if (!oldStyle && !style)\n        return;\n    if (oldStyle === style)\n        return;\n    oldStyle = oldStyle || {};\n    style = style || {};\n    var oldHasDel = 'delayed' in oldStyle;\n    for (name in oldStyle) {\n        if (!style[name]) {\n            if (name[0] === '-' && name[1] === '-') {\n                elm.style.removeProperty(name);\n            }\n            else {\n                elm.style[name] = '';\n            }\n        }\n    }\n    for (name in style) {\n        cur = style[name];\n        if (name === 'delayed' && style.delayed) {\n            for (var name2 in style.delayed) {\n                cur = style.delayed[name2];\n                if (!oldHasDel || cur !== oldStyle.delayed[name2]) {\n                    setNextFrame(elm.style, name2, cur);\n                }\n            }\n        }\n        else if (name !== 'remove' && cur !== oldStyle[name]) {\n            if (name[0] === '-' && name[1] === '-') {\n                elm.style.setProperty(name, cur);\n            }\n            else {\n                elm.style[name] = cur;\n            }\n        }\n    }\n}\nfunction applyDestroyStyle(vnode) {\n    var style, name, elm = vnode.elm, s = vnode.data.style;\n    if (!s || !(style = s.destroy))\n        return;\n    for (name in style) {\n        elm.style[name] = style[name];\n    }\n}\nfunction applyRemoveStyle(vnode, rm) {\n    var s = vnode.data.style;\n    if (!s || !s.remove) {\n        rm();\n        return;\n    }\n    var name, elm = vnode.elm, i = 0, compStyle, style = s.remove, amount = 0, applied = [];\n    for (name in style) {\n        applied.push(name);\n        elm.style[name] = style[name];\n    }\n    compStyle = getComputedStyle(elm);\n    var props = compStyle['transition-property'].split(', ');\n    for (; i < props.length; ++i) {\n        if (applied.indexOf(props[i]) !== -1)\n            amount++;\n    }\n    elm.addEventListener('transitionend', function (ev) {\n        if (ev.target === elm)\n            --amount;\n        if (amount === 0)\n            rm();\n    });\n}\nexports.styleModule = {\n    create: updateStyle,\n    update: updateStyle,\n    destroy: applyDestroyStyle,\n    remove: applyRemoveStyle\n};\nexports.default = exports.styleModule;\n//# sourceMappingURL=style.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/style.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar h_1 = require(\"./h\");\nfunction copyToThunk(vnode, thunk) {\n    thunk.elm = vnode.elm;\n    vnode.data.fn = thunk.data.fn;\n    vnode.data.args = thunk.data.args;\n    thunk.data = vnode.data;\n    thunk.children = vnode.children;\n    thunk.text = vnode.text;\n    thunk.elm = vnode.elm;\n}\nfunction init(thunk) {\n    var cur = thunk.data;\n    var vnode = cur.fn.apply(undefined, cur.args);\n    copyToThunk(vnode, thunk);\n}\nfunction prepatch(oldVnode, thunk) {\n    var i, old = oldVnode.data, cur = thunk.data;\n    var oldArgs = old.args, args = cur.args;\n    if (old.fn !== cur.fn || oldArgs.length !== args.length) {\n        copyToThunk(cur.fn.apply(undefined, args), thunk);\n        return;\n    }\n    for (i = 0; i < args.length; ++i) {\n        if (oldArgs[i] !== args[i]) {\n            copyToThunk(cur.fn.apply(undefined, args), thunk);\n            return;\n        }\n    }\n    copyToThunk(oldVnode, thunk);\n}\nexports.thunk = function thunk(sel, key, fn, args) {\n    if (args === undefined) {\n        args = fn;\n        fn = key;\n        key = undefined;\n    }\n    return h_1.h(sel, {\n        key: key,\n        hook: { init: init, prepatch: prepatch },\n        fn: fn,\n        args: args\n    });\n};\nexports.default = exports.thunk;\n//# sourceMappingURL=thunk.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/thunk.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../types\");\nfunction overrideCommandStackOptions(container, options) {\n    var defaultOptions = container.get(types_1.TYPES.CommandStackOptions);\n    for (var p in options) {\n        if (options.hasOwnProperty(p))\n            defaultOptions[p] = options[p];\n    }\n    return defaultOptions;\n}\nexports.overrideCommandStackOptions = overrideCommandStackOptions;\n//# sourceMappingURL=command-stack-options.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/commands/command-stack-options.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_storage_1 = require(\"./model/smodel-storage\");\nvar types_1 = require(\"./types\");\nvar initialize_canvas_1 = require(\"./features/initialize-canvas\");\nvar logging_1 = require(\"../utils/logging\");\nvar action_dispatcher_1 = require(\"./actions/action-dispatcher\");\nvar action_handler_1 = require(\"./actions/action-handler\");\nvar command_stack_1 = require(\"./commands/command-stack\");\nvar smodel_factory_1 = require(\"./model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"./animations/animation-frame-syncer\");\nvar viewer_1 = require(\"./views/viewer\");\nvar viewer_options_1 = require(\"./views/viewer-options\");\nvar mouse_tool_1 = require(\"./views/mouse-tool\");\nvar key_tool_1 = require(\"./views/key-tool\");\nvar vnode_decorators_1 = require(\"./views/vnode-decorators\");\nvar view_1 = require(\"./views/view\");\nvar viewer_cache_1 = require(\"./views/viewer-cache\");\nvar dom_helper_1 = require(\"./views/dom-helper\");\nvar id_decorator_1 = require(\"./views/id-decorator\");\nvar command_1 = require(\"./commands/command\");\nvar defaultContainerModule = new inversify_1.ContainerModule(function (bind) {\n    // Logging ---------------------------------------------\n    bind(types_1.TYPES.ILogger).to(logging_1.NullLogger).inSingletonScope();\n    bind(types_1.TYPES.LogLevel).toConstantValue(logging_1.LogLevel.warn);\n    // Registries ---------------------------------------------\n    bind(types_1.TYPES.SModelRegistry).to(smodel_factory_1.SModelRegistry).inSingletonScope();\n    bind(types_1.TYPES.ActionHandlerRegistry).to(action_handler_1.ActionHandlerRegistry).inSingletonScope();\n    bind(types_1.TYPES.ViewRegistry).to(view_1.ViewRegistry).inSingletonScope();\n    // Model Creation ---------------------------------------------\n    bind(types_1.TYPES.IModelFactory).to(smodel_factory_1.SModelFactory).inSingletonScope();\n    // Action Dispatcher ---------------------------------------------\n    bind(types_1.TYPES.IActionDispatcher).to(action_dispatcher_1.ActionDispatcher).inSingletonScope();\n    bind(types_1.TYPES.IActionDispatcherProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.IActionDispatcher));\n            });\n        };\n    });\n    // Action handler\n    bind(types_1.TYPES.IActionHandlerInitializer).to(command_1.CommandActionHandlerInitializer);\n    // Command Stack ---------------------------------------------\n    bind(types_1.TYPES.ICommandStack).to(command_stack_1.CommandStack).inSingletonScope();\n    bind(types_1.TYPES.ICommandStackProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.ICommandStack));\n            });\n        };\n    });\n    bind(types_1.TYPES.CommandStackOptions).toConstantValue({\n        defaultDuration: 250,\n        undoHistoryLimit: 50\n    });\n    // Viewer ---------------------------------------------\n    bind(viewer_1.Viewer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IViewer).toDynamicValue(function (context) {\n        return context.container.get(viewer_1.Viewer);\n    }).inSingletonScope().whenTargetNamed('delegate');\n    bind(viewer_cache_1.ViewerCache).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IViewer).toDynamicValue(function (context) {\n        return context.container.get(viewer_cache_1.ViewerCache);\n    }).inSingletonScope().whenTargetIsDefault();\n    bind(types_1.TYPES.IViewerProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.IViewer));\n            });\n        };\n    });\n    bind(types_1.TYPES.ViewerOptions).toConstantValue(viewer_options_1.defaultViewerOptions());\n    bind(types_1.TYPES.DOMHelper).to(dom_helper_1.DOMHelper).inSingletonScope();\n    bind(types_1.TYPES.ModelRendererFactory).toFactory(function (context) {\n        return function (decorators) {\n            var viewRegistry = context.container.get(types_1.TYPES.ViewRegistry);\n            return new viewer_1.ModelRenderer(viewRegistry, decorators);\n        };\n    });\n    // Tools & Decorators --------------------------------------\n    bind(id_decorator_1.IdDecorator).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(id_decorator_1.IdDecorator);\n    }).inSingletonScope();\n    bind(mouse_tool_1.MouseTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(mouse_tool_1.MouseTool);\n    }).inSingletonScope();\n    bind(key_tool_1.KeyTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(key_tool_1.KeyTool);\n    }).inSingletonScope();\n    bind(vnode_decorators_1.FocusFixDecorator).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(vnode_decorators_1.FocusFixDecorator);\n    }).inSingletonScope();\n    bind(types_1.TYPES.PopupVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(id_decorator_1.IdDecorator);\n    }).inSingletonScope();\n    bind(mouse_tool_1.PopupMouseTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.PopupVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(mouse_tool_1.PopupMouseTool);\n    }).inSingletonScope();\n    bind(types_1.TYPES.HiddenVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(id_decorator_1.IdDecorator);\n    }).inSingletonScope();\n    // Animation Frame Sync ------------------------------------------\n    bind(types_1.TYPES.AnimationFrameSyncer).to(animation_frame_syncer_1.AnimationFrameSyncer).inSingletonScope();\n    // Canvas Initialization ---------------------------------------------\n    bind(types_1.TYPES.ICommand).toConstructor(initialize_canvas_1.InitializeCanvasBoundsCommand);\n    bind(initialize_canvas_1.CanvasBoundsInitializer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(initialize_canvas_1.CanvasBoundsInitializer);\n    }).inSingletonScope();\n    bind(types_1.TYPES.SModelStorage).to(smodel_storage_1.SModelStorage).inSingletonScope();\n});\nexports.default = defaultContainerModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar dom_helper_1 = require(\"./dom-helper\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar IdDecorator = /** @class */ (function () {\n    function IdDecorator(logger, domHelper) {\n        this.logger = logger;\n        this.domHelper = domHelper;\n    }\n    IdDecorator.prototype.decorate = function (vnode, element) {\n        var attrs = vnode_utils_1.getAttrs(vnode);\n        if (attrs.id !== undefined)\n            this.logger.warn(vnode, 'Overriding id of vnode (' + attrs.id + '). Make sure not to set it manually in view.');\n        attrs.id = this.domHelper.createUniqueDOMElementId(element);\n        if (!vnode.key)\n            vnode.key = element.id;\n        return vnode;\n    };\n    IdDecorator.prototype.postUpdate = function () {\n    };\n    IdDecorator = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(1, inversify_1.inject(types_1.TYPES.DOMHelper)),\n        __metadata(\"design:paramtypes\", [Object, dom_helper_1.DOMHelper])\n    ], IdDecorator);\n    return IdDecorator;\n}());\nexports.IdDecorator = IdDecorator;\n//# sourceMappingURL=id-decorator.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/id-decorator.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar bounds_manipulation_1 = require(\"./bounds-manipulation\");\nvar hidden_bounds_updater_1 = require(\"./hidden-bounds-updater\");\nvar layout_1 = require(\"./layout\");\nvar boundsModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ICommand).toConstructor(bounds_manipulation_1.SetBoundsCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(bounds_manipulation_1.RequestBoundsCommand);\n    bind(types_1.TYPES.HiddenVNodeDecorator).to(hidden_bounds_updater_1.HiddenBoundsUpdater).inSingletonScope();\n    bind(types_1.TYPES.Layouter).to(layout_1.Layouter).inSingletonScope();\n    bind(types_1.TYPES.LayoutRegistry).to(layout_1.LayoutRegistry).inSingletonScope();\n});\nexports.default = boundsModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar bounds_manipulation_1 = require(\"./bounds-manipulation\");\nvar model_1 = require(\"./model\");\nvar layout_1 = require(\"./layout\");\nvar model_2 = require(\"../export/model\");\nvar BoundsData = /** @class */ (function () {\n    function BoundsData() {\n    }\n    return BoundsData;\n}());\nexports.BoundsData = BoundsData;\n/**\n * Grabs the bounds from hidden SVG DOM elements, applies layouts and fires\n * ComputedBoundsActions.\n *\n * The actual bounds of an element can usually not be determined from the SModel\n * as they depend on the view implementation and CSS stylings. So the best way is\n * to grab them from a live (but hidden) SVG using getBBox().\n *\n * If an element is Alignable, and the top-left corner of its bounding box is not\n * the origin, we also issue a realign with the ComputedBoundsAction.\n */\nvar HiddenBoundsUpdater = /** @class */ (function () {\n    function HiddenBoundsUpdater(actionDispatcher, layouter) {\n        this.actionDispatcher = actionDispatcher;\n        this.layouter = layouter;\n        this.element2boundsData = new Map;\n    }\n    HiddenBoundsUpdater.prototype.decorate = function (vnode, element) {\n        if (model_1.isSizeable(element) || model_1.isLayoutContainer(element)) {\n            this.element2boundsData.set(element, {\n                vnode: vnode,\n                bounds: element.bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            });\n        }\n        if (element instanceof smodel_1.SModelRoot)\n            this.root = element;\n        return vnode;\n    };\n    HiddenBoundsUpdater.prototype.postUpdate = function () {\n        if (this.root !== undefined && model_2.isExportable(this.root) && this.root.export)\n            return;\n        this.getBoundsFromDOM();\n        this.layouter.layout(this.element2boundsData);\n        var resizes = [];\n        var realignments = [];\n        this.element2boundsData.forEach(function (boundsData, element) {\n            if (boundsData.boundsChanged && boundsData.bounds !== undefined)\n                resizes.push({\n                    elementId: element.id,\n                    newBounds: boundsData.bounds\n                });\n            if (boundsData.alignmentChanged && boundsData.alignment !== undefined)\n                realignments.push({\n                    elementId: element.id,\n                    newAlignment: boundsData.alignment\n                });\n        });\n        var revision = (this.root !== undefined) ? this.root.revision : undefined;\n        this.actionDispatcher.dispatch(new bounds_manipulation_1.ComputedBoundsAction(resizes, revision, realignments));\n        this.element2boundsData.clear();\n    };\n    HiddenBoundsUpdater.prototype.getBoundsFromDOM = function () {\n        var _this = this;\n        this.element2boundsData.forEach(function (boundsData, element) {\n            if (boundsData.bounds && model_1.isSizeable(element)) {\n                var vnode = boundsData.vnode;\n                if (vnode && vnode.elm) {\n                    var boundingBox = _this.getBounds(vnode.elm, element);\n                    if (model_1.isAlignable(element) && !(geometry_1.almostEquals(boundingBox.x, 0) && geometry_1.almostEquals(boundingBox.y, 0))) {\n                        boundsData.alignment = {\n                            x: -boundingBox.x,\n                            y: -boundingBox.y\n                        };\n                        boundsData.alignmentChanged = true;\n                    }\n                    var newBounds = {\n                        x: element.bounds.x,\n                        y: element.bounds.y,\n                        width: boundingBox.width,\n                        height: boundingBox.height\n                    };\n                    if (!(geometry_1.almostEquals(newBounds.x, element.bounds.x)\n                        && geometry_1.almostEquals(newBounds.y, element.bounds.y)\n                        && geometry_1.almostEquals(newBounds.width, element.bounds.width)\n                        && geometry_1.almostEquals(newBounds.height, element.bounds.height))) {\n                        boundsData.bounds = newBounds;\n                        boundsData.boundsChanged = true;\n                    }\n                }\n            }\n        });\n    };\n    HiddenBoundsUpdater.prototype.getBounds = function (elm, element) {\n        var bounds = elm.getBBox();\n        return {\n            x: bounds.x,\n            y: bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    HiddenBoundsUpdater = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.Layouter)),\n        __metadata(\"design:paramtypes\", [Object, layout_1.Layouter])\n    ], HiddenBoundsUpdater);\n    return HiddenBoundsUpdater;\n}());\nexports.HiddenBoundsUpdater = HiddenBoundsUpdater;\n//# sourceMappingURL=hidden-bounds-updater.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/hidden-bounds-updater.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar animation_1 = require(\"../../base/animations/animation\");\nvar ResizeAnimation = /** @class */ (function (_super) {\n    __extends(ResizeAnimation, _super);\n    function ResizeAnimation(model, elementResizes, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementResizes = elementResizes;\n        _this.reverse = reverse;\n        return _this;\n    }\n    ResizeAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.elementResizes.forEach(function (elementResize) {\n            var element = elementResize.element;\n            var newDimension = (_this.reverse) ? {\n                width: (1 - t) * elementResize.toDimension.width + t * elementResize.fromDimension.width,\n                height: (1 - t) * elementResize.toDimension.height + t * elementResize.fromDimension.height\n            } : {\n                width: (1 - t) * elementResize.fromDimension.width + t * elementResize.toDimension.width,\n                height: (1 - t) * elementResize.fromDimension.height + t * elementResize.toDimension.height\n            };\n            element.bounds = {\n                x: element.bounds.x,\n                y: element.bounds.y,\n                width: newDimension.width,\n                height: newDimension.height\n            };\n        });\n        return this.model;\n    };\n    return ResizeAnimation;\n}(animation_1.Animation));\nexports.ResizeAnimation = ResizeAnimation;\n//# sourceMappingURL=resize.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/resize.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar button_handler_1 = require(\"./button-handler\");\nvar buttonModule = new inversify_1.ContainerModule(function (bind) {\n    bind(button_handler_1.ButtonHandlerRegistry).toSelf().inSingletonScope();\n});\nexports.default = buttonModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/button/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar edit_routing_1 = require(\"./edit-routing\");\nvar edgeEditModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ICommand).toConstructor(edit_routing_1.SwitchEditModeCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(edit_routing_1.MoveRoutingHandleCommand);\n});\nexports.default = edgeEditModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/edit/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar expand_1 = require(\"./expand\");\nvar expandModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IButtonHandler).toConstructor(expand_1.ExpandButtonHandler);\n});\nexports.default = expandModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/expand/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar model_1 = require(\"./model\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar JSX = { createElement: snabbdom.svg };\nvar ExpandButtonView = /** @class */ (function () {\n    function ExpandButtonView() {\n    }\n    ExpandButtonView.prototype.render = function (button, context) {\n        var expandable = smodel_utils_1.findParentByFeature(button, model_1.isExpandable);\n        var path = (expandable !== undefined && expandable.expanded)\n            ? 'M 1,5 L 8,12 L 15,5 Z'\n            : 'M 1,8 L 8,15 L 8,1 Z';\n        return JSX.createElement(\"g\", { \"class-sprotty-button\": \"{true}\", \"class-enabled\": \"{button.enabled}\" },\n            JSX.createElement(\"rect\", { x: 0, y: 0, width: 16, height: 16, opacity: 0 }),\n            JSX.createElement(\"path\", { d: path }));\n    };\n    return ExpandButtonView;\n}());\nexports.ExpandButtonView = ExpandButtonView;\n//# sourceMappingURL=views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/expand/views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar export_1 = require(\"./export\");\nvar svg_exporter_1 = require(\"./svg-exporter\");\nvar exportSvgModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.KeyListener).to(export_1.ExportSvgKeyListener).inSingletonScope();\n    bind(types_1.TYPES.HiddenVNodeDecorator).to(export_1.ExportSvgDecorator).inSingletonScope();\n    bind(types_1.TYPES.ICommand).toConstructor(export_1.ExportSvgCommand);\n    bind(types_1.TYPES.SvgExporter).to(svg_exporter_1.SvgExporter).inSingletonScope();\n});\nexports.default = exportSvgModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/export/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar fade_1 = require(\"./fade\");\nvar fadeModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IVNodeDecorator).to(fade_1.ElementFader).inSingletonScope();\n});\nexports.default = fadeModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/fade/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar hover_1 = require(\"./hover\");\nvar popup_position_updater_1 = require(\"./popup-position-updater\");\nvar initializer_1 = require(\"./initializer\");\nvar hoverModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.PopupVNodeDecorator).to(popup_position_updater_1.PopupPositionUpdater).inSingletonScope();\n    bind(types_1.TYPES.IActionHandlerInitializer).to(initializer_1.PopupActionHandlerInitializer);\n    bind(types_1.TYPES.ICommand).toConstructor(hover_1.HoverFeedbackCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(hover_1.SetPopupModelCommand);\n    bind(types_1.TYPES.MouseListener).to(hover_1.HoverMouseListener);\n    bind(types_1.TYPES.PopupMouseListener).to(hover_1.PopupHoverMouseListener);\n    bind(types_1.TYPES.KeyListener).to(hover_1.HoverKeyListener);\n    bind(types_1.TYPES.HoverState).toConstantValue({\n        mouseOverTimer: undefined,\n        mouseOutTimer: undefined,\n        popupOpen: false,\n        previousPopupElement: undefined\n    });\n});\nexports.default = hoverModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar hover_1 = require(\"./hover\");\nvar smodel_factory_1 = require(\"../../base/model/smodel-factory\");\nvar center_fit_1 = require(\"../viewport/center-fit\");\nvar viewport_1 = require(\"../viewport/viewport\");\nvar move_1 = require(\"../move/move\");\nvar ClosePopupActionHandler = /** @class */ (function () {\n    function ClosePopupActionHandler() {\n        this.popupOpen = false;\n    }\n    ClosePopupActionHandler.prototype.handle = function (action) {\n        if (action.kind === hover_1.SetPopupModelCommand.KIND) {\n            this.popupOpen = action.newRoot.type !== smodel_factory_1.EMPTY_ROOT.type;\n        }\n        else if (this.popupOpen) {\n            return new hover_1.SetPopupModelAction({ id: smodel_factory_1.EMPTY_ROOT.id, type: smodel_factory_1.EMPTY_ROOT.type });\n        }\n    };\n    return ClosePopupActionHandler;\n}());\nvar PopupActionHandlerInitializer = /** @class */ (function () {\n    function PopupActionHandlerInitializer() {\n    }\n    PopupActionHandlerInitializer.prototype.initialize = function (registry) {\n        var closePopupActionHandler = new ClosePopupActionHandler();\n        registry.register(center_fit_1.FitToScreenCommand.KIND, closePopupActionHandler);\n        registry.register(center_fit_1.CenterCommand.KIND, closePopupActionHandler);\n        registry.register(viewport_1.ViewportCommand.KIND, closePopupActionHandler);\n        registry.register(hover_1.SetPopupModelCommand.KIND, closePopupActionHandler);\n        registry.register(move_1.MoveCommand.KIND, closePopupActionHandler);\n    };\n    PopupActionHandlerInitializer = __decorate([\n        inversify_1.injectable()\n    ], PopupActionHandlerInitializer);\n    return PopupActionHandlerInitializer;\n}());\nexports.PopupActionHandlerInitializer = PopupActionHandlerInitializer;\n//# sourceMappingURL=initializer.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/initializer.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar PopupPositionUpdater = /** @class */ (function () {\n    function PopupPositionUpdater(options) {\n        this.options = options;\n    }\n    PopupPositionUpdater.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    PopupPositionUpdater.prototype.postUpdate = function () {\n        var popupDiv = document.getElementById(this.options.popupDiv);\n        if (popupDiv !== null && typeof window !== 'undefined') {\n            var boundingClientRect = popupDiv.getBoundingClientRect();\n            if (window.innerHeight < boundingClientRect.height + boundingClientRect.top) {\n                popupDiv.style.top = (window.scrollY + window.innerHeight - boundingClientRect.height - 5) + 'px';\n            }\n            if (window.innerWidth < boundingClientRect.left + boundingClientRect.width) {\n                popupDiv.style.left = (window.scrollX + window.innerWidth - boundingClientRect.width - 5) + 'px';\n            }\n            if (boundingClientRect.left < 0) {\n                popupDiv.style.left = '0px';\n            }\n            if (boundingClientRect.top < 0) {\n                popupDiv.style.top = '0px';\n            }\n        }\n    };\n    PopupPositionUpdater = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], PopupPositionUpdater);\n    return PopupPositionUpdater;\n}());\nexports.PopupPositionUpdater = PopupPositionUpdater;\n//# sourceMappingURL=popup-position-updater.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/popup-position-updater.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar move_1 = require(\"./move\");\nvar moveModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.MouseListener).to(move_1.MoveMouseListener);\n    bind(types_1.TYPES.ICommand).toConstructor(move_1.MoveCommand);\n    bind(types_1.TYPES.IVNodeDecorator).to(move_1.LocationDecorator);\n    bind(types_1.TYPES.HiddenVNodeDecorator).to(move_1.LocationDecorator);\n});\nexports.default = moveModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/move/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar open_1 = require(\"./open\");\nvar openModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.MouseListener).to(open_1.OpenMouseListener);\n});\nexports.default = openModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/open/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar select_1 = require(\"./select\");\nvar selectModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ICommand).toConstructor(select_1.SelectCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(select_1.SelectAllCommand);\n    bind(types_1.TYPES.KeyListener).to(select_1.SelectKeyboardListener);\n    bind(types_1.TYPES.MouseListener).to(select_1.SelectMouseListener);\n});\nexports.default = selectModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/select/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar undo_redo_1 = require(\"./undo-redo\");\nvar undoRedoModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.KeyListener).to(undo_redo_1.UndoRedoKeyListener);\n});\nexports.default = undoRedoModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/undo-redo/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar center_fit_1 = require(\"./center-fit\");\nvar viewport_1 = require(\"./viewport\");\nvar scroll_1 = require(\"./scroll\");\nvar zoom_1 = require(\"./zoom\");\nvar viewportModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ICommand).toConstructor(center_fit_1.CenterCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(center_fit_1.FitToScreenCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(viewport_1.ViewportCommand);\n    bind(types_1.TYPES.KeyListener).to(center_fit_1.CenterKeyboardListener);\n    bind(types_1.TYPES.MouseListener).to(scroll_1.ScrollMouseListener);\n    bind(types_1.TYPES.MouseListener).to(zoom_1.ZoomMouseListener);\n});\nexports.default = viewportModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar LinearEdgeRouter = /** @class */ (function () {\n    function LinearEdgeRouter() {\n    }\n    LinearEdgeRouter.prototype.route = function (edge, options) {\n        if (options === void 0) { options = { minimalPointDistance: 2 }; }\n        var source = edge.source;\n        var target = edge.target;\n        if (source === undefined || target === undefined) {\n            return [];\n        }\n        var sourceAnchor;\n        var targetAnchor;\n        var rpCount = edge.routingPoints !== undefined ? edge.routingPoints.length : 0;\n        if (rpCount >= 1) {\n            // Use the first routing point as start anchor reference\n            var p0 = edge.routingPoints[0];\n            sourceAnchor = source.getTranslatedAnchor(p0, edge.parent, edge, edge.sourceAnchorCorrection);\n            // Use the last routing point as end anchor reference\n            var pn = edge.routingPoints[rpCount - 1];\n            targetAnchor = target.getTranslatedAnchor(pn, edge.parent, edge, edge.targetAnchorCorrection);\n        }\n        else {\n            // Use the target center as start anchor reference\n            var startRef = geometry_1.center(target.bounds);\n            sourceAnchor = source.getTranslatedAnchor(startRef, target.parent, edge, edge.sourceAnchorCorrection);\n            // Use the source center as end anchor reference\n            var endRef = geometry_1.center(source.bounds);\n            targetAnchor = target.getTranslatedAnchor(endRef, source.parent, edge, edge.targetAnchorCorrection);\n        }\n        var result = [];\n        result.push({ kind: 'source', x: sourceAnchor.x, y: sourceAnchor.y });\n        for (var i = 0; i < rpCount; i++) {\n            var p = edge.routingPoints[i];\n            if (i > 0 && i < rpCount - 1\n                || i === 0 && geometry_1.maxDistance(sourceAnchor, p) >= options.minimalPointDistance + (edge.sourceAnchorCorrection || 0)\n                || i === rpCount - 1 && geometry_1.maxDistance(p, targetAnchor) >= options.minimalPointDistance + (edge.targetAnchorCorrection || 0)) {\n                result.push({ kind: 'linear', x: p.x, y: p.y, pointIndex: i });\n            }\n        }\n        result.push({ kind: 'target', x: targetAnchor.x, y: targetAnchor.y });\n        return result;\n    };\n    LinearEdgeRouter = __decorate([\n        inversify_1.injectable()\n    ], LinearEdgeRouter);\n    return LinearEdgeRouter;\n}());\nexports.LinearEdgeRouter = LinearEdgeRouter;\n//# sourceMappingURL=routing.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/graph/routing.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_factory_1 = require(\"../base/model/smodel-factory\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar sgraph_1 = require(\"./sgraph\");\nvar model_1 = require(\"../features/button/model\");\nvar SGraphFactory = /** @class */ (function (_super) {\n    __extends(SGraphFactory, _super);\n    function SGraphFactory() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SGraphFactory.prototype.createElement = function (schema, parent) {\n        var child;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SChildElement))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SChildElement.\");\n            child = regElement;\n        }\n        else if (this.isNodeSchema(schema)) {\n            child = new sgraph_1.SNode();\n        }\n        else if (this.isPortSchema(schema)) {\n            child = new sgraph_1.SPort();\n        }\n        else if (this.isEdgeSchema(schema)) {\n            child = new sgraph_1.SEdge();\n        }\n        else if (this.isLabelSchema(schema)) {\n            child = new sgraph_1.SLabel();\n        }\n        else if (this.isCompartmentSchema(schema)) {\n            child = new sgraph_1.SCompartment();\n        }\n        else if (this.isButtonSchema(schema)) {\n            child = new model_1.SButton();\n        }\n        else {\n            child = new smodel_1.SChildElement();\n        }\n        return this.initializeChild(child, schema, parent);\n    };\n    SGraphFactory.prototype.createRoot = function (schema) {\n        var root;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SModelRoot))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SModelRoot.\");\n            root = regElement;\n        }\n        else if (this.isGraphSchema(schema)) {\n            root = new sgraph_1.SGraph();\n        }\n        else {\n            root = new smodel_1.SModelRoot();\n        }\n        return this.initializeRoot(root, schema);\n    };\n    SGraphFactory.prototype.isGraphSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'graph';\n    };\n    SGraphFactory.prototype.isNodeSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'node';\n    };\n    SGraphFactory.prototype.isPortSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'port';\n    };\n    SGraphFactory.prototype.isEdgeSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'edge';\n    };\n    SGraphFactory.prototype.isLabelSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'label';\n    };\n    SGraphFactory.prototype.isCompartmentSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'comp';\n    };\n    SGraphFactory.prototype.isButtonSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'button';\n    };\n    SGraphFactory = __decorate([\n        inversify_1.injectable()\n    ], SGraphFactory);\n    return SGraphFactory;\n}(smodel_factory_1.SModelFactory));\nexports.SGraphFactory = SGraphFactory;\n//# sourceMappingURL=sgraph-factory.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/graph/sgraph-factory.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar model_1 = require(\"../features/edit/model\");\nvar JSX = { createElement: snabbdom.svg };\n/**\n * IView component that turns an SGraph element and its children into a tree of virtual DOM elements.\n */\nvar SGraphView = /** @class */ (function () {\n    function SGraphView() {\n    }\n    SGraphView.prototype.render = function (model, context) {\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        return JSX.createElement(\"svg\", { \"class-sprotty-graph\": true },\n            JSX.createElement(\"g\", { transform: transform }, context.renderChildren(model)));\n    };\n    return SGraphView;\n}());\nexports.SGraphView = SGraphView;\nvar PolylineEdgeView = /** @class */ (function () {\n    function PolylineEdgeView() {\n    }\n    PolylineEdgeView.prototype.render = function (edge, context) {\n        var route = edge.route();\n        if (route.length === 0)\n            return this.renderDanglingEdge(\"Cannot compute route\", edge, context);\n        return JSX.createElement(\"g\", { \"class-sprotty-edge\": true, \"class-mouseover\": edge.hoverFeedback },\n            this.renderLine(edge, route, context),\n            this.renderAdditionals(edge, route, context),\n            context.renderChildren(edge, { route: route }));\n    };\n    PolylineEdgeView.prototype.renderLine = function (edge, segments, context) {\n        var firstPoint = segments[0];\n        var path = \"M \" + firstPoint.x + \",\" + firstPoint.y;\n        for (var i = 1; i < segments.length; i++) {\n            var p = segments[i];\n            path += \" L \" + p.x + \",\" + p.y;\n        }\n        return JSX.createElement(\"path\", { d: path });\n    };\n    PolylineEdgeView.prototype.renderAdditionals = function (edge, segments, context) {\n        return [];\n    };\n    PolylineEdgeView.prototype.renderDanglingEdge = function (message, edge, context) {\n        return JSX.createElement(\"text\", { \"class-sprotty-edge-dangling\": true, title: message }, \"?\");\n    };\n    return PolylineEdgeView;\n}());\nexports.PolylineEdgeView = PolylineEdgeView;\nvar SRoutingHandleView = /** @class */ (function () {\n    function SRoutingHandleView() {\n        this.minimalPointDistance = 10;\n    }\n    SRoutingHandleView.prototype.render = function (handle, context, args) {\n        if (args && args.route) {\n            var position = this.getPosition(handle, args.route);\n            if (position !== undefined) {\n                var node = JSX.createElement(\"circle\", { \"class-sprotty-routing-handle\": true, \"class-selected\": handle.selected, \"class-mouseover\": handle.hoverFeedback, cx: position.x, cy: position.y }); // Radius must be specified via CSS\n                vnode_utils_1.setAttr(node, 'data-kind', handle.kind);\n                return node;\n            }\n        }\n        // Fallback: Create an empty group\n        return JSX.createElement(\"g\", null);\n    };\n    SRoutingHandleView.prototype.getPosition = function (handle, route) {\n        if (handle.kind === 'line') {\n            return this.getLinePosition(handle, route);\n        }\n        else {\n            return this.getJunctionPosition(handle, route);\n        }\n    };\n    SRoutingHandleView.prototype.getJunctionPosition = function (handle, route) {\n        return route.find(function (rp) { return rp.pointIndex === handle.pointIndex; });\n    };\n    SRoutingHandleView.prototype.getLinePosition = function (handle, route) {\n        var parent = handle.parent;\n        if (model_1.isRoutable(parent)) {\n            var getIndex = function (rp) {\n                if (rp.pointIndex !== undefined)\n                    return rp.pointIndex;\n                else if (rp.kind === 'target')\n                    return parent.routingPoints.length;\n                else\n                    return -1;\n            };\n            var rp1 = void 0, rp2 = void 0;\n            for (var _i = 0, route_1 = route; _i < route_1.length; _i++) {\n                var rp = route_1[_i];\n                var i = getIndex(rp);\n                if (i <= handle.pointIndex && (rp1 === undefined || i > getIndex(rp1)))\n                    rp1 = rp;\n                if (i > handle.pointIndex && (rp2 === undefined || i < getIndex(rp2)))\n                    rp2 = rp;\n            }\n            if (rp1 !== undefined && rp2 !== undefined) {\n                // Skip this handle if its related line segment is not included in the route\n                if (getIndex(rp1) !== handle.pointIndex && handle.pointIndex >= 0) {\n                    var point = parent.routingPoints[handle.pointIndex];\n                    if (geometry_1.maxDistance(point, rp1) >= geometry_1.maxDistance(point, rp2))\n                        return undefined;\n                }\n                if (getIndex(rp2) !== handle.pointIndex + 1 && handle.pointIndex + 1 < parent.routingPoints.length) {\n                    var point = parent.routingPoints[handle.pointIndex + 1];\n                    if (geometry_1.maxDistance(point, rp1) < geometry_1.maxDistance(point, rp2))\n                        return undefined;\n                }\n                // Skip this handle if its related line segment is too short\n                if (geometry_1.maxDistance(rp1, rp2) >= this.minimalPointDistance)\n                    return geometry_1.centerOfLine(rp1, rp2);\n            }\n        }\n        return undefined;\n    };\n    return SRoutingHandleView;\n}());\nexports.SRoutingHandleView = SRoutingHandleView;\nvar SLabelView = /** @class */ (function () {\n    function SLabelView() {\n    }\n    SLabelView.prototype.render = function (label, context) {\n        var vnode = JSX.createElement(\"text\", { \"class-sprotty-label\": true }, label.text);\n        var subType = smodel_utils_1.getSubType(label);\n        if (subType)\n            vnode_utils_1.setAttr(vnode, 'class', subType);\n        return vnode;\n    };\n    return SLabelView;\n}());\nexports.SLabelView = SLabelView;\nvar SCompartmentView = /** @class */ (function () {\n    function SCompartmentView() {\n    }\n    SCompartmentView.prototype.render = function (model, context) {\n        var translate = \"translate(\" + model.bounds.x + \", \" + model.bounds.y + \")\";\n        var vnode = JSX.createElement(\"g\", { transform: translate, \"class-sprotty-comp\": \"{true}\" }, context.renderChildren(model));\n        var subType = smodel_utils_1.getSubType(model);\n        if (subType)\n            vnode_utils_1.setAttr(vnode, 'class', subType);\n        return vnode;\n    };\n    return SCompartmentView;\n}());\nexports.SCompartmentView = SCompartmentView;\n//# sourceMappingURL=views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/graph/views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar strings_1 = require(\"snabbdom-virtualize/strings\");\nvar PreRenderedView = /** @class */ (function () {\n    function PreRenderedView() {\n    }\n    PreRenderedView.prototype.render = function (model, context) {\n        var node = strings_1.default(model.code);\n        this.correctNamespace(node);\n        return node;\n    };\n    PreRenderedView.prototype.correctNamespace = function (node) {\n        if (node.sel === 'svg' || node.sel === 'g')\n            this.setNamespace(node, 'http://www.w3.org/2000/svg');\n    };\n    PreRenderedView.prototype.setNamespace = function (node, ns) {\n        if (node.data === undefined)\n            node.data = {};\n        node.data.ns = ns;\n        var children = node.children;\n        if (children !== undefined) {\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (typeof child !== 'string')\n                    this.setNamespace(child, ns);\n            }\n        }\n    };\n    return PreRenderedView;\n}());\nexports.PreRenderedView = PreRenderedView;\n//# sourceMappingURL=generic-views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/lib/generic-views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar JSX = { createElement: snabbdom.html };\nvar HtmlRootView = /** @class */ (function () {\n    function HtmlRootView() {\n    }\n    HtmlRootView.prototype.render = function (model, context) {\n        var root = JSX.createElement(\"div\", null, context.renderChildren(model));\n        for (var _i = 0, _a = model.classes; _i < _a.length; _i++) {\n            var c = _a[_i];\n            vnode_utils_1.setClass(root, c, true);\n        }\n        return root;\n    };\n    return HtmlRootView;\n}());\nexports.HtmlRootView = HtmlRootView;\n//# sourceMappingURL=html-views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/lib/html-views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../base/model/smodel\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar anchors_1 = require(\"../utils/anchors\");\nvar model_1 = require(\"../features/bounds/model\");\nvar model_2 = require(\"../features/move/model\");\nvar model_3 = require(\"../features/select/model\");\nvar sgraph_1 = require(\"../graph/sgraph\");\n/**\n * A node that is represented by a circle.\n */\nvar CircularNode = /** @class */ (function (_super) {\n    __extends(CircularNode, _super);\n    function CircularNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    Object.defineProperty(CircularNode.prototype, \"radius\", {\n        get: function () {\n            var d = Math.min(this.size.width, this.size.height);\n            return d > 0 ? d / 2 : 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularNode.prototype.getAnchor = function (refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var strokeCorrection = 0.5 * this.strokeWidth;\n        return anchors_1.computeCircleAnchor(this.position, this.radius, refPoint, offset + strokeCorrection);\n    };\n    return CircularNode;\n}(sgraph_1.SNode));\nexports.CircularNode = CircularNode;\n/**\n * A node that is represented by a rectangle.\n */\nvar RectangularNode = /** @class */ (function (_super) {\n    __extends(RectangularNode, _super);\n    function RectangularNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    RectangularNode.prototype.getAnchor = function (refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var strokeCorrection = 0.5 * this.strokeWidth;\n        return anchors_1.computeRectangleAnchor(this.bounds, refPoint, offset + strokeCorrection);\n    };\n    return RectangularNode;\n}(sgraph_1.SNode));\nexports.RectangularNode = RectangularNode;\n/**\n * A port that is represented by a circle.\n */\nvar CircularPort = /** @class */ (function (_super) {\n    __extends(CircularPort, _super);\n    function CircularPort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    Object.defineProperty(CircularPort.prototype, \"radius\", {\n        get: function () {\n            var d = Math.min(this.size.width, this.size.height);\n            return d > 0 ? d / 2 : 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularPort.prototype.getAnchor = function (refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var strokeCorrection = 0.5 * this.strokeWidth;\n        return anchors_1.computeCircleAnchor(this.position, this.radius, refPoint, offset + strokeCorrection);\n    };\n    return CircularPort;\n}(sgraph_1.SPort));\nexports.CircularPort = CircularPort;\n/**\n * A port that is represented by a rectangle.\n */\nvar RectangularPort = /** @class */ (function (_super) {\n    __extends(RectangularPort, _super);\n    function RectangularPort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    RectangularPort.prototype.getAnchor = function (refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var strokeCorrection = 0.5 * this.strokeWidth;\n        return anchors_1.computeRectangleAnchor(this.bounds, refPoint, offset + strokeCorrection);\n    };\n    return RectangularPort;\n}(sgraph_1.SPort));\nexports.RectangularPort = RectangularPort;\n/**\n * Root model element class for HTML content. Usually this is rendered with a `div` DOM element.\n */\nvar HtmlRoot = /** @class */ (function (_super) {\n    __extends(HtmlRoot, _super);\n    function HtmlRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.classes = [];\n        return _this;\n    }\n    return HtmlRoot;\n}(smodel_1.SModelRoot));\nexports.HtmlRoot = HtmlRoot;\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n */\nvar PreRenderedElement = /** @class */ (function (_super) {\n    __extends(PreRenderedElement, _super);\n    function PreRenderedElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PreRenderedElement;\n}(smodel_1.SChildElement));\nexports.PreRenderedElement = PreRenderedElement;\n/**\n * Same as PreRenderedElement, but with a position and a size.\n */\nvar ShapedPreRenderedElement = /** @class */ (function (_super) {\n    __extends(ShapedPreRenderedElement, _super);\n    function ShapedPreRenderedElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        _this.selected = false;\n        _this.alignment = geometry_1.ORIGIN_POINT;\n        return _this;\n    }\n    Object.defineProperty(ShapedPreRenderedElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShapedPreRenderedElement.prototype.hasFeature = function (feature) {\n        return feature === model_2.moveFeature || feature === model_1.boundsFeature || feature === model_3.selectFeature || feature === model_1.alignFeature;\n    };\n    return ShapedPreRenderedElement;\n}(PreRenderedElement));\nexports.ShapedPreRenderedElement = ShapedPreRenderedElement;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/lib/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar sgraph_1 = require(\"../graph/sgraph\");\nvar JSX = { createElement: snabbdom.svg };\nvar SvgViewportView = /** @class */ (function () {\n    function SvgViewportView() {\n    }\n    SvgViewportView.prototype.render = function (model, context) {\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        return JSX.createElement(\"svg\", null,\n            JSX.createElement(\"g\", { transform: transform }, context.renderChildren(model)));\n    };\n    return SvgViewportView;\n}());\nexports.SvgViewportView = SvgViewportView;\nvar CircularNodeView = /** @class */ (function () {\n    function CircularNodeView() {\n    }\n    CircularNodeView.prototype.render = function (node, context) {\n        var radius = this.getRadius(node);\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"circle\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, r: radius, cx: radius, cy: radius }),\n            context.renderChildren(node));\n    };\n    CircularNodeView.prototype.getRadius = function (node) {\n        var d = Math.min(node.size.width, node.size.height);\n        return d > 0 ? d / 2 : 0;\n    };\n    return CircularNodeView;\n}());\nexports.CircularNodeView = CircularNodeView;\nvar RectangularNodeView = /** @class */ (function () {\n    function RectangularNodeView() {\n    }\n    RectangularNodeView.prototype.render = function (node, context) {\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"rect\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, x: \"0\", y: \"0\", width: Math.max(node.size.width, 0), height: Math.max(node.size.height, 0) }),\n            context.renderChildren(node));\n    };\n    return RectangularNodeView;\n}());\nexports.RectangularNodeView = RectangularNodeView;\n//# sourceMappingURL=svg-views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/lib/svg-views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\n/**\n * This container module does NOT provide any binding for TYPES.ModelSource because that needs to be\n * done according to the needs of the application. You can choose between a local (LocalModelSource)\n * and a remote (e.g. WebSocketDiagramServer) implementation.\n */\nvar modelSourceModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ModelSourceProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.ModelSource));\n            });\n        };\n    });\n});\nexports.default = modelSourceModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar async_1 = require(\"../utils/async\");\nvar types_1 = require(\"../base/types\");\nvar action_handler_1 = require(\"../base/actions/action-handler\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar bounds_manipulation_1 = require(\"../features/bounds/bounds-manipulation\");\nvar model_matching_1 = require(\"../features/update/model-matching\");\nvar update_model_1 = require(\"../features/update/update-model\");\nvar hover_1 = require(\"../features/hover/hover\");\nvar model_source_1 = require(\"./model-source\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar file_saver_1 = require(\"file-saver\");\nvar expand_1 = require(\"../features/expand/expand\");\nvar diagram_state_1 = require(\"./diagram-state\");\n/**\n * A model source that allows to set and modify the model through function calls.\n * This class can be used as a facade over the action-based API of sprotty. It handles\n * actions for bounds calculation and model updates.\n */\nvar LocalModelSource = /** @class */ (function (_super) {\n    __extends(LocalModelSource, _super);\n    function LocalModelSource(actionDispatcher, actionHandlerRegistry, viewerOptions, logger, modelProvider, popupModelProvider, layoutEngine) {\n        var _this = _super.call(this, actionDispatcher, actionHandlerRegistry, viewerOptions) || this;\n        _this.logger = logger;\n        _this.modelProvider = modelProvider;\n        _this.popupModelProvider = popupModelProvider;\n        _this.layoutEngine = layoutEngine;\n        _this.currentRoot = {\n            type: 'NONE',\n            id: 'ROOT'\n        };\n        _this.diagramState = {\n            expansionState: new diagram_state_1.ExpansionState(_this.currentRoot)\n        };\n        /**\n         * When client layout is active, model updates are not applied immediately. Instead the\n         * model is rendered on a hidden canvas first to derive actual bounds. The promises listed\n         * here are resolved after the new bounds have been applied and the new model state has\n         * been actually applied to the visible canvas.\n         */\n        _this.pendingUpdates = [];\n        return _this;\n    }\n    Object.defineProperty(LocalModelSource.prototype, \"model\", {\n        get: function () {\n            return this.currentRoot;\n        },\n        set: function (root) {\n            this.setModel(root);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LocalModelSource.prototype.initialize = function (registry) {\n        _super.prototype.initialize.call(this, registry);\n        // Register model manipulation commands\n        registry.registerCommand(update_model_1.UpdateModelCommand);\n        // Register this model source\n        registry.register(bounds_manipulation_1.ComputedBoundsAction.KIND, this);\n        registry.register(hover_1.RequestPopupModelAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAllAction.KIND, this);\n    };\n    /**\n     * Set the model without incremental update.\n     */\n    LocalModelSource.prototype.setModel = function (newRoot) {\n        this.currentRoot = newRoot;\n        this.diagramState = {\n            expansionState: new diagram_state_1.ExpansionState(newRoot)\n        };\n        return this.submitModel(newRoot, false);\n    };\n    /**\n     * Apply an incremental update to the model with an animation showing the transition to\n     * the new state. If `newRoot` is undefined, the current root is submitted; in that case\n     * it is assumed that it has been modified before.\n     */\n    LocalModelSource.prototype.updateModel = function (newRoot) {\n        if (newRoot === undefined) {\n            return this.submitModel(this.currentRoot, true);\n        }\n        else {\n            this.currentRoot = newRoot;\n            return this.submitModel(newRoot, true);\n        }\n    };\n    /**\n     * If client layout is active, run a `RequestBoundsAction` and wait for the resulting\n     * `ComputedBoundsAction`, otherwise call `doSubmitModel(…)` directly.\n     */\n    LocalModelSource.prototype.submitModel = function (newRoot, update) {\n        if (this.viewerOptions.needsClientLayout) {\n            var deferred = new async_1.Deferred();\n            this.pendingUpdates.push(deferred);\n            this.actionDispatcher.dispatch(new bounds_manipulation_1.RequestBoundsAction(newRoot));\n            return deferred.promise;\n        }\n        else {\n            return this.doSubmitModel(newRoot, update);\n        }\n    };\n    /**\n     * Submit the given model with an `UpdateModelAction` or a `SetModelAction` depending on the\n     * `update` argument. If available, the model layout engine is invoked first.\n     */\n    LocalModelSource.prototype.doSubmitModel = function (newRoot, update, index) {\n        return __awaiter(this, void 0, void 0, function () {\n            var layoutResult, error_1, lastSubmittedModelType, updates, input;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.layoutEngine !== undefined)) return [3 /*break*/, 6];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 5, , 6]);\n                        layoutResult = this.layoutEngine.layout(newRoot, index);\n                        if (!(layoutResult instanceof Promise)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, layoutResult];\n                    case 2:\n                        newRoot = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        if (layoutResult !== undefined)\n                            newRoot = layoutResult;\n                        _a.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _a.sent();\n                        this.logger.error(this, error_1.toString(), error_1.stack);\n                        return [3 /*break*/, 6];\n                    case 6:\n                        lastSubmittedModelType = this.lastSubmittedModelType;\n                        this.lastSubmittedModelType = newRoot.type;\n                        updates = this.pendingUpdates;\n                        this.pendingUpdates = [];\n                        if (!(update && newRoot.type === lastSubmittedModelType)) return [3 /*break*/, 8];\n                        input = Array.isArray(update) ? update : newRoot;\n                        return [4 /*yield*/, this.actionDispatcher.dispatch(new update_model_1.UpdateModelAction(input))];\n                    case 7:\n                        _a.sent();\n                        return [3 /*break*/, 10];\n                    case 8: return [4 /*yield*/, this.actionDispatcher.dispatch(new set_model_1.SetModelAction(newRoot))];\n                    case 9:\n                        _a.sent();\n                        _a.label = 10;\n                    case 10:\n                        updates.forEach(function (d) { return d.resolve(); });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Modify the current model with an array of matches.\n     */\n    LocalModelSource.prototype.applyMatches = function (matches) {\n        var root = this.currentRoot;\n        model_matching_1.applyMatches(root, matches);\n        return this.submitModel(root, matches);\n    };\n    /**\n     * Modify the current model by adding new elements.\n     */\n    LocalModelSource.prototype.addElements = function (elements) {\n        var matches = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var e = elements_1[_i];\n            var anye = e;\n            if (anye.element !== undefined && anye.parentId !== undefined) {\n                matches.push({\n                    right: anye.element,\n                    rightParentId: anye.parentId\n                });\n            }\n            else if (anye.id !== undefined) {\n                matches.push({\n                    right: anye,\n                    rightParentId: this.currentRoot.id\n                });\n            }\n        }\n        return this.applyMatches(matches);\n    };\n    /**\n     * Modify the current model by removing elements.\n     */\n    LocalModelSource.prototype.removeElements = function (elements) {\n        var matches = [];\n        var index = new smodel_1.SModelIndex();\n        index.add(this.currentRoot);\n        for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n            var e = elements_2[_i];\n            var anye = e;\n            if (anye.elementId !== undefined && anye.parentId !== undefined) {\n                var element = index.getById(anye.elementId);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: anye.parentId\n                    });\n                }\n            }\n            else {\n                var element = index.getById(anye);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: this.currentRoot.id\n                    });\n                }\n            }\n        }\n        return this.applyMatches(matches);\n    };\n    // ----- Methods for handling incoming actions ----------------------------\n    LocalModelSource.prototype.handle = function (action) {\n        switch (action.kind) {\n            case set_model_1.RequestModelAction.KIND:\n                this.handleRequestModel(action);\n                break;\n            case bounds_manipulation_1.ComputedBoundsAction.KIND:\n                this.handleComputedBounds(action);\n                break;\n            case hover_1.RequestPopupModelAction.KIND:\n                this.handleRequestPopupModel(action);\n                break;\n            case svg_exporter_1.ExportSvgAction.KIND:\n                this.handleExportSvgAction(action);\n                break;\n            case expand_1.CollapseExpandAction.KIND:\n                this.handleCollapseExpandAction(action);\n                break;\n            case expand_1.CollapseExpandAllAction.KIND:\n                this.handleCollapseExpandAllAction(action);\n                break;\n        }\n    };\n    LocalModelSource.prototype.handleRequestModel = function (action) {\n        if (this.modelProvider)\n            this.currentRoot = this.modelProvider.getModel(this.diagramState, this.currentRoot);\n        this.submitModel(this.currentRoot, false);\n    };\n    LocalModelSource.prototype.handleComputedBounds = function (action) {\n        var root = this.currentRoot;\n        var index = new smodel_1.SModelIndex();\n        index.add(root);\n        for (var _i = 0, _a = action.bounds; _i < _a.length; _i++) {\n            var b = _a[_i];\n            var element = index.getById(b.elementId);\n            if (element !== undefined)\n                this.applyBounds(element, b.newBounds);\n        }\n        if (action.alignments !== undefined) {\n            for (var _b = 0, _c = action.alignments; _b < _c.length; _b++) {\n                var a = _c[_b];\n                var element = index.getById(a.elementId);\n                if (element !== undefined)\n                    this.applyAlignment(element, a.newAlignment);\n            }\n        }\n        this.doSubmitModel(root, true, index);\n    };\n    LocalModelSource.prototype.applyBounds = function (element, newBounds) {\n        var e = element;\n        e.position = { x: newBounds.x, y: newBounds.y };\n        e.size = { width: newBounds.width, height: newBounds.height };\n    };\n    LocalModelSource.prototype.applyAlignment = function (element, newAlignment) {\n        var e = element;\n        e.alignment = { x: newAlignment.x, y: newAlignment.y };\n    };\n    LocalModelSource.prototype.handleRequestPopupModel = function (action) {\n        if (this.popupModelProvider !== undefined) {\n            var element = smodel_utils_1.findElement(this.currentRoot, action.elementId);\n            var popupRoot = this.popupModelProvider.getPopupModel(action, element);\n            if (popupRoot !== undefined) {\n                popupRoot.canvasBounds = action.bounds;\n                this.actionDispatcher.dispatch(new hover_1.SetPopupModelAction(popupRoot));\n            }\n        }\n    };\n    LocalModelSource.prototype.handleExportSvgAction = function (action) {\n        var blob = new Blob([action.svg], { type: \"text/plain;charset=utf-8\" });\n        file_saver_1.saveAs(blob, \"diagram.svg\");\n    };\n    LocalModelSource.prototype.handleCollapseExpandAction = function (action) {\n        if (this.modelProvider !== undefined) {\n            this.diagramState.expansionState.apply(action);\n            var expandedModel = this.modelProvider.getModel(this.diagramState, this.currentRoot);\n            this.updateModel(expandedModel);\n        }\n    };\n    LocalModelSource.prototype.handleCollapseExpandAllAction = function (action) {\n        if (this.modelProvider !== undefined) {\n            if (action.expand) {\n                // Expanding all elements locally is currently not supported\n            }\n            else {\n                this.diagramState.expansionState.collapseAll();\n            }\n            var expandedModel = this.modelProvider.getModel(this.diagramState, this.currentRoot);\n            this.updateModel(expandedModel);\n        }\n    };\n    LocalModelSource = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.ActionHandlerRegistry)),\n        __param(2, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(3, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(4, inversify_1.inject(types_1.TYPES.StateAwareModelProvider)), __param(4, inversify_1.optional()),\n        __param(5, inversify_1.inject(types_1.TYPES.IPopupModelProvider)), __param(5, inversify_1.optional()),\n        __param(6, inversify_1.inject(types_1.TYPES.IModelLayoutEngine)), __param(6, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Object, action_handler_1.ActionHandlerRegistry, Object, Object, Object, Object, Object])\n    ], LocalModelSource);\n    return LocalModelSource;\n}(model_source_1.ModelSource));\nexports.LocalModelSource = LocalModelSource;\n//# sourceMappingURL=local-model-source.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/local-model-source.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar logging_1 = require(\"../utils/logging\");\nvar types_1 = require(\"../base/types\");\nvar LoggingAction = /** @class */ (function () {\n    function LoggingAction(severity, time, caller, message, params) {\n        this.severity = severity;\n        this.time = time;\n        this.caller = caller;\n        this.message = message;\n        this.params = params;\n        this.kind = LoggingAction.KIND;\n    }\n    LoggingAction.KIND = 'logging';\n    return LoggingAction;\n}());\nexports.LoggingAction = LoggingAction;\n/**\n * A logger that forwards messages of type 'error', 'warn', and 'info' to the model source.\n */\nvar ForwardingLogger = /** @class */ (function () {\n    function ForwardingLogger(modelSourceProvider, logLevel) {\n        this.modelSourceProvider = modelSourceProvider;\n        this.logLevel = logLevel;\n    }\n    ForwardingLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.error)\n            this.forward(thisArg, message, logging_1.LogLevel.error, params);\n    };\n    ForwardingLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.warn)\n            this.forward(thisArg, message, logging_1.LogLevel.warn, params);\n    };\n    ForwardingLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.info)\n            this.forward(thisArg, message, logging_1.LogLevel.info, params);\n    };\n    ForwardingLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.log) {\n            // We cannot forward 'log' level messages since that would lead to endless loops\n            try {\n                var caller = typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg);\n                console.log.apply(thisArg, [caller + ': ' + message].concat(params));\n            }\n            catch (error) { }\n        }\n    };\n    ForwardingLogger.prototype.forward = function (thisArg, message, logLevel, params) {\n        var date = new Date();\n        var action = new LoggingAction(logging_1.LogLevel[logLevel], date.toLocaleTimeString(), typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg), message, params.map(function (p) { return JSON.stringify(p); }));\n        this.modelSourceProvider().then(function (modelSource) {\n            try {\n                modelSource.handle(action);\n            }\n            catch (error) {\n                try {\n                    console.log.apply(thisArg, [message, action, error]);\n                }\n                catch (error) { }\n            }\n        });\n    };\n    ForwardingLogger = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelSourceProvider)),\n        __param(1, inversify_1.inject(types_1.TYPES.LogLevel)),\n        __metadata(\"design:paramtypes\", [Function, Number])\n    ], ForwardingLogger);\n    return ForwardingLogger;\n}());\nexports.ForwardingLogger = ForwardingLogger;\n//# sourceMappingURL=logging.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/logging.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar diagram_server_1 = require(\"./diagram-server\");\n/**\n * An external ModelSource that connects to the model provider using a\n * websocket.\n */\nvar WebSocketDiagramServer = /** @class */ (function (_super) {\n    __extends(WebSocketDiagramServer, _super);\n    function WebSocketDiagramServer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WebSocketDiagramServer.prototype.listen = function (webSocket) {\n        var _this = this;\n        webSocket.addEventListener('message', function (event) {\n            _this.messageReceived(event.data);\n        });\n        webSocket.addEventListener('error', function (event) {\n            _this.logger.error(_this, 'error event received', event);\n        });\n        this.webSocket = webSocket;\n    };\n    WebSocketDiagramServer.prototype.disconnect = function () {\n        if (this.webSocket) {\n            this.webSocket.close();\n            this.webSocket = undefined;\n        }\n    };\n    WebSocketDiagramServer.prototype.sendMessage = function (message) {\n        if (this.webSocket) {\n            this.webSocket.send(JSON.stringify(message));\n        }\n        else {\n            throw new Error('WebSocket is not connected');\n        }\n    };\n    WebSocketDiagramServer = __decorate([\n        inversify_1.injectable()\n    ], WebSocketDiagramServer);\n    return WebSocketDiagramServer;\n}(diagram_server_1.DiagramServer));\nexports.WebSocketDiagramServer = WebSocketDiagramServer;\n//# sourceMappingURL=websocket.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/websocket.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nvar Deferred = /** @class */ (function () {\n    function Deferred() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n    }\n    return Deferred;\n}());\nexports.Deferred = Deferred;\n//# sourceMappingURL=async.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/async.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction rgb(red, green, blue) {\n    return {\n        red: red,\n        green: green,\n        blue: blue\n    };\n}\nexports.rgb = rgb;\nfunction toSVG(c) {\n    return 'rgb(' + c.red + ',' + c.green + ',' + c.blue + ')';\n}\nexports.toSVG = toSVG;\nvar ColorMap = /** @class */ (function () {\n    function ColorMap(stops) {\n        this.stops = stops;\n    }\n    ColorMap.prototype.getColor = function (t) {\n        t = Math.max(0, Math.min(0.99999999, t));\n        var i = Math.floor(t * this.stops.length);\n        return this.stops[i];\n    };\n    return ColorMap;\n}());\nexports.ColorMap = ColorMap;\n//# sourceMappingURL=color.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/color.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar Buffer = require('buffer').Buffer;\n\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nvar StringDecoder = exports.StringDecoder = function(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/string_decoder/index.js","/**\n * This file automatically generated from `pre-publish.js`.\n * Do not manually edit.\n */\n\nmodule.exports = {\n  \"area\": true,\n  \"base\": true,\n  \"br\": true,\n  \"col\": true,\n  \"embed\": true,\n  \"hr\": true,\n  \"img\": true,\n  \"input\": true,\n  \"keygen\": true,\n  \"link\": true,\n  \"menuitem\": true,\n  \"meta\": true,\n  \"param\": true,\n  \"source\": true,\n  \"track\": true,\n  \"wbr\": true\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/void-elements/index.js","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    var _disposable = { dispose: function () { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nvar CallbackList = /** @class */ (function () {\r\n    function CallbackList() {\r\n    }\r\n    CallbackList.prototype.add = function (callback, context, bucket) {\r\n        var _this = this;\r\n        if (context === void 0) { context = null; }\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: function () { return _this.remove(callback, context); } });\r\n        }\r\n    };\r\n    CallbackList.prototype.remove = function (callback, context) {\r\n        if (context === void 0) { context = null; }\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    };\r\n    CallbackList.prototype.invoke = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    CallbackList.prototype.isEmpty = function () {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    };\r\n    CallbackList.prototype.dispose = function () {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    };\r\n    return CallbackList;\r\n}());\r\nvar Emitter = /** @class */ (function () {\r\n    function Emitter(_options) {\r\n        this._options = _options;\r\n    }\r\n    Object.defineProperty(Emitter.prototype, \"event\", {\r\n        /**\r\n         * For the public to allow to subscribe\r\n         * to events from this Emitter\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._event) {\r\n                this._event = function (listener, thisArgs, disposables) {\r\n                    if (!_this._callbacks) {\r\n                        _this._callbacks = new CallbackList();\r\n                    }\r\n                    if (_this._options && _this._options.onFirstListenerAdd && _this._callbacks.isEmpty()) {\r\n                        _this._options.onFirstListenerAdd(_this);\r\n                    }\r\n                    _this._callbacks.add(listener, thisArgs);\r\n                    var result;\r\n                    result = {\r\n                        dispose: function () {\r\n                            _this._callbacks.remove(listener, thisArgs);\r\n                            result.dispose = Emitter._noop;\r\n                            if (_this._options && _this._options.onLastListenerRemove && _this._callbacks.isEmpty()) {\r\n                                _this._options.onLastListenerRemove(_this);\r\n                            }\r\n                        }\r\n                    };\r\n                    if (Array.isArray(disposables)) {\r\n                        disposables.push(result);\r\n                    }\r\n                    return result;\r\n                };\r\n            }\r\n            return this._event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    Emitter.prototype.fire = function (event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    };\r\n    Emitter.prototype.dispose = function () {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    };\r\n    Emitter._noop = function () { };\r\n    return Emitter;\r\n}());\r\nexports.Emitter = Emitter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/events.js","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar toString = Object.prototype.toString;\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return toString.call(value) === '[object Error]';\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return toString.call(value) === '[object Function]';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(function (elem) { return string(elem); });\r\n}\r\nexports.stringArray = stringArray;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/is.js","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Is = require(\"./is\");\r\nvar messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nvar messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nvar messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nvar events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nvar cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nvar linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nvar ConnectionError = /** @class */ (function (_super) {\r\n    __extends(ConnectionError, _super);\r\n    function ConnectionError(code, message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = code;\r\n        Object.setPrototypeOf(_this, ConnectionError.prototype);\r\n        return _this;\r\n    }\r\n    return ConnectionError;\r\n}(Error));\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    var sequenceNumber = 0;\r\n    var notificationSquenceNumber = 0;\r\n    var unknownResponseSquenceNumber = 0;\r\n    var version = '2.0';\r\n    var starRequestHandler = undefined;\r\n    var requestHandlers = Object.create(null);\r\n    var starNotificationHandler = undefined;\r\n    var notificationHandlers = Object.create(null);\r\n    var timer;\r\n    var messageQueue = new linkedMap_1.LinkedMap();\r\n    var responsePromises = Object.create(null);\r\n    var requestTokens = Object.create(null);\r\n    var trace = Trace.Off;\r\n    var tracer;\r\n    var state = ConnectionState.New;\r\n    var errorEmitter = new events_1.Emitter();\r\n    var closeEmitter = new events_1.Emitter();\r\n    var unhandledNotificationEmitter = new events_1.Emitter();\r\n    var disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(function () {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        var message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    var callback = function (message) {\r\n        try {\r\n            // We have recevied a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                var key = createRequestQueueKey(message.params.id);\r\n                var toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    var response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            var message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            var message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            var message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        var element = requestHandlers[requestMessage.method];\r\n        var type;\r\n        var requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        var startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            var cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            var tokenKey_1 = String(requestMessage.id);\r\n            requestTokens[tokenKey_1] = cancellationSource;\r\n            try {\r\n                var handlerResult = void 0;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler.apply(void 0, requestMessage.params.concat([cancellationSource.token])) : starRequestHandler.apply(void 0, [requestMessage.method].concat(requestMessage.params, [cancellationSource.token]));\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                var promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey_1];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then(function (resultOrError) {\r\n                        delete requestTokens[tokenKey_1];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, function (error) {\r\n                        delete requestTokens[tokenKey_1];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, \"Request \" + requestMessage.method + \" failed with message: \" + error.message), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, \"Request \" + requestMessage.method + \" failed unexpectedly without providing any details.\"), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey_1];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey_1];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, \"Request \" + requestMessage.method + \" failed with message: \" + error.message), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, \"Request \" + requestMessage.method + \" failed unexpectedly without providing any details.\"), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, \"Unhandled method \" + requestMessage.method), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(\"Received response message without id: Error is: \\n\" + JSON.stringify(responseMessage.error, undefined, 4));\r\n            }\r\n            else {\r\n                logger.error(\"Received response message without id. No further error information provided.\");\r\n            }\r\n        }\r\n        else {\r\n            var key = String(responseMessage.id);\r\n            var responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        var error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(\"Response handler '\" + responsePromise.method + \"' failed with message: \" + error.message);\r\n                    }\r\n                    else {\r\n                        logger.error(\"Response handler '\" + responsePromise.method + \"' failed unexpectedly.\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        var type = undefined;\r\n        var notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = function (params) {\r\n                var id = params.id;\r\n                var source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            var element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler.apply(void 0, message.params) : starNotificationHandler.apply(void 0, [message.method].concat(message.params));\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(\"Notification handler '\" + message.method + \"' failed with message: \" + error.message);\r\n                }\r\n                else {\r\n                    logger.error(\"Notification handler '\" + message.method + \"' failed unexpectedly.\");\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(\"Received message which is neither a response nor a notification message:\\n\" + JSON.stringify(message, null, 4));\r\n        // Test whether we find an id to reject the promise\r\n        var responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            var key = String(responseMessage.id);\r\n            var responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose && message.params) {\r\n            data = \"Params: \" + JSON.stringify(message.params, null, 4) + \"\\n\\n\";\r\n        }\r\n        tracer.log(\"Sending request '\" + message.method + \" - (\" + message.id + \")'.\", data);\r\n    }\r\n    function traceSendNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose) {\r\n            if (message.params) {\r\n                data = \"Params: \" + JSON.stringify(message.params, null, 4) + \"\\n\\n\";\r\n            }\r\n            else {\r\n                data = 'No parameters provided.\\n\\n';\r\n            }\r\n        }\r\n        tracer.log(\"Sending notification '\" + message.method + \"'.\", data);\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose) {\r\n            if (message.error && message.error.data) {\r\n                data = \"Error data: \" + JSON.stringify(message.error.data, null, 4) + \"\\n\\n\";\r\n            }\r\n            else {\r\n                if (message.result) {\r\n                    data = \"Result: \" + JSON.stringify(message.result, null, 4) + \"\\n\\n\";\r\n                }\r\n                else if (message.error === void 0) {\r\n                    data = 'No result returned.\\n\\n';\r\n                }\r\n            }\r\n        }\r\n        tracer.log(\"Sending response '\" + method + \" - (\" + message.id + \")'. Processing request took \" + (Date.now() - startTime) + \"ms\");\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose && message.params) {\r\n            data = \"Params: \" + JSON.stringify(message.params, null, 4) + \"\\n\\n\";\r\n        }\r\n        tracer.log(\"Received request '\" + message.method + \" - (\" + message.id + \")'.\", data);\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose) {\r\n            if (message.params) {\r\n                data = \"Params: \" + JSON.stringify(message.params, null, 4) + \"\\n\\n\";\r\n            }\r\n            else {\r\n                data = 'No parameters provided.\\n\\n';\r\n            }\r\n        }\r\n        tracer.log(\"Received notification '\" + message.method + \"'.\", data);\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose) {\r\n            if (message.error && message.error.data) {\r\n                data = \"Error data: \" + JSON.stringify(message.error.data, null, 4) + \"\\n\\n\";\r\n            }\r\n            else {\r\n                if (message.result) {\r\n                    data = \"Result: \" + JSON.stringify(message.result, null, 4) + \"\\n\\n\";\r\n                }\r\n                else if (message.error === void 0) {\r\n                    data = 'No result returned.\\n\\n';\r\n                }\r\n            }\r\n        }\r\n        if (responsePromise) {\r\n            var error = message.error ? \" Request failed: \" + message.error.message + \" (\" + message.error.code + \").\" : '';\r\n            tracer.log(\"Received response '\" + responsePromise.method + \" - (\" + message.id + \")' in \" + (Date.now() - responsePromise.timerStart) + \"ms.\" + error, data);\r\n        }\r\n        else {\r\n            tracer.log(\"Received response \" + message.id + \" without active response promise.\", data);\r\n        }\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        var result;\r\n        var numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (var i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (var i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    var connection = {\r\n        sendNotification: function (type) {\r\n            var params = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                params[_i - 1] = arguments[_i];\r\n            }\r\n            throwIfClosedOrDisposed();\r\n            var method;\r\n            var messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            var notificationMessage = {\r\n                jsonrpc: version,\r\n                method: Is.string(type) ? type : type.method,\r\n                params: messageParams\r\n            };\r\n            traceSendNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: function (type, handler) {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler: handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type: type, handler: handler };\r\n                }\r\n            }\r\n        },\r\n        sendRequest: function (type) {\r\n            var params = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                params[_i - 1] = arguments[_i];\r\n            }\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            var method;\r\n            var messageParams;\r\n            var token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        var last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(function (value) { return undefinedToNull(value); });\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(function (value) { return undefinedToNull(value); });\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                var numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            var id = sequenceNumber++;\r\n            var result = new Promise(function (resolve, reject) {\r\n                var requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                var responsePromise = { method: method, timerStart: Date.now(), resolve: resolve, reject: reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(function () {\r\n                    connection.sendNotification(CancelNotification.type, { id: id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: function (type, handler) {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler: handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type: type, handler: handler };\r\n                }\r\n            }\r\n        },\r\n        trace: function (_value, _tracer, sendNotification) {\r\n            if (sendNotification === void 0) { sendNotification = false; }\r\n            trace = _value;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: function () {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            var error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach(function (key) {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: function () {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: function () {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, function (params) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    var reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    var writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/main.js","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Is = require(\"./utils/is\");\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar DocumentFilter;\n(function (DocumentFilter) {\n    function is(value) {\n        let candidate = value;\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\n    }\n    DocumentFilter.is = is;\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new feature\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/registerCapability');\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered feature\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/unregisterCapability');\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\n;\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type [InitializeParams](#InitializeParams)\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.type = new vscode_jsonrpc_1.RequestType('initialize');\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeError`;\n */\nvar InitializeError;\n(function (InitializeError) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeError.unknownProtocolVersion = 1;\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\n/**\n * The intialized notification is send from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.type = new vscode_jsonrpc_1.NotificationType('initialized');\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client descides to shutdown the\n * server. The only notification that is sent after a shudown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.type = new vscode_jsonrpc_1.RequestType0('shutdown');\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.type = new vscode_jsonrpc_1.NotificationType0('exit');\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\n//---- Configuration notification ----\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeConfiguration');\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/showMessage');\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the clinet to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.type = new vscode_jsonrpc_1.RequestType('window/showMessageRequest');\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/logMessage');\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.type = new vscode_jsonrpc_1.NotificationType('telemetry/event');\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didOpen');\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didChange');\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists\n * where the document's uri points to (e.g. if the document's uri is a file uri\n * the truth now exists on disk).\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didClose');\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didSave');\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/willSave');\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/willSaveWaitUntil');\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\n//---- File eventing ----\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the lanaguage client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWatchedFiles');\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\n//---- Diagnostic notification ----\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/publishDiagnostics');\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\n * or a Thenable that resolves to such.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/completion');\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type [CompletionItem](#CompletionItem) the response\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.type = new vscode_jsonrpc_1.RequestType('completionItem/resolve');\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\n//---- Hover Support -------------------------------\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\n * type [Hover](#Hover) or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/hover');\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/signatureHelp');\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\n//---- Goto Definition -------------------------------------\n/**\n * A request to resolve the defintion location of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the response is of type [Definition](#Definition) or a\n * Thenable that resolves to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/definition');\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type [ReferenceParams](#ReferenceParams) the response is of type\n * [Location[]](#Location) or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/references');\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\n//---- Document Highlight ----------------------------------\n/**\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\n * text document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the request reponse is of type [DocumentHighlight[]]\n * (#DocumentHighlight) or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentHighlight');\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\n//---- Document Symbol Provider ---------------------------\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentSymbol');\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\n//---- Workspace Symbol Provider ---------------------------\n/**\n * A request to list project-wide symbols matching the query string given\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\n * resolves to such.\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.type = new vscode_jsonrpc_1.RequestType('workspace/symbol');\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeAction');\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeLens');\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.type = new vscode_jsonrpc_1.RequestType('codeLens/resolve');\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\n/**\n * A request to to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/formatting');\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\n/**\n * A request to to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rangeFormatting');\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/onTypeFormatting');\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rename');\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentLink');\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type [DocumentLink](#DocumentLink) the response\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.type = new vscode_jsonrpc_1.RequestType('documentLink/resolve');\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.type = new vscode_jsonrpc_1.RequestType('workspace/executeCommand');\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.type = new vscode_jsonrpc_1.RequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vscode-base-languageclient/lib/protocol.js\n// module id = 191\n// module chunks = 0","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-define.js\n// module id = 192\n// module chunks = 0 1 2","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n// WEBPACK FOOTER //\n// ./~/timers-browserify/main.js","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst toString = Object.prototype.toString;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return toString.call(value) === '[object String]';\n}\nexports.string = string;\nfunction number(value) {\n    return toString.call(value) === '[object Number]';\n}\nexports.number = number;\nfunction error(value) {\n    return toString.call(value) === '[object Error]';\n}\nexports.error = error;\nfunction func(value) {\n    return toString.call(value) === '[object Function]';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vscode-base-languageclient/lib/utils/is.js\n// module id = 194\n// module chunks = 0","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return (b64.length * 3 / 4) - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr((len * 3 / 4) - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0; i < l; i += 4) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/base64-js/index.js","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/ieee754/index.js","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/lz-string/libs/lz-string.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar services_1 = require(\"vscode-base-languageclient/lib/services\");\nexports.Disposable = services_1.Disposable;\nvar DisposableCollection = /** @class */ (function () {\n    function DisposableCollection() {\n        this.disposables = [];\n    }\n    DisposableCollection.prototype.dispose = function () {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop().dispose();\n        }\n    };\n    DisposableCollection.prototype.push = function (disposable) {\n        var disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose: function () {\n                var index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        };\n    };\n    return DisposableCollection;\n}());\nexports.DisposableCollection = DisposableCollection;\n//# sourceMappingURL=disposable.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/disposable.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/lib/_stream_passthrough.js","'use strict';\n\n/*<replacement>*/\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/lib/internal/streams/BufferList.js","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n// WEBPACK FOOTER //\n// ./~/setimmediate/setImmediate.js","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/util-deprecate/browser.js","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nvar Is = require(\"./is\");\r\nvar DefaultSize = 8192;\r\nvar CR = new Buffer('\\r', 'ascii')[0];\r\nvar LF = new Buffer('\\n', 'ascii')[0];\r\nvar CRLF = '\\r\\n';\r\nvar MessageBuffer = /** @class */ (function () {\r\n    function MessageBuffer(encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = new Buffer(DefaultSize);\r\n    }\r\n    MessageBuffer.prototype.append = function (chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) == 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = new Buffer(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = new Buffer(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    };\r\n    MessageBuffer.prototype.tryReadHeaders = function () {\r\n        var result = undefined;\r\n        var current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        var headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach(function (header) {\r\n            var index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            var key = header.substr(0, index);\r\n            var value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        var nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    };\r\n    MessageBuffer.prototype.tryReadContent = function (length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        var result = this.buffer.toString(this.encoding, 0, length);\r\n        var nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    };\r\n    Object.defineProperty(MessageBuffer.prototype, \"numberOfBytes\", {\r\n        get: function () {\r\n            return this.index;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return MessageBuffer;\r\n}());\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nvar AbstractMessageReader = /** @class */ (function () {\r\n    function AbstractMessageReader() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    AbstractMessageReader.prototype.dispose = function () {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    };\r\n    Object.defineProperty(AbstractMessageReader.prototype, \"onError\", {\r\n        get: function () {\r\n            return this.errorEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageReader.prototype.fireError = function (error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    };\r\n    Object.defineProperty(AbstractMessageReader.prototype, \"onClose\", {\r\n        get: function () {\r\n            return this.closeEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageReader.prototype.fireClose = function () {\r\n        this.closeEmitter.fire(undefined);\r\n    };\r\n    Object.defineProperty(AbstractMessageReader.prototype, \"onPartialMessage\", {\r\n        get: function () {\r\n            return this.partialMessageEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageReader.prototype.firePartialMessage = function (info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    };\r\n    AbstractMessageReader.prototype.asError = function (error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(\"Reader recevied error. Reason: \" + (Is.string(error.message) ? error.message : 'unknown'));\r\n        }\r\n    };\r\n    return AbstractMessageReader;\r\n}());\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nvar StreamMessageReader = /** @class */ (function (_super) {\r\n    __extends(StreamMessageReader, _super);\r\n    function StreamMessageReader(readable, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        var _this = _super.call(this) || this;\r\n        _this.readable = readable;\r\n        _this.buffer = new MessageBuffer(encoding);\r\n        _this._partialMessageTimeout = 10000;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(StreamMessageReader.prototype, \"partialMessageTimeout\", {\r\n        get: function () {\r\n            return this._partialMessageTimeout;\r\n        },\r\n        set: function (timeout) {\r\n            this._partialMessageTimeout = timeout;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StreamMessageReader.prototype.listen = function (callback) {\r\n        var _this = this;\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', function (data) {\r\n            _this.onData(data);\r\n        });\r\n        this.readable.on('error', function (error) { return _this.fireError(error); });\r\n        this.readable.on('close', function () { return _this.fireClose(); });\r\n    };\r\n    StreamMessageReader.prototype.onData = function (data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                var headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                var contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                var length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't recevied the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    };\r\n    StreamMessageReader.prototype.clearPartialMessageTimer = function () {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    };\r\n    StreamMessageReader.prototype.setPartialMessageTimer = function () {\r\n        var _this = this;\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout(function (token, timeout) {\r\n            _this.partialMessageTimer = undefined;\r\n            if (token === _this.messageToken) {\r\n                _this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                _this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    };\r\n    return StreamMessageReader;\r\n}(AbstractMessageReader));\r\nexports.StreamMessageReader = StreamMessageReader;\r\nvar IPCMessageReader = /** @class */ (function (_super) {\r\n    __extends(IPCMessageReader, _super);\r\n    function IPCMessageReader(process) {\r\n        var _this = _super.call(this) || this;\r\n        _this.process = process;\r\n        var eventEmitter = _this.process;\r\n        eventEmitter.on('error', function (error) { return _this.fireError(error); });\r\n        eventEmitter.on('close', function () { return _this.fireClose(); });\r\n        return _this;\r\n    }\r\n    IPCMessageReader.prototype.listen = function (callback) {\r\n        this.process.on('message', callback);\r\n    };\r\n    return IPCMessageReader;\r\n}(AbstractMessageReader));\r\nexports.IPCMessageReader = IPCMessageReader;\r\nvar SocketMessageReader = /** @class */ (function (_super) {\r\n    __extends(SocketMessageReader, _super);\r\n    function SocketMessageReader(socket, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf-8'; }\r\n        return _super.call(this, socket, encoding) || this;\r\n    }\r\n    return SocketMessageReader;\r\n}(StreamMessageReader));\r\nexports.SocketMessageReader = SocketMessageReader;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/messageReader.js","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nvar Is = require(\"./is\");\r\nvar ContentLength = 'Content-Length: ';\r\nvar CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nvar AbstractMessageWriter = /** @class */ (function () {\r\n    function AbstractMessageWriter() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    AbstractMessageWriter.prototype.dispose = function () {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    };\r\n    Object.defineProperty(AbstractMessageWriter.prototype, \"onError\", {\r\n        get: function () {\r\n            return this.errorEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageWriter.prototype.fireError = function (error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    };\r\n    Object.defineProperty(AbstractMessageWriter.prototype, \"onClose\", {\r\n        get: function () {\r\n            return this.closeEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageWriter.prototype.fireClose = function () {\r\n        this.closeEmitter.fire(undefined);\r\n    };\r\n    AbstractMessageWriter.prototype.asError = function (error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(\"Writer recevied error. Reason: \" + (Is.string(error.message) ? error.message : 'unknown'));\r\n        }\r\n    };\r\n    return AbstractMessageWriter;\r\n}());\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nvar StreamMessageWriter = /** @class */ (function (_super) {\r\n    __extends(StreamMessageWriter, _super);\r\n    function StreamMessageWriter(writable, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        var _this = _super.call(this) || this;\r\n        _this.writable = writable;\r\n        _this.encoding = encoding;\r\n        _this.errorCount = 0;\r\n        _this.writable.on('error', function (error) { return _this.fireError(error); });\r\n        _this.writable.on('close', function () { return _this.fireClose(); });\r\n        return _this;\r\n    }\r\n    StreamMessageWriter.prototype.write = function (msg) {\r\n        var json = JSON.stringify(msg);\r\n        var contentLength = Buffer.byteLength(json, this.encoding);\r\n        var headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    };\r\n    return StreamMessageWriter;\r\n}(AbstractMessageWriter));\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nvar IPCMessageWriter = /** @class */ (function (_super) {\r\n    __extends(IPCMessageWriter, _super);\r\n    function IPCMessageWriter(process) {\r\n        var _this = _super.call(this) || this;\r\n        _this.process = process;\r\n        _this.errorCount = 0;\r\n        _this.queue = [];\r\n        _this.sending = false;\r\n        var eventEmitter = _this.process;\r\n        eventEmitter.on('error', function (error) { return _this.fireError(error); });\r\n        eventEmitter.on('close', function () { return _this.fireClose; });\r\n        return _this;\r\n    }\r\n    IPCMessageWriter.prototype.write = function (msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    };\r\n    IPCMessageWriter.prototype.doWriteMessage = function (msg) {\r\n        var _this = this;\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, function (error) {\r\n                    _this.sending = false;\r\n                    if (error) {\r\n                        _this.errorCount++;\r\n                        _this.fireError(error, msg, _this.errorCount);\r\n                    }\r\n                    else {\r\n                        _this.errorCount = 0;\r\n                    }\r\n                    if (_this.queue.length > 0) {\r\n                        _this.doWriteMessage(_this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    };\r\n    return IPCMessageWriter;\r\n}(AbstractMessageWriter));\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nvar SocketMessageWriter = /** @class */ (function (_super) {\r\n    __extends(SocketMessageWriter, _super);\r\n    function SocketMessageWriter(socket, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        var _this = _super.call(this) || this;\r\n        _this.socket = socket;\r\n        _this.queue = [];\r\n        _this.sending = false;\r\n        _this.encoding = encoding;\r\n        _this.errorCount = 0;\r\n        _this.socket.on('error', function (error) { return _this.fireError(error); });\r\n        _this.socket.on('close', function () { return _this.fireClose(); });\r\n        return _this;\r\n    }\r\n    SocketMessageWriter.prototype.write = function (msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    };\r\n    SocketMessageWriter.prototype.doWriteMessage = function (msg) {\r\n        var _this = this;\r\n        var json = JSON.stringify(msg);\r\n        var contentLength = Buffer.byteLength(json, this.encoding);\r\n        var headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', function (error) {\r\n                if (error) {\r\n                    _this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    _this.socket.write(json, _this.encoding, function (error) {\r\n                        _this.sending = false;\r\n                        if (error) {\r\n                            _this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            _this.errorCount = 0;\r\n                        }\r\n                        if (_this.queue.length > 0) {\r\n                            _this.doWriteMessage(_this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    _this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    };\r\n    SocketMessageWriter.prototype.handleError = function (error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    };\r\n    return SocketMessageWriter;\r\n}(AbstractMessageWriter));\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/messageWriter.js","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n__export(require(\"./stream\"));\n__export(require(\"./reader\"));\n__export(require(\"./writer\"));\n//# sourceMappingURL=index.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/stream/index.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar stream_1 = require(\"stream\");\nvar ReadableStream = (function (_super) {\n    __extends(ReadableStream, _super);\n    function ReadableStream(data) {\n        var _this = _super.call(this) || this;\n        _this.push(data);\n        _this.push(null);\n        return _this;\n    }\n    ReadableStream.prototype._read = function (size) {\n        /* no-op */\n    };\n    return ReadableStream;\n}(stream_1.Readable));\nexports.ReadableStream = ReadableStream;\nvar WritableStream = (function (_super) {\n    __extends(WritableStream, _super);\n    function WritableStream() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.data = new Buffer('');\n        return _this;\n    }\n    WritableStream.prototype._write = function (data, encoding, callback) {\n        var buffer = this.toBuffer(data, encoding);\n        this.data = Buffer.concat([this.data, buffer]);\n        callback();\n    };\n    WritableStream.prototype.toBuffer = function (data, encoding) {\n        if (Buffer.isBuffer(data)) {\n            return data;\n        }\n        return new Buffer(data, encoding);\n    };\n    return WritableStream;\n}(stream_1.Writable));\nexports.WritableStream = WritableStream;\n//# sourceMappingURL=stream.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/stream/stream.js","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nexports.Disposable = vscode_jsonrpc_1.Disposable;\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\nexports.Event = vscode_jsonrpc_1.Event;\nexports.Emitter = vscode_jsonrpc_1.Emitter;\n__export(require(\"./protocol\"));\n__export(require(\"vscode-languageserver-types\"));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vscode-base-languageclient/lib/services.js\n// module id = 211\n// module chunks = 0","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 212\n// module chunks = 0 1","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MonacoCommands = /** @class */ (function () {\n    function MonacoCommands(editor) {\n        this.editor = editor;\n    }\n    MonacoCommands.prototype.registerCommand = function (command, callback, thisArg) {\n        return this.editor._commandService.addCommand(command, {\n            handler: function (_accessor) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n                return callback.apply(void 0, args);\n            }\n        });\n    };\n    return MonacoCommands;\n}());\nexports.MonacoCommands = MonacoCommands;\n//# sourceMappingURL=commands.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/commands.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar protocol_1 = require(\"vscode-base-languageclient/lib/protocol\");\nvar ConsoleWindow = /** @class */ (function () {\n    function ConsoleWindow() {\n        this.channels = new Map();\n    }\n    ConsoleWindow.prototype.showMessage = function (type, message) {\n        var actions = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            actions[_i - 2] = arguments[_i];\n        }\n        if (type === protocol_1.MessageType.Error) {\n            console.error(message);\n        }\n        if (type === protocol_1.MessageType.Warning) {\n            console.warn(message);\n        }\n        if (type === protocol_1.MessageType.Info) {\n            console.info(message);\n        }\n        if (type === protocol_1.MessageType.Log) {\n            console.log(message);\n        }\n        return Promise.resolve(undefined);\n    };\n    ConsoleWindow.prototype.createOutputChannel = function (name) {\n        var existing = this.channels.get(name);\n        if (existing) {\n            return existing;\n        }\n        var channel = {\n            append: function (value) {\n                console.log(name + ': ' + value);\n            },\n            appendLine: function (line) {\n                console.log(name + ': ' + line);\n            },\n            show: function () {\n                // no-op\n            }\n        };\n        this.channels.set(name, channel);\n        return channel;\n    };\n    return ConsoleWindow;\n}());\nexports.ConsoleWindow = ConsoleWindow;\n//# sourceMappingURL=console-window.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/console-window.js","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar is = require(\"vscode-base-languageclient/lib/utils/is\");\nvar base_1 = require(\"vscode-base-languageclient/lib/base\");\nvar ProtocolCodeLens;\n(function (ProtocolCodeLens) {\n    function is(item) {\n        return !!item && 'data' in item;\n    }\n    ProtocolCodeLens.is = is;\n})(ProtocolCodeLens = exports.ProtocolCodeLens || (exports.ProtocolCodeLens = {}));\nvar ProtocolCompletionItem;\n(function (ProtocolCompletionItem) {\n    function is(item) {\n        return !!item && 'data' in item;\n    }\n    ProtocolCompletionItem.is = is;\n})(ProtocolCompletionItem = exports.ProtocolCompletionItem || (exports.ProtocolCompletionItem = {}));\nvar MonacoToProtocolConverter = /** @class */ (function () {\n    function MonacoToProtocolConverter() {\n    }\n    MonacoToProtocolConverter.prototype.asPosition = function (lineNumber, column) {\n        var line = lineNumber === undefined || lineNumber === null ? undefined : lineNumber - 1;\n        var character = column === undefined || column === null ? undefined : column - 1;\n        return {\n            line: line, character: character\n        };\n    };\n    MonacoToProtocolConverter.prototype.asRange = function (range) {\n        if (range === undefined) {\n            return undefined;\n        }\n        if (range === null) {\n            return null;\n        }\n        var start = this.asPosition(range.startLineNumber, range.startColumn);\n        var end = this.asPosition(range.endLineNumber, range.endColumn);\n        return {\n            start: start, end: end\n        };\n    };\n    MonacoToProtocolConverter.prototype.asTextDocumentIdentifier = function (model) {\n        return {\n            uri: model.uri.toString()\n        };\n    };\n    MonacoToProtocolConverter.prototype.asTextDocumentPositionParams = function (model, position) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column)\n        };\n    };\n    MonacoToProtocolConverter.prototype.asCompletionItem = function (item) {\n        var result = { label: item.label };\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = item.documentation;\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        this.fillPrimaryInsertText(result, item);\n        // Protocol item kind is 1 based, codes item kind is zero based.\n        if (is.number(item.kind)) {\n            if (monaco.languages.CompletionItemKind.Text <= item.kind && item.kind <= monaco.languages.CompletionItemKind.Reference) {\n                result.kind = (item.kind + 1);\n            }\n            else {\n                result.kind = base_1.CompletionItemKind.Text;\n            }\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        // TODO: if (item.additionalTextEdits) { result.additionalTextEdits = asTextEdits(item.additionalTextEdits); }\n        // TODO: if (item.command) { result.command = asCommand(item.command); }\n        if (ProtocolCompletionItem.is(item)) {\n            result.data = item.data;\n        }\n        return result;\n    };\n    MonacoToProtocolConverter.prototype.fillPrimaryInsertText = function (target, source) {\n        var format = base_1.InsertTextFormat.PlainText;\n        var text;\n        var range;\n        if (source.textEdit) {\n            text = source.textEdit.text;\n            range = this.asRange(source.textEdit.range);\n        }\n        else if (typeof source.insertText === 'string') {\n            text = source.insertText;\n        }\n        else if (source.insertText) {\n            format = base_1.InsertTextFormat.Snippet;\n            text = source.insertText.value;\n        }\n        if (source.range) {\n            range = this.asRange(source.range);\n        }\n        target.insertTextFormat = format;\n        if (source.fromEdit && text && range) {\n            target.textEdit = { newText: text, range: range };\n        }\n        else {\n            target.insertText = text;\n        }\n    };\n    MonacoToProtocolConverter.prototype.asReferenceParams = function (model, position, options) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    };\n    MonacoToProtocolConverter.prototype.asDocumentSymbolParams = function (model) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        };\n    };\n    MonacoToProtocolConverter.prototype.asCodeLensParams = function (model) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        };\n    };\n    MonacoToProtocolConverter.prototype.asDiagnosticSeverity = function (value) {\n        switch (value) {\n            case monaco.Severity.Error:\n                return base_1.DiagnosticSeverity.Error;\n            case monaco.Severity.Warning:\n                return base_1.DiagnosticSeverity.Warning;\n            case monaco.Severity.Info:\n                return base_1.DiagnosticSeverity.Information;\n        }\n        return undefined;\n    };\n    MonacoToProtocolConverter.prototype.asDiagnostic = function (marker) {\n        var range = this.asRange(new monaco.Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn));\n        var severity = this.asDiagnosticSeverity(marker.severity);\n        return base_1.Diagnostic.create(range, marker.message, severity, marker.code, marker.source);\n    };\n    MonacoToProtocolConverter.prototype.asDiagnostics = function (markers) {\n        var _this = this;\n        if (markers === void 0 || markers === null) {\n            return markers;\n        }\n        return markers.map(function (marker) { return _this.asDiagnostic(marker); });\n    };\n    MonacoToProtocolConverter.prototype.asCodeActionContext = function (context) {\n        if (context === void 0 || context === null) {\n            return context;\n        }\n        var diagnostics = this.asDiagnostics(context.markers);\n        return {\n            diagnostics: diagnostics\n        };\n    };\n    MonacoToProtocolConverter.prototype.asCodeActionParams = function (model, range, context) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            range: this.asRange(range),\n            context: this.asCodeActionContext(context)\n        };\n    };\n    MonacoToProtocolConverter.prototype.asCommand = function (item) {\n        if (item) {\n            var args = item.arguments || [];\n            return base_1.Command.create.apply(base_1.Command, [item.title, item.id].concat(args));\n        }\n        return undefined;\n    };\n    MonacoToProtocolConverter.prototype.asCodeLens = function (item) {\n        var range = this.asRange(item.range);\n        var data = ProtocolCodeLens.is(item) ? item.data : undefined;\n        var command = this.asCommand(item.command);\n        return {\n            range: range, data: data, command: command\n        };\n    };\n    MonacoToProtocolConverter.prototype.asFormattingOptions = function (options) {\n        return { tabSize: options.tabSize, insertSpaces: options.insertSpaces };\n    };\n    MonacoToProtocolConverter.prototype.asDocumentFormattingParams = function (model, options) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            options: this.asFormattingOptions(options)\n        };\n    };\n    MonacoToProtocolConverter.prototype.asDocumentRangeFormattingParams = function (model, range, options) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            range: this.asRange(range),\n            options: this.asFormattingOptions(options)\n        };\n    };\n    MonacoToProtocolConverter.prototype.asDocumentOnTypeFormattingParams = function (model, position, ch, options) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            ch: ch,\n            options: this.asFormattingOptions(options)\n        };\n    };\n    MonacoToProtocolConverter.prototype.asRenameParams = function (model, position, newName) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            newName: newName\n        };\n    };\n    MonacoToProtocolConverter.prototype.asDocumentLinkParams = function (model) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        };\n    };\n    MonacoToProtocolConverter.prototype.asDocumentLink = function (link) {\n        return {\n            range: this.asRange(link.range),\n            target: link.url\n        };\n    };\n    return MonacoToProtocolConverter;\n}());\nexports.MonacoToProtocolConverter = MonacoToProtocolConverter;\nvar ProtocolToMonacoConverter = /** @class */ (function () {\n    function ProtocolToMonacoConverter() {\n    }\n    ProtocolToMonacoConverter.prototype.asResourceEdits = function (resource, edits) {\n        var _this = this;\n        return edits.map(function (edit) {\n            var range = _this.asRange(edit.range);\n            return {\n                resource: resource,\n                range: range,\n                newText: edit.newText\n            };\n        });\n    };\n    ProtocolToMonacoConverter.prototype.asWorkspaceEdit = function (item) {\n        if (!item) {\n            return undefined;\n        }\n        var edits = [];\n        if (item.documentChanges) {\n            for (var _i = 0, _a = item.documentChanges; _i < _a.length; _i++) {\n                var change = _a[_i];\n                var resource = monaco.Uri.parse(change.textDocument.uri);\n                edits.push.apply(edits, this.asResourceEdits(resource, change.edits));\n            }\n        }\n        else if (item.changes) {\n            for (var _b = 0, _c = Object.keys(item.changes); _b < _c.length; _b++) {\n                var key = _c[_b];\n                var resource = monaco.Uri.parse(key);\n                edits.push.apply(edits, this.asResourceEdits(resource, item.changes[key]));\n            }\n        }\n        return {\n            edits: edits\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asTextEdit = function (edit) {\n        var range = this.asRange(edit.range);\n        return {\n            range: range,\n            text: edit.newText\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asTextEdits = function (items) {\n        var _this = this;\n        if (!items) {\n            return undefined;\n        }\n        return items.map(function (item) { return _this.asTextEdit(item); });\n    };\n    ProtocolToMonacoConverter.prototype.asCodeLens = function (item) {\n        if (!item) {\n            return undefined;\n        }\n        var range = this.asRange(item.range);\n        var result = { range: range };\n        if (item.command) {\n            result.command = this.asCommand(item.command);\n        }\n        if (item.data !== void 0 && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    };\n    ProtocolToMonacoConverter.prototype.asCodeLenses = function (items) {\n        var _this = this;\n        if (!items) {\n            return undefined;\n        }\n        return items.map(function (codeLens) { return _this.asCodeLens(codeLens); });\n    };\n    ProtocolToMonacoConverter.prototype.asCommand = function (command) {\n        return {\n            id: command.command,\n            title: command.title,\n            arguments: command.arguments\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asCommands = function (commands) {\n        var _this = this;\n        return commands.map(function (command) { return _this.asCommand(command); });\n    };\n    ProtocolToMonacoConverter.prototype.asSymbolInformations = function (values, uri) {\n        var _this = this;\n        if (!values) {\n            return undefined;\n        }\n        return values.map(function (information) { return _this.asSymbolInformation(information, uri); });\n    };\n    ProtocolToMonacoConverter.prototype.asSymbolInformation = function (item, uri) {\n        // Symbol kind is one based in the protocol and zero based in code.\n        return {\n            name: item.name,\n            containerName: item.containerName,\n            kind: item.kind - 1,\n            location: this.asLocation(uri ? __assign({}, item.location, { uri: uri.toString() }) : item.location)\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asDocumentHighlights = function (values) {\n        var _this = this;\n        if (!values) {\n            return undefined;\n        }\n        return values.map(function (item) { return _this.asDocumentHighlight(item); });\n    };\n    ProtocolToMonacoConverter.prototype.asDocumentHighlight = function (item) {\n        var range = this.asRange(item.range);\n        var kind = is.number(item.kind) ? this.asDocumentHighlightKind(item.kind) : undefined;\n        return { range: range, kind: kind };\n    };\n    ProtocolToMonacoConverter.prototype.asDocumentHighlightKind = function (item) {\n        switch (item) {\n            case base_1.DocumentHighlightKind.Text:\n                return monaco.languages.DocumentHighlightKind.Text;\n            case base_1.DocumentHighlightKind.Read:\n                return monaco.languages.DocumentHighlightKind.Read;\n            case base_1.DocumentHighlightKind.Write:\n                return monaco.languages.DocumentHighlightKind.Write;\n        }\n        return monaco.languages.DocumentHighlightKind.Text;\n    };\n    ProtocolToMonacoConverter.prototype.asReferences = function (values) {\n        var _this = this;\n        if (!values) {\n            return undefined;\n        }\n        return values.map(function (location) { return _this.asLocation(location); });\n    };\n    ProtocolToMonacoConverter.prototype.asDefinitionResult = function (item) {\n        var _this = this;\n        if (!item) {\n            return undefined;\n        }\n        if (is.array(item)) {\n            return item.map(function (location) { return _this.asLocation(location); });\n        }\n        else {\n            return this.asLocation(item);\n        }\n    };\n    ProtocolToMonacoConverter.prototype.asLocation = function (item) {\n        if (!item) {\n            return undefined;\n        }\n        var uri = monaco.Uri.parse(item.uri);\n        var range = this.asRange(item.range);\n        return {\n            uri: uri, range: range\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asSignatureHelp = function (item) {\n        if (!item) {\n            return undefined;\n        }\n        var result = {};\n        if (is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        }\n        else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        }\n        else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = this.asSignatureInformations(item.signatures);\n        }\n        return result;\n    };\n    ProtocolToMonacoConverter.prototype.asSignatureInformations = function (items) {\n        var _this = this;\n        return items.map(function (item) { return _this.asSignatureInformation(item); });\n    };\n    ProtocolToMonacoConverter.prototype.asSignatureInformation = function (item) {\n        var result = { label: item.label };\n        if (item.documentation) {\n            result.documentation = item.documentation;\n        }\n        if (item.parameters) {\n            result.parameters = this.asParameterInformations(item.parameters);\n        }\n        return result;\n    };\n    ProtocolToMonacoConverter.prototype.asParameterInformations = function (item) {\n        var _this = this;\n        return item.map(function (item) { return _this.asParameterInformation(item); });\n    };\n    ProtocolToMonacoConverter.prototype.asParameterInformation = function (item) {\n        var result = { label: item.label };\n        if (item.documentation) {\n            result.documentation = item.documentation;\n        }\n        ;\n        return result;\n    };\n    ProtocolToMonacoConverter.prototype.asHover = function (hover) {\n        if (!hover) {\n            return undefined;\n        }\n        var contents = Array.isArray(hover.contents) ? hover.contents : [hover.contents];\n        var range = this.asRange(hover.range);\n        return {\n            contents: contents, range: range\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asSeverity = function (severity) {\n        if (severity === 1) {\n            return monaco.Severity.Error;\n        }\n        if (severity === 2) {\n            return monaco.Severity.Warning;\n        }\n        if (severity === 3) {\n            return monaco.Severity.Info;\n        }\n        return monaco.Severity.Ignore;\n    };\n    ProtocolToMonacoConverter.prototype.asMarker = function (diagnostic) {\n        return {\n            code: typeof diagnostic.code === \"number\" ? diagnostic.code.toString() : diagnostic.code,\n            severity: this.asSeverity(diagnostic.severity),\n            message: diagnostic.message,\n            source: diagnostic.source,\n            startLineNumber: diagnostic.range.start.line + 1,\n            startColumn: diagnostic.range.start.character + 1,\n            endLineNumber: diagnostic.range.end.line + 1,\n            endColumn: diagnostic.range.end.character + 1\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asCompletionResult = function (result) {\n        var _this = this;\n        if (!result) {\n            return undefined;\n        }\n        if (Array.isArray(result)) {\n            return result.map(function (item) { return _this.asCompletionItem(item); });\n        }\n        return {\n            isIncomplete: result.isIncomplete,\n            items: result.items.map(this.asCompletionItem.bind(this))\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asCompletionItem = function (item) {\n        var result = { label: item.label };\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = item.documentation;\n        }\n        ;\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        var insertText = this.asCompletionInsertText(item);\n        if (insertText) {\n            result.insertText = insertText.text;\n            result.range = insertText.range;\n            result.fromEdit = insertText.fromEdit;\n        }\n        // Protocol item kind is 1 based, codes item kind is zero based.\n        if (is.number(item.kind) && item.kind > 0) {\n            result.kind = item.kind - 1;\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        // TODO: if (item.additionalTextEdits) { result.additionalTextEdits = asTextEdits(item.additionalTextEdits); }\n        // TODO: if (item.command) { result.command = asCommand(item.command); }\n        if (item.data !== void 0 && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    };\n    ProtocolToMonacoConverter.prototype.asCompletionInsertText = function (item) {\n        if (item.textEdit) {\n            var range = this.asRange(item.textEdit.range);\n            var value = item.textEdit.newText;\n            var text = item.insertTextFormat === base_1.InsertTextFormat.Snippet ? { value: value } : value;\n            return {\n                text: text, range: range, fromEdit: true\n            };\n        }\n        if (item.insertText) {\n            var value = item.insertText;\n            var text = item.insertTextFormat === base_1.InsertTextFormat.Snippet ? { value: value } : value;\n            return { text: text, fromEdit: false };\n        }\n        return undefined;\n    };\n    ProtocolToMonacoConverter.prototype.asILinks = function (documentLinks) {\n        var links = [];\n        for (var _i = 0, documentLinks_1 = documentLinks; _i < documentLinks_1.length; _i++) {\n            var documentLink = documentLinks_1[_i];\n            links.push(this.asILink(documentLink));\n        }\n        return links;\n    };\n    ProtocolToMonacoConverter.prototype.asILink = function (documentLink) {\n        // a DocumentLink's target is optional but ILink's url is not\n        // so we cast to any to get around the compiler's error\n        return {\n            range: this.asRange(documentLink.range),\n            url: documentLink.target\n        };\n    };\n    ProtocolToMonacoConverter.prototype.asRange = function (range) {\n        if (range === undefined) {\n            return undefined;\n        }\n        if (range === null) {\n            return null;\n        }\n        var start = this.asPosition(range.start);\n        var end = this.asPosition(range.end);\n        if (start instanceof monaco.Position && end instanceof monaco.Position) {\n            return new monaco.Range(start.lineNumber, start.column, end.lineNumber, end.column);\n        }\n        var startLineNumber = !start || start.lineNumber === undefined ? undefined : start.lineNumber;\n        var startColumn = !start || start.column === undefined ? undefined : start.column;\n        var endLineNumber = !end || end.lineNumber === undefined ? undefined : end.lineNumber;\n        var endColumn = !end || end.column === undefined ? undefined : end.column;\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\n    };\n    ProtocolToMonacoConverter.prototype.asPosition = function (position) {\n        if (position === undefined) {\n            return undefined;\n        }\n        if (position === null) {\n            return null;\n        }\n        var line = position.line, character = position.character;\n        var lineNumber = line === undefined ? undefined : line + 1;\n        var column = character === undefined ? undefined : character + 1;\n        if (lineNumber !== undefined && column !== undefined) {\n            return new monaco.Position(lineNumber, column);\n        }\n        return { lineNumber: lineNumber, column: column };\n    };\n    return ProtocolToMonacoConverter;\n}());\nexports.ProtocolToMonacoConverter = ProtocolToMonacoConverter;\n//# sourceMappingURL=converter.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/converter.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar globToRegExp = require(\"glob-to-regexp\");\nvar services_1 = require(\"vscode-base-languageclient/lib/services\");\nvar diagnostic_collection_1 = require(\"./diagnostic-collection\");\nvar disposable_1 = require(\"./disposable\");\nvar MonacoModelIdentifier;\n(function (MonacoModelIdentifier) {\n    function fromDocument(document) {\n        return {\n            uri: monaco.Uri.parse(document.uri),\n            languageId: document.languageId\n        };\n    }\n    MonacoModelIdentifier.fromDocument = fromDocument;\n    function fromModel(model) {\n        return {\n            uri: model.uri,\n            languageId: model.getModeId()\n        };\n    }\n    MonacoModelIdentifier.fromModel = fromModel;\n})(MonacoModelIdentifier = exports.MonacoModelIdentifier || (exports.MonacoModelIdentifier = {}));\nfunction testGlob(pattern, value) {\n    var regExp = globToRegExp(pattern, {\n        extended: true,\n        globstar: true\n    });\n    return regExp.test(value);\n}\nexports.testGlob = testGlob;\nfunction getLanguages() {\n    var languages = [];\n    for (var _i = 0, _a = monaco.languages.getLanguages().map(function (l) { return l.id; }); _i < _a.length; _i++) {\n        var language = _a[_i];\n        if (languages.indexOf(language) === -1) {\n            languages.push(language);\n        }\n    }\n    return languages;\n}\nexports.getLanguages = getLanguages;\nvar MonacoLanguages = /** @class */ (function () {\n    function MonacoLanguages(p2m, m2p) {\n        this.p2m = p2m;\n        this.m2p = m2p;\n        this.completion = {\n            completionItem: {\n                snippetSupport: true\n            }\n        };\n    }\n    MonacoLanguages.prototype.match = function (selector, document) {\n        return this.matchModel(selector, MonacoModelIdentifier.fromDocument(document));\n    };\n    MonacoLanguages.prototype.createDiagnosticCollection = function (name) {\n        return new diagnostic_collection_1.MonacoDiagnosticCollection(name || 'default', this.p2m);\n    };\n    MonacoLanguages.prototype.registerCompletionItemProvider = function (selector, provider) {\n        var triggerCharacters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            triggerCharacters[_i - 2] = arguments[_i];\n        }\n        var completionProvider = this.createCompletionProvider.apply(this, [selector, provider].concat(triggerCharacters));\n        var providers = new disposable_1.DisposableCollection();\n        for (var _a = 0, _b = getLanguages(); _a < _b.length; _a++) {\n            var language = _b[_a];\n            providers.push(monaco.languages.registerCompletionItemProvider(language, completionProvider));\n        }\n        ;\n        return providers;\n    };\n    MonacoLanguages.prototype.createCompletionProvider = function (selector, provider) {\n        var _this = this;\n        var triggerCharacters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            triggerCharacters[_i - 2] = arguments[_i];\n        }\n        return {\n            triggerCharacters: triggerCharacters,\n            provideCompletionItems: function (model, position, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asTextDocumentPositionParams(model, position);\n                return provider.provideCompletionItems(params, token).then(function (result) { return _this.p2m.asCompletionResult(result); });\n            },\n            resolveCompletionItem: provider.resolveCompletionItem ? function (item, token) {\n                var protocolItem = _this.m2p.asCompletionItem(item);\n                return provider.resolveCompletionItem(protocolItem, token).then(function (item) { return _this.p2m.asCompletionItem(item); });\n            } : undefined\n        };\n    };\n    MonacoLanguages.prototype.registerHoverProvider = function (selector, provider) {\n        var hoverProvider = this.createHoverProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerHoverProvider(language, hoverProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createHoverProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideHover: function (model, position, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                var params = _this.m2p.asTextDocumentPositionParams(model, position);\n                return provider.provideHover(params, token).then(function (hover) { return _this.p2m.asHover(hover); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerSignatureHelpProvider = function (selector, provider) {\n        var triggerCharacters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            triggerCharacters[_i - 2] = arguments[_i];\n        }\n        var signatureHelpProvider = this.createSignatureHelpProvider.apply(this, [selector, provider].concat(triggerCharacters));\n        var providers = new disposable_1.DisposableCollection();\n        for (var _a = 0, _b = getLanguages(); _a < _b.length; _a++) {\n            var language = _b[_a];\n            providers.push(monaco.languages.registerSignatureHelpProvider(language, signatureHelpProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createSignatureHelpProvider = function (selector, provider) {\n        var _this = this;\n        var triggerCharacters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            triggerCharacters[_i - 2] = arguments[_i];\n        }\n        var signatureHelpTriggerCharacters = triggerCharacters;\n        return {\n            signatureHelpTriggerCharacters: signatureHelpTriggerCharacters,\n            provideSignatureHelp: function (model, position, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                var params = _this.m2p.asTextDocumentPositionParams(model, position);\n                return provider.provideSignatureHelp(params, token).then(function (signatureHelp) { return _this.p2m.asSignatureHelp(signatureHelp); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerDefinitionProvider = function (selector, provider) {\n        var definitionProvider = this.createDefinitionProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerDefinitionProvider(language, definitionProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createDefinitionProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideDefinition: function (model, position, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                var params = _this.m2p.asTextDocumentPositionParams(model, position);\n                return provider.provideDefinition(params, token).then(function (result) { return _this.p2m.asDefinitionResult(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerReferenceProvider = function (selector, provider) {\n        var referenceProvider = this.createReferenceProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerReferenceProvider(language, referenceProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createReferenceProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideReferences: function (model, position, context, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asReferenceParams(model, position, context);\n                return provider.provideReferences(params, token).then(function (result) { return _this.p2m.asReferences(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerDocumentHighlightProvider = function (selector, provider) {\n        var documentHighlightProvider = this.createDocumentHighlightProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerDocumentHighlightProvider(language, documentHighlightProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createDocumentHighlightProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideDocumentHighlights: function (model, position, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asTextDocumentPositionParams(model, position);\n                return provider.provideDocumentHighlights(params, token).then(function (result) { return _this.p2m.asDocumentHighlights(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerDocumentSymbolProvider = function (selector, provider) {\n        var documentSymbolProvider = this.createDocumentSymbolProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerDocumentSymbolProvider(language, documentSymbolProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createDocumentSymbolProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideDocumentSymbols: function (model, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asDocumentSymbolParams(model);\n                return provider.provideDocumentSymbols(params, token).then(function (result) { return _this.p2m.asSymbolInformations(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerCodeActionsProvider = function (selector, provider) {\n        var codeActionProvider = this.createCodeActionProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerCodeActionProvider(language, codeActionProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createCodeActionProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideCodeActions: function (model, range, context, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asCodeActionParams(model, range, context);\n                return provider.provideCodeActions(params, token).then(function (result) { return _this.p2m.asCommands(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerCodeLensProvider = function (selector, provider) {\n        var codeLensProvider = this.createCodeLensProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerCodeLensProvider(language, codeLensProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createCodeLensProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideCodeLenses: function (model, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asCodeLensParams(model);\n                return provider.provideCodeLenses(params, token).then(function (result) { return _this.p2m.asCodeLenses(result); });\n            },\n            resolveCodeLens: provider.resolveCodeLens ? function (model, codeLens, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return codeLens;\n                }\n                var protocolCodeLens = _this.m2p.asCodeLens(codeLens);\n                return provider.resolveCodeLens(protocolCodeLens, token).then(function (result) { return _this.p2m.asCodeLens(result); });\n            } : (function (m, codeLens, t) { return codeLens; })\n        };\n    };\n    MonacoLanguages.prototype.registerDocumentFormattingEditProvider = function (selector, provider) {\n        var documentFormattingEditProvider = this.createDocumentFormattingEditProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerDocumentFormattingEditProvider(language, documentFormattingEditProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createDocumentFormattingEditProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideDocumentFormattingEdits: function (model, options, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asDocumentFormattingParams(model, options);\n                return provider.provideDocumentFormattingEdits(params, token).then(function (result) { return _this.p2m.asTextEdits(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerDocumentRangeFormattingEditProvider = function (selector, provider) {\n        var documentRangeFormattingEditProvider = this.createDocumentRangeFormattingEditProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerDocumentRangeFormattingEditProvider(language, documentRangeFormattingEditProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createDocumentRangeFormattingEditProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideDocumentRangeFormattingEdits: function (model, range, options, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asDocumentRangeFormattingParams(model, range, options);\n                return provider.provideDocumentRangeFormattingEdits(params, token).then(function (result) { return _this.p2m.asTextEdits(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerOnTypeFormattingEditProvider = function (selector, provider, firstTriggerCharacter) {\n        var moreTriggerCharacter = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            moreTriggerCharacter[_i - 3] = arguments[_i];\n        }\n        var onTypeFormattingEditProvider = this.createOnTypeFormattingEditProvider.apply(this, [selector, provider, firstTriggerCharacter].concat(moreTriggerCharacter));\n        var providers = new disposable_1.DisposableCollection();\n        for (var _a = 0, _b = getLanguages(); _a < _b.length; _a++) {\n            var language = _b[_a];\n            providers.push(monaco.languages.registerOnTypeFormattingEditProvider(language, onTypeFormattingEditProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createOnTypeFormattingEditProvider = function (selector, provider, firstTriggerCharacter) {\n        var _this = this;\n        var moreTriggerCharacter = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            moreTriggerCharacter[_i - 3] = arguments[_i];\n        }\n        var autoFormatTriggerCharacters = [firstTriggerCharacter].concat(moreTriggerCharacter);\n        return {\n            autoFormatTriggerCharacters: autoFormatTriggerCharacters,\n            provideOnTypeFormattingEdits: function (model, position, ch, options, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return [];\n                }\n                var params = _this.m2p.asDocumentOnTypeFormattingParams(model, position, ch, options);\n                return provider.provideOnTypeFormattingEdits(params, token).then(function (result) { return _this.p2m.asTextEdits(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerRenameProvider = function (selector, provider) {\n        var renameProvider = this.createRenameProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerRenameProvider(language, renameProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createRenameProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideRenameEdits: function (model, position, newName, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                var params = _this.m2p.asRenameParams(model, position, newName);\n                return provider.provideRenameEdits(params, token).then(function (result) { return _this.p2m.asWorkspaceEdit(result); });\n            }\n        };\n    };\n    MonacoLanguages.prototype.registerDocumentLinkProvider = function (selector, provider) {\n        var linkProvider = this.createDocumentLinkProvider(selector, provider);\n        var providers = new disposable_1.DisposableCollection();\n        for (var _i = 0, _a = getLanguages(); _i < _a.length; _i++) {\n            var language = _a[_i];\n            providers.push(monaco.languages.registerLinkProvider(language, linkProvider));\n        }\n        return providers;\n    };\n    MonacoLanguages.prototype.createDocumentLinkProvider = function (selector, provider) {\n        var _this = this;\n        return {\n            provideLinks: function (model, token) {\n                if (!_this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                var params = _this.m2p.asDocumentLinkParams(model);\n                return provider.provideDocumentLinks(params, token).then(function (result) { return _this.p2m.asILinks(result); });\n            },\n            resolveLink: function (link, token) {\n                // resolve the link if the provider supports it\n                // and the link doesn't have a url set\n                if (provider.resolveDocumentLink && (link.url === null || link.url === undefined)) {\n                    var documentLink = _this.m2p.asDocumentLink(link);\n                    return provider.resolveDocumentLink(documentLink, token).then(function (result) { return _this.p2m.asILink(result); });\n                }\n                return link;\n            }\n        };\n    };\n    MonacoLanguages.prototype.matchModel = function (selector, model) {\n        var _this = this;\n        if (Array.isArray(selector)) {\n            return selector.findIndex(function (filter) { return _this.matchModel(filter, model); }) !== -1;\n        }\n        if (services_1.DocumentFilter.is(selector)) {\n            if (!!selector.language && selector.language !== model.languageId) {\n                return false;\n            }\n            if (!!selector.scheme && selector.scheme !== model.uri.scheme) {\n                return false;\n            }\n            if (!!selector.pattern && !testGlob(selector.pattern, model.uri.path)) {\n                return false;\n            }\n            return true;\n        }\n        return selector === model.languageId;\n    };\n    return MonacoLanguages;\n}());\nexports.MonacoLanguages = MonacoLanguages;\n//# sourceMappingURL=languages.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/languages.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar services_1 = require(\"vscode-base-languageclient/lib/services\");\nvar MonacoWorkspace = /** @class */ (function () {\n    function MonacoWorkspace(p2m, m2p, _rootUri) {\n        if (_rootUri === void 0) { _rootUri = null; }\n        var _this = this;\n        this.p2m = p2m;\n        this.m2p = m2p;\n        this._rootUri = _rootUri;\n        this.capabilities = {\n            applyEdit: true,\n            workspaceEdit: {\n                documentChanges: true\n            }\n        };\n        this.documents = new Map();\n        this.onDidOpenTextDocumentEmitter = new services_1.Emitter();\n        this.onDidCloseTextDocumentEmitter = new services_1.Emitter();\n        this.onDidChangeTextDocumentEmitter = new services_1.Emitter();\n        for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\n            var model = _a[_i];\n            this.addModel(model);\n        }\n        monaco.editor.onDidCreateModel(function (model) { return _this.addModel(model); });\n        monaco.editor.onWillDisposeModel(function (model) { return _this.removeModel(model); });\n    }\n    Object.defineProperty(MonacoWorkspace.prototype, \"rootUri\", {\n        get: function () {\n            return this._rootUri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MonacoWorkspace.prototype.removeModel = function (model) {\n        var uri = model.uri.toString();\n        var document = this.documents.get(uri);\n        if (document) {\n            this.documents.delete(uri);\n            this.onDidCloseTextDocumentEmitter.fire(document);\n        }\n    };\n    MonacoWorkspace.prototype.addModel = function (model) {\n        var _this = this;\n        var uri = model.uri.toString();\n        var document = this.setModel(uri, model);\n        this.onDidOpenTextDocumentEmitter.fire(document);\n        model.onDidChangeContent(function (event) {\n            return _this.onDidChangeContent(uri, model, event);\n        });\n    };\n    MonacoWorkspace.prototype.onDidChangeContent = function (uri, model, event) {\n        var textDocument = this.setModel(uri, model);\n        var contentChanges = [];\n        for (var _i = 0, _a = event.changes; _i < _a.length; _i++) {\n            var change = _a[_i];\n            var range = this.m2p.asRange(change.range);\n            var rangeLength = change.rangeLength;\n            var text = change.text;\n            contentChanges.push({ range: range, rangeLength: rangeLength, text: text });\n        }\n        this.onDidChangeTextDocumentEmitter.fire({\n            textDocument: textDocument,\n            contentChanges: contentChanges\n        });\n    };\n    MonacoWorkspace.prototype.setModel = function (uri, model) {\n        var document = services_1.TextDocument.create(uri, model.getModeId(), model.getVersionId(), model.getValue());\n        this.documents.set(uri, document);\n        return document;\n    };\n    Object.defineProperty(MonacoWorkspace.prototype, \"textDocuments\", {\n        get: function () {\n            return Array.from(this.documents.values());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoWorkspace.prototype, \"onDidOpenTextDocument\", {\n        get: function () {\n            return this.onDidOpenTextDocumentEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoWorkspace.prototype, \"onDidCloseTextDocument\", {\n        get: function () {\n            return this.onDidCloseTextDocumentEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoWorkspace.prototype, \"onDidChangeTextDocument\", {\n        get: function () {\n            return this.onDidChangeTextDocumentEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MonacoWorkspace.prototype.applyEdit = function (workspaceEdit) {\n        var edit = this.p2m.asWorkspaceEdit(workspaceEdit);\n        // Collect all referenced models\n        var models = edit.edits.reduce(function (acc, currentEdit) {\n            acc[currentEdit.resource.toString()] = monaco.editor.getModel(currentEdit.resource);\n            return acc;\n        }, {});\n        // If any of the models do not exist, refuse to apply the edit.\n        if (!Object.keys(models).map(function (uri) { return models[uri]; }).every(function (model) { return !!model; })) {\n            return Promise.resolve(false);\n        }\n        // Group edits by resource so we can batch them when applying\n        var editsByResource = edit.edits.reduce(function (acc, currentEdit) {\n            var uri = currentEdit.resource.toString();\n            if (!(uri in acc)) {\n                acc[uri] = [];\n            }\n            acc[uri].push(currentEdit);\n            return acc;\n        }, {});\n        // Apply edits for each resource\n        Object.keys(editsByResource).forEach(function (uri) {\n            models[uri].pushEditOperations([], // Do not try and preserve editor selections.\n            editsByResource[uri].map(function (resourceEdit) {\n                return {\n                    identifier: { major: 1, minor: 0 },\n                    range: monaco.Range.lift(resourceEdit.range),\n                    text: resourceEdit.newText,\n                    forceMoveMarkers: true,\n                };\n            }), function () { return []; });\n        });\n        return Promise.resolve(true);\n    };\n    return MonacoWorkspace;\n}());\nexports.MonacoWorkspace = MonacoWorkspace;\n//# sourceMappingURL=workspace.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/workspace.js","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * A error object return in a response in case a request\r\n * has failed.\r\n */\r\nvar ResponseError = /** @class */ (function (_super) {\r\n    __extends(ResponseError, _super);\r\n    function ResponseError(code, message, data) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        if (data !== void 0) {\r\n            _this.data = data;\r\n        }\r\n        Object.setPrototypeOf(_this, ResponseError.prototype);\r\n        return _this;\r\n    }\r\n    ResponseError.prototype.toJson = function () {\r\n        var result = {\r\n            code: this.code,\r\n            message: this.message\r\n        };\r\n        if (this.data !== void 0) {\r\n            result.data = this.data;\r\n        }\r\n        ;\r\n        return result;\r\n    };\r\n    return ResponseError;\r\n}(Error));\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nvar AbstractMessageType = /** @class */ (function () {\r\n    function AbstractMessageType(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    Object.defineProperty(AbstractMessageType.prototype, \"method\", {\r\n        get: function () {\r\n            return this._method;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractMessageType.prototype, \"numberOfParams\", {\r\n        get: function () {\r\n            return this._numberOfParams;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AbstractMessageType;\r\n}());\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nvar RequestType0 = /** @class */ (function (_super) {\r\n    __extends(RequestType0, _super);\r\n    function RequestType0(method) {\r\n        var _this = _super.call(this, method, 0) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType0;\r\n}(AbstractMessageType));\r\nexports.RequestType0 = RequestType0;\r\nvar RequestType = /** @class */ (function (_super) {\r\n    __extends(RequestType, _super);\r\n    function RequestType(method) {\r\n        var _this = _super.call(this, method, 1) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType;\r\n}(AbstractMessageType));\r\nexports.RequestType = RequestType;\r\nvar RequestType1 = /** @class */ (function (_super) {\r\n    __extends(RequestType1, _super);\r\n    function RequestType1(method) {\r\n        var _this = _super.call(this, method, 1) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType1;\r\n}(AbstractMessageType));\r\nexports.RequestType1 = RequestType1;\r\nvar RequestType2 = /** @class */ (function (_super) {\r\n    __extends(RequestType2, _super);\r\n    function RequestType2(method) {\r\n        var _this = _super.call(this, method, 2) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType2;\r\n}(AbstractMessageType));\r\nexports.RequestType2 = RequestType2;\r\nvar RequestType3 = /** @class */ (function (_super) {\r\n    __extends(RequestType3, _super);\r\n    function RequestType3(method) {\r\n        var _this = _super.call(this, method, 3) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType3;\r\n}(AbstractMessageType));\r\nexports.RequestType3 = RequestType3;\r\nvar RequestType4 = /** @class */ (function (_super) {\r\n    __extends(RequestType4, _super);\r\n    function RequestType4(method) {\r\n        var _this = _super.call(this, method, 4) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType4;\r\n}(AbstractMessageType));\r\nexports.RequestType4 = RequestType4;\r\nvar RequestType5 = /** @class */ (function (_super) {\r\n    __extends(RequestType5, _super);\r\n    function RequestType5(method) {\r\n        var _this = _super.call(this, method, 5) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType5;\r\n}(AbstractMessageType));\r\nexports.RequestType5 = RequestType5;\r\nvar RequestType6 = /** @class */ (function (_super) {\r\n    __extends(RequestType6, _super);\r\n    function RequestType6(method) {\r\n        var _this = _super.call(this, method, 6) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType6;\r\n}(AbstractMessageType));\r\nexports.RequestType6 = RequestType6;\r\nvar RequestType7 = /** @class */ (function (_super) {\r\n    __extends(RequestType7, _super);\r\n    function RequestType7(method) {\r\n        var _this = _super.call(this, method, 7) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType7;\r\n}(AbstractMessageType));\r\nexports.RequestType7 = RequestType7;\r\nvar RequestType8 = /** @class */ (function (_super) {\r\n    __extends(RequestType8, _super);\r\n    function RequestType8(method) {\r\n        var _this = _super.call(this, method, 8) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType8;\r\n}(AbstractMessageType));\r\nexports.RequestType8 = RequestType8;\r\nvar RequestType9 = /** @class */ (function (_super) {\r\n    __extends(RequestType9, _super);\r\n    function RequestType9(method) {\r\n        var _this = _super.call(this, method, 9) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType9;\r\n}(AbstractMessageType));\r\nexports.RequestType9 = RequestType9;\r\nvar NotificationType = /** @class */ (function (_super) {\r\n    __extends(NotificationType, _super);\r\n    function NotificationType(method) {\r\n        var _this = _super.call(this, method, 1) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType;\r\n}(AbstractMessageType));\r\nexports.NotificationType = NotificationType;\r\nvar NotificationType0 = /** @class */ (function (_super) {\r\n    __extends(NotificationType0, _super);\r\n    function NotificationType0(method) {\r\n        var _this = _super.call(this, method, 0) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType0;\r\n}(AbstractMessageType));\r\nexports.NotificationType0 = NotificationType0;\r\nvar NotificationType1 = /** @class */ (function (_super) {\r\n    __extends(NotificationType1, _super);\r\n    function NotificationType1(method) {\r\n        var _this = _super.call(this, method, 1) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType1;\r\n}(AbstractMessageType));\r\nexports.NotificationType1 = NotificationType1;\r\nvar NotificationType2 = /** @class */ (function (_super) {\r\n    __extends(NotificationType2, _super);\r\n    function NotificationType2(method) {\r\n        var _this = _super.call(this, method, 2) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType2;\r\n}(AbstractMessageType));\r\nexports.NotificationType2 = NotificationType2;\r\nvar NotificationType3 = /** @class */ (function (_super) {\r\n    __extends(NotificationType3, _super);\r\n    function NotificationType3(method) {\r\n        var _this = _super.call(this, method, 3) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType3;\r\n}(AbstractMessageType));\r\nexports.NotificationType3 = NotificationType3;\r\nvar NotificationType4 = /** @class */ (function (_super) {\r\n    __extends(NotificationType4, _super);\r\n    function NotificationType4(method) {\r\n        var _this = _super.call(this, method, 4) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType4;\r\n}(AbstractMessageType));\r\nexports.NotificationType4 = NotificationType4;\r\nvar NotificationType5 = /** @class */ (function (_super) {\r\n    __extends(NotificationType5, _super);\r\n    function NotificationType5(method) {\r\n        var _this = _super.call(this, method, 5) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType5;\r\n}(AbstractMessageType));\r\nexports.NotificationType5 = NotificationType5;\r\nvar NotificationType6 = /** @class */ (function (_super) {\r\n    __extends(NotificationType6, _super);\r\n    function NotificationType6(method) {\r\n        var _this = _super.call(this, method, 6) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType6;\r\n}(AbstractMessageType));\r\nexports.NotificationType6 = NotificationType6;\r\nvar NotificationType7 = /** @class */ (function (_super) {\r\n    __extends(NotificationType7, _super);\r\n    function NotificationType7(method) {\r\n        var _this = _super.call(this, method, 7) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType7;\r\n}(AbstractMessageType));\r\nexports.NotificationType7 = NotificationType7;\r\nvar NotificationType8 = /** @class */ (function (_super) {\r\n    __extends(NotificationType8, _super);\r\n    function NotificationType8(method) {\r\n        var _this = _super.call(this, method, 8) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType8;\r\n}(AbstractMessageType));\r\nexports.NotificationType8 = NotificationType8;\r\nvar NotificationType9 = /** @class */ (function (_super) {\r\n    __extends(NotificationType9, _super);\r\n    function NotificationType9(method) {\r\n        var _this = _super.call(this, method, 9) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType9;\r\n}(AbstractMessageType));\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    var candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    var candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    var candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/messages.js","(function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n        var v = factory(require, exports);\r\n        if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n        define([\"require\", \"exports\"], factory);\r\n    }\r\n})(function (require, exports) {\r\n    /* --------------------------------------------------------------------------------------------\r\n     * Copyright (c) Microsoft Corporation. All rights reserved.\r\n     * Licensed under the MIT License. See License.txt in the project root for license information.\r\n     * ------------------------------------------------------------------------------------------ */\r\n    'use strict';\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    /**\r\n     * The Position namespace provides helper functions to work with\r\n     * [Position](#Position) literals.\r\n     */\r\n    var Position;\r\n    (function (Position) {\r\n        /**\r\n         * Creates a new Position literal from the given line and character.\r\n         * @param line The position's line.\r\n         * @param character The position's character.\r\n         */\r\n        function create(line, character) {\r\n            return { line: line, character: character };\r\n        }\r\n        Position.create = create;\r\n        /**\r\n         * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n        }\r\n        Position.is = is;\r\n    })(Position = exports.Position || (exports.Position = {}));\r\n    /**\r\n     * The Range namespace provides helper functions to work with\r\n     * [Range](#Range) literals.\r\n     */\r\n    var Range;\r\n    (function (Range) {\r\n        function create(one, two, three, four) {\r\n            if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n                return { start: Position.create(one, two), end: Position.create(three, four) };\r\n            }\r\n            else if (Position.is(one) && Position.is(two)) {\r\n                return { start: one, end: two };\r\n            }\r\n            else {\r\n                throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n            }\r\n        }\r\n        Range.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n        }\r\n        Range.is = is;\r\n    })(Range = exports.Range || (exports.Range = {}));\r\n    /**\r\n     * The Location namespace provides helper functions to work with\r\n     * [Location](#Location) literals.\r\n     */\r\n    var Location;\r\n    (function (Location) {\r\n        /**\r\n         * Creates a Location literal.\r\n         * @param uri The location's uri.\r\n         * @param range The location's range.\r\n         */\r\n        function create(uri, range) {\r\n            return { uri: uri, range: range };\r\n        }\r\n        Location.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n        }\r\n        Location.is = is;\r\n    })(Location = exports.Location || (exports.Location = {}));\r\n    /**\r\n     * The diagnostic's serverity.\r\n     */\r\n    var DiagnosticSeverity;\r\n    (function (DiagnosticSeverity) {\r\n        /**\r\n         * Reports an error.\r\n         */\r\n        DiagnosticSeverity.Error = 1;\r\n        /**\r\n         * Reports a warning.\r\n         */\r\n        DiagnosticSeverity.Warning = 2;\r\n        /**\r\n         * Reports an information.\r\n         */\r\n        DiagnosticSeverity.Information = 3;\r\n        /**\r\n         * Reports a hint.\r\n         */\r\n        DiagnosticSeverity.Hint = 4;\r\n    })(DiagnosticSeverity = exports.DiagnosticSeverity || (exports.DiagnosticSeverity = {}));\r\n    /**\r\n     * The Diagnostic namespace provides helper functions to work with\r\n     * [Diagnostic](#Diagnostic) literals.\r\n     */\r\n    var Diagnostic;\r\n    (function (Diagnostic) {\r\n        /**\r\n         * Creates a new Diagnostic literal.\r\n         */\r\n        function create(range, message, severity, code, source) {\r\n            var result = { range: range, message: message };\r\n            if (Is.defined(severity)) {\r\n                result.severity = severity;\r\n            }\r\n            if (Is.defined(code)) {\r\n                result.code = code;\r\n            }\r\n            if (Is.defined(source)) {\r\n                result.source = source;\r\n            }\r\n            return result;\r\n        }\r\n        Diagnostic.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate)\r\n                && Range.is(candidate.range)\r\n                && Is.string(candidate.message)\r\n                && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n                && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n                && (Is.string(candidate.source) || Is.undefined(candidate.source));\r\n        }\r\n        Diagnostic.is = is;\r\n    })(Diagnostic = exports.Diagnostic || (exports.Diagnostic = {}));\r\n    /**\r\n     * The Command namespace provides helper functions to work with\r\n     * [Command](#Command) literals.\r\n     */\r\n    var Command;\r\n    (function (Command) {\r\n        /**\r\n         * Creates a new Command literal.\r\n         */\r\n        function create(title, command) {\r\n            var args = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                args[_i - 2] = arguments[_i];\r\n            }\r\n            var result = { title: title, command: command };\r\n            if (Is.defined(args) && args.length > 0) {\r\n                result.arguments = args;\r\n            }\r\n            return result;\r\n        }\r\n        Command.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.title);\r\n        }\r\n        Command.is = is;\r\n    })(Command = exports.Command || (exports.Command = {}));\r\n    /**\r\n     * The TextEdit namespace provides helper function to create replace,\r\n     * insert and delete edits more easily.\r\n     */\r\n    var TextEdit;\r\n    (function (TextEdit) {\r\n        /**\r\n         * Creates a replace text edit.\r\n         * @param range The range of text to be replaced.\r\n         * @param newText The new text.\r\n         */\r\n        function replace(range, newText) {\r\n            return { range: range, newText: newText };\r\n        }\r\n        TextEdit.replace = replace;\r\n        /**\r\n         * Creates a insert text edit.\r\n         * @param psotion The position to insert the text at.\r\n         * @param newText The text to be inserted.\r\n         */\r\n        function insert(position, newText) {\r\n            return { range: { start: position, end: position }, newText: newText };\r\n        }\r\n        TextEdit.insert = insert;\r\n        /**\r\n         * Creates a delete text edit.\r\n         * @param range The range of text to be deleted.\r\n         */\r\n        function del(range) {\r\n            return { range: range, newText: '' };\r\n        }\r\n        TextEdit.del = del;\r\n    })(TextEdit = exports.TextEdit || (exports.TextEdit = {}));\r\n    /**\r\n     * The TextDocumentEdit namespace provides helper function to create\r\n     * an edit that manipulates a text document.\r\n     */\r\n    var TextDocumentEdit;\r\n    (function (TextDocumentEdit) {\r\n        /**\r\n         * Creates a new `TextDocumentEdit`\r\n         */\r\n        function create(textDocument, edits) {\r\n            return { textDocument: textDocument, edits: edits };\r\n        }\r\n        TextDocumentEdit.create = create;\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate)\r\n                && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n                && Array.isArray(candidate.edits);\r\n        }\r\n        TextDocumentEdit.is = is;\r\n    })(TextDocumentEdit = exports.TextDocumentEdit || (exports.TextDocumentEdit = {}));\r\n    var TextEditChangeImpl = /** @class */ (function () {\r\n        function TextEditChangeImpl(edits) {\r\n            this.edits = edits;\r\n        }\r\n        TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n            this.edits.push(TextEdit.insert(position, newText));\r\n        };\r\n        TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n            this.edits.push(TextEdit.replace(range, newText));\r\n        };\r\n        TextEditChangeImpl.prototype.delete = function (range) {\r\n            this.edits.push(TextEdit.del(range));\r\n        };\r\n        TextEditChangeImpl.prototype.add = function (edit) {\r\n            this.edits.push(edit);\r\n        };\r\n        TextEditChangeImpl.prototype.all = function () {\r\n            return this.edits;\r\n        };\r\n        TextEditChangeImpl.prototype.clear = function () {\r\n            this.edits.splice(0, this.edits.length);\r\n        };\r\n        return TextEditChangeImpl;\r\n    }());\r\n    /**\r\n     * A workspace change helps constructing changes to a workspace.\r\n     */\r\n    var WorkspaceChange = /** @class */ (function () {\r\n        function WorkspaceChange(workspaceEdit) {\r\n            var _this = this;\r\n            this._textEditChanges = Object.create(null);\r\n            if (workspaceEdit) {\r\n                this._workspaceEdit = workspaceEdit;\r\n                if (workspaceEdit.documentChanges) {\r\n                    workspaceEdit.documentChanges.forEach(function (textDocumentEdit) {\r\n                        var textEditChange = new TextEditChangeImpl(textDocumentEdit.edits);\r\n                        _this._textEditChanges[textDocumentEdit.textDocument.uri] = textEditChange;\r\n                    });\r\n                }\r\n                else if (workspaceEdit.changes) {\r\n                    Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                        var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                        _this._textEditChanges[key] = textEditChange;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n            /**\r\n             * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n             * use to be returned from a workspace edit operation like rename.\r\n             */\r\n            get: function () {\r\n                return this._workspaceEdit;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n            if (VersionedTextDocumentIdentifier.is(key)) {\r\n                if (!this._workspaceEdit) {\r\n                    this._workspaceEdit = {\r\n                        documentChanges: []\r\n                    };\r\n                }\r\n                if (!this._workspaceEdit.documentChanges) {\r\n                    throw new Error('Workspace edit is not configured for versioned document changes.');\r\n                }\r\n                var textDocument = key;\r\n                var result = this._textEditChanges[textDocument.uri];\r\n                if (!result) {\r\n                    var edits = [];\r\n                    var textDocumentEdit = {\r\n                        textDocument: textDocument,\r\n                        edits: edits\r\n                    };\r\n                    this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                    result = new TextEditChangeImpl(edits);\r\n                    this._textEditChanges[textDocument.uri] = result;\r\n                }\r\n                return result;\r\n            }\r\n            else {\r\n                if (!this._workspaceEdit) {\r\n                    this._workspaceEdit = {\r\n                        changes: Object.create(null)\r\n                    };\r\n                }\r\n                if (!this._workspaceEdit.changes) {\r\n                    throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n                }\r\n                var result = this._textEditChanges[key];\r\n                if (!result) {\r\n                    var edits = [];\r\n                    this._workspaceEdit.changes[key] = edits;\r\n                    result = new TextEditChangeImpl(edits);\r\n                    this._textEditChanges[key] = result;\r\n                }\r\n                return result;\r\n            }\r\n        };\r\n        return WorkspaceChange;\r\n    }());\r\n    exports.WorkspaceChange = WorkspaceChange;\r\n    /**\r\n     * The TextDocumentIdentifier namespace provides helper functions to work with\r\n     * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n     */\r\n    var TextDocumentIdentifier;\r\n    (function (TextDocumentIdentifier) {\r\n        /**\r\n         * Creates a new TextDocumentIdentifier literal.\r\n         * @param uri The document's uri.\r\n         */\r\n        function create(uri) {\r\n            return { uri: uri };\r\n        }\r\n        TextDocumentIdentifier.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.uri);\r\n        }\r\n        TextDocumentIdentifier.is = is;\r\n    })(TextDocumentIdentifier = exports.TextDocumentIdentifier || (exports.TextDocumentIdentifier = {}));\r\n    /**\r\n     * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n     * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n     */\r\n    var VersionedTextDocumentIdentifier;\r\n    (function (VersionedTextDocumentIdentifier) {\r\n        /**\r\n         * Creates a new VersionedTextDocumentIdentifier literal.\r\n         * @param uri The document's uri.\r\n         * @param uri The document's text.\r\n         */\r\n        function create(uri, version) {\r\n            return { uri: uri, version: version };\r\n        }\r\n        VersionedTextDocumentIdentifier.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.number(candidate.version);\r\n        }\r\n        VersionedTextDocumentIdentifier.is = is;\r\n    })(VersionedTextDocumentIdentifier = exports.VersionedTextDocumentIdentifier || (exports.VersionedTextDocumentIdentifier = {}));\r\n    /**\r\n     * The TextDocumentItem namespace provides helper functions to work with\r\n     * [TextDocumentItem](#TextDocumentItem) literals.\r\n     */\r\n    var TextDocumentItem;\r\n    (function (TextDocumentItem) {\r\n        /**\r\n         * Creates a new TextDocumentItem literal.\r\n         * @param uri The document's uri.\r\n         * @param uri The document's language identifier.\r\n         * @param uri The document's version number.\r\n         * @param uri The document's text.\r\n         */\r\n        function create(uri, languageId, version, text) {\r\n            return { uri: uri, languageId: languageId, version: version, text: text };\r\n        }\r\n        TextDocumentItem.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n        }\r\n        TextDocumentItem.is = is;\r\n    })(TextDocumentItem = exports.TextDocumentItem || (exports.TextDocumentItem = {}));\r\n    /**\r\n     * The kind of a completion entry.\r\n     */\r\n    var CompletionItemKind;\r\n    (function (CompletionItemKind) {\r\n        CompletionItemKind.Text = 1;\r\n        CompletionItemKind.Method = 2;\r\n        CompletionItemKind.Function = 3;\r\n        CompletionItemKind.Constructor = 4;\r\n        CompletionItemKind.Field = 5;\r\n        CompletionItemKind.Variable = 6;\r\n        CompletionItemKind.Class = 7;\r\n        CompletionItemKind.Interface = 8;\r\n        CompletionItemKind.Module = 9;\r\n        CompletionItemKind.Property = 10;\r\n        CompletionItemKind.Unit = 11;\r\n        CompletionItemKind.Value = 12;\r\n        CompletionItemKind.Enum = 13;\r\n        CompletionItemKind.Keyword = 14;\r\n        CompletionItemKind.Snippet = 15;\r\n        CompletionItemKind.Color = 16;\r\n        CompletionItemKind.File = 17;\r\n        CompletionItemKind.Reference = 18;\r\n    })(CompletionItemKind = exports.CompletionItemKind || (exports.CompletionItemKind = {}));\r\n    /**\r\n     * Defines whether the insert text in a completion item should be interpreted as\r\n     * plain text or a snippet.\r\n     */\r\n    var InsertTextFormat;\r\n    (function (InsertTextFormat) {\r\n        /**\r\n         * The primary text to be inserted is treated as a plain string.\r\n         */\r\n        InsertTextFormat.PlainText = 1;\r\n        /**\r\n         * The primary text to be inserted is treated as a snippet.\r\n         *\r\n         * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n         * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n         * the end of the snippet. Placeholders with equal identifiers are linked,\r\n         * that is typing in one will update others too.\r\n         *\r\n         * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n         */\r\n        InsertTextFormat.Snippet = 2;\r\n    })(InsertTextFormat = exports.InsertTextFormat || (exports.InsertTextFormat = {}));\r\n    /**\r\n     * The CompletionItem namespace provides functions to deal with\r\n     * completion items.\r\n     */\r\n    var CompletionItem;\r\n    (function (CompletionItem) {\r\n        /**\r\n         * Create a completion item and seed it with a label.\r\n         * @param label The completion item's label\r\n         */\r\n        function create(label) {\r\n            return { label: label };\r\n        }\r\n        CompletionItem.create = create;\r\n    })(CompletionItem = exports.CompletionItem || (exports.CompletionItem = {}));\r\n    /**\r\n     * The CompletionList namespace provides functions to deal with\r\n     * completion lists.\r\n     */\r\n    var CompletionList;\r\n    (function (CompletionList) {\r\n        /**\r\n         * Creates a new completion list.\r\n         *\r\n         * @param items The completion items.\r\n         * @param isIncomplete The list is not complete.\r\n         */\r\n        function create(items, isIncomplete) {\r\n            return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n        }\r\n        CompletionList.create = create;\r\n    })(CompletionList = exports.CompletionList || (exports.CompletionList = {}));\r\n    var MarkedString;\r\n    (function (MarkedString) {\r\n        /**\r\n         * Creates a marked string from plain text.\r\n         *\r\n         * @param plainText The plain text.\r\n         */\r\n        function fromPlainText(plainText) {\r\n            return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n        }\r\n        MarkedString.fromPlainText = fromPlainText;\r\n    })(MarkedString = exports.MarkedString || (exports.MarkedString = {}));\r\n    /**\r\n     * The ParameterInformation namespace provides helper functions to work with\r\n     * [ParameterInformation](#ParameterInformation) literals.\r\n     */\r\n    var ParameterInformation;\r\n    (function (ParameterInformation) {\r\n        /**\r\n         * Creates a new parameter information literal.\r\n         *\r\n         * @param label A label string.\r\n         * @param documentation A doc string.\r\n         */\r\n        function create(label, documentation) {\r\n            return documentation ? { label: label, documentation: documentation } : { label: label };\r\n        }\r\n        ParameterInformation.create = create;\r\n        ;\r\n    })(ParameterInformation = exports.ParameterInformation || (exports.ParameterInformation = {}));\r\n    /**\r\n     * The SignatureInformation namespace provides helper functions to work with\r\n     * [SignatureInformation](#SignatureInformation) literals.\r\n     */\r\n    var SignatureInformation;\r\n    (function (SignatureInformation) {\r\n        function create(label, documentation) {\r\n            var parameters = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                parameters[_i - 2] = arguments[_i];\r\n            }\r\n            var result = { label: label };\r\n            if (Is.defined(documentation)) {\r\n                result.documentation = documentation;\r\n            }\r\n            if (Is.defined(parameters)) {\r\n                result.parameters = parameters;\r\n            }\r\n            else {\r\n                result.parameters = [];\r\n            }\r\n            return result;\r\n        }\r\n        SignatureInformation.create = create;\r\n    })(SignatureInformation = exports.SignatureInformation || (exports.SignatureInformation = {}));\r\n    /**\r\n     * A document highlight kind.\r\n     */\r\n    var DocumentHighlightKind;\r\n    (function (DocumentHighlightKind) {\r\n        /**\r\n         * A textual occurrance.\r\n         */\r\n        DocumentHighlightKind.Text = 1;\r\n        /**\r\n         * Read-access of a symbol, like reading a variable.\r\n         */\r\n        DocumentHighlightKind.Read = 2;\r\n        /**\r\n         * Write-access of a symbol, like writing to a variable.\r\n         */\r\n        DocumentHighlightKind.Write = 3;\r\n    })(DocumentHighlightKind = exports.DocumentHighlightKind || (exports.DocumentHighlightKind = {}));\r\n    /**\r\n     * DocumentHighlight namespace to provide helper functions to work with\r\n     * [DocumentHighlight](#DocumentHighlight) literals.\r\n     */\r\n    var DocumentHighlight;\r\n    (function (DocumentHighlight) {\r\n        /**\r\n         * Create a DocumentHighlight object.\r\n         * @param range The range the highlight applies to.\r\n         */\r\n        function create(range, kind) {\r\n            var result = { range: range };\r\n            if (Is.number(kind)) {\r\n                result.kind = kind;\r\n            }\r\n            return result;\r\n        }\r\n        DocumentHighlight.create = create;\r\n    })(DocumentHighlight = exports.DocumentHighlight || (exports.DocumentHighlight = {}));\r\n    /**\r\n     * A symbol kind.\r\n     */\r\n    var SymbolKind;\r\n    (function (SymbolKind) {\r\n        SymbolKind.File = 1;\r\n        SymbolKind.Module = 2;\r\n        SymbolKind.Namespace = 3;\r\n        SymbolKind.Package = 4;\r\n        SymbolKind.Class = 5;\r\n        SymbolKind.Method = 6;\r\n        SymbolKind.Property = 7;\r\n        SymbolKind.Field = 8;\r\n        SymbolKind.Constructor = 9;\r\n        SymbolKind.Enum = 10;\r\n        SymbolKind.Interface = 11;\r\n        SymbolKind.Function = 12;\r\n        SymbolKind.Variable = 13;\r\n        SymbolKind.Constant = 14;\r\n        SymbolKind.String = 15;\r\n        SymbolKind.Number = 16;\r\n        SymbolKind.Boolean = 17;\r\n        SymbolKind.Array = 18;\r\n    })(SymbolKind = exports.SymbolKind || (exports.SymbolKind = {}));\r\n    var SymbolInformation;\r\n    (function (SymbolInformation) {\r\n        /**\r\n         * Creates a new symbol information literal.\r\n         *\r\n         * @param name The name of the symbol.\r\n         * @param kind The kind of the symbol.\r\n         * @param range The range of the location of the symbol.\r\n         * @param uri The resource of the location of symbol, defaults to the current document.\r\n         * @param containerName The name of the symbol containg the symbol.\r\n         */\r\n        function create(name, kind, range, uri, containerName) {\r\n            var result = {\r\n                name: name,\r\n                kind: kind,\r\n                location: { uri: uri, range: range }\r\n            };\r\n            if (containerName) {\r\n                result.containerName = containerName;\r\n            }\r\n            return result;\r\n        }\r\n        SymbolInformation.create = create;\r\n    })(SymbolInformation = exports.SymbolInformation || (exports.SymbolInformation = {}));\r\n    /**\r\n     * The CodeActionContext namespace provides helper functions to work with\r\n     * [CodeActionContext](#CodeActionContext) literals.\r\n     */\r\n    var CodeActionContext;\r\n    (function (CodeActionContext) {\r\n        /**\r\n         * Creates a new CodeActionContext literal.\r\n         */\r\n        function create(diagnostics) {\r\n            return { diagnostics: diagnostics };\r\n        }\r\n        CodeActionContext.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is);\r\n        }\r\n        CodeActionContext.is = is;\r\n    })(CodeActionContext = exports.CodeActionContext || (exports.CodeActionContext = {}));\r\n    /**\r\n     * The CodeLens namespace provides helper functions to work with\r\n     * [CodeLens](#CodeLens) literals.\r\n     */\r\n    var CodeLens;\r\n    (function (CodeLens) {\r\n        /**\r\n         * Creates a new CodeLens literal.\r\n         */\r\n        function create(range, data) {\r\n            var result = { range: range };\r\n            if (Is.defined(data))\r\n                result.data = data;\r\n            return result;\r\n        }\r\n        CodeLens.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n        }\r\n        CodeLens.is = is;\r\n    })(CodeLens = exports.CodeLens || (exports.CodeLens = {}));\r\n    /**\r\n     * The FormattingOptions namespace provides helper functions to work with\r\n     * [FormattingOptions](#FormattingOptions) literals.\r\n     */\r\n    var FormattingOptions;\r\n    (function (FormattingOptions) {\r\n        /**\r\n         * Creates a new FormattingOptions literal.\r\n         */\r\n        function create(tabSize, insertSpaces) {\r\n            return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n        }\r\n        FormattingOptions.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n        }\r\n        FormattingOptions.is = is;\r\n    })(FormattingOptions = exports.FormattingOptions || (exports.FormattingOptions = {}));\r\n    /**\r\n     * A document link is a range in a text document that links to an internal or external resource, like another\r\n     * text document or a web site.\r\n     */\r\n    var DocumentLink = /** @class */ (function () {\r\n        function DocumentLink() {\r\n        }\r\n        return DocumentLink;\r\n    }());\r\n    exports.DocumentLink = DocumentLink;\r\n    /**\r\n     * The DocumentLink namespace provides helper functions to work with\r\n     * [DocumentLink](#DocumentLink) literals.\r\n     */\r\n    (function (DocumentLink) {\r\n        /**\r\n         * Creates a new DocumentLink literal.\r\n         */\r\n        function create(range, target) {\r\n            return { range: range, target: target };\r\n        }\r\n        DocumentLink.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n        }\r\n        DocumentLink.is = is;\r\n    })(DocumentLink = exports.DocumentLink || (exports.DocumentLink = {}));\r\n    exports.DocumentLink = DocumentLink;\r\n    exports.EOL = ['\\n', '\\r\\n', '\\r'];\r\n    var TextDocument;\r\n    (function (TextDocument) {\r\n        /**\r\n         * Creates a new ITextDocument literal from the given uri and content.\r\n         * @param uri The document's uri.\r\n         * @param languageId  The document's language Id.\r\n         * @param content The document's content.\r\n         */\r\n        function create(uri, languageId, version, content) {\r\n            return new FullTextDocument(uri, languageId, version, content);\r\n        }\r\n        TextDocument.create = create;\r\n        /**\r\n         * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n         */\r\n        function is(value) {\r\n            var candidate = value;\r\n            return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n                && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n        }\r\n        TextDocument.is = is;\r\n    })(TextDocument = exports.TextDocument || (exports.TextDocument = {}));\r\n    /**\r\n     * Represents reasons why a text document is saved.\r\n     */\r\n    var TextDocumentSaveReason;\r\n    (function (TextDocumentSaveReason) {\r\n        /**\r\n         * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n         * or by an API call.\r\n         */\r\n        TextDocumentSaveReason.Manual = 1;\r\n        /**\r\n         * Automatic after a delay.\r\n         */\r\n        TextDocumentSaveReason.AfterDelay = 2;\r\n        /**\r\n         * When the editor lost focus.\r\n         */\r\n        TextDocumentSaveReason.FocusOut = 3;\r\n    })(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n    var FullTextDocument = /** @class */ (function () {\r\n        function FullTextDocument(uri, languageId, version, content) {\r\n            this._uri = uri;\r\n            this._languageId = languageId;\r\n            this._version = version;\r\n            this._content = content;\r\n            this._lineOffsets = null;\r\n        }\r\n        Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n            get: function () {\r\n                return this._uri;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n            get: function () {\r\n                return this._languageId;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n            get: function () {\r\n                return this._version;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        FullTextDocument.prototype.getText = function () {\r\n            return this._content;\r\n        };\r\n        FullTextDocument.prototype.update = function (event, version) {\r\n            this._content = event.text;\r\n            this._version = version;\r\n            this._lineOffsets = null;\r\n        };\r\n        FullTextDocument.prototype.getLineOffsets = function () {\r\n            if (this._lineOffsets === null) {\r\n                var lineOffsets = [];\r\n                var text = this._content;\r\n                var isLineStart = true;\r\n                for (var i = 0; i < text.length; i++) {\r\n                    if (isLineStart) {\r\n                        lineOffsets.push(i);\r\n                        isLineStart = false;\r\n                    }\r\n                    var ch = text.charAt(i);\r\n                    isLineStart = (ch === '\\r' || ch === '\\n');\r\n                    if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                        i++;\r\n                    }\r\n                }\r\n                if (isLineStart && text.length > 0) {\r\n                    lineOffsets.push(text.length);\r\n                }\r\n                this._lineOffsets = lineOffsets;\r\n            }\r\n            return this._lineOffsets;\r\n        };\r\n        FullTextDocument.prototype.positionAt = function (offset) {\r\n            offset = Math.max(Math.min(offset, this._content.length), 0);\r\n            var lineOffsets = this.getLineOffsets();\r\n            var low = 0, high = lineOffsets.length;\r\n            if (high === 0) {\r\n                return Position.create(0, offset);\r\n            }\r\n            while (low < high) {\r\n                var mid = Math.floor((low + high) / 2);\r\n                if (lineOffsets[mid] > offset) {\r\n                    high = mid;\r\n                }\r\n                else {\r\n                    low = mid + 1;\r\n                }\r\n            }\r\n            // low is the least x for which the line offset is larger than the current offset\r\n            // or array.length if no line offset is larger than the current offset\r\n            var line = low - 1;\r\n            return Position.create(line, offset - lineOffsets[line]);\r\n        };\r\n        FullTextDocument.prototype.offsetAt = function (position) {\r\n            var lineOffsets = this.getLineOffsets();\r\n            if (position.line >= lineOffsets.length) {\r\n                return this._content.length;\r\n            }\r\n            else if (position.line < 0) {\r\n                return 0;\r\n            }\r\n            var lineOffset = lineOffsets[position.line];\r\n            var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n            return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n        };\r\n        Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n            get: function () {\r\n                return this.getLineOffsets().length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return FullTextDocument;\r\n    }());\r\n    var Is;\r\n    (function (Is) {\r\n        var toString = Object.prototype.toString;\r\n        function defined(value) {\r\n            return typeof value !== 'undefined';\r\n        }\r\n        Is.defined = defined;\r\n        function undefined(value) {\r\n            return typeof value === 'undefined';\r\n        }\r\n        Is.undefined = undefined;\r\n        function boolean(value) {\r\n            return value === true || value === false;\r\n        }\r\n        Is.boolean = boolean;\r\n        function string(value) {\r\n            return toString.call(value) === '[object String]';\r\n        }\r\n        Is.string = string;\r\n        function number(value) {\r\n            return toString.call(value) === '[object Number]';\r\n        }\r\n        Is.number = number;\r\n        function func(value) {\r\n            return toString.call(value) === '[object Function]';\r\n        }\r\n        Is.func = func;\r\n        function typedArray(value, check) {\r\n            return Array.isArray(value) && value.every(check);\r\n        }\r\n        Is.typedArray = typedArray;\r\n    })(Is || (Is = {}));\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-languageserver-types/lib/main.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ConsoleLogger = (function () {\n    function ConsoleLogger() {\n    }\n    ConsoleLogger.prototype.error = function (message) {\n        console.error(message);\n    };\n    ConsoleLogger.prototype.warn = function (message) {\n        console.warn(message);\n    };\n    ConsoleLogger.prototype.info = function (message) {\n        console.info(message);\n    };\n    ConsoleLogger.prototype.log = function (message) {\n        console.log(message);\n    };\n    ConsoleLogger.prototype.debug = function (message) {\n        console.debug(message);\n    };\n    return ConsoleLogger;\n}());\nexports.ConsoleLogger = ConsoleLogger;\n//# sourceMappingURL=logger.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/logger.js","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./reader\"));\n__export(require(\"./writer\"));\n__export(require(\"./connection\"));\n//# sourceMappingURL=index.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/socket/index.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar stream_1 = require(\"../stream\");\nvar WebSocketMessageReader = (function (_super) {\n    __extends(WebSocketMessageReader, _super);\n    function WebSocketMessageReader(socket) {\n        var _this = _super.call(this) || this;\n        _this.socket = socket;\n        _this.state = 'initial';\n        _this.events = [];\n        _this.socket.onMessage(function (message) {\n            return _this.readMessage(message);\n        });\n        _this.socket.onError(function (error) {\n            return _this.fireError(error);\n        });\n        _this.socket.onClose(function (code, reason) {\n            if (code !== 1000) {\n                var error = {\n                    name: '' + code,\n                    message: \"Error during socket reconnect: code = \" + code + \", reason = \" + reason\n                };\n                _this.fireError(error);\n            }\n            _this.fireClose();\n        });\n        return _this;\n    }\n    WebSocketMessageReader.prototype.listen = function (callback) {\n        if (this.state === 'initial') {\n            if (this.events.length !== 0) {\n                var event_1 = this.events.pop();\n                if (event_1.message) {\n                    _super.prototype.readMessage.call(this, event_1.message, callback);\n                }\n                else if (event_1.error) {\n                    this.fireError(event_1.error);\n                }\n                else {\n                    this.fireClose();\n                }\n            }\n            this.callback = callback;\n            this.state = 'listening';\n        }\n    };\n    WebSocketMessageReader.prototype.readMessage = function (message) {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message: message });\n        }\n        else if (this.state === 'listening') {\n            _super.prototype.readMessage.call(this, message, this.callback);\n        }\n    };\n    WebSocketMessageReader.prototype.fireError = function (error) {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error: error });\n        }\n        else if (this.state === 'listening') {\n            _super.prototype.fireError.call(this, error);\n        }\n    };\n    WebSocketMessageReader.prototype.fireClose = function () {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        }\n        else if (this.state === 'listening') {\n            _super.prototype.fireClose.call(this);\n        }\n        this.state = 'closed';\n    };\n    return WebSocketMessageReader;\n}(stream_1.AbstractStreamMessageReader));\nexports.WebSocketMessageReader = WebSocketMessageReader;\n//# sourceMappingURL=reader.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/socket/reader.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar stream_1 = require(\"../stream\");\nvar WebSocketMessageWriter = (function (_super) {\n    __extends(WebSocketMessageWriter, _super);\n    function WebSocketMessageWriter(socket) {\n        var _this = _super.call(this) || this;\n        _this.socket = socket;\n        return _this;\n    }\n    WebSocketMessageWriter.prototype.send = function (content) {\n        try {\n            this.socket.send(content);\n        }\n        catch (e) {\n            this.fireError(e);\n        }\n    };\n    return WebSocketMessageWriter;\n}(stream_1.AbstractStreamMessageWriter));\nexports.WebSocketMessageWriter = WebSocketMessageWriter;\n//# sourceMappingURL=writer.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/socket/writer.js","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\nexports.RequestType = vscode_jsonrpc_1.RequestType;\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\nconst protocol_1 = require(\"./protocol\");\nexports.InitializeError = protocol_1.InitializeError;\nconst is = require(\"./utils/is\");\nconst async_1 = require(\"./utils/async\");\nconst UUID = require(\"./utils/uuid\");\n__export(require(\"vscode-languageserver-types\"));\n__export(require(\"./protocol\"));\n/**\n * An action to be performed when the connection is producing errors.\n */\nvar ErrorAction;\n(function (ErrorAction) {\n    /**\n     * Continue running the server.\n     */\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\n    /**\n     * Shutdown the server.\n     */\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\n/**\n * An action to be performed when the connection to a server got closed.\n */\nvar CloseAction;\n(function (CloseAction) {\n    /**\n     * Don't restart the server. The connection stays closed.\n     */\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\n    /**\n     * Restart the server.\n     */\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\nclass DefaultErrorHandler {\n    constructor(name, client) {\n        this.name = name;\n        this.client = client;\n        this.restarts = [];\n    }\n    error(_error, _message, count) {\n        if (count && count <= 3) {\n            return ErrorAction.Continue;\n        }\n        return ErrorAction.Shutdown;\n    }\n    closed() {\n        this.restarts.push(Date.now());\n        if (this.restarts.length < 5) {\n            return CloseAction.Restart;\n        }\n        else {\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n            if (diff <= 3 * 60 * 1000) {\n                if (this.client.window) {\n                    this.client.window.showMessage(protocol_1.MessageType.Error, `The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\n                }\n                return CloseAction.DoNotRestart;\n            }\n            else {\n                this.restarts.shift();\n                return CloseAction.Restart;\n            }\n        }\n    }\n}\nvar RevealOutputChannelOn;\n(function (RevealOutputChannelOn) {\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\nvar State;\n(function (State) {\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\n    State[State[\"Running\"] = 2] = \"Running\";\n})(State = exports.State || (exports.State = {}));\nvar ClientState;\n(function (ClientState) {\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\n})(ClientState || (ClientState = {}));\nclass DocumentNotifiactions {\n    constructor(_client, _event, _type, _createParams, _selectorFilter) {\n        this._client = _client;\n        this._event = _event;\n        this._type = _type;\n        this._createParams = _createParams;\n        this._selectorFilter = _selectorFilter;\n        this._selectors = new Map();\n    }\n    static textDocumentFilter(languages, selectors, textDocument) {\n        for (const selector of selectors) {\n            if (languages.match(selector, textDocument)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this._event(this.callback, this);\n        }\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\n    }\n    callback(data) {\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\n            this._client.sendNotification(this._type, this._createParams(data));\n            this.notificationSent(data);\n        }\n    }\n    notificationSent(_data) {\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        if (this._listener) {\n            this._listener.dispose();\n        }\n    }\n}\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client, _syncedDocuments) {\n        super(client, client.workspace.onDidOpenTextDocument, protocol_1.DidOpenTextDocumentNotification.type, (textDocument) => {\n            const { uri, languageId, version } = textDocument;\n            const text = textDocument.getText();\n            return {\n                textDocument: {\n                    uri, languageId, version, text\n                }\n            };\n        }, (selectors, data) => DocumentNotifiactions.textDocumentFilter(client.languages, selectors, data));\n        this._syncedDocuments = _syncedDocuments;\n    }\n    register(data) {\n        super.register(data);\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        let documentSelector = data.registerOptions.documentSelector;\n        this._client.workspace.textDocuments.forEach((textDocument) => {\n            let uri = textDocument.uri;\n            if (!textDocument || this._syncedDocuments.has(uri)) {\n                return;\n            }\n            if (this._client.languages.match(documentSelector, textDocument)) {\n                this._client.sendNotification(this._type, this._createParams(textDocument));\n                this._syncedDocuments.set(uri, textDocument);\n            }\n        });\n    }\n    notificationSent(textDocument) {\n        super.notificationSent(textDocument);\n        this._syncedDocuments.set(textDocument.uri, textDocument);\n    }\n}\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client, _syncedDocuments) {\n        super(client, client.workspace.onDidCloseTextDocument, protocol_1.DidCloseTextDocumentNotification.type, (textDocument) => {\n            return {\n                textDocument: {\n                    uri: textDocument.uri\n                }\n            };\n        }, (selectors, data) => DocumentNotifiactions.textDocumentFilter(client.languages, selectors, data));\n        this._syncedDocuments = _syncedDocuments;\n    }\n    notificationSent(textDocument) {\n        super.notificationSent(textDocument);\n        this._syncedDocuments.delete(textDocument.uri);\n    }\n    unregister(id) {\n        let selector = this._selectors.get(id);\n        super.unregister(id);\n        let selectors = this._selectors.values();\n        this._syncedDocuments.forEach((textDocument) => {\n            if (this._client.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\n                this._client.sendNotification(this._type, this._createParams(textDocument));\n                this._syncedDocuments.delete(textDocument.uri);\n            }\n        });\n    }\n}\nclass DidChangeTextDocumentFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._changeData = new Map();\n        this._forcingDelivery = false;\n        this._workspace = _client.workspace;\n        this._languages = _client.languages;\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this._workspace.onDidChangeTextDocument(this.callback, this);\n        }\n        this._changeData.set(data.id, {\n            documentSelector: data.registerOptions.documentSelector,\n            syncKind: data.registerOptions.syncKind\n        });\n    }\n    callback(event) {\n        for (const changeData of this._changeData.values()) {\n            if (this._languages.match(changeData.documentSelector, event.textDocument)) {\n                if (changeData.syncKind === protocol_1.TextDocumentSyncKind.Incremental) {\n                    this.sendDidChangeTextDocumentNotification(event.textDocument, event.contentChanges);\n                }\n                else if (changeData.syncKind === protocol_1.TextDocumentSyncKind.Full) {\n                    if (this._changeDelayer) {\n                        if (this._changeDelayer.uri !== event.textDocument.uri) {\n                            // Use this force delivery to track boolean state. Otherwise we might call two times.\n                            this.forceDelivery();\n                            this._changeDelayer.uri = event.textDocument.uri;\n                        }\n                        this._changeDelayer.delayer.trigger(() => {\n                            this.sendDidChangeTextDocumentNotification(event.textDocument);\n                        });\n                    }\n                    else {\n                        this._changeDelayer = {\n                            uri: event.textDocument.uri,\n                            delayer: new async_1.Delayer(200)\n                        };\n                        this._changeDelayer.delayer.trigger(() => {\n                            this.sendDidChangeTextDocumentNotification(event.textDocument);\n                        }, -1);\n                    }\n                }\n            }\n        }\n    }\n    sendDidChangeTextDocumentNotification(textDocument, contentChanges = [{ text: textDocument.getText() }]) {\n        this._client.sendNotification(protocol_1.DidChangeTextDocumentNotification.type, {\n            textDocument: {\n                uri: textDocument.uri,\n                version: textDocument.version\n            },\n            contentChanges\n        });\n    }\n    unregister(id) {\n        this._changeData.delete(id);\n        if (this._changeData.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    forceDelivery() {\n        if (this._forcingDelivery || !this._changeDelayer) {\n            return;\n        }\n        try {\n            this._forcingDelivery = true;\n            this._changeDelayer.delayer.forceDelivery();\n        }\n        finally {\n            this._forcingDelivery = false;\n        }\n    }\n}\nclass WillSaveWaitUntilFeature {\n    constructor(_client) {\n        this._client = _client;\n        this._selectors = new Map();\n        this.workspace = _client.workspace;\n        this.languages = _client.languages;\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this.workspace.onWillSaveTextDocument(this.callback, this);\n        }\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\n    }\n    callback(event) {\n        if (DocumentNotifiactions.textDocumentFilter(this.languages, this._selectors.values(), event.textDocument)) {\n            event.waitUntil(this._client.sendRequest(protocol_1.WillSaveTextDocumentWaitUntilRequest.type, event));\n        }\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    dispose() {\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n}\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\n    constructor(client) {\n        super(client, client.workspace.onDidSaveTextDocument, protocol_1.DidSaveTextDocumentNotification.type, (textDocument) => {\n            let result = {\n                textDocument: {\n                    uri: textDocument.uri,\n                    version: textDocument.version\n                }\n            };\n            if (this._includeText) {\n                result.text = textDocument.getText();\n            }\n            return result;\n        }, (selectors, data) => DocumentNotifiactions.textDocumentFilter(client.languages, selectors, data));\n    }\n    register(data) {\n        this._includeText = !!data.registerOptions.includeText;\n        super.register(data);\n    }\n}\nclass LanguageFeature {\n    constructor(_createProvider) {\n        this._createProvider = _createProvider;\n        this._providers = new Map();\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        let provider = this._createProvider(data.registerOptions);\n        if (provider) {\n            this._providers.set(data.id, provider);\n        }\n    }\n    unregister(id) {\n        let provider = this._providers.get(id);\n        if (provider) {\n            provider.dispose();\n        }\n    }\n    dispose() {\n        this._providers.forEach((value) => {\n            value.dispose();\n        });\n    }\n}\nclass ExecuteCommandFeature {\n    constructor(_client, _logger) {\n        this._client = _client;\n        this._logger = _logger;\n        this._commands = new Map();\n    }\n    register(data) {\n        if (data.registerOptions.commands) {\n            let disposeables = [];\n            for (const command of data.registerOptions.commands) {\n                disposeables.push(this._client.commands.registerCommand(command, (...args) => {\n                    let params = {\n                        command,\n                        arguments: args\n                    };\n                    this._client.sendRequest(protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => { this._logger(protocol_1.ExecuteCommandRequest.type, error); });\n                }));\n            }\n            this._commands.set(data.id, disposeables);\n        }\n    }\n    unregister(id) {\n        let disposeables = this._commands.get(id);\n        if (disposeables) {\n            disposeables.forEach(disposable => disposable.dispose());\n        }\n    }\n    dispose() {\n        this._commands.forEach((value) => {\n            value.forEach(disposable => disposable.dispose());\n        });\n    }\n}\nclass BaseLanguageClient {\n    constructor(options) {\n        this._registeredHandlers = new Map();\n        this._name = options.name;\n        this._id = options.id || options.name.toLowerCase();\n        this.languages = options.services.languages;\n        this.workspace = options.services.workspace;\n        this.commands = options.services.commands;\n        this.window = options.services.window;\n        this.connectionProvider = options.connectionProvider;\n        const clientOptions = options.clientOptions;\n        this._clientOptions = Object.assign({}, clientOptions, { documentSelector: clientOptions.documentSelector || [], synchronize: clientOptions.synchronize || {}, outputChannelName: clientOptions.outputChannelName || this._name, revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error, errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name, this) });\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\n        this.state = ClientState.Initial;\n        this._connectionPromise = undefined;\n        this._resolvedConnection = undefined;\n        this._outputChannel = undefined;\n        this._listeners = undefined;\n        this._providers = undefined;\n        this._diagnostics = undefined;\n        this._fileEvents = [];\n        this._fileEventDelayer = new async_1.Delayer(250);\n        this._onReady = new Promise((resolve, reject) => {\n            this._onReadyCallbacks = { resolve, reject };\n        });\n        this._telemetryEmitter = new vscode_jsonrpc_1.Emitter();\n        this._stateChangeEmitter = new vscode_jsonrpc_1.Emitter();\n        this._tracer = {\n            log: (message, data) => {\n                this.logTrace(message, data);\n            }\n        };\n    }\n    get state() {\n        return this._state;\n    }\n    set state(value) {\n        let oldState = this.getPublicState();\n        this._state = value;\n        let newState = this.getPublicState();\n        if (newState !== oldState) {\n            this._stateChangeEmitter.fire({ oldState, newState });\n        }\n    }\n    getPublicState() {\n        if (this.state === ClientState.Running) {\n            return State.Running;\n        }\n        else {\n            return State.Stopped;\n        }\n    }\n    sendRequest(type, ...params) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        this.forceDocumentSync();\n        try {\n            return this._resolvedConnection.sendRequest(type, ...params);\n        }\n        catch (error) {\n            this.error(`Sending request ${is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    onRequest(type, handler) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        try {\n            this._resolvedConnection.onRequest(type, handler);\n        }\n        catch (error) {\n            this.error(`Registering request handler ${is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    sendNotification(type, params) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        this.forceDocumentSync();\n        try {\n            this._resolvedConnection.sendNotification(type, params);\n        }\n        catch (error) {\n            this.error(`Sending notification ${is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    onNotification(type, handler) {\n        if (!this.isConnectionActive()) {\n            throw new Error('Language client is not ready yet');\n        }\n        try {\n            this._resolvedConnection.onNotification(type, handler);\n        }\n        catch (error) {\n            this.error(`Registering notification handler ${is.string(type) ? type : type.method} failed.`, error);\n            throw error;\n        }\n    }\n    get onTelemetry() {\n        return this._telemetryEmitter.event;\n    }\n    get onDidChangeState() {\n        return this._stateChangeEmitter.event;\n    }\n    get outputChannel() {\n        if (!this._outputChannel && this.window && this.window.createOutputChannel) {\n            this._outputChannel = this.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\n        }\n        return this._outputChannel;\n    }\n    get diagnostics() {\n        return this._diagnostics;\n    }\n    createDefaultErrorHandler() {\n        return new DefaultErrorHandler(this._name, this);\n    }\n    set trace(value) {\n        this._trace = value;\n        this.onReady().then(() => {\n            this.resolveConnection().then((connection) => {\n                connection.trace(value, this._tracer);\n            });\n        }, () => {\n        });\n    }\n    data2String(data) {\n        if (data instanceof vscode_jsonrpc_1.ResponseError) {\n            const responseError = data;\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\n        }\n        if (data instanceof Error) {\n            if (is.string(data.stack)) {\n                return data.stack;\n            }\n            return data.message;\n        }\n        if (is.string(data)) {\n            return data;\n        }\n        return data.toString();\n    }\n    info(message, data) {\n        const outputChannel = this.outputChannel;\n        if (outputChannel) {\n            outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\n            if (data) {\n                outputChannel.appendLine(this.data2String(data));\n            }\n            if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\n                outputChannel.show(true);\n            }\n        }\n    }\n    warn(message, data) {\n        const outputChannel = this.outputChannel;\n        if (outputChannel) {\n            outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\n            if (data) {\n                outputChannel.appendLine(this.data2String(data));\n            }\n            if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\n                outputChannel.show(true);\n            }\n        }\n    }\n    error(message, data) {\n        const outputChannel = this.outputChannel;\n        if (outputChannel) {\n            outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\n            if (data) {\n                outputChannel.appendLine(this.data2String(data));\n            }\n            if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\n                outputChannel.show(true);\n            }\n        }\n    }\n    logTrace(message, data) {\n        const outputChannel = this.outputChannel;\n        if (outputChannel) {\n            outputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\n            if (data) {\n                outputChannel.appendLine(this.data2String(data));\n            }\n            outputChannel.show(true);\n        }\n    }\n    needsStart() {\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\n    }\n    needsStop() {\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\n    }\n    onReady() {\n        return this._onReady;\n    }\n    isConnectionActive() {\n        return this.state === ClientState.Running && !!this._resolvedConnection;\n    }\n    start() {\n        this._listeners = [];\n        this._providers = [];\n        // If we restart then the diagnostics collection is reused.\n        if (!this._diagnostics && this.languages.createDiagnosticCollection) {\n            this._diagnostics = this.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName);\n        }\n        this.state = ClientState.Starting;\n        this.resolveConnection().then((connection) => {\n            connection.onLogMessage((message) => {\n                switch (message.type) {\n                    case protocol_1.MessageType.Error:\n                        this.error(message.message);\n                        break;\n                    case protocol_1.MessageType.Warning:\n                        this.warn(message.message);\n                        break;\n                    case protocol_1.MessageType.Info:\n                        this.info(message.message);\n                        break;\n                    default: {\n                        if (this.outputChannel) {\n                            this.outputChannel.appendLine(message.message);\n                        }\n                    }\n                }\n            });\n            const window = this.window;\n            if (window) {\n                connection.onShowMessage((message) => window.showMessage(message.type, message.message));\n                connection.onRequest(protocol_1.ShowMessageRequest.type, (params) => {\n                    const actions = params.actions || [];\n                    return window.showMessage(params.type, params.message, ...actions);\n                });\n            }\n            connection.onTelemetry((data) => {\n                this._telemetryEmitter.fire(data);\n            });\n            this.initRegistrationHandlers(connection);\n            connection.listen();\n            // Error is handled in the intialize call.\n            this.initialize(connection).then(undefined, () => { });\n        }, (error) => {\n            this.state = ClientState.StartFailed;\n            this._onReadyCallbacks.reject(error);\n            this.error('Starting client failed', error);\n            if (this.window) {\n                this.window.showMessage(protocol_1.MessageType.Error, `Couldn't start client ${this._name}`);\n            }\n        });\n        return vscode_jsonrpc_1.Disposable.create(() => {\n            if (this.needsStop()) {\n                this.stop();\n            }\n        });\n    }\n    resolveConnection() {\n        if (!this._connectionPromise) {\n            this._connectionPromise = this.createConnection();\n        }\n        return this._connectionPromise;\n    }\n    createClientCapabilities() {\n        return {\n            workspace: Object.assign({}, this.workspace.capabilities, { didChangeConfiguration: {\n                    dynamicRegistration: false\n                }, didChangeWatchedFiles: {\n                    dynamicRegistration: false\n                }, symbol: {\n                    dynamicRegistration: true\n                }, executeCommand: {\n                    dynamicRegistration: true\n                } }),\n            textDocument: {\n                synchronization: Object.assign({}, this.workspace.synchronization, { dynamicRegistration: true }),\n                completion: Object.assign({}, this.languages.completion, { dynamicRegistration: true }),\n                hover: {\n                    dynamicRegistration: true\n                },\n                signatureHelp: {\n                    dynamicRegistration: true\n                },\n                references: {\n                    dynamicRegistration: true\n                },\n                documentHighlight: {\n                    dynamicRegistration: true\n                },\n                documentSymbol: {\n                    dynamicRegistration: true\n                },\n                formatting: {\n                    dynamicRegistration: true\n                },\n                rangeFormatting: {\n                    dynamicRegistration: true\n                },\n                onTypeFormatting: {\n                    dynamicRegistration: true\n                },\n                definition: {\n                    dynamicRegistration: true\n                },\n                codeAction: {\n                    dynamicRegistration: true\n                },\n                codeLens: {\n                    dynamicRegistration: true\n                },\n                documentLink: {\n                    dynamicRegistration: true\n                },\n                rename: {\n                    dynamicRegistration: true\n                }\n            }\n        };\n    }\n    initialize(connection) {\n        this.refreshTrace(connection, false);\n        let initOption = this._clientOptions.initializationOptions;\n        const rootPath = this.workspace && this.workspace.rootPath || null;\n        const rootUri = this.workspace && this.workspace.rootUri || null;\n        const clientCapabilities = this.createClientCapabilities();\n        let initParams = {\n            processId: process.pid,\n            rootPath, rootUri,\n            capabilities: clientCapabilities,\n            initializationOptions: is.func(initOption) ? initOption() : initOption,\n            trace: vscode_jsonrpc_1.Trace.toString(this._trace)\n        };\n        return connection.initialize(initParams).then((result) => {\n            this._resolvedConnection = connection;\n            this.state = ClientState.Running;\n            this._capabilites = result.capabilities;\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\n            // backward compatibility\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\n            connection.onRequest(protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\n            // backward compatibility\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\n            connection.onRequest(protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\n            connection.onRequest(protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\n            connection.sendNotification(protocol_1.InitializedNotification.type, {});\n            this.hookFileEvents(connection);\n            this.hookConfigurationChanged(connection);\n            if (this._clientOptions.documentSelector) {\n                let selectorOptions = { documentSelector: this._clientOptions.documentSelector };\n                let textDocumentSyncOptions = undefined;\n                if (is.number(this._capabilites.textDocumentSync) && this._capabilites.textDocumentSync !== protocol_1.TextDocumentSyncKind.None) {\n                    textDocumentSyncOptions = {\n                        openClose: true,\n                        change: this._capabilites.textDocumentSync,\n                        save: {\n                            includeText: false\n                        }\n                    };\n                }\n                else if (this._capabilites.textDocumentSync !== void 0 && this._capabilites.textDocumentSync !== null) {\n                    textDocumentSyncOptions = this._capabilites.textDocumentSync;\n                }\n                if (textDocumentSyncOptions) {\n                    if (textDocumentSyncOptions.openClose) {\n                        this.registerHandler(protocol_1.DidOpenTextDocumentNotification.type.method, { id: UUID.generateUuid(), registerOptions: selectorOptions });\n                        this.registerHandler(protocol_1.DidCloseTextDocumentNotification.type.method, { id: UUID.generateUuid(), registerOptions: selectorOptions });\n                    }\n                    if (textDocumentSyncOptions.change !== protocol_1.TextDocumentSyncKind.None) {\n                        this.registerHandler(protocol_1.DidChangeTextDocumentNotification.type.method, {\n                            id: UUID.generateUuid(),\n                            registerOptions: Object.assign({}, selectorOptions, { syncKind: textDocumentSyncOptions.change })\n                        });\n                    }\n                    if (textDocumentSyncOptions.willSave) {\n                        this.registerHandler(protocol_1.WillSaveTextDocumentNotification.type.method, { id: UUID.generateUuid(), registerOptions: selectorOptions });\n                    }\n                    if (textDocumentSyncOptions.willSaveWaitUntil) {\n                        this.registerHandler(protocol_1.WillSaveTextDocumentWaitUntilRequest.type.method, { id: UUID.generateUuid(), registerOptions: selectorOptions });\n                    }\n                    if (textDocumentSyncOptions.save) {\n                        this.registerHandler(protocol_1.DidSaveTextDocumentNotification.type.method, {\n                            id: UUID.generateUuid(),\n                            registerOptions: Object.assign({}, selectorOptions, { includeText: !!textDocumentSyncOptions.save.includeText })\n                        });\n                    }\n                }\n            }\n            this.hookCapabilities(connection);\n            this._onReadyCallbacks.resolve();\n            return result;\n        }, (error) => {\n            if (this._clientOptions.initializationFailedHandler) {\n                if (this._clientOptions.initializationFailedHandler(error)) {\n                    this.initialize(connection);\n                }\n                else {\n                    this.stop();\n                    this._onReadyCallbacks.reject(error);\n                }\n            }\n            else if (error instanceof vscode_jsonrpc_1.ResponseError && error.data && error.data.retry && this.window) {\n                this.window.showMessage(protocol_1.MessageType.Error, error.message, { title: 'Retry', id: \"retry\" }).then(item => {\n                    if (item && item.id === 'retry') {\n                        this.initialize(connection);\n                    }\n                    else {\n                        this.stop();\n                        this._onReadyCallbacks.reject(error);\n                    }\n                });\n            }\n            else {\n                if (error && error.message && this.window) {\n                    this.window.showMessage(protocol_1.MessageType.Error, error.message);\n                }\n                this.error('Server initialization failed.', error);\n                this.stop();\n                this._onReadyCallbacks.reject(error);\n            }\n        });\n    }\n    stop() {\n        if (!this._connectionPromise) {\n            this.state = ClientState.Stopped;\n            return Promise.resolve();\n        }\n        this.state = ClientState.Stopping;\n        this.cleanUp();\n        // unkook listeners\n        return this.resolveConnection().then(connection => {\n            return connection.shutdown().then(() => {\n                connection.exit();\n                connection.dispose();\n                this.state = ClientState.Stopped;\n                this._connectionPromise = undefined;\n                this._resolvedConnection = undefined;\n                // Remove all markers\n            });\n        });\n    }\n    cleanUp(diagnostics = true) {\n        if (this._listeners) {\n            this._listeners.forEach(listener => listener.dispose());\n            this._listeners = undefined;\n        }\n        if (this._providers) {\n            this._providers.forEach(provider => provider.dispose());\n            this._providers = undefined;\n        }\n        if (diagnostics && this._diagnostics) {\n            this._diagnostics.dispose();\n            this._diagnostics = undefined;\n        }\n        for (const handler of Array.from(this._registeredHandlers.values())) {\n            handler.dispose();\n        }\n        this._registeredHandlers.clear();\n    }\n    notifyFileEvent(event) {\n        this._fileEvents.push(event);\n        this._fileEventDelayer.trigger(() => {\n            this.onReady().then(() => {\n                this.resolveConnection().then(connection => {\n                    if (this.isConnectionActive()) {\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\n                    }\n                    this._fileEvents = [];\n                });\n            }, (error) => {\n                this.error(`Notify file events failed.`, error);\n            });\n        });\n    }\n    forceDocumentSync() {\n        this._registeredHandlers.get(protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\n    }\n    handleDiagnostics(params) {\n        if (!this._diagnostics) {\n            return;\n        }\n        this._diagnostics.set(params.uri, params.diagnostics);\n    }\n    createConnection() {\n        const errorHandler = this.handleConnectionError.bind(this);\n        const closeHandler = this.handleConnectionClosed.bind(this);\n        return this.connectionProvider.get(errorHandler, closeHandler, this.outputChannel);\n    }\n    handleConnectionClosed() {\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\n            return;\n        }\n        this._connectionPromise = undefined;\n        this._resolvedConnection = undefined;\n        let action = this._clientOptions.errorHandler.closed();\n        if (action === CloseAction.DoNotRestart) {\n            this.error('Connection to server got closed. Server will not be restarted.');\n            this.state = ClientState.Stopped;\n            this.cleanUp();\n        }\n        else if (action === CloseAction.Restart) {\n            this.info('Connection to server got closed. Server will restart.');\n            this.cleanUp(false);\n            this.state = ClientState.Initial;\n            this.start();\n        }\n    }\n    handleConnectionError(error, message, count) {\n        let action = this._clientOptions.errorHandler.error(error, message, count);\n        if (action === ErrorAction.Shutdown) {\n            this.error('Connection to server is erroring. Shutting down server.');\n            this.stop();\n        }\n    }\n    hookConfigurationChanged(connection) {\n        if (!this._clientOptions.synchronize.configurationSection || !this.workspace.configurations) {\n            return;\n        }\n        this.workspace.configurations.onDidChangeConfiguration(() => this.onDidChangeConfiguration(connection), this, this._listeners);\n        this.onDidChangeConfiguration(connection);\n    }\n    refreshTrace(connection, sendNotification = false) {\n        const configurations = this.workspace.configurations;\n        if (configurations) {\n            const config = configurations.getConfiguration(this._id);\n            this._trace = !!config ? vscode_jsonrpc_1.Trace.fromString(config.get('trace.server', 'off')) : vscode_jsonrpc_1.Trace.Off;\n            connection.trace(this._trace, this._tracer, sendNotification);\n        }\n    }\n    onDidChangeConfiguration(connection) {\n        this.refreshTrace(connection, true);\n        let keys;\n        let configurationSection = this._clientOptions.synchronize.configurationSection;\n        if (is.string(configurationSection)) {\n            keys = [configurationSection];\n        }\n        else if (is.stringArray(configurationSection)) {\n            keys = configurationSection;\n        }\n        if (keys) {\n            if (this.isConnectionActive()) {\n                connection.didChangeConfiguration({ settings: this.extractSettingsInformation(keys) });\n            }\n        }\n    }\n    extractSettingsInformation(keys) {\n        function ensurePath(config, path) {\n            let current = config;\n            for (let i = 0; i < path.length - 1; i++) {\n                let obj = current[path[i]];\n                if (!obj) {\n                    obj = Object.create(null);\n                    current[path[i]] = obj;\n                }\n                current = obj;\n            }\n            return current;\n        }\n        let result = Object.create(null);\n        for (let i = 0; i < keys.length; i++) {\n            let key = keys[i];\n            let index = key.indexOf('.');\n            let config = null;\n            if (index >= 0) {\n                config = this.workspace.configurations.getConfiguration(key.substr(0, index)).get(key.substr(index + 1));\n            }\n            else {\n                config = this.workspace.configurations.getConfiguration(key);\n            }\n            if (config) {\n                let path = keys[i].split('.');\n                ensurePath(result, path)[path[path.length - 1]] = config;\n            }\n        }\n        return result;\n    }\n    hookFileEvents(_connection) {\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\n        if (!fileEvents) {\n            return;\n        }\n        let watchers;\n        if (is.array(fileEvents)) {\n            watchers = fileEvents;\n        }\n        else {\n            watchers = [fileEvents];\n        }\n        if (!watchers) {\n            return;\n        }\n        watchers.forEach(watcher => {\n            watcher.onFileEvent(event => this.notifyFileEvent(event), null, this._listeners);\n        });\n    }\n    initRegistrationHandlers(_connection) {\n        const syncedDocuments = new Map();\n        const logger = (type, error) => { this.logFailedRequest(type, error); };\n        this._registeredHandlers.set(protocol_1.DidOpenTextDocumentNotification.type.method, new DidOpenTextDocumentFeature(this, syncedDocuments));\n        this._registeredHandlers.set(protocol_1.DidChangeTextDocumentNotification.type.method, new DidChangeTextDocumentFeature(this));\n        if (this.workspace.onWillSaveTextDocument) {\n            this._registeredHandlers.set(protocol_1.WillSaveTextDocumentNotification.type.method, new DocumentNotifiactions(this, this.workspace.onWillSaveTextDocument, protocol_1.WillSaveTextDocumentNotification.type, event => event, (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(this.languages, selectors, willSaveEvent.textDocument)));\n            if (!!this.workspace.synchronization && this.workspace.synchronization.willSaveWaitUntil) {\n                this._registeredHandlers.set(protocol_1.WillSaveTextDocumentWaitUntilRequest.type.method, new WillSaveWaitUntilFeature(this));\n            }\n        }\n        if (this.workspace.onDidSaveTextDocument) {\n            this._registeredHandlers.set(protocol_1.DidSaveTextDocumentNotification.type.method, new DidSaveTextDocumentFeature(this));\n        }\n        this._registeredHandlers.set(protocol_1.DidCloseTextDocumentNotification.type.method, new DidCloseTextDocumentFeature(this, syncedDocuments));\n        if (this.languages.registerCompletionItemProvider) {\n            this._registeredHandlers.set(protocol_1.CompletionRequest.type.method, new LanguageFeature((options) => this.createCompletionProvider(options)));\n        }\n        if (this.languages.registerHoverProvider) {\n            this._registeredHandlers.set(protocol_1.HoverRequest.type.method, new LanguageFeature((options) => this.createHoverProvider(options)));\n        }\n        if (this.languages.registerSignatureHelpProvider) {\n            this._registeredHandlers.set(protocol_1.SignatureHelpRequest.type.method, new LanguageFeature((options) => this.createSignatureHelpProvider(options)));\n        }\n        if (this.languages.registerDefinitionProvider) {\n            this._registeredHandlers.set(protocol_1.DefinitionRequest.type.method, new LanguageFeature((options) => this.createDefinitionProvider(options)));\n        }\n        if (this.languages.registerReferenceProvider) {\n            this._registeredHandlers.set(protocol_1.ReferencesRequest.type.method, new LanguageFeature((options) => this.createReferencesProvider(options)));\n        }\n        if (this.languages.registerDocumentHighlightProvider) {\n            this._registeredHandlers.set(protocol_1.DocumentHighlightRequest.type.method, new LanguageFeature((options) => this.createDocumentHighlightProvider(options)));\n        }\n        if (this.languages.registerDocumentSymbolProvider) {\n            this._registeredHandlers.set(protocol_1.DocumentSymbolRequest.type.method, new LanguageFeature((options) => this.createDocumentSymbolProvider(options)));\n        }\n        if (this.languages.registerWorkspaceSymbolProvider) {\n            this._registeredHandlers.set(protocol_1.WorkspaceSymbolRequest.type.method, new LanguageFeature((options) => this.createWorkspaceSymbolProvider(options)));\n        }\n        if (this.languages.registerCodeActionsProvider) {\n            this._registeredHandlers.set(protocol_1.CodeActionRequest.type.method, new LanguageFeature((options) => this.createCodeActionsProvider(options)));\n        }\n        if (this.languages.registerCodeLensProvider) {\n            this._registeredHandlers.set(protocol_1.CodeLensRequest.type.method, new LanguageFeature((options) => this.createCodeLensProvider(options)));\n        }\n        if (this.languages.registerDocumentFormattingEditProvider) {\n            this._registeredHandlers.set(protocol_1.DocumentFormattingRequest.type.method, new LanguageFeature((options) => this.createDocumentFormattingProvider(options)));\n        }\n        if (this.languages.registerDocumentRangeFormattingEditProvider) {\n            this._registeredHandlers.set(protocol_1.DocumentRangeFormattingRequest.type.method, new LanguageFeature((options) => this.createDocumentRangeFormattingProvider(options)));\n        }\n        if (this.languages.registerOnTypeFormattingEditProvider) {\n            this._registeredHandlers.set(protocol_1.DocumentOnTypeFormattingRequest.type.method, new LanguageFeature((options) => this.createDocumentOnTypeFormattingProvider(options)));\n        }\n        if (this.languages.registerRenameProvider) {\n            this._registeredHandlers.set(protocol_1.RenameRequest.type.method, new LanguageFeature((options) => this.createRenameProvider(options)));\n        }\n        if (this.languages.registerDocumentLinkProvider) {\n            this._registeredHandlers.set(protocol_1.DocumentLinkRequest.type.method, new LanguageFeature((options) => this.createDocumentLinkProvider(options)));\n        }\n        if (this.commands) {\n            this._registeredHandlers.set(protocol_1.ExecuteCommandRequest.type.method, new ExecuteCommandFeature(this, logger));\n        }\n    }\n    handleRegistrationRequest(params) {\n        return new Promise((resolve, _reject) => {\n            params.registrations.forEach((element) => {\n                const handler = this._registeredHandlers.get(element.method);\n                const options = element.registerOptions || {};\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\n                const data = {\n                    id: element.id,\n                    registerOptions: options\n                };\n                if (handler) {\n                    handler.register(data);\n                }\n            });\n            resolve();\n        });\n    }\n    handleUnregistrationRequest(params) {\n        return new Promise((resolve, _reject) => {\n            params.unregisterations.forEach((element) => {\n                const handler = this._registeredHandlers.get(element.method);\n                if (handler) {\n                    handler.unregister(element.id);\n                }\n            });\n            resolve();\n        });\n    }\n    handleApplyWorkspaceEdit(params) {\n        if (!this.workspace.applyEdit) {\n            return Promise.resolve({ applied: false });\n        }\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\n        // However doing it here adds some safety since the server can lag more behind then an extension.\n        let workspaceEdit = params.edit;\n        let openTextDocuments = new Map();\n        this.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri, document));\n        let versionMismatch = false;\n        if (workspaceEdit.documentChanges) {\n            for (const change of workspaceEdit.documentChanges) {\n                if (change.textDocument.version && change.textDocument.version >= 0) {\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\n                        versionMismatch = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (versionMismatch) {\n            return Promise.resolve({ applied: false });\n        }\n        return this.workspace.applyEdit(params.edit).then(applied => { return { applied }; });\n    }\n    ;\n    registerHandler(method, data) {\n        const handler = this._registeredHandlers.get(method);\n        if (handler) {\n            handler.register(data);\n        }\n    }\n    hookCapabilities(_connection) {\n        let documentSelector = this._clientOptions.documentSelector;\n        if (!documentSelector) {\n            return;\n        }\n        let selectorOptions = { documentSelector: documentSelector };\n        if (this._capabilites.completionProvider) {\n            let options = Object.assign({}, selectorOptions, this._capabilites.completionProvider);\n            this.registerHandler(protocol_1.CompletionRequest.type.method, { id: UUID.generateUuid(), registerOptions: options });\n        }\n        if (this._capabilites.hoverProvider) {\n            this.registerHandler(protocol_1.HoverRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.signatureHelpProvider) {\n            let options = Object.assign({}, selectorOptions, this._capabilites.signatureHelpProvider);\n            this.registerHandler(protocol_1.SignatureHelpRequest.type.method, { id: UUID.generateUuid(), registerOptions: options });\n        }\n        if (this._capabilites.definitionProvider) {\n            this.registerHandler(protocol_1.DefinitionRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.referencesProvider) {\n            this.registerHandler(protocol_1.ReferencesRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.documentHighlightProvider) {\n            this.registerHandler(protocol_1.DocumentHighlightRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.documentSymbolProvider) {\n            this.registerHandler(protocol_1.DocumentSymbolRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.workspaceSymbolProvider) {\n            this.registerHandler(protocol_1.WorkspaceSymbolRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.codeActionProvider) {\n            this.registerHandler(protocol_1.CodeActionRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.codeLensProvider) {\n            let options = Object.assign({}, selectorOptions, this._capabilites.codeLensProvider);\n            this.registerHandler(protocol_1.CodeLensRequest.type.method, { id: UUID.generateUuid(), registerOptions: options });\n        }\n        if (this._capabilites.documentFormattingProvider) {\n            this.registerHandler(protocol_1.DocumentFormattingRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.documentRangeFormattingProvider) {\n            this.registerHandler(protocol_1.DocumentRangeFormattingRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.documentOnTypeFormattingProvider) {\n            let options = Object.assign({}, selectorOptions, this._capabilites.documentOnTypeFormattingProvider);\n            this.registerHandler(protocol_1.DocumentOnTypeFormattingRequest.type.method, { id: UUID.generateUuid(), registerOptions: options });\n        }\n        if (this._capabilites.renameProvider) {\n            this.registerHandler(protocol_1.RenameRequest.type.method, { id: UUID.generateUuid(), registerOptions: Object.assign({}, selectorOptions) });\n        }\n        if (this._capabilites.documentLinkProvider) {\n            let options = Object.assign({}, selectorOptions, this._capabilites.documentLinkProvider);\n            this.registerHandler(protocol_1.DocumentLinkRequest.type.method, { id: UUID.generateUuid(), registerOptions: options });\n        }\n        if (this._capabilites.executeCommandProvider) {\n            let options = Object.assign({}, this._capabilites.executeCommandProvider);\n            this.registerHandler(protocol_1.ExecuteCommandRequest.type.method, { id: UUID.generateUuid(), registerOptions: options });\n        }\n    }\n    logFailedRequest(type, error) {\n        // If we get a request cancel don't log anything.\n        if (error instanceof vscode_jsonrpc_1.ResponseError && error.code === vscode_jsonrpc_1.ErrorCodes.RequestCancelled) {\n            return;\n        }\n        this.error(`Request ${type.method} failed.`, error);\n    }\n    createRequestHandler(type, onError) {\n        return (params, token) => {\n            return this.sendRequest(type, params, token).then((result) => result, (error) => {\n                this.logFailedRequest(type, error);\n                const result = onError ? onError(params, error) : null;\n                return Promise.reject(result);\n            });\n        };\n    }\n    createCompletionProvider(options) {\n        let triggerCharacters = options.triggerCharacters || [];\n        return this.languages.registerCompletionItemProvider(options.documentSelector, {\n            provideCompletionItems: this.createRequestHandler(protocol_1.CompletionRequest.type, () => []),\n            resolveCompletionItem: options.resolveProvider ? this.createRequestHandler(protocol_1.CompletionResolveRequest.type, (params) => params) : undefined\n        }, ...triggerCharacters);\n    }\n    createHoverProvider(options) {\n        return this.languages.registerHoverProvider(options.documentSelector, {\n            provideHover: this.createRequestHandler(protocol_1.HoverRequest.type)\n        });\n    }\n    createSignatureHelpProvider(options) {\n        let triggerCharacters = options.triggerCharacters || [];\n        return this.languages.registerSignatureHelpProvider(options.documentSelector, {\n            provideSignatureHelp: this.createRequestHandler(protocol_1.SignatureHelpRequest.type)\n        }, ...triggerCharacters);\n    }\n    createDefinitionProvider(options) {\n        return this.languages.registerDefinitionProvider(options.documentSelector, {\n            provideDefinition: this.createRequestHandler(protocol_1.DefinitionRequest.type)\n        });\n    }\n    createReferencesProvider(options) {\n        return this.languages.registerReferenceProvider(options.documentSelector, {\n            provideReferences: this.createRequestHandler(protocol_1.ReferencesRequest.type, () => [])\n        });\n    }\n    createDocumentHighlightProvider(options) {\n        return this.languages.registerDocumentHighlightProvider(options.documentSelector, {\n            provideDocumentHighlights: this.createRequestHandler(protocol_1.DocumentHighlightRequest.type, () => [])\n        });\n    }\n    createDocumentSymbolProvider(options) {\n        return this.languages.registerDocumentSymbolProvider(options.documentSelector, {\n            provideDocumentSymbols: this.createRequestHandler(protocol_1.DocumentSymbolRequest.type, () => [])\n        });\n    }\n    createWorkspaceSymbolProvider(_options) {\n        return this.languages.registerWorkspaceSymbolProvider({\n            provideWorkspaceSymbols: this.createRequestHandler(protocol_1.WorkspaceSymbolRequest.type, () => [])\n        });\n    }\n    createCodeActionsProvider(options) {\n        return this.languages.registerCodeActionsProvider(options.documentSelector, {\n            provideCodeActions: this.createRequestHandler(protocol_1.CodeActionRequest.type, () => [])\n        });\n    }\n    createCodeLensProvider(options) {\n        return this.languages.registerCodeLensProvider(options.documentSelector, {\n            provideCodeLenses: this.createRequestHandler(protocol_1.CodeLensRequest.type, () => []),\n            resolveCodeLens: options.resolveProvider ? this.createRequestHandler(protocol_1.CodeLensResolveRequest.type, (params) => params) : undefined\n        });\n    }\n    createDocumentFormattingProvider(options) {\n        return this.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\n            provideDocumentFormattingEdits: this.createRequestHandler(protocol_1.DocumentFormattingRequest.type, () => [])\n        });\n    }\n    createDocumentRangeFormattingProvider(options) {\n        return this.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\n            provideDocumentRangeFormattingEdits: this.createRequestHandler(protocol_1.DocumentRangeFormattingRequest.type, () => [])\n        });\n    }\n    createDocumentOnTypeFormattingProvider(options) {\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\n        return this.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\n            provideOnTypeFormattingEdits: this.createRequestHandler(protocol_1.DocumentOnTypeFormattingRequest.type, () => [])\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\n    }\n    createRenameProvider(options) {\n        return this.languages.registerRenameProvider(options.documentSelector, {\n            provideRenameEdits: this.createRequestHandler(protocol_1.RenameRequest.type, (_, error) => new Error(error.message))\n        });\n    }\n    createDocumentLinkProvider(options) {\n        return this.languages.registerDocumentLinkProvider(options.documentSelector, {\n            provideDocumentLinks: this.createRequestHandler(protocol_1.DocumentLinkRequest.type, (_, error) => new Error(error.message)),\n            resolveDocumentLink: options.resolveProvider ? this.createRequestHandler(protocol_1.DocumentLinkResolveRequest.type, (_, error) => new Error(error.message)) : undefined\n        });\n    }\n}\nexports.BaseLanguageClient = BaseLanguageClient;\nclass SettingMonitor {\n    constructor(_client, _setting) {\n        this._client = _client;\n        this._setting = _setting;\n        this._listeners = [];\n    }\n    start() {\n        if (this._client.workspace.configurations) {\n            this._client.workspace.configurations.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\n            this.onDidChangeConfiguration();\n        }\n        return vscode_jsonrpc_1.Disposable.create(() => {\n            if (this._client.needsStop()) {\n                this._client.stop();\n            }\n        });\n    }\n    onDidChangeConfiguration() {\n        const configurations = this._client.workspace.configurations;\n        let index = this._setting.indexOf('.');\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\n        let enabled = rest ? configurations.getConfiguration(primary).get(rest, false) : configurations.getConfiguration(primary);\n        if (enabled && this._client.needsStart()) {\n            this._client.start();\n        }\n        else if (!enabled && this._client.needsStop()) {\n            this._client.stop();\n        }\n    }\n}\nexports.SettingMonitor = SettingMonitor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vscode-base-languageclient/lib/base.js\n// module id = 227\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nrequire(\"reflect-metadata\");\nvar vscode_ws_jsonrpc_1 = require(\"vscode-ws-jsonrpc\");\nvar monaco_languageclient_1 = require(\"monaco-languageclient\");\nvar lib_1 = require(\"sprotty/lib\");\nvar url_parameters_1 = require(\"../url-parameters\");\nvar sprotty_config_1 = require(\"../sprotty-config\");\nvar language_diagram_server_1 = require(\"./language-diagram-server\");\nvar LZString = require(\"lz-string\");\nrequire('./elkt-language');\nvar WebSocket = require('reconnecting-websocket');\nvar urlParameters = url_parameters_1.getParameters();\nvar initialContent;\nif (urlParameters.compressedContent !== undefined) {\n    initialContent = LZString.decompressFromEncodedURIComponent(urlParameters.compressedContent);\n}\nelse if (urlParameters.initialContent !== undefined) {\n    initialContent = decodeURIComponent(urlParameters.initialContent);\n}\nelse {\n    initialContent = \"\";\n}\n// Create Sprotty viewer\nvar sprottyContainer = sprotty_config_1.default();\nsprottyContainer.bind(lib_1.TYPES.ModelSource).to(language_diagram_server_1.default).inSingletonScope();\nvar diagramServer = sprottyContainer.get(lib_1.TYPES.ModelSource);\n// Create Monaco editor\nvar modelUri = 'inmemory:/model.elkt';\nvar editor = monaco.editor.create(document.getElementById('monaco-editor'), {\n    model: monaco.editor.createModel(initialContent, 'elkt', monaco.Uri.parse(modelUri))\n});\neditor.updateOptions({\n    minimap: { enabled: false }\n});\nurl_parameters_1.setupModelLink(editor, function (event) {\n    return {\n        compressedContent: LZString.compressToEncodedURIComponent(editor.getValue())\n    };\n});\n// Create the web socket\n// const socketUrl = `${location.protocol === 'https:' ? 'wss' : 'ws'}://${location.host}/elkgraph`\nvar socketUrl = (location.protocol === 'https:' ? 'wss' : 'ws') + \"://localhost:9090/elkgraph\";\nvar socketOptions = {\n    maxReconnectionDelay: 10000,\n    minReconnectionDelay: 1000,\n    reconnectionDelayGrowFactor: 1.3,\n    connectionTimeout: 10000,\n    maxRetries: Infinity,\n    debug: false\n};\nvar webSocket = new WebSocket(socketUrl, undefined, socketOptions);\nvar services = monaco_languageclient_1.createMonacoServices(editor);\nvscode_ws_jsonrpc_1.listen({\n    webSocket: webSocket,\n    onConnection: function (connection) {\n        var languageClient = createLanguageClient(connection);\n        var disposable = languageClient.start();\n        connection.onClose(function () {\n            diagramServer.disconnect();\n            disposable.dispose();\n        });\n    }\n});\nfunction createLanguageClient(messageConnection) {\n    return new monaco_languageclient_1.BaseLanguageClient({\n        name: 'ELK Graph Language Client',\n        clientOptions: {\n            documentSelector: ['elkt'],\n            // Disable the default error handler\n            errorHandler: {\n                error: function () { return monaco_languageclient_1.ErrorAction.Continue; },\n                closed: function () { return monaco_languageclient_1.CloseAction.DoNotRestart; }\n            }\n        },\n        services: services,\n        // Create a language client connection from the JSON RPC connection on demand\n        connectionProvider: {\n            get: function (errorHandler, closeHandler) {\n                var connection = monaco_languageclient_1.createConnection(messageConnection, errorHandler, closeHandler);\n                diagramServer.listen(connection);\n                return Promise.resolve(connection);\n            }\n        }\n    });\n}\n//# sourceMappingURL=editor.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/elkgraph/editor.js","/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nmonaco.languages.register({\n    id: 'elkt',\n    extensions: ['.elkt']\n});\nmonaco.languages.setLanguageConfiguration('elkt', {\n    comments: {\n        lineComment: \"//\",\n        blockComment: ['/*', '*/']\n    },\n    brackets: [['{', '}'], ['[', ']']],\n    autoClosingPairs: [\n        {\n            open: '{',\n            close: '}'\n        },\n        {\n            open: '[',\n            close: ']'\n        }\n    ]\n});\nmonaco.languages.setMonarchTokensProvider('elkt', {\n    keywords: [\n        'graph', 'node', 'label', 'port', 'edge', 'layout', 'position', 'size', 'incoming', 'outgoing',\n        'start', 'end', 'bends', 'section', 'true', 'false'\n    ],\n    typeKeywords: [],\n    operators: [],\n    symbols: /[=><!~?:&|+\\-*\\/\\^%]+/,\n    escapes: /\\\\(?:[btnfru\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\n    tokenizer: {\n        root: [\n            // Identifiers and keywords\n            [/[a-z_$][\\w$]*/, {\n                    cases: {\n                        '@typeKeywords': 'keyword',\n                        '@keywords': 'keyword',\n                        '@default': 'identifier'\n                    }\n                }],\n            // Whitespace\n            { include: '@whitespace' },\n            // Delimiters and operators\n            [/[{}()\\[\\]]/, '@brackets'],\n            [/[<>](?!@symbols)/, '@brackets'],\n            [/@symbols/, {\n                    cases: {\n                        '@operators': 'operator',\n                        '@default': ''\n                    }\n                }]\n        ],\n        whitespace: [\n            [/[ \\t\\r\\n]+/, 'white'],\n            [/\\/\\*/, 'comment', '@comment'],\n            [/\\/\\/.*$/, 'comment'],\n        ],\n        comment: [\n            [/[^\\/*]+/, 'comment'],\n            [/\\/\\*/, 'comment.invalid'],\n            [\"\\\\*/\", 'comment', '@pop'],\n            [/[\\/*]/, 'comment']\n        ],\n        string: [\n            [/[^\\\\\"]+/, 'string'],\n            [/@escapes/, 'string.escape'],\n            [/\\\\./, 'string.escape.invalid'],\n            [/\"/, 'string', '@pop']\n        ],\n    },\n});\n//# sourceMappingURL=elkt-language.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/elkgraph/elkt-language.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lib_1 = require(\"sprotty/lib\");\nvar DIAGRAM_ENDPOINT_NOTIFICATION = 'diagram/accept';\nvar DID_CLOSE_NOTIFICATION = 'diagram/didClose';\nvar LanguageDiagramServer = /** @class */ (function (_super) {\n    __extends(LanguageDiagramServer, _super);\n    function LanguageDiagramServer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LanguageDiagramServer.prototype.listen = function (connection) {\n        var _this = this;\n        connection.onNotification(DIAGRAM_ENDPOINT_NOTIFICATION, function (message) {\n            _this.messageReceived(message);\n        });\n        this.connection = connection;\n    };\n    LanguageDiagramServer.prototype.disconnect = function () {\n        if (this.connection !== undefined) {\n            this.connection.sendNotification(DID_CLOSE_NOTIFICATION, this.clientId);\n            this.connection = undefined;\n        }\n    };\n    LanguageDiagramServer.prototype.sendMessage = function (message) {\n        if (this.connection !== undefined) {\n            this.connection.sendNotification(DIAGRAM_ENDPOINT_NOTIFICATION, message);\n        }\n    };\n    return LanguageDiagramServer;\n}(lib_1.DiagramServer));\nexports.default = LanguageDiagramServer;\n//# sourceMappingURL=language-diagram-server.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/elkgraph/language-diagram-server.js","/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nwindow.onload = function () {\n    // Load Monaco code\n    var w = window;\n    w.require(['vs/editor/editor.main'], function () {\n        // Load application code\n        require('./editor');\n    });\n};\n//# sourceMappingURL=main.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/elkgraph/main.js","module.exports = function (glob, opts) {\n  if (typeof glob !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  var str = String(glob);\n\n  // The regexp we are building, as a string.\n  var reStr = \"\";\n\n  // Whether we are matching so called \"extended\" globs (like bash) and should\n  // support single character matching, matching ranges of characters, group\n  // matching, etc.\n  var extended = opts ? !!opts.extended : false;\n\n  // When globstar is _false_ (default), '/foo/*' is translated a regexp like\n  // '^\\/foo\\/.*$' which will match any string beginning with '/foo/'\n  // When globstar is _true_, '/foo/*' is translated to regexp like\n  // '^\\/foo\\/[^/]*$' which will match any string beginning with '/foo/' BUT\n  // which does not have a '/' to the right of it.\n  // E.g. with '/foo/*' these will match: '/foo/bar', '/foo/bar.txt' but\n  // these will not '/foo/bar/baz', '/foo/bar/baz.txt'\n  // Lastely, when globstar is _true_, '/foo/**' is equivelant to '/foo/*' when\n  // globstar is _false_\n  var globstar = opts ? !!opts.globstar : false;\n\n  // If we are doing extended matching, this boolean is true when we are inside\n  // a group (eg {*.html,*.js}), and false otherwise.\n  var inGroup = false;\n\n  // RegExp flags (eg \"i\" ) to pass in to RegExp constructor.\n  var flags = opts && typeof( opts.flags ) === \"string\" ? opts.flags : \"\";\n\n  var c;\n  for (var i = 0, len = str.length; i < len; i++) {\n    c = str[i];\n\n    switch (c) {\n    case \"\\\\\":\n    case \"/\":\n    case \"$\":\n    case \"^\":\n    case \"+\":\n    case \".\":\n    case \"(\":\n    case \")\":\n    case \"=\":\n    case \"!\":\n    case \"|\":\n      reStr += \"\\\\\" + c;\n      break;\n\n    case \"?\":\n      if (extended) {\n        reStr += \".\";\n\t    break;\n      }\n\n    case \"[\":\n    case \"]\":\n      if (extended) {\n        reStr += c;\n\t    break;\n      }\n\n    case \"{\":\n      if (extended) {\n        inGroup = true;\n\t    reStr += \"(\";\n\t    break;\n      }\n\n    case \"}\":\n      if (extended) {\n        inGroup = false;\n\t    reStr += \")\";\n\t    break;\n      }\n\n    case \",\":\n      if (inGroup) {\n        reStr += \"|\";\n\t    break;\n      }\n      reStr += \"\\\\\" + c;\n      break;\n\n    case \"*\":\n      // Move over all consecutive \"*\"'s.\n      // Also store the previous and next characters\n      var prevChar = str[i - 1];\n      var starCount = 1;\n      while(str[i + 1] === \"*\") {\n        starCount++;\n        i++;\n      }\n      var nextChar = str[i + 1];\n\n      if (!globstar) {\n        // globstar is disabled, so treat any number of \"*\" as one\n        reStr += \".*\";\n      } else {\n        // globstar is enabled, so determine if this is a globstar segment\n        var isGlobstar = starCount > 1                      // multiple \"*\"'s\n          && (prevChar === \"/\" || prevChar === undefined)   // from the start of the segment\n          && (nextChar === \"/\" || nextChar === undefined)   // to the end of the segment\n\n        if (isGlobstar) {\n          // it's a globstar, so match zero or more path segments\n          reStr += \"(?:[^/]*(?:\\/|$))*\";\n          i++; // move over the \"/\"\n        } else {\n          // it's not a globstar, so only match one path segment\n          reStr += \"[^/]*\";\n        }\n      }\n      break;\n\n    default:\n      reStr += c;\n    }\n  }\n\n  // When regexp 'g' flag is specified don't\n  // constrain the regular expression with ^ & $\n  if (!flags || !~flags.indexOf('g')) {\n    reStr = \"^\" + reStr + \"$\";\n  }\n\n  return new RegExp(reStr, flags);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/glob-to-regexp/index.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar disposable_1 = require(\"./disposable\");\nvar MonacoDiagnosticCollection = /** @class */ (function () {\n    function MonacoDiagnosticCollection(name, p2m) {\n        this.name = name;\n        this.p2m = p2m;\n        this.diagnostics = new Map();\n        this.toDispose = new disposable_1.DisposableCollection();\n    }\n    MonacoDiagnosticCollection.prototype.dispose = function () {\n        this.toDispose.dispose();\n    };\n    MonacoDiagnosticCollection.prototype.get = function (uri) {\n        var diagnostics = this.diagnostics.get(uri);\n        return !!diagnostics ? diagnostics.diagnostics : [];\n    };\n    MonacoDiagnosticCollection.prototype.set = function (uri, diagnostics) {\n        var _this = this;\n        var existing = this.diagnostics.get(uri);\n        if (existing) {\n            existing.diagnostics = diagnostics;\n        }\n        else {\n            var modelDiagnostics_1 = new MonacoModelDiagnostics(uri, diagnostics, this.name, this.p2m);\n            this.diagnostics.set(uri, modelDiagnostics_1);\n            this.toDispose.push(disposable_1.Disposable.create(function () {\n                _this.diagnostics.delete(uri);\n                modelDiagnostics_1.dispose();\n            }));\n        }\n    };\n    return MonacoDiagnosticCollection;\n}());\nexports.MonacoDiagnosticCollection = MonacoDiagnosticCollection;\nvar MonacoModelDiagnostics = /** @class */ (function () {\n    function MonacoModelDiagnostics(uri, diagnostics, owner, p2m) {\n        var _this = this;\n        this.owner = owner;\n        this.p2m = p2m;\n        this.uri = monaco.Uri.parse(uri);\n        this.diagnostics = diagnostics;\n        monaco.editor.onDidCreateModel(function (model) { return _this.doUpdateModelMarkers(model); });\n    }\n    Object.defineProperty(MonacoModelDiagnostics.prototype, \"diagnostics\", {\n        get: function () {\n            return this._diagnostics;\n        },\n        set: function (diagnostics) {\n            var _this = this;\n            this._diagnostics = diagnostics;\n            this._markers = diagnostics.map(function (diagnostic) { return _this.p2m.asMarker(diagnostic); });\n            this.updateModelMarkers();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoModelDiagnostics.prototype, \"markers\", {\n        get: function () {\n            return this._markers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MonacoModelDiagnostics.prototype.dispose = function () {\n        this._markers = [];\n        this.updateModelMarkers();\n    };\n    MonacoModelDiagnostics.prototype.updateModelMarkers = function () {\n        var model = monaco.editor.getModel(this.uri);\n        this.doUpdateModelMarkers(model);\n    };\n    MonacoModelDiagnostics.prototype.doUpdateModelMarkers = function (model) {\n        if (model && this.uri.toString() === model.uri.toString()) {\n            monaco.editor.setModelMarkers(model, this.owner, this._markers);\n        }\n    };\n    return MonacoModelDiagnostics;\n}());\nexports.MonacoModelDiagnostics = MonacoModelDiagnostics;\n//# sourceMappingURL=diagnostic-collection.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/diagnostic-collection.js","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n__export(require(\"./disposable\"));\n__export(require(\"./commands\"));\n__export(require(\"./console-window\"));\n__export(require(\"./languages\"));\n__export(require(\"./workspace\"));\n__export(require(\"./converter\"));\n__export(require(\"./services\"));\n__export(require(\"vscode-base-languageclient/lib/base\"));\n__export(require(\"vscode-base-languageclient/lib/connection\"));\n//# sourceMappingURL=index.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/index.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar converter_1 = require(\"./converter\");\nvar commands_1 = require(\"./commands\");\nvar languages_1 = require(\"./languages\");\nvar workspace_1 = require(\"./workspace\");\nvar console_window_1 = require(\"./console-window\");\nfunction createMonacoServices(editor, options) {\n    if (options === void 0) { options = {}; }\n    var m2p = new converter_1.MonacoToProtocolConverter();\n    var p2m = new converter_1.ProtocolToMonacoConverter();\n    return {\n        commands: new commands_1.MonacoCommands(editor),\n        languages: new languages_1.MonacoLanguages(p2m, m2p),\n        workspace: new workspace_1.MonacoWorkspace(p2m, m2p, options.rootUri),\n        window: new console_window_1.ConsoleWindow()\n    };\n}\nexports.createMonacoServices = createMonacoServices;\n//# sourceMappingURL=services.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/monaco-languageclient/lib/services.js","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\n\n\n// WEBPACK FOOTER //\n// ./~/os-browserify/browser.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n\n\n// WEBPACK FOOTER //\n// ./~/path-browserify/index.js","module.exports = require('./lib/_stream_duplex.js');\n\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/duplex-browser.js","module.exports = require('./readable').PassThrough\n\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/passthrough.js","module.exports = require('./readable').Transform\n\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/transform.js","module.exports = require('./lib/_stream_writable.js');\n\n\n\n// WEBPACK FOOTER //\n// ./~/readable-stream/writable-browser.js","\"use strict\";\n;\n;\n;\nvar isWebSocket = function (constructor) {\n    return constructor && constructor.CLOSING === 2;\n};\nvar isGlobalWebSocket = function () {\n    return typeof WebSocket !== 'undefined' && isWebSocket(WebSocket);\n};\nvar getDefaultOptions = function () { return ({\n    constructor: isGlobalWebSocket() ? WebSocket : null,\n    maxReconnectionDelay: 10000,\n    minReconnectionDelay: 1500,\n    reconnectionDelayGrowFactor: 1.3,\n    connectionTimeout: 4000,\n    maxRetries: Infinity,\n    debug: false,\n}); };\nvar bypassProperty = function (src, dst, name) {\n    Object.defineProperty(dst, name, {\n        get: function () { return src[name]; },\n        set: function (value) { src[name] = value; },\n        enumerable: true,\n        configurable: true,\n    });\n};\nvar initReconnectionDelay = function (config) {\n    return (config.minReconnectionDelay + Math.random() * config.minReconnectionDelay);\n};\nvar updateReconnectionDelay = function (config, previousDelay) {\n    var newDelay = previousDelay * config.reconnectionDelayGrowFactor;\n    return (newDelay > config.maxReconnectionDelay)\n        ? config.maxReconnectionDelay\n        : newDelay;\n};\nvar LEVEL_0_EVENTS = ['onopen', 'onclose', 'onmessage', 'onerror'];\nvar reassignEventListeners = function (ws, oldWs, listeners) {\n    Object.keys(listeners).forEach(function (type) {\n        listeners[type].forEach(function (_a) {\n            var listener = _a[0], options = _a[1];\n            ws.addEventListener(type, listener, options);\n        });\n    });\n    if (oldWs) {\n        LEVEL_0_EVENTS.forEach(function (name) {\n            ws[name] = oldWs[name];\n        });\n    }\n};\nvar ReconnectingWebsocket = function (url, protocols, options) {\n    var _this = this;\n    if (options === void 0) { options = {}; }\n    var ws;\n    var connectingTimeout;\n    var reconnectDelay = 0;\n    var retriesCount = 0;\n    var shouldRetry = true;\n    var savedOnClose = null;\n    var listeners = {};\n    // require new to construct\n    if (!(this instanceof ReconnectingWebsocket)) {\n        throw new TypeError(\"Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator\");\n    }\n    // Set config. Not using `Object.assign` because of IE11\n    var config = getDefaultOptions();\n    Object.keys(config)\n        .filter(function (key) { return options.hasOwnProperty(key); })\n        .forEach(function (key) { return config[key] = options[key]; });\n    if (!isWebSocket(config.constructor)) {\n        throw new TypeError('Invalid WebSocket constructor. Set `options.constructor`');\n    }\n    var log = config.debug ? function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        return console.log.apply(console, ['RWS:'].concat(params));\n    } : function () { };\n    /**\n     * Not using dispatchEvent, otherwise we must use a DOM Event object\n     * Deferred because we want to handle the close event before this\n     */\n    var emitError = function (code, msg) { return setTimeout(function () {\n        var err = new Error(msg);\n        err.code = code;\n        if (Array.isArray(listeners.error)) {\n            listeners.error.forEach(function (_a) {\n                var fn = _a[0];\n                return fn(err);\n            });\n        }\n        if (ws.onerror) {\n            ws.onerror(err);\n        }\n    }, 0); };\n    var handleClose = function () {\n        log('handleClose', { shouldRetry: shouldRetry });\n        retriesCount++;\n        log('retries count:', retriesCount);\n        if (retriesCount > config.maxRetries) {\n            emitError('EHOSTDOWN', 'Too many failed connection attempts');\n            return;\n        }\n        if (!reconnectDelay) {\n            reconnectDelay = initReconnectionDelay(config);\n        }\n        else {\n            reconnectDelay = updateReconnectionDelay(config, reconnectDelay);\n        }\n        log('handleClose - reconnectDelay:', reconnectDelay);\n        if (shouldRetry) {\n            setTimeout(connect, reconnectDelay);\n        }\n    };\n    var connect = function () {\n        if (!shouldRetry) {\n            return;\n        }\n        log('connect');\n        var oldWs = ws;\n        var wsUrl = (typeof url === 'function') ? url() : url;\n        ws = new config.constructor(wsUrl, protocols);\n        connectingTimeout = setTimeout(function () {\n            log('timeout');\n            ws.close();\n            emitError('ETIMEDOUT', 'Connection timeout');\n        }, config.connectionTimeout);\n        log('bypass properties');\n        for (var key in ws) {\n            // @todo move to constant\n            if (['addEventListener', 'removeEventListener', 'close', 'send'].indexOf(key) < 0) {\n                bypassProperty(ws, _this, key);\n            }\n        }\n        ws.addEventListener('open', function () {\n            clearTimeout(connectingTimeout);\n            log('open');\n            reconnectDelay = initReconnectionDelay(config);\n            log('reconnectDelay:', reconnectDelay);\n            retriesCount = 0;\n        });\n        ws.addEventListener('close', handleClose);\n        reassignEventListeners(ws, oldWs, listeners);\n        // because when closing with fastClose=true, it is saved and set to null to avoid double calls\n        ws.onclose = ws.onclose || savedOnClose;\n        savedOnClose = null;\n    };\n    log('init');\n    connect();\n    this.close = function (code, reason, _a) {\n        if (code === void 0) { code = 1000; }\n        if (reason === void 0) { reason = ''; }\n        var _b = _a === void 0 ? {} : _a, _c = _b.keepClosed, keepClosed = _c === void 0 ? false : _c, _d = _b.fastClose, fastClose = _d === void 0 ? true : _d, _e = _b.delay, delay = _e === void 0 ? 0 : _e;\n        log('close - params:', { reason: reason, keepClosed: keepClosed, fastClose: fastClose, delay: delay, retriesCount: retriesCount, maxRetries: config.maxRetries });\n        shouldRetry = !keepClosed && retriesCount <= config.maxRetries;\n        if (delay) {\n            reconnectDelay = delay;\n        }\n        ws.close(code, reason);\n        if (fastClose) {\n            var fakeCloseEvent_1 = {\n                code: code,\n                reason: reason,\n                wasClean: true,\n            };\n            // execute close listeners soon with a fake closeEvent\n            // and remove them from the WS instance so they\n            // don't get fired on the real close.\n            handleClose();\n            ws.removeEventListener('close', handleClose);\n            // run and remove level2\n            if (Array.isArray(listeners.close)) {\n                listeners.close.forEach(function (_a) {\n                    var listener = _a[0], options = _a[1];\n                    listener(fakeCloseEvent_1);\n                    ws.removeEventListener('close', listener, options);\n                });\n            }\n            // run and remove level0\n            if (ws.onclose) {\n                savedOnClose = ws.onclose;\n                ws.onclose(fakeCloseEvent_1);\n                ws.onclose = null;\n            }\n        }\n    };\n    this.send = function (data) {\n        ws.send(data);\n    };\n    this.addEventListener = function (type, listener, options) {\n        if (Array.isArray(listeners[type])) {\n            if (!listeners[type].some(function (_a) {\n                var l = _a[0];\n                return l === listener;\n            })) {\n                listeners[type].push([listener, options]);\n            }\n        }\n        else {\n            listeners[type] = [[listener, options]];\n        }\n        ws.addEventListener(type, listener, options);\n    };\n    this.removeEventListener = function (type, listener, options) {\n        if (Array.isArray(listeners[type])) {\n            listeners[type] = listeners[type].filter(function (_a) {\n                var l = _a[0];\n                return l !== listener;\n            });\n        }\n        ws.removeEventListener(type, listener, options);\n    };\n};\nmodule.exports = ReconnectingWebsocket;\n\n\n\n// WEBPACK FOOTER //\n// ./~/reconnecting-websocket/dist/index.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/stream-browserify/index.js","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nvar Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nvar shortcutEvent = Object.freeze(function (callback, context) {\r\n    var handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose: function () { clearTimeout(handle); } };\r\n});\r\nvar MutableToken = /** @class */ (function () {\r\n    function MutableToken() {\r\n        this._isCancelled = false;\r\n    }\r\n    MutableToken.prototype.cancel = function () {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this._emitter = undefined;\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(MutableToken.prototype, \"isCancellationRequested\", {\r\n        get: function () {\r\n            return this._isCancelled;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MutableToken.prototype, \"onCancellationRequested\", {\r\n        get: function () {\r\n            if (this._isCancelled) {\r\n                return shortcutEvent;\r\n            }\r\n            if (!this._emitter) {\r\n                this._emitter = new events_1.Emitter();\r\n            }\r\n            return this._emitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return MutableToken;\r\n}());\r\nvar CancellationTokenSource = /** @class */ (function () {\r\n    function CancellationTokenSource() {\r\n    }\r\n    Object.defineProperty(CancellationTokenSource.prototype, \"token\", {\r\n        get: function () {\r\n            if (!this._token) {\r\n                // be lazy and create the token only when\r\n                // actually needed\r\n                this._token = new MutableToken();\r\n            }\r\n            return this._token;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CancellationTokenSource.prototype.cancel = function () {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    };\r\n    CancellationTokenSource.prototype.dispose = function () {\r\n        this.cancel();\r\n    };\r\n    return CancellationTokenSource;\r\n}());\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/cancellation.js","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nvar LinkedMap = /** @class */ (function () {\r\n    function LinkedMap() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    LinkedMap.prototype.clear = function () {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    };\r\n    LinkedMap.prototype.isEmpty = function () {\r\n        return !this._head && !this._tail;\r\n    };\r\n    Object.defineProperty(LinkedMap.prototype, \"size\", {\r\n        get: function () {\r\n            return this._size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LinkedMap.prototype.has = function (key) {\r\n        return this._map.has(key);\r\n    };\r\n    LinkedMap.prototype.get = function (key) {\r\n        var item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    };\r\n    LinkedMap.prototype.set = function (key, value, touch) {\r\n        if (touch === void 0) { touch = Touch.None; }\r\n        var item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key: key, value: value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    };\r\n    LinkedMap.prototype.delete = function (key) {\r\n        var item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    };\r\n    LinkedMap.prototype.shift = function () {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        var item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    };\r\n    LinkedMap.prototype.forEach = function (callbackfn, thisArg) {\r\n        var current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    };\r\n    LinkedMap.prototype.forEachReverse = function (callbackfn, thisArg) {\r\n        var current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    };\r\n    LinkedMap.prototype.values = function () {\r\n        var result = [];\r\n        var current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    };\r\n    LinkedMap.prototype.keys = function () {\r\n        var result = [];\r\n        var current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    };\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    LinkedMap.prototype.addItemFirst = function (item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    };\r\n    LinkedMap.prototype.addItemLast = function (item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    };\r\n    LinkedMap.prototype.removeItem = function (item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            var next = item.next;\r\n            var previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    };\r\n    LinkedMap.prototype.touch = function (item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            var next = item.next;\r\n            var previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            var next = item.next;\r\n            var previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    };\r\n    return LinkedMap;\r\n}());\r\nexports.LinkedMap = LinkedMap;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/linkedMap.js","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path_1 = require(\"path\");\r\nvar os_1 = require(\"os\");\r\nvar crypto_1 = require(\"crypto\");\r\nvar net_1 = require(\"net\");\r\nvar messageReader_1 = require(\"./messageReader\");\r\nvar messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    var randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return \"\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-\" + randomSuffix + \"-sock\";\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), \"vscode-\" + randomSuffix + \".sock\");\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding) {\r\n    if (encoding === void 0) { encoding = 'utf-8'; }\r\n    var connectResolve;\r\n    var connected = new Promise(function (resolve, _reject) {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise(function (resolve, reject) {\r\n        var server = net_1.createServer(function (socket) {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, function () {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: function () { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding) {\r\n    if (encoding === void 0) { encoding = 'utf-8'; }\r\n    var socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-jsonrpc/lib/pipeSupport.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar socket_1 = require(\"./socket\");\nvar logger_1 = require(\"./logger\");\nfunction listen(options) {\n    var webSocket = options.webSocket, onConnection = options.onConnection;\n    var logger = options.logger || new logger_1.ConsoleLogger();\n    webSocket.onopen = function () {\n        var socket = toSocket(webSocket);\n        var connection = socket_1.createWebSocketConnection(socket, logger);\n        onConnection(connection);\n    };\n}\nexports.listen = listen;\nfunction toSocket(webSocket) {\n    return {\n        send: function (content) { return webSocket.send(content); },\n        onMessage: function (cb) { return webSocket.onmessage = function (event) { return cb(event.data); }; },\n        onError: function (cb) { return webSocket.onerror = function (event) {\n            if (event instanceof ErrorEvent) {\n                cb(event.message);\n            }\n        }; },\n        onClose: function (cb) { return webSocket.onclose = function (event) { return cb(event.code, event.reason); }; },\n        dispose: function () { return webSocket.close(); }\n    };\n}\nexports.toSocket = toSocket;\n//# sourceMappingURL=connection.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/connection.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar events_1 = require(\"vscode-jsonrpc/lib/events\");\nexports.Disposable = events_1.Disposable;\nvar DisposableCollection = (function () {\n    function DisposableCollection() {\n        this.disposables = [];\n    }\n    DisposableCollection.prototype.dispose = function () {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop().dispose();\n        }\n    };\n    DisposableCollection.prototype.push = function (disposable) {\n        var disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose: function () {\n                var index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        };\n    };\n    return DisposableCollection;\n}());\nexports.DisposableCollection = DisposableCollection;\n//# sourceMappingURL=disposable.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/disposable.js","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n__export(require(\"vscode-jsonrpc\"));\n__export(require(\"vscode-jsonrpc/lib/messages\"));\n__export(require(\"./disposable\"));\n__export(require(\"./stream\"));\n__export(require(\"./socket\"));\n__export(require(\"./logger\"));\n__export(require(\"./connection\"));\n//# sourceMappingURL=index.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/index.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar reader_1 = require(\"./reader\");\nvar writer_1 = require(\"./writer\");\nfunction createWebSocketConnection(socket, logger) {\n    var messageReader = new reader_1.WebSocketMessageReader(socket);\n    var messageWriter = new writer_1.WebSocketMessageWriter(socket);\n    var connection = vscode_jsonrpc_1.createMessageConnection(messageReader, messageWriter, logger);\n    connection.onClose(function () { return connection.dispose(); });\n    return connection;\n}\nexports.createWebSocketConnection = createWebSocketConnection;\n//# sourceMappingURL=connection.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/socket/connection.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar messageReader_1 = require(\"vscode-jsonrpc/lib/messageReader\");\nvar stream_1 = require(\"./stream\");\nvar AbstractStreamMessageReader = (function (_super) {\n    __extends(AbstractStreamMessageReader, _super);\n    function AbstractStreamMessageReader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractStreamMessageReader.prototype.readMessage = function (message, callback) {\n        var _this = this;\n        var readable = new stream_1.ReadableStream(message);\n        var reader = new messageReader_1.StreamMessageReader(readable);\n        reader.onError(function (e) { return _this.fireError(e); });\n        reader.onClose(function () { return _this.fireClose(); });\n        reader.onPartialMessage(function (info) { return _this.firePartialMessage(info); });\n        reader.listen(callback);\n    };\n    return AbstractStreamMessageReader;\n}(messageReader_1.AbstractMessageReader));\nexports.AbstractStreamMessageReader = AbstractStreamMessageReader;\n//# sourceMappingURL=reader.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/stream/reader.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar messageWriter_1 = require(\"vscode-jsonrpc/lib/messageWriter\");\nvar stream_1 = require(\"./stream\");\nvar AbstractStreamMessageWriter = (function (_super) {\n    __extends(AbstractStreamMessageWriter, _super);\n    function AbstractStreamMessageWriter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractStreamMessageWriter.prototype.write = function (msg) {\n        var content = this.writeMessage(msg);\n        this.send(content);\n    };\n    AbstractStreamMessageWriter.prototype.writeMessage = function (msg) {\n        var _this = this;\n        var writable = new stream_1.WritableStream();\n        var writer = new messageWriter_1.StreamMessageWriter(writable);\n        writer.onError(function (e) { return _this.fireError(e); });\n        writer.onClose(function () { return _this.fireClose(); });\n        writer.write(msg);\n        writable.end();\n        return writable.data.toString();\n    };\n    return AbstractStreamMessageWriter;\n}(messageWriter_1.AbstractMessageWriter));\nexports.AbstractStreamMessageWriter = AbstractStreamMessageWriter;\n//# sourceMappingURL=writer.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/vscode-ws-jsonrpc/lib/stream/writer.js","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst protocol_1 = require(\"./protocol\");\nconst is = require(\"./utils/is\");\nfunction createConnection(connection, errorHandler, closeHandler) {\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\n    connection.onClose(closeHandler);\n    let result = {\n        listen: () => connection.listen(),\n        sendRequest: (type, ...params) => connection.sendRequest(is.string(type) ? type : type.method, ...params),\n        onRequest: (type, handler) => connection.onRequest(is.string(type) ? type : type.method, handler),\n        sendNotification: (type, params) => connection.sendNotification(is.string(type) ? type : type.method, params),\n        onNotification: (type, handler) => connection.onNotification(is.string(type) ? type : type.method, handler),\n        trace: (value, tracer, sendNotification = false) => connection.trace(value, tracer, sendNotification),\n        initialize: (params) => connection.sendRequest(protocol_1.InitializeRequest.type, params),\n        shutdown: () => connection.sendRequest(protocol_1.ShutdownRequest.type, undefined),\n        exit: () => connection.sendNotification(protocol_1.ExitNotification.type),\n        onLogMessage: (handler) => connection.onNotification(protocol_1.LogMessageNotification.type, handler),\n        onShowMessage: (handler) => connection.onNotification(protocol_1.ShowMessageNotification.type, handler),\n        onTelemetry: (handler) => connection.onNotification(protocol_1.TelemetryEventNotification.type, handler),\n        didChangeConfiguration: (params) => connection.sendNotification(protocol_1.DidChangeConfigurationNotification.type, params),\n        didChangeWatchedFiles: (params) => connection.sendNotification(protocol_1.DidChangeWatchedFilesNotification.type, params),\n        didOpenTextDocument: (params) => connection.sendNotification(protocol_1.DidOpenTextDocumentNotification.type, params),\n        didChangeTextDocument: (params) => connection.sendNotification(protocol_1.DidChangeTextDocumentNotification.type, params),\n        didCloseTextDocument: (params) => connection.sendNotification(protocol_1.DidCloseTextDocumentNotification.type, params),\n        didSaveTextDocument: (params) => connection.sendNotification(protocol_1.DidSaveTextDocumentNotification.type, params),\n        onDiagnostics: (handler) => connection.onNotification(protocol_1.PublishDiagnosticsNotification.type, handler),\n        dispose: () => connection.dispose()\n    };\n    return result;\n}\nexports.createConnection = createConnection;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vscode-base-languageclient/lib/connection.js\n// module id = 271\n// module chunks = 0","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Delayer {\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.timeout = undefined;\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        if (delay >= 0) {\n            this.cancelTimeout();\n        }\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve) => {\n                this.onSuccess = resolve;\n            }).then(() => {\n                this.completionPromise = undefined;\n                this.onSuccess = undefined;\n                var result = this.task();\n                this.task = undefined;\n                return result;\n            });\n        }\n        if (delay >= 0 || this.timeout === void 0) {\n            this.timeout = setTimeout(() => {\n                this.timeout = undefined;\n                this.onSuccess(undefined);\n            }, delay >= 0 ? delay : this.defaultDelay);\n        }\n        return this.completionPromise;\n    }\n    forceDelivery() {\n        if (!this.completionPromise) {\n            return undefined;\n        }\n        this.cancelTimeout();\n        let result = this.task();\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n        return result;\n    }\n    isTriggered() {\n        return this.timeout !== void 0;\n    }\n    cancel() {\n        this.cancelTimeout();\n        this.completionPromise = undefined;\n    }\n    cancelTimeout() {\n        if (this.timeout !== void 0) {\n            clearTimeout(this.timeout);\n            this.timeout = undefined;\n        }\n    }\n}\nexports.Delayer = Delayer;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vscode-base-languageclient/lib/utils/async.js\n// module id = 272\n// module chunks = 0","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vscode-base-languageclient/lib/utils/uuid.js\n// module id = 273\n// module chunks = 0"],"sourceRoot":""}