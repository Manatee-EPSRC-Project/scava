rule Workflow2AbstractGraph 
	transform w : Workflow {
	
	parameters : Map{"w" = w,"package" = w.getPackageName()}
	
	template : "crossflow2json.egl"
	
	target : "experiment/model.json"
}

operation Workflow getPackageName() {
	var lang = self.languages.select(l|l.isJava());
	var langExists = not lang.isEmpty;

	var package = self.name.ftlc;
	
	if(langExists) package = lang.first.package;
	
	return package;
}

operation Language isJava() : Boolean {
	return self.name.toLowerCase()=="java";
}